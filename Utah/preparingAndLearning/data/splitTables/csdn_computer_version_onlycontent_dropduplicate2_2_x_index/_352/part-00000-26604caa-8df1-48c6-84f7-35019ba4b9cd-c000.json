{"content2":"计算机视觉—Harris角点检测\nbrycezou@163.com\n1、全微分\n定义：如果函数\nz=f(x,y)\nz=f(x,y) 在定义域\nD\nD 的内点\n(x,y)\n(x,y) 处全增量\nΔz=f(x+Δx,y+Δy)−f(x,y)\n\\Delta z=f(x+\\Delta x,y+\\Delta y)-f(x,y) 可以表示成\nΔz=AΔx+BΔy+o(ρ),ρ=(Δx)2+(Δy)2‾‾‾‾‾‾‾‾‾‾‾‾‾‾√\n\\Delta z=A\\Delta x+B\\Delta y+o(\\rho),\\quad \\rho=\\sqrt{(\\Delta x)^2+(\\Delta y)^2}\n其中，\nA,B\nA,B 不依赖于\nΔx,Δy\n\\Delta x,\\Delta y ，仅与\nx,y\nx,y 有关，则称函数\nf(x,y)\nf(x,y) 在点\n(x,y)\n(x,y) 可微。\nAΔx+BΔy\nA\\Delta x+B\\Delta y 称为函数\nf(x,y)\nf(x,y) 在点\n(x,y)\n(x,y) 的全微分，记作\ndz=df=AΔx+BΔy\ndz=df=A\\Delta x+B\\Delta y\n若函数在\nD\nD 内各点都可微，则称此函数在\nD\nD 内可微。\n近似：当\nz=f(x,y)\nz=f(x,y) 在点\n(x,y)\n(x,y) 的两个偏导数\nfx(x,y)\nf_x(x,y) 和\nfy(x,y)\nf_y(x,y) 连续，且\n|Δx|,|Δy|\n|\\Delta x|,|\\Delta y| 都较小时，有近似等式\nΔz≈dz=fx(x,y)Δx+fy(x,y)Δy\n\\Delta z\\approx dz=f_x(x,y)\\Delta x+f_y(x,y)\\Delta y\n或者\nf(x+Δx,y+Δy)≈f(x,y)+fx(x,y)Δx+fy(x,y)Δy\nf(x+\\Delta x,y+\\Delta y)\\approx f(x,y)+f_x(x,y)\\Delta x+f_y(x,y)\\Delta y\n2、常用公式\n[Ax+By]2=[xy][A2ABABB2][xy]\n[Ax+By]^2=[\\begin{matrix}x & y\\end{matrix}]\\left[\\begin{matrix}A^2 & AB\\\\AB & B^2\\end{matrix}\\right]\\left[\\begin{matrix}x\\\\y\\end{matrix}\\right]\n3、角点检测\n寻找角点的基本思想：观察一个小窗口所包含的区域，在角点附近向任何方向移动窗口，灰度值都会有较大的变化。如左图，在平坦区域，在任何方向灰度值都没有变化；如中图，沿着边缘方向灰度值无变化；如右图，在多个方向上灰度值都有变化。\n\n在平移\n[u,v]\n[u,v] 下的灰度变化为：\nE(u,v)=∑x,yw(x,y)[I(x+u,y+v)−I(x,y)]2\nE(u,v)=\\sum_{x,y}w(x,y)[I(x+u,y+v)-I(x,y)]^2\n其中，\nw(x,y)\nw(x,y) 是一个以\n(x,y)\n(x,y) 为中心的窗函数，\nI(x,y)\nI(x,y) 是\n(x,y)\n(x,y) 处的像素值。为了寻找带角点的窗口，需要搜索像素灰度变化较大的窗口。于是, 我们期望最大化\nE(u,v)\nE(u,v) 。\n假设\nu\nu 和\nv\nv 很小，则有\nI(x+u,y+v)−I(x,y)≈Ixu+Iyv\nI(x+u,y+v)-I(x,y)\\approx I_xu+I_yv\n[I(x+u,y+v)−I(x,y)]2≈[Ixu+Iyv]2=[uv][I2xIxIyIxIyI2y][uv]\n[I(x+u,y+v)-I(x,y)]^2\\approx [I_xu+I_yv]^2=[\\begin{matrix}u & v\\end{matrix}]\\left[\\begin{matrix}I_x^2 & I_xI_y\\\\I_xI_y & I_y^2\\end{matrix}\\right]\\left[\\begin{matrix}u\\\\v \\end{matrix}\\right]\n因此，对于小平移\n[u,v]\n[u,v] 可作如下近似\nE(u,v)≈[uv]  M[uv]\nE(u,v)\\approx [\\begin{matrix}u & v\\end{matrix}]\\ \\ M\\left[\\begin{matrix}u\\\\v\\end{matrix}\\right]\n其中，\nM\nM 是一个\n2×2\n2\\times2 矩阵，\nM=∑x,yw(x,y)[I2xIxIyIxIyI2y]\nM=\\sum_{x,y}w(x,y)\\left[\\begin{matrix}I_x^2 & I_xI_y\\\\I_xI_y & I_y^2\\end{matrix}\\right]\n协方差矩阵可以表示多维随机变量之间的相关性。协方差矩阵的对角线元素表示的是各个维度的方差，而非对角线上的元素表示的是各个维度之间的相关性。可以把矩阵\nM\nM 看作一个二维随机分布的协方差矩阵，通过将其对角化，求矩阵的两个特征值，然后根据这两个特征值来判断是不是角点。\n设\nλ1,λ2\n\\lambda_1,\\lambda_2 为矩阵\nM\nM 的特征值，当\nλ1≫λ2\n\\lambda_1\\gg\\lambda_2 或\nλ1≪λ2\n\\lambda_1\\ll\\lambda_2 时，为边缘点；当\nλ1\n\\lambda_1 和\nλ2\n\\lambda_2 都很小且接近时，为平坦区域内的点；当\nλ1\n\\lambda_1 和\nλ2\n\\lambda_2 都很大且接近时，说明图像窗口在各个方向上移动都产生了明显灰度变化，为角点。\n\n由于特征值的计算量较大，因此，实际中采用角点响应函数来检测角点。角点响应函数定义为\nR=det(M)−k∗[trace(M)]2=λ1λ2−k∗(λ1+λ2)2\nR=det(M)-k*[trace(M)]^2=\\lambda_1\\lambda_2-k*(\\lambda_1+\\lambda_2)^2\nk\nk 的经验取值一般为\n0.04−0.06\n0.04-0.06 ，\nR\nR 依赖于\nM\nM 的特征值，\nR\nR 较大时，为角点；\nR\nR 值较大且为负时，为边缘；\n|R|\n|R| 较小时，为平坦区域。最终，\nHarris\nHarris 角点检测就是：寻找有大角点响应函数\nR\nR 的点（\nR>thres\nR>thres），且是\nR\nR 的局部极大值的点。"}
