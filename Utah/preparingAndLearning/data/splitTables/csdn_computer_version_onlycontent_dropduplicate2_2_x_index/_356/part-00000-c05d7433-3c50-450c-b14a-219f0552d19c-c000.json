{"content2":"计算机视觉—相机标定\nbrycezou@163.com\n0、预备知识\n下图基本展示了一些重要的概念：点\nO\nO 与\nXc,Yc,Zc\nX_c,Y_c,Z_c三个轴组成的坐标系为相机坐标系，其中，原点\nO\nO 为相机光心，\nZc\nZ_c为相机的光轴，光轴和成像平面\nxO1y\nxO1y 垂直，且光轴与成像平面的交点为图像的主点\nO1\nO1，\nOO1\nOO1 为相机的焦距\nf\nf，\nXcOYc\nX_cOY_c 平面和成像平面平行。世界坐标系是为了描述相机的位置而引入的，下图中，点\nOw\nO_w 与\nXw,Yw,Zw\nX_w,Y_w,Z_w 三个轴组成的坐标系即为世界坐标系。点\nO1\nO1 与\nx,y\nx,y 两个坐标轴组成的坐标系为图像物理坐标系，也即成像平面坐标系。\n\n此图来自网络，非作者原创，若侵犯到您的权益，请留言，以便标明出处，谢谢\n1、世界坐标系\n→\n\\rightarrow 相机坐标系\n设\n(Xw,Yw,Zw)\n(X_w,Y_w,Z_w) 表示世界坐标系中的点，\n(Xc,Yc,Zc)\n(X_c,Y_c,Z_c) 表示相机坐标系中的点，则世界坐标系到相机坐标系的变换，其实就是一个刚体变换，可以由旋转矩阵\nR\nR 和平移矩阵\nt\nt 来表示，\nR⎡⎣⎢⎢XwYwZw⎤⎦⎥⎥+t=⎡⎣⎢⎢XcYcZc⎤⎦⎥⎥\nR\\left[\\begin{matrix}X_w\\\\Y_w\\\\Z_w\\end{matrix}\\right]+t= \\left[\\begin{matrix}X_c\\\\Y_c\\\\Z_c\\end{matrix}\\right]\n其中，\nR\nR 为\n3x3\n3x3 的旋转矩阵，\nt\nt 为\n3x1\n3x1 的平移向量。化为齐次坐标形式\n[R3x301x3t3x111x1]⎡⎣⎢⎢⎢⎢XwYwZw1⎤⎦⎥⎥⎥⎥=⎡⎣⎢⎢⎢⎢XcYcZc1⎤⎦⎥⎥⎥⎥\n\\left[\\begin{matrix}R_{3x3} & t_{3x1}\\\\0_{1x3} & 1_{1x1}\\end{matrix}\\right] \\left[\\begin{matrix}X_w\\\\Y_w\\\\Z_w\\\\1\\end{matrix}\\right]= \\left[\\begin{matrix}X_c\\\\Y_c\\\\Z_c\\\\1\\end{matrix}\\right]\n2、相机坐标系\n→\n\\rightarrow\n理想\n图像物理坐标系（成像平面坐标系）\n设\n(x,y)\n(x,y) 是图像物理坐标系中的点，\n由于点\n(Xc,Yc,Zc)\n(X_c,Y_c,Z_c) 和相机坐标系的原点（相机光心）之间的连线，穿过图像物理坐标系所在的平面\n，因此，由相似三角形可得\nXcx=Zcf,Ycy=Zcf\n\\frac{X_c}{x}=\\frac{Z_c}{f},\\frac{Y_c}{y}=\\frac{Z_c}{f}\n进一步整理可得\n[f00f][XcYc]=Zc[xy]\n\\left[\\begin{matrix}f & 0\\\\0 & f\\end{matrix}\\right] \\left[\\begin{matrix}X_c\\\\Y_c\\end{matrix}\\right]= Z_c\\left[\\begin{matrix}x\\\\y\\end{matrix}\\right]\n化为齐次坐标形式\n⎡⎣⎢⎢f000f0001000⎤⎦⎥⎥⎡⎣⎢⎢⎢⎢XcYcZc1⎤⎦⎥⎥⎥⎥=Zc⎡⎣⎢⎢xy1⎤⎦⎥⎥\n\\left[\\begin{matrix}f & 0 & 0 & 0\\\\0 & f & 0 & 0\\\\0 & 0 & 1 & 0\\end{matrix}\\right] \\left[\\begin{matrix}X_c\\\\Y_c\\\\Z_c\\\\1\\end{matrix}\\right]=Z_c \\left[\\begin{matrix}x\\\\y\\\\1\\end{matrix}\\right]\n3、图像物理坐标系\n→\n\\rightarrow 图像像素坐标系\n以图像的左上角为原点建立图像像素坐标系\n(u,v)\n(u,v)，并且让\nu\nu 轴与\nx\nx 轴平行，\nv\nv 轴与\ny\ny 轴平行。设图像物理坐标系的原点\nO1(0,0)\nO1(0,0) 在\nuv\nuv 坐标系中对应的坐标为\n(u0,v0)\n(u_0,v_0)，\n单位像素在\nx\nx 轴和\ny\ny 轴方向的物理尺寸分别为\ndx\ndx 和\ndy\ndy\n，则有\nu−u0=xdx,v−v0=ydy\nu-u_0=\\frac{x}{dx},v-v_0=\\frac{y}{dy}\n进一步整理可得\n[uv]=⎡⎣⎢⎢⎢1dx001dy⎤⎦⎥⎥⎥[xy]+[u0v0]\n\\left[\\begin{matrix}u\\\\v\\end{matrix}\\right]= \\left[\\begin{matrix}\\frac{1}{dx} & 0\\\\0 & \\frac{1}{dy}\\end{matrix}\\right] \\left[\\begin{matrix}x\\\\y\\end{matrix}\\right]+ \\left[\\begin{matrix}u_0\\\\v_0\\end{matrix}\\right]\n化为齐次坐标形式\n⎡⎣⎢⎢⎢⎢⎢1dx0001dy0u0v01⎤⎦⎥⎥⎥⎥⎥⎡⎣⎢⎢xy1⎤⎦⎥⎥=⎡⎣⎢⎢uv1⎤⎦⎥⎥\n\\left[\\begin{matrix}\\frac{1}{dx} & 0 & u_0\\\\0 & \\frac{1}{dy} & v_0\\\\0 & 0 & 1\\end{matrix}\\right] \\left[\\begin{matrix}x\\\\y\\\\1\\end{matrix}\\right]= \\left[\\begin{matrix}u\\\\v\\\\1\\end{matrix}\\right]\n4、结论\n将相关矩阵相乘，便可以得到三维空间点坐标到图像像素坐标的映射\nZc⎡⎣⎢⎢uv1⎤⎦⎥⎥=⎡⎣⎢⎢⎢⎢⎢1dx0001dy0u0v01⎤⎦⎥⎥⎥⎥⎥⎡⎣⎢⎢f000f0001000⎤⎦⎥⎥[R3x301x3t3x111x1]⎡⎣⎢⎢⎢⎢XwYwZw1⎤⎦⎥⎥⎥⎥=⎡⎣⎢⎢α000β0u0v01000⎤⎦⎥⎥[R3x301x3t3x111x1]⎡⎣⎢⎢⎢⎢XwYwZw1⎤⎦⎥⎥⎥⎥=M1M2⎡⎣⎢⎢⎢⎢XwYwZw1⎤⎦⎥⎥⎥⎥\nZ_c\\left[\\begin{matrix}u\\\\v\\\\1\\end{matrix}\\right]= \\left[\\begin{matrix}\\frac{1}{dx} & 0 & u_0\\\\0 & \\frac{1}{dy} & v_0\\\\0 & 0 & 1\\end{matrix}\\right] \\left[\\begin{matrix}f & 0 & 0 & 0\\\\0 & f & 0 & 0\\\\0 & 0 & 1 & 0\\end{matrix}\\right] \\left[\\begin{matrix}R_{3x3} & t_{3x1}\\\\0_{1x3} & 1_{1x1}\\end{matrix}\\right] \\left[\\begin{matrix}X_w\\\\Y_w\\\\Z_w\\\\1\\end{matrix}\\right]\\\\= \\left[\\begin{matrix}\\alpha & 0 & u_0 & 0\\\\0 & \\beta & v_0 & 0\\\\0 & 0 & 1 & 0\\end{matrix}\\right] \\left[\\begin{matrix}R_{3x3} & t_{3x1}\\\\0_{1x3} & 1_{1x1}\\end{matrix}\\right] \\left[\\begin{matrix}X_w\\\\Y_w\\\\Z_w\\\\1\\end{matrix}\\right]= M_1M_2 \\left[\\begin{matrix}X_w\\\\Y_w\\\\Z_w\\\\1\\end{matrix}\\right]\n其中，\nM1\nM_1为相机的内参数，\nM2\nM_2为相机的外参数，包括旋转和平移矩阵。"}
