{"content2":"随着计算机视觉的发展，摄影测量和计算机视觉逐渐交叉融合，两个不同学科之间的差异逐渐变小。但是在此处，博主仍旧想记录一下两个学科在几何关系描述上的一些本质差异。\n一、坐标的几何表示\n首先，对于两个领域来说，最为明显的一个差异就是对坐标的表示方法。\n在摄影测量中，通常直接直接使用二维坐标或者三维坐标对坐标进行描述。而在计算机视觉中，通常情况下使用齐次坐标对坐标进行表述。\n原则上说，两种表述方法在本质上并没有什么区别。只不过在齐次坐标下能够将一系列变化（旋转、平移、仿射等等）统一成矩阵相乘的形式，处理起来更加方便。但是，一般来说，直接使用坐标进行描述，理解起来更加直观。\n下边给出一个示例，假设对二维点P 进行旋转R 和平移t 。\n对于摄影测量来说，此处可以简单的把公式写成：\nP′=(λRP+t)\nP\n′\n=\n(\nλ\nR\nP\n+\nt\n)\nP' = (\\lambda RP + t)\n而对于计算机视觉来说，上述公式可以更简单的写成：\n二、欧拉旋角和扭转系数与四元数\n第二个较为明显的差异是两者对旋转矩阵的理解方式。在摄影测量中，通常是按照一定顺序和方向在坐标轴的方向上进行旋转，进而得到旋转矩阵。但是在计算机视觉中，最为普遍常用的方法是扭转系数和四元数。\n不过需要注意的是，无论是使用那种表达方式，得到的旋转矩阵都应该是一样的。\n摄影测量的欧拉旋角\n首先介绍一下摄影测量中的欧拉旋角，常见的旋转体系有opk和pok。\n值得注意的是，在摄影测量中通常是通过旋转坐标轴来定义旋转角的，而在公式表达时是则是在旋转坐标的角度上来写的\n。\nopk是国际上较为通用的一种旋转体系，其中旋转顺序是x–>y–>z，旋转方向均以逆时针旋转为正。而pok是国内较为通用的一套旋转体系，其中旋转顺序是y–>x–>z，旋转方向除y轴外都是逆时针旋转为正。\n此处我们用opk写出一个示例，假设要从坐标系A旋转到坐标系B，则旋转矩阵可以写成：\nPA=RxRyRzPB\nP\nA\n=\nR\nx\nR\ny\nR\nz\nP\nB\n{P_A} = {R_x}{R_y}{R_z}{P_B}\n其中，\nPA\nP\nA\n{P_A}、\nPB\nP\nB\n{P_B} 分别是两个坐标系下的坐标，描述的是如何按照opk的顺序从A旋转到B。\n我们可以把上式展开，如下图所示的公式：\n此处，我们也给出如何从旋转矩阵恢复opk的公式，如下：\n计算机视觉中的旋角系统\n相比而言，计算机视觉中的旋角系统定义比较复杂，比较难理解。扭转系数可以理解成绕某一个三维向量旋转一个角度，来描述三维旋转。四元数是在扭转系数的基础上推导出的一种旋转表达方式。\n由于这两种旋转表达方式并不需要指定旋转轴等等，我们直接给出其和旋转矩阵之间的关系式：\n当然，如果想从旋转矩阵恢复四元数，上述公式已经可以完成。但是如果想从旋转矩阵恢复扭转系数，则还需要用到四元数和扭转系数之间的关系式：\n最后关于两种旋转表达的优缺点，我就不再累赘，可以参考huang9012的博客。但是此处我只说欧拉公式中两个我经常遇到的缺点：\n1.opk的旋转矩阵比较难以求导，求导公式较为复杂；\n2.opk的旋转矩阵在矩阵连乘时很容易失去正定性，计算误差导致的。\n三、共线方程与小孔成像\n最后说两个领域中，成像模型的一些差异问题。首先给出两个图，分别表示的是摄影测量和计算机视觉中关于成像模型的表述方式。\n摄影测量\n计算机视觉\n仔细观察两幅图，我们可以发现两个明显的区别：\n在摄影测量中成像平面在Z轴的负半轴，而在摄影测量中成像平面则在Z轴的正半轴。造成这个区别的原因是，摄影测量通常是航空拍摄，相机从天空俯视地面，即成像物体在相机下方；而摄影测量则主要是近景拍摄，成像物体在相机前方。因而根据人们常规对下方和前方的认识，导致了Z轴的朝向不同。\n在摄影测量中，Y轴朝向图片的上方；而在计算机视觉中，Y轴朝向图片的下方。因为摄影测量和计算机视觉都是使用右手坐标系，由于Z轴的改变，Y轴自然也就不一样。\n四、空三结果的互相转换\n由于现在摄影测量和计算机视觉的交叉发展，如何进行将两种空三结果进行相互转换就非常重要。其实也非常简单，推导如下（为推导方便，此处统一不适用齐次坐标系）：\n记某一照片在摄影测量下的成像关系如下：\n⎡⎣⎢xy−f⎤⎦⎥=λRp(⎡⎣⎢XYZ⎤⎦⎥−⎡⎣⎢XsYsZs⎤⎦⎥)\n[\nx\ny\n−\nf\n]\n=\nλ\nR\np\n(\n[\nX\nY\nZ\n]\n−\n[\nX\ns\nY\ns\nZ\ns\n]\n)\n\\begin{bmatrix} x\\\\ y\\\\ -f\\\\ \\end{bmatrix} = \\lambda R_p (\\begin{bmatrix} X\\\\ Y\\\\ Z\\\\ \\end{bmatrix} - \\begin{bmatrix} X_s\\\\ Y_s\\\\ Z_s\\\\ \\end{bmatrix} )\n由于摄影测量和计算机视觉的成像中心在同一个坐标，仅仅Y轴和Z轴方向相反，则其表达式如下：\n⎡⎣⎢x−yf⎤⎦⎥=λRc(⎡⎣⎢XYZ⎤⎦⎥−⎡⎣⎢XsYsZs⎤⎦⎥)\n[\nx\n−\ny\nf\n]\n=\nλ\nR\nc\n(\n[\nX\nY\nZ\n]\n−\n[\nX\ns\nY\ns\nZ\ns\n]\n)\n\\begin{bmatrix} x\\\\ -y\\\\ f\\\\ \\end{bmatrix} = \\lambda R_c (\\begin{bmatrix} X\\\\ Y\\\\ Z\\\\ \\end{bmatrix} - \\begin{bmatrix} X_s\\\\ Y_s\\\\ Z_s\\\\ \\end{bmatrix} )\n等同于\n⎡⎣⎢1000−1000−1⎤⎦⎥⎡⎣⎢x−yf⎤⎦⎥=λRc(⎡⎣⎢XYZ⎤⎦⎥−⎡⎣⎢XsYsZs⎤⎦⎥)\n[\n1\n0\n0\n0\n−\n1\n0\n0\n0\n−\n1\n]\n[\nx\n−\ny\nf\n]\n=\nλ\nR\nc\n(\n[\nX\nY\nZ\n]\n−\n[\nX\ns\nY\ns\nZ\ns\n]\n)\n\\begin{bmatrix} &1 &0 &0 \\\\ &0 &-1 &0 \\\\ &0 &0 &-1 \\\\ \\end{bmatrix} \\begin{bmatrix} x\\\\ -y\\\\ f\\\\ \\end{bmatrix} = \\lambda R_c (\\begin{bmatrix} X\\\\ Y\\\\ Z\\\\ \\end{bmatrix} - \\begin{bmatrix} X_s\\\\ Y_s\\\\ Z_s\\\\ \\end{bmatrix} )\n观察上式就可以发现，摄影测量和计算机视觉仅仅在旋转上有表达区别，在平移量上时相同的，因此只需要对旋转进行转换即可：\nRp=⎡⎣⎢1000−1000−1⎤⎦⎥Rc\nR\np\n=\n[\n1\n0\n0\n0\n−\n1\n0\n0\n0\n−\n1\n]\nR\nc\nR_p = \\begin{bmatrix} &1 &0 &0 \\\\ &0 &-1 &0 \\\\ &0 &0 &-1 \\\\ \\end{bmatrix} R_c"}
