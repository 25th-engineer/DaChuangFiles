第/m,4章/mq, ,基于/p,概率/n,论/v,的/u,分类/vn,方法/n,：/w,朴素/a,贝叶斯/nr,朴素/a,贝叶斯/nr, ,概述/v,贝叶斯/nr,分类/vn,是/v,一类/b,分类/vn,算法/n,的/u,总称/n,，/w,这/r,类/q,算法/n,均/d,以贝叶斯/nrf,定理/n,为/p,基础/n,，/w,故/c,统称/v,为/p,贝叶斯/nr,分类/vn,。/w,本章/r,首先/d,介绍/v,贝叶斯/nr,分类/vn,算法/n,的/u,基础/n,——/w,贝叶斯/nr,定理/n,。/w,最后/f,，/w,我们/r,通过/p,实例/n,来/v,讨论/v,贝叶斯/nr,分类/vn,的/u,中/f,最/d,简单/a,的/u,一种/mq,:/w, ,朴素/a,贝叶斯/nr,分类/vn,。/w,贝叶斯/nr,理论/n, ,&/w, ,条件/n,概率/n,贝叶斯/nr,理论/n,我们/r,现在/t,有/v,一个/m,数据集/nw,，/w,它/r,由/p,两类/mq,数据/n,组成/v,，/w,数据/n,分布/v,如下/v,图/n,所/u,示/vg,：/w,我们/r,现在/t,用/p, ,p/en,1/m,(/w,x/en,,/w,y/en,)/w, ,表示/v,数据点/nw, ,(/w,x/en,,/w,y/en,)/w, ,属于/v,类别/n, ,1/m,（/w,图/n,中/f,用/p,圆点/n,表示/v,的/u,类别/n,）/w,的/u,概率/n,，/w,用/p, ,p/en,2/m,(/w,x/en,,/w,y/en,)/w, ,表示/v,数据点/nw, ,(/w,x/en,,/w,y/en,)/w, ,属于/v,类别/n, ,2/m,（/w,图/n,中/f,三角形/n,表示/v,的/u,类别/n,）/w,的/u,概率/n,，/w,那么/r,对于/p,一个/m,新/a,数据点/nw, ,(/w,x/en,,/w,y/en,)/w,，/w,可以/v,用/p,下面/f,的/u,规则/n,来/v,判断/v,它/r,的/u,类别/n,：/w,如果/c, ,p/en,1/m,(/w,x/en,,/w,y/en,)/w, ,>, ,p/en,2/m,(/w,x/en,,/w,y/en,)/w, ,，/w,那么/r,类别/n,为/p,1/m,如果/c, ,p/en,2/m,(/w,x/en,,/w,y/en,)/w, ,>, ,p/en,1/m,(/w,x/en,,/w,y/en,)/w, ,，/w,那么/r,类别/n,为/p,2/m,也就是说/l,，/w,我们/r,会/v,选择/v,高/a,概率/n,对应/v,的/u,类别/n,。/w,这/r,就/d,是/v,贝叶斯/nr,决策/n,理论/n,的/u,核心/n,思想/n,，/w,即/v,选择/v,具有/v,最/d,高/a,概率/n,的/u,决策/n,。/w,条件/n,概率/n,如果/c,你/r,对/p, ,p/en,(/w,x/en,,/w,y/en,|/w,c/en,1/m,)/w, ,符号/n,很/d,熟悉/v,，/w,那么/r,可以/v,跳/v,过/u,本/r,小节/n,。/w,有/v,一个/m,装/v,了/u, ,7/m, ,块/q,石头/n,的/u,罐子/n,，/w,其中/r, ,3/m, ,块/q,是/v,白色/n,的/u,，/w,4/m, ,块/q,是/v,黑色/n,的/u,。/w,如果/c,从/p,罐子/n,中/f,随机/d,取出/v,一块/mq,石头/n,，/w,那么/r,是/v,白色/n,石头/n,的/u,可能性/n,是/v,多少/r,？/w,由于/c,取/v,石头/n,有/v, ,7/m, ,种/q,可能/v,，/w,其中/r, ,3/m, ,种/q,为/p,白色/n,，/w,所以/c,取出/v,白色/n,石头/n,的/u,概率/n,为/p, ,3/m,//w,7/m, ,。/w,那么/r,取/v,到/v,黑色/n,石头/n,的/u,概率/n,又/d,是/v,多少/r,呢/y,？/w,很/d,显然/ad,，/w,是/v, ,4/m,//w,7/m, ,。/w,我们/r,使用/v, ,p/en,(/w,white/en,)/w, ,来/v,表示/v,取/v,到/v,白色/n,石头/n,的/u,概率/n,，/w,其/r,概率/n,值/n,可以/v,通过/p,白色/n,石头/n,数目/n,除/p,以/p,总/b,的/u,石头/n,数目/n,来/v,得到/v,。/w,如果/c,这/r, ,7/m, ,块/q,石头/n,如/v,下/f,图/n,所/u,示/vg,，/w,放/v,在/p,两个桶/mq,中/f,，/w,那么/r,上述/b,概率/n,应该/v,如何/r,计算/v,？/w,计算/v, ,p/en,(/w,white/en,)/w, ,或者/c, ,p/en,(/w,black/en,)/w, ,，/w,如果/c,事先/d,我们/r,知道/v,石头/n,所/u,在/p,桶/q,的/u,信息/n,是/v,会/v,改变/v,结果/n,的/u,。/w,这/r,就/d,是/v,所谓/v,的/u,条件/n,概率/n,（/w,conditional/en, ,probablity/en,）/w,。/w,假定/v,计算/v,的/u,是从/v, ,b/en, ,桶/q,取/v,到/v,白色/n,石头/n,的/u,概率/n,，/w,这个/r,概率/n,可以/v,记/v,作/v, ,p/en,(/w,white/en,|/w,bucketb/en,)/w, ,，/w,我们/r,称之为/v,“/w,在/p,已知/nz,石头/n,出自/v, ,b/en, ,桶/q,的/u,条件/n,下/f,，/w,取出/v,白色/n,石头/n,的/u,概率/n,”/w,。/w,很/d,容易/a,得到/v,，/w,p/en,(/w,white/en,|/w,bucketa/en,)/w, ,值/n,为/p, ,2/m,//w,4/m, ,，/w,p/en,(/w,white/en,|/w,bucketb/en,)/w, ,的/u,值/n,为/p, ,1/m,//w,3/m, ,。/w,条件/n,概率/n,的/u,计算/v,公式/n,如下/v,：/w,p/en,(/w,white/en,|/w,bucketb/en,)/w, ,=/w, ,p/en,(/w,white/en, ,and/en, ,bucketb/en,)/w, ,//w, ,p/en,(/w,bucketb/en,)/w,首先/d,，/w,我们/r,用/p, ,b/en, ,桶/q,中/f,白色/n,石头/n,的/u,个数/n,除/p,以/p,两个桶/mq,中/f,总/b,的/u,石头/n,数/m,，/w,得到/v, ,p/en,(/w,white/en, ,and/en, ,bucketb/en,)/w, ,=/w, ,1/m,//w,7/m, ,./w,其次/c,，/w,由于/c, ,b/en, ,桶/q,中/f,有/v, ,3/m, ,块/q,石头/n,，/w,而/c,总/b,石头/n,数/m,为/p, ,7/m, ,，/w,于是/c, ,p/en,(/w,bucketb/en,)/w, ,就/d,等于/v, ,3/m,//w,7/m, ,。/w,于是/c,又/d, ,p/en,(/w,white/en,|/w,bucketb/en,)/w, ,=/w, ,p/en,(/w,white/en, ,and/en, ,bucketb/en,)/w, ,//w, ,p/en,(/w,bucketb/en,)/w, ,=/w, ,(/w,1/m,//w,7/m,)/w, ,//w, ,(/w,3/m,//w,7/m,)/w, ,=/w, ,1/m,//w,3/m, ,。/w,另外/c,一种/mq,有效/a,计算/v,条件/n,概率/n,的/u,方法/n,称为/v,贝叶斯/nr,准则/n,。/w,贝叶斯/nr,准则/n,告诉/v,我们/r,如何/r,交换/v,条件/n,概/d,率/v,中/f,的/u,条件/n,与/p,结果/n,，/w,即/v,如果/c,已知/nz, ,p/en,(/w,x/en,|/w,c/en,)/w,，/w,要求/v, ,p/en,(/w,c/en,|/w,x/en,)/w,，/w,那么/r,可以/v,使用/v,下面/f,的/u,计算/v,方法/n,：/w,使用/v,条件/n,概率/n,来/v,分类/vn,上面/f,我们/r,提到/v,贝叶斯/nr,决策/n,理论/n,要求/v,计算/v,两个/m,概率/n, ,p/en,1/m,(/w,x/en,,/w, ,y/en,)/w, ,和/c, ,p/en,2/m,(/w,x/en,,/w, ,y/en,)/w,:/w,如果/c, ,p/en,1/m,(/w,x/en,,/w, ,y/en,)/w, ,>, ,p/en,2/m,(/w,x/en,,/w, ,y/en,)/w,,/w, ,那么/r,属于/v,类别/n, ,1/m,;/w,如果/c, ,p/en,2/m,(/w,x/en,,/w, ,y/en,)/w, ,>, ,p/en,1/m,(/w,x/en,,/w, ,y/en,)/w,,/w, ,那么/r,属于/v,类别/n, ,2/m,./w,这/r,并/c,不/d,是/v,贝叶斯/nr,决策/n,理论/n,的/u,所有/b,内容/n,。/w,使用/v, ,p/en,1/m,(/w,)/w, ,和/c, ,p/en,2/m,(/w,)/w, ,只是/d,为了/p,尽可能/d,简化/v,描述/v,，/w,而/c,真正/d,需要/v,计算/v,和/c,比较/d,的/u,是/v, ,p/en,(/w,c/en,1/m,|/w,x/en,,/w, ,y/en,)/w, ,和/c, ,p/en,(/w,c/en,2/m,|/w,x/en,,/w, ,y/en,)/w, ,./w,这些/r,符号/n,所/u,代表/n,的/u,具体/a,意义/n,是/v,:/w, ,给/p,定/v,某个/r,由/p, ,x/en,、/w,y/en, ,表示/v,的/u,数据点/nw,，/w,那么/r,该/r,数据点/nw,来自/v,类别/n, ,c/en,1/m, ,的/u,概率/n,是/v,多少/r,？/w,数据点/nw,来自/v,类别/n, ,c/en,2/m, ,的/u,概率/n,又/d,是/v,多少/r,？/w,注意/v,这些/r,概率/n,与/p,概率/n, ,p/en,(/w,x/en,,/w, ,y/en,|/w,c/en,1/m,)/w, ,并/c,不/d,一样/u,，/w,不过/c,可以/v,使用/v,贝叶斯/nr,准则/n,来/v,交换/v,概/d,率/v,中/f,条件/n,与/p,结果/n,。/w,具体/a,地/u,，/w,应用/vn,贝叶斯/nr,准则/n,得到/v,:/w,使用/v,上面/f,这些/r,定义/n,，/w,可以/v,定义/n,贝叶斯/nr,分类/vn,准则/n,为/p,:/w,如果/c, ,p/en,(/w,c/en,1/m,|/w,x/en,,/w, ,y/en,)/w, ,>, ,p/en,(/w,c/en,2/m,|/w,x/en,,/w, ,y/en,)/w,,/w, ,那么/r,属于/v,类别/n, ,c/en,1/m,;/w,如果/c, ,p/en,(/w,c/en,2/m,|/w,x/en,,/w, ,y/en,)/w, ,>, ,p/en,(/w,c/en,1/m,|/w,x/en,,/w, ,y/en,)/w,,/w, ,那么/r,属于/v,类别/n, ,c/en,2/m,./w,在/p,文档/n,分类/vn,中/f,，/w,整个/b,文档/n,（/w,如/v,一封/mq,电子/n,邮件/n,）/w,是/v,实例/n,，/w,而/c,电子/n,邮件/n,中/f,的/u,某些/r,元素/n,则/d,构成/v,特征/n,。/w,我们/r,可以/v,观察/v,文档/n,中/f,出现/v,的/u,词/n,，/w,并/c,把/p,每个/r,词/n,作为/v,一个/m,特征/n,，/w,而/c,每个/r,词/n,的/u,出现/v,或者/c,不/d,出现/v,作为/v,该/r,特征/n,的/u,值/n,，/w,这样/r,得到/v,的/u,特征/n,数目/n,就/d,会/v,跟/p,词汇表/n,中/f,的/u,词/n,的/u,数目/n,一样/u,多/a,。/w,我们/r,假设/v,特征/n,之间/f, ,相互/d,独立/v, ,。/w,所谓/v, ,独立/v,(/w,independence/en,)/w, ,指/v,的/u,是/v,统计/v,意义/n,上/f,的/u,独立/v,，/w,即/v,一个/m,特征/n,或者/c,单词/n,出现/v,的/u,可能性/n,与/p,它/r,和/c,其他/r,单词/n,相邻/v,没有/v,关系/n,，/w,比如说/l,，/w,“/w,我们/r,”/w,中/f,的/u,“/w,我/r,”/w,和/c,“/w,们/k,”/w,出现/v,的/u,概率/n,与/p,这/r,两个字/mq,相邻/v,没有/v,任何/r,关系/n,。/w,这个/r,假设/v,正是/v,朴素/a,贝叶斯分类器/nw,中/f, ,朴素/a,(/w,naive/en,)/w, ,一/m,词/n,的/u,含义/n,。/w,朴素/a,贝叶斯分类器/nw,中/f,的/u,另/r,一个/m,假设/v,是/v,，/w,每个/r,特征/n,同等/b,重要/a,。/w,note/en,:/w, ,朴素/a,贝叶斯分类器/nw,通常/d,有/v,两种/mq,实现/v,方式/n,:/w, ,一种/mq,基于/p,伯努利/nr,模型/n,实现/v,，/w,一种/mq,基于/p,多/a,项式/nr,模型/n,实现/v,。/w,这里/r,采用/v,前/f,一种/mq,实现/v,方式/n,。/w,该/r,实现/v,方式/n,中/f,并/c,不/d,考虑/v,词/n,在/p,文档/n,中/f,出现/v,的/u,次数/n,，/w,只/d,考虑/v,出/v,不/d,出现/v,，/w,因此/c,在/p,这个/r,意义/n,上/f,相当/d,于/p,假设/v,词/n,是/v,等/u,权重/nz,的/u,。/w,朴素/a,贝叶斯/nr, ,场景/n,机器/n,学习/v,的/u,一个/m,重要/a,应用/vn,就/d,是/v,文档/n,的/u,自动/d,分类/vn,。/w,在/p,文档/n,分类/vn,中/f,，/w,整个/b,文档/n,（/w,如/v,一封/mq,电子/n,邮件/n,）/w,是/v,实例/n,，/w,而/c,电子/n,邮件/n,中/f,的/u,某些/r,元素/n,则/d,构成/v,特征/n,。/w,我们/r,可以/v,观察/v,文档/n,中/f,出现/v,的/u,词/n,，/w,并/c,把/p,每个/r,词/n,作为/v,一个/m,特征/n,，/w,而/c,每个/r,词/n,的/u,出现/v,或者/c,不/d,出现/v,作为/v,该/r,特征/n,的/u,值/n,，/w,这样/r,得到/v,的/u,特征/n,数目/n,就/d,会/v,跟/p,词汇表/n,中/f,的/u,词/n,的/u,数目/n,一样/u,多/a,。/w,朴素/a,贝叶斯/nr,是/v,上面/f,介绍/v,的/u,贝叶斯分类器/nw,的/u,一个/m,扩展/v,，/w,是/v,用于/v,文档/n,分类/vn,的/u,常用/a,算法/n,。/w,下面/f,我们/r,会/v,进行/v,一些/m,朴素/a,贝叶斯/nr,分类/vn,的/u,实践/v,项目/n,。/w,朴素/a,贝叶斯/nr, ,原理/n,朴素/a,贝叶斯/nr, ,工作/vn,原理/n,提取/v,所有/b,文档/n,中/f,的/u,词条/n,并/c,进行/v,去/v,重/a, ,获取/v,文档/n,的/u,所有/b,类别/n, ,计算/v,每个/r,类别/n,中/f,的/u,文档/n,数目/n, ,对/p,每篇/r,训练/vn,文档/n,:/w, ,对/p,每个/r,类别/n,:/w, ,如果/c,词条/n,出现/v,在/p,文档/n,中/f,-/w,-/w,>,增加/v,该/r,词条/n,的/u,计/v,数值/n,（/w,for/en,循环/vn,或者/c,矩阵/n,相加/v,）/w, ,增加/v,所有/b,词条/n,的/u,计/v,数值/n,（/w,此类/r,别/d,下/f,词条/n,总数/n,）/w, ,对/p,每个/r,类别/n,:/w, ,对/p,每个/r,词条/n,:/w, ,将/d,该/r,词条/n,的/u,数目/n,除/p,以/p,总/b,词条/n,数目/n,得到/v,的/u,条件/n,概率/n,（/w,p/en,(/w,词条/n,|/w,类别/n,)/w,）/w, ,返回/v,该/r,文档/n,属于/v,每个/r,类别/n,的/u,条件/n,概率/n,（/w,p/en,(/w,类别/n,|/w,文档/n,的/u,所有/b,词条/n,)/w,）/w,朴素/a,贝叶斯/nr, ,开发/v,流程/n,收集/v,数据/n,:/w, ,可以/v,使用/v,任何/r,方法/n,。/w, ,准备/v,数据/n,:/w, ,需要/v,数/m,值型/nw,或者/c,布尔型/nr,数据/n,。/w, ,分析/vn,数据/n,:/w, ,有/v,大量/m,特征/n,时/ng,，/w,绘制/v,特征/n,作用/n,不/d,大/a,，/w,此时/r,使用/v,直方图/n,效果/n,更/d,好/a,。/w, ,训练/vn,算法/n,:/w, ,计算/v,不同/a,的/u,独立/v,特征/n,的/u,条件/n,概率/n,。/w, ,测试/vn,算法/n,:/w, ,计算/v,错误率/n,。/w, ,使用/v,算法/n,:/w, ,一个/m,常见/a,的/u,朴素/a,贝叶斯应用/nw,是/v,文档/n,分类/vn,。/w,可以/v,在/p,任意/d,的/u,分类/vn,场景/n,中/f,使用/v,朴素/a,贝叶斯分类器/nw,，/w,不/d,一定/d,非/h,要是/c,文本/n,。/w,朴素/a,贝叶斯/nr, ,算法/n,特点/n,优点/n,:/w, ,在/p,数据/n,较/d,少/a,的/u,情况/n,下/f,仍然/d,有效/a,，/w,可以/v,处理/v,多/a,类别/n,问题/n,。/w, ,缺点/n,:/w, ,对于/p,输入/v,数据/n,的/u,准备/v,方式/n,较为/d,敏感/a,。/w, ,适用/v,数据/n,类型/n,:/w, ,标称/v,型/k,数据/n,。/w,朴素/a,贝叶斯/nr, ,项目/n,案例/n,项目/n,案例/n,1/m,:/w, ,屏蔽/v,社区/n,留言板/nw,的/u,侮辱性/n,言论/n,项目/n,概述/v,构建/v,一个/m,快速/d,过滤器/n,来/v,屏蔽/v,在线/vn,社区/n,留言板/nw,上/f,的/u,侮辱性/n,言论/n,。/w,如果/c,某/r,条/q,留言/v,使用/v,了/u,负面/b,或者/c,侮辱性/n,的/u,语言/n,，/w,那么/r,就/d,将/d,该/r,留言/v,标识/n,为/p,内容/n,不当/a,。/w,对/p,此/r,问题/n,建立/v,两个/m,类别/n,:/w, ,侮辱/v,类/q,和/c,非/h,侮辱/v,类/q,，/w,使用/v, ,1/m, ,和/c, ,0/m, ,分别/d,表示/v,。/w,开发/v,流程/n,收集/v,数据/n,:/w, ,可以/v,使用/v,任何/r,方法/n, ,准备/v,数据/n,:/w, ,从/p,文本/n,中/f,构建/v,词向量/nw, ,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n, ,训练/vn,算法/n,:/w, ,从/p,词向量/nw,计算/v,概率/n, ,测试/vn,算法/n,:/w, ,根据/p,现实/n,情况/n,修改/v,分类器/nw, ,使用/v,算法/n,:/w, ,对/p,社区/n,留言板/nw,言论/n,进行/v,分类/vn,收集/v,数据/n,:/w, ,可以/v,使用/v,任何/r,方法/n,本例/nw,是/v,我们/r,自己/r,构造/v,的/u,词表/n,:/w,def/en, ,loaddataset/en,(/w,)/w,:/w, ,"/w,"/w,"/w, ,创建/v,数据集/nw, ,:/w,return/en,:/w, ,单词/n,列表/v,postinglist/en,,/w, ,所/u,属/v,类别/n,classvec/en, ,"/w,"/w,"/w, ,postinglist/en, ,=/w, ,[/w,[/w,'/w,my/en,'/w,,/w, ,'/w,dog/en,'/w,,/w, ,'/w,has/en,'/w,,/w, ,'/w,flea/en,'/w,,/w, ,'/w,problems/en,'/w,,/w, ,'/w,help/en,'/w,,/w, ,'/w,please/en,'/w,]/w,,/w, ,#,[/w,0/m,,/w,0/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,./w,./w,./w,]/w, ,[/w,'/w,maybe/en,'/w,,/w, ,'/w,not/en,'/w,,/w, ,'/w,take/en,'/w,,/w, ,'/w,him/en,'/w,,/w, ,'/w,to/en,'/w,,/w, ,'/w,dog/en,'/w,,/w, ,'/w,park/en,'/w,,/w, ,'/w,stupid/en,'/w,]/w,,/w, ,[/w,'/w,my/en,'/w,,/w, ,'/w,dalmation/en,'/w,,/w, ,'/w,is/en,'/w,,/w, ,'/w,so/en,'/w,,/w, ,'/w,cute/en,'/w,,/w, ,'/w,i/en,'/w,,/w, ,'/w,love/en,'/w,,/w, ,'/w,him/en,'/w,]/w,,/w, ,[/w,'/w,stop/en,'/w,,/w, ,'/w,posting/en,'/w,,/w, ,'/w,stupid/en,'/w,,/w, ,'/w,worthless/en,'/w,,/w, ,'/w,garbage/en,'/w,]/w,,/w, ,[/w,'/w,mr/en,'/w,,/w, ,'/w,licks/en,'/w,,/w, ,'/w,ate/en,'/w,,/w, ,'/w,my/en,'/w,,/w, ,'/w,steak/en,'/w,,/w, ,'/w,how/en,'/w,,/w, ,'/w,to/en,'/w,,/w, ,'/w,stop/en,'/w,,/w, ,'/w,him/en,'/w,]/w,,/w, ,[/w,'/w,quit/en,'/w,,/w, ,'/w,buying/en,'/w,,/w, ,'/w,worthless/en,'/w,,/w, ,'/w,dog/en,'/w,,/w, ,'/w,food/en,'/w,,/w, ,'/w,stupid/en,'/w,]/w,]/w, ,classvec/en, ,=/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,1/m,]/w, ,#, ,1/m, ,is/en, ,abusive/en,,/w, ,0/m, ,not/en, ,return/en, ,postinglist/en,,/w, ,classvec/en,准备/v,数据/n,:/w, ,从/p,文本/n,中/f,构建/v,词向量/nw,def/en, ,createvocablist/en,(/w,dataset/en,)/w,:/w, ,"/w,"/w,"/w, ,获取/v,所有/b,单词/n,的/u,集合/v, ,:/w,param/en, ,dataset/en,:/w, ,数据集/nw, ,:/w,return/en,:/w, ,所有/b,单词/n,的/u,集合/v,(/w,即/v,不/d,含/v,重复/v,元素/n,的/u,单词/n,列表/v,)/w, ,"/w,"/w,"/w, ,vocabset/en, ,=/w, ,set/en,(/w,[/w,]/w,)/w, ,#, ,create/en, ,empty/en, ,set/en, ,for/en, ,document/en, ,in/en, ,dataset/en,:/w, ,#, ,操作符/n, ,|/w, ,用于/v,求/v,两个/m,集合/v,的/u,并/c,集/vg, ,vocabset/en, ,=/w, ,vocabset/en, ,|/w, ,set/en,(/w,document/en,)/w, ,#, ,union/en, ,of/en, ,the/en, ,two/en, ,sets/en, ,return/en, ,list/en,(/w,vocabset/en,)/w, ,def/en, ,setofwords/en,2/m,vec/en,(/w,vocablist/en,,/w, ,inputset/en,)/w,:/w, ,"/w,"/w,"/w, ,遍历/nw,查看/v,该/r,单词/n,是否/v,出现/v,，/w,出现/v,该/r,单词/n,则/d,将/d,该/r,单词/n,置/v,1/m, ,:/w,param/en, ,vocablist/en,:/w, ,所有/b,单词/n,集合/v,列表/v, ,:/w,param/en, ,inputset/en,:/w, ,输入/v,数据集/nw, ,:/w,return/en,:/w, ,匹配/vn,列表/v,[/w,0/m,,/w,1/m,,/w,0/m,,/w,1/m,./w,./w,./w,]/w,，/w,其中/r, ,1/m,与/p,0/m, ,表示/v,词汇表/n,中/f,的/u,单词/n,是否/v,出现/v,在/p,输入/v,的/u,数据/n,集中/v, ,"/w,"/w,"/w, ,#, ,创建/v,一个/m,和/c,词汇/n,表/n,等/u,长/a,的/u,向量/n,，/w,并/c,将/d,其/r,元素/n,都/d,设置/v,为/p,0/m, ,returnvec/en, ,=/w, ,[/w,0/m,]/w, ,*/w, ,len/en,(/w,vocablist/en,)/w,#, ,[/w,0/m,,/w,0/m,./w,./w,./w,./w,./w,./w,]/w, ,#, ,遍历/nw,文档/n,中/f,的/u,所有/b,单词/n,，/w,如果/c,出现/v,了/u,词汇表/n,中/f,的/u,单词/n,，/w,则/d,将/d,输出/v,的/u,文档/n,向/p,量/n,中/f,的/u,对应/v,值设/nw,为/p,1/m, ,for/en, ,word/en, ,in/en, ,inputset/en,:/w, ,if/en, ,word/en, ,in/en, ,vocablist/en,:/w, ,returnvec/en,[/w,vocablist/en,./w,index/en,(/w,word/en,)/w,]/w, ,=/w, ,1/m, ,else/en,:/w, ,print/en, ,"/w,the/en, ,word/en,:/w, ,%/w,s/en, ,is/en, ,not/en, ,in/en, ,my/en, ,vocabulary/en,!/w,"/w, ,%/w, ,word/en, ,return/en, ,returnvec/en,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n,检查/vn,函数/n,执行/v,情况/n,，/w,检查/vn,词表/n,，/w,不/d,出现/v,重复/v,单词/n,，/w,需要/v,的话/u,，/w,可以/v,对/p,其/r,进行/v,排序/vn,。/w,>,>,>, ,listoposts/en,,/w, ,listclasses/en, ,=/w, ,bayes/en,./w,loaddataset/en,(/w,)/w, ,>,>,>, ,myvocablist/en, ,=/w, ,bayes/en,./w,createvocablist/en,(/w,listoposts/en,)/w, ,>,>,>, ,myvocablist/en, ,[/w,'/w,cute/en,'/w,,/w, ,'/w,love/en,'/w,,/w, ,'/w,help/en,'/w,,/w, ,'/w,garbage/en,'/w,,/w, ,'/w,quit/en,'/w,,/w, ,'/w,i/en,'/w,,/w, ,'/w,problems/en,'/w,,/w, ,'/w,is/en,'/w,,/w, ,'/w,park/en,'/w,,/w, ,'/w,stop/en,'/w,,/w, ,'/w,flea/en,'/w,,/w, ,'/w,dalmation/en,'/w,,/w, ,'/w,licks/en,'/w,,/w, ,'/w,food/en,'/w,,/w, ,'/w,not/en,'/w,,/w, ,'/w,him/en,'/w,,/w, ,'/w,buying/en,'/w,,/w, ,'/w,posting/en,'/w,,/w, ,'/w,has/en,'/w,,/w, ,'/w,worthless/en,'/w,,/w, ,'/w,ate/en,'/w,,/w, ,'/w,to/en,'/w,,/w, ,'/w,maybe/en,'/w,,/w, ,'/w,please/en,'/w,,/w, ,'/w,dog/en,'/w,,/w, ,'/w,how/en,'/w,,/w, ,'/w,stupid/en,'/w,,/w, ,'/w,so/en,'/w,,/w, ,'/w,take/en,'/w,,/w, ,'/w,mr/en,'/w,,/w, ,'/w,steak/en,'/w,,/w, ,'/w,my/en,'/w,]/w,检查/vn,函数/n,有效性/n,。/w,例如/v,：/w,myvocablist/en, ,中/f,索引/n,为/p, ,2/m, ,的/u,元素/n,是/v,什么/r,单词/n,？/w,应该/v,是/v,是/v, ,help/en, ,。/w,该/r,单词/n,在/p,第一/m,篇/q,文档/n,中/f,出现/v,了/u,，/w,现在/t,检查/vn,一下/m,看看/v,它/r,是否/v,出现/v,在/p,第四/nw,篇/q,文档/n,中/f,。/w,>,>,>, ,bayes/en,./w,setofwords/en,2/m,vec/en,(/w,myvocablist/en,,/w, ,listoposts/en,[/w,0/m,]/w,)/w, ,[/w,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,]/w, ,>,>,>, ,bayes/en,./w,setofwords/en,2/m,vec/en,(/w,myvocablist/en,,/w, ,listoposts/en,[/w,3/m,]/w,)/w, ,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,训练/vn,算法/n,:/w, ,从/p,词向量/nw,计算/v,概率/n,现在/t,已经/d,知道/v,了/u,一个/m,词/n,是否/v,出现/v,在/p,一篇/mq,文档/n,中/f,，/w,也/d,知道/v,该/r,文档/n,所/u,属/v,的/u,类别/n,。/w,接下来/l,我们/r,重写/v,贝叶斯/nr,准则/n,，/w,将/d,之前/f,的/u, ,x/en,,/w, ,y/en, ,替换/v,为/p, ,w/en,./w, ,粗体/nw,的/u, ,w/en, ,表示/v,这/r,是/v,一个/m,向量/n,，/w,即/v,它/r,由/p,多/a,个/q,值/n,组成/v,。/w,在/p,这个/r,例子/n,中/f,，/w,数值/n,个数/n,与/p,词汇表/n,中/f,的/u,词/n,个数/n,相同/a,。/w,我们/r,使用/v,上述/b,公式/n,，/w,对/p,每个/r,类/q,计算/v,该值/nw,，/w,然后/c,比较/d,这/r,两个/m,概率/n,值/n,的/u,大小/n,。/w,首先/d,可以/v,通过/p,类别/n, ,i/en, ,(/w,侮辱性/n,留言/v,或者/c,非侮辱性/nw,留言/v,)/w,中/f,的/u,文档/n,数/m,除/p,以/p,总/b,的/u,文档/n,数/m,来/v,计算/v,概率/n, ,p/en,(/w,ci/en,)/w, ,。/w,接下来/l,计算/v, ,p/en,(/w,w/en, ,|/w, ,ci/en,)/w, ,，/w,这里/r,就要/d,用/p,到/v,朴素/a,贝叶斯/nr,假设/v,。/w,如果/c,将/d, ,w/en, ,展开/v,为/p,一个个/nw,独立/v,特征/n,，/w,那么/r,就/d,可以/v,将/d,上述/b,概率/n,写作/v, ,p/en,(/w,w/en,0/m,,/w, ,w/en,1/m,,/w, ,w/en,2/m,./w,./w,./w,wn/en, ,|/w, ,ci/en,)/w, ,。/w,这里/r,假设/v,所有/b,词/n,都/d,互相/d,独立/v,，/w,该/r,假设/v,也/d,称作/v,条件/n,独立性/n,假设/v,（/w,例如/v, ,a/en, ,和/c, ,b/en, ,两个人/mq,抛/v,骰子/n,，/w,概率/n,是/v,互不/d,影响/vn,的/u,，/w,也/d,就/d,是/v,相互/d,独立/v,的/u,，/w,a/en, ,抛/v, ,2点/mq,的/u,同时/c, ,b/en, ,抛/v, ,3/m, ,点/q,的/u,概率/n,就/d,是/v, ,1/m,//w,6/m, ,*/w, ,1/m,//w,6/m,）/w,，/w,它/r,意味/n,着/u,可以/v,使用/v, ,p/en,(/w,w/en,0/m, ,|/w, ,ci/en,)/w,p/en,(/w,w/en,1/m, ,|/w, ,ci/en,)/w,p/en,(/w,w/en,2/m, ,|/w, ,ci/en,)/w,./w,./w,./w,p/en,(/w,wn/en, ,|/w, ,ci/en,)/w, ,来/v,计算/v,上述/b,概率/n,，/w,这样/r,就/d,极大/a,地/u,简化/v,了/u,计算/v,的/u,过程/n,。/w,朴素/a,贝叶斯分类器/nw,训练/vn,函数/n,def/en, ,_,trainnb/en,0/m,(/w,trainmatrix/en,,/w, ,traincategory/en,)/w,:/w, ,"/w,"/w,"/w, ,训练/vn,数据/n,原版/n, ,:/w,param/en, ,trainmatrix/en,:/w, ,文件/n,单词/n,矩阵/n, ,[/w,[/w,1/m,,/w,0/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,./w,]/w,,/w,[/w,]/w,,/w,[/w,]/w,./w,./w,./w,]/w, ,:/w,param/en, ,traincategory/en,:/w, ,文件/n,对应/v,的/u,类别/n,[/w,0/m,,/w,1/m,,/w,1/m,,/w,0/m,./w,./w,./w,./w,]/w,，/w,列/v,表/n,长度/n,等于/v,单词/n,矩阵/n,数/m,，/w,其中/r,的/u,1/m,代表/n,对应/v,的/u,文件/n,是/v,侮辱性/n,文件/n,，/w,0/m,代表/n,不/d,是/v,侮辱性/n,矩阵/n, ,:/w,return/en,:/w, ,"/w,"/w,"/w, ,#, ,文件/n,数/m, ,numtraindocs/en, ,=/w, ,len/en,(/w,trainmatrix/en,)/w, ,#, ,单词/n,数/m, ,numwords/en, ,=/w, ,len/en,(/w,trainmatrix/en,[/w,0/m,]/w,)/w, ,#, ,侮辱性/n,文件/n,的/u,出现/v,概率/n,，/w,即/v,traincategory/en,中/f,所有/b,的/u,1/m,的/u,个数/n,，/w, ,#, ,代表/n,的/u,就/d,是/v,多少/r,个/q,侮辱性/n,文件/n,，/w,与/p,文件/n,的/u,总数/n,相除/v,就/d,得到/v,了/u,侮辱性/n,文件/n,的/u,出现/v,概率/n, ,pabusive/en, ,=/w, ,sum/en,(/w,traincategory/en,)/w, ,//w, ,float/en,(/w,numtraindocs/en,)/w, ,#, ,构造/v,单词/n,出现/v,次数/n,列/v,表/n, ,p/en,0/m,num/en, ,=/w, ,zeros/en,(/w,numwords/en,)/w, ,#, ,[/w,0/m,,/w,0/m,,/w,0/m,,/w,./w,./w,./w,./w,./w,]/w, ,p/en,1/m,num/en, ,=/w, ,zeros/en,(/w,numwords/en,)/w, ,#, ,[/w,0/m,,/w,0/m,,/w,0/m,,/w,./w,./w,./w,./w,./w,]/w, ,#, ,整个/b,数据集/nw,单词/n,出现/v,总数/n, ,p/en,0/m,denom/en, ,=/w, ,0.0/m, ,p/en,1/m,denom/en, ,=/w, ,0.0/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtraindocs/en,)/w,:/w, ,#, ,是否/v,是/v,侮辱性/n,文件/n, ,if/en, ,traincategory/en,[/w,i/en,]/w, ,=/w,=/w, ,1/m,:/w, ,#, ,如果/c,是/v,侮辱性/n,文件/n,，/w,对/p,侮辱性/n,文件/n,的/u,向量/n,进行/v,加/v,和/c, ,p/en,1/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,#,[/w,0/m,,/w,1/m,,/w,1/m,,/w,./w,./w,./w,./w,]/w, ,+/w, ,[/w,0/m,,/w,1/m,,/w,1/m,,/w,./w,./w,./w,./w,]/w,-/w,>,[/w,0/m,,/w,2/m,,/w,2/m,,/w,./w,./w,./w,]/w, ,#, ,对/p,向/p,量/n,中/f,的/u,所有/b,元素/n,进行/v,求和/vn,，/w,也/d,就/d,是/v,计算/v,所有/b,侮辱性/n,文件/n,中/f,出现/v,的/u,单词/n,总数/n, ,p/en,1/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,else/en,:/w, ,p/en,0/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,p/en,0/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,#, ,类别/n,1/m,，/w,即/v,侮辱性/n,文档/n,的/u,[/w,p/en,(/w,f/en,1/m,|/w,c/en,1/m,)/w,,/w,p/en,(/w,f/en,2/m,|/w,c/en,1/m,)/w,,/w,p/en,(/w,f/en,3/m,|/w,c/en,1/m,)/w,,/w,p/en,(/w,f/en,4/m,|/w,c/en,1/m,)/w,,/w,p/en,(/w,f/en,5/m,|/w,c/en,1/m,)/w,./w,./w,./w,./w,]/w,列表/v, ,#, ,即/v, ,在/p,1/m,类别/n,下/f,，/w,每个/r,单词/n,出现/v,的/u,概率/n, ,p/en,1/m,vect/en, ,=/w, ,p/en,1/m,num/en, ,//w, ,p/en,1/m,denom/en,#, ,[/w,1/m,,/w,2/m,,/w,3/m,,/w,5/m,]/w,//w,90/m,-/w,>,[/w,1/m,//w,90/m,,/w,./w,./w,./w,]/w, ,#, ,类别/n,0/m,，/w,即/v,正常/a,文档/n,的/u,[/w,p/en,(/w,f/en,1/m,|/w,c/en,0/m,)/w,,/w,p/en,(/w,f/en,2/m,|/w,c/en,0/m,)/w,,/w,p/en,(/w,f/en,3/m,|/w,c/en,0/m,)/w,,/w,p/en,(/w,f/en,4/m,|/w,c/en,0/m,)/w,,/w,p/en,(/w,f/en,5/m,|/w,c/en,0/m,)/w,./w,./w,./w,./w,]/w,列表/v, ,#, ,即/v, ,在/p,0/m,类别/n,下/f,，/w,每个/r,单词/n,出现/v,的/u,概率/n, ,p/en,0/m,vect/en, ,=/w, ,p/en,0/m,num/en, ,//w, ,p/en,0/m,denom/en, ,return/en, ,p/en,0/m,vect/en,,/w, ,p/en,1/m,vect/en,,/w, ,pabusive/en,测试/vn,算法/n,:/w, ,根据/p,现实/n,情况/n,修改/v,分类器/nw,在/p,利用/v,贝叶斯分类器/nw,对/p,文档/n,进行/v,分类/vn,时/ng,，/w,要/v,计算/v,多/a,个/q,概率/n,的/u,乘积/n,以/p,获得/v,文档/n,属于/v,某个/r,类别/n,的/u,概率/n,，/w,即/v,计算/v, ,p/en,(/w,w/en,0/m,|/w,1/m,)/w, ,*/w, ,p/en,(/w,w/en,1/m,|/w,1/m,)/w, ,*/w, ,p/en,(/w,w/en,2/m,|/w,1/m,)/w,。/w,如果/c,其中/r,一个/m,概率/n,值/n,为/p, ,0/m,，/w,那么/r,最后/f,的/u,乘积/n,也/d,为/p, ,0/m,。/w,为/p,降低/v,这种/r,影响/vn,，/w,可以/v,将/d,所有/b,词/n,的/u,出现/v,数/m,初始/b,化为/v, ,1/m,，/w,并/c,将/d,分/q,母/b,初/f,始化/nw,为/p, ,2/m, ,（/w,取/v,1/m, ,或/c, ,2/m, ,的/u,目的/n,主要/b,是/v,为了/p,保证/v,分子/n,和/c,分母/n,不/d,为/p,0/m,，/w,大家/r,可以/v,根据/p,业务/n,需求/n,进行/v,更改/v,）/w,。/w,另/r,一个/m,遇到/v,的/u,问题/n,是/v,下/f,溢/v,出/v,，/w,这/r,是/v,由于/c,太/d,多/a,很/d,小/a,的/u,数/m,相/d,乘/v,造成/v,的/u,。/w,当/p,计算/v,乘积/n, ,p/en,(/w,w/en,0/m,|/w,ci/en,)/w, ,*/w, ,p/en,(/w,w/en,1/m,|/w,ci/en,)/w, ,*/w, ,p/en,(/w,w/en,2/m,|/w,ci/en,)/w,./w,./w,./w, ,p/en,(/w,wn/en,|/w,ci/en,)/w, ,时/ng,，/w,由于/c,大部分/m,因子/n,都/d,非常/d,小/a,，/w,所以/c,程序/n,会/v,下/f,溢/v,出/v,或者/c,得到/v,不/d,正确/a,的/u,答案/n,。/w,（/w,用/p, ,python/en, ,尝试/vn,相乘/v,许多/m,很/d,小/a,的/u,数/m,，/w,最后/f,四舍/mq,五/m,入/v,后/f,会/v,得到/v, ,0/m,）/w,。/w,一种/mq,解决/v,办法/n,是/v,对/p,乘/v,积取/nw,自然/d,对数/n,。/w,在/p,代数/n,中/f,有/v, ,ln/en,(/w,a/en, ,*/w, ,b/en,)/w, ,=/w, ,ln/en,(/w,a/en,)/w, ,+/w, ,ln/en,(/w,b/en,)/w,,/w, ,于是/c,通过/p,求/v,对数/n,可以/v,避免/v,下/f,溢/v,出/v,或者/c,浮点数/nz,舍/v,入/v,导致/v,的/u,错误/n,。/w,同时/c,，/w,采用/v,自然/d,对数/n,进行/v,处理/v,不/d,会/v,有/v,任何/r,损失/n,。/w,下/f,图/n,给/p,出/v,了/u,函数/n, ,f/en,(/w,x/en,)/w, ,与/p, ,ln/en,(/w,f/en,(/w,x/en,)/w,)/w, ,的/u,曲线/n,。/w,可以/v,看出/v,，/w,它们/r,在/p,相同/a,区域/n,内/f,同时/c,增加/v,或者/c,减少/v,，/w,并且/c,在/p,相同点/n,上/f,取/v,到/v,极值/nz,。/w,它们/r,的/u,取值/v,虽然/c,不同/a,，/w,但/c,不/d,影响/vn,最终/d,结果/n,。/w,def/en, ,trainnb/en,0/m,(/w,trainmatrix/en,,/w, ,traincategory/en,)/w,:/w, ,"/w,"/w,"/w, ,训练/vn,数据/n,优化/v,版本/n, ,:/w,param/en, ,trainmatrix/en,:/w, ,文件/n,单词/n,矩阵/n, ,:/w,param/en, ,traincategory/en,:/w, ,文件/n,对应/v,的/u,类别/n, ,:/w,return/en,:/w, ,"/w,"/w,"/w, ,#, ,总/b,文件/n,数/m, ,numtraindocs/en, ,=/w, ,len/en,(/w,trainmatrix/en,)/w, ,#, ,总/b,单词/n,数/m, ,numwords/en, ,=/w, ,len/en,(/w,trainmatrix/en,[/w,0/m,]/w,)/w, ,#, ,侮辱性/n,文件/n,的/u,出现/v,概率/n, ,pabusive/en, ,=/w, ,sum/en,(/w,traincategory/en,)/w, ,//w, ,float/en,(/w,numtraindocs/en,)/w, ,#, ,构造/v,单词/n,出现/v,次数/n,列表/v, ,#, ,p/en,0/m,num/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,num/en, ,侮辱/v,的/u,统计/v, ,p/en,0/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w,#,[/w,0/m,,/w,0/m,./w,./w,./w,./w,./w,./w,]/w,-/w,>,[/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,./w,./w,]/w, ,p/en,1/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w, ,#, ,整个/b,数据集/nw,单词/n,出现/v,总数/n,，/w,2.0/m,根据/p,样本/n,//w,实际/n,调查/vn,结果/n,调整/vn,分/q,母/b,的/u,值/n,（/w,2/m,主要/b,是/v,避免/v,分母/n,为/p,0/m,，/w,当然/d,值/n,可以/v,调整/vn,）/w, ,#, ,p/en,0/m,denom/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,denom/en, ,侮辱/v,的/u,统计/v, ,p/en,0/m,denom/en, ,=/w, ,2.0/m, ,p/en,1/m,denom/en, ,=/w, ,2.0/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtraindocs/en,)/w,:/w, ,if/en, ,traincategory/en,[/w,i/en,]/w, ,=/w,=/w, ,1/m,:/w, ,#, ,累加/v,辱骂/vn,词/n,的/u,频次/nz, ,p/en,1/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,#, ,对/p,每篇/r,文章/n,的/u,辱骂/vn,的/u,频次/nz, ,进行/v,统计/v,汇总/v, ,p/en,1/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,else/en,:/w, ,p/en,0/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,p/en,0/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,#, ,类别/n,1/m,，/w,即/v,侮辱性/n,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,1/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,1/m,vect/en, ,=/w, ,log/en,(/w,p/en,1/m,num/en, ,//w, ,p/en,1/m,denom/en,)/w, ,#, ,类别/n,0/m,，/w,即/v,正常/a,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,0/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,0/m,vect/en, ,=/w, ,log/en,(/w,p/en,0/m,num/en, ,//w, ,p/en,0/m,denom/en,)/w, ,return/en, ,p/en,0/m,vect/en,,/w, ,p/en,1/m,vect/en,,/w, ,pabusive/en,使用/v,算法/n,:/w, ,对/p,社区/n,留言板/nw,言论/n,进行/v,分类/vn,朴素/a,贝叶斯/nr,分类/vn,函数/n,def/en, ,classifynb/en,(/w,vec/en,2/m,classify/en,,/w, ,p/en,0/m,vec/en,,/w, ,p/en,1/m,vec/en,,/w, ,pclass/en,1/m,)/w,:/w, ,"/w,"/w,"/w, ,使用/v,算法/n,：/w, ,#, ,将/d,乘法/n,转换/v,为/p,加法/n, ,乘法/n,：/w,p/en,(/w,c/en,|/w,f/en,1/m,f/en,2/m,./w,./w,./w,fn/en,)/w, ,=/w, ,p/en,(/w,f/en,1/m,f/en,2/m,./w,./w,./w,fn/en,|/w,c/en,)/w,p/en,(/w,c/en,)/w,//w,p/en,(/w,f/en,1/m,f/en,2/m,./w,./w,./w,fn/en,)/w, ,加法/n,：/w,p/en,(/w,f/en,1/m,|/w,c/en,)/w,*/w,p/en,(/w,f/en,2/m,|/w,c/en,)/w,./w,./w,./w,./w,p/en,(/w,fn/en,|/w,c/en,)/w,p/en,(/w,c/en,)/w, ,-/w,>, ,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,)/w,)/w,+/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,)/w,)/w,+/w,./w,./w,./w,./w,+/w,log/en,(/w,p/en,(/w,fn/en,|/w,c/en,)/w,)/w,+/w,log/en,(/w,p/en,(/w,c/en,)/w,)/w, ,:/w,param/en, ,vec/en,2/m,classify/en,:/w, ,待/v,测数据/n,[/w,0/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,]/w,，/w,即/v,要/v,分类/vn,的/u,向量/n, ,:/w,param/en, ,p/en,0/m,vec/en,:/w, ,类别/n,0/m,，/w,即/v,正常/a,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,0/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,:/w,param/en, ,p/en,1/m,vec/en,:/w, ,类别/n,1/m,，/w,即/v,侮辱性/n,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,1/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,:/w,param/en, ,pclass/en,1/m,:/w, ,类别/n,1/m,，/w,侮辱性/n,文件/n,的/u,出现/v,概率/n, ,:/w,return/en,:/w, ,类别/n,1/m, ,or/en, ,0/m, ,"/w,"/w,"/w, ,#, ,计算/v,公式/n, ,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,)/w,)/w,+/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,)/w,)/w,+/w,./w,./w,./w,./w,+/w,log/en,(/w,p/en,(/w,fn/en,|/w,c/en,)/w,)/w,+/w,log/en,(/w,p/en,(/w,c/en,)/w,)/w, ,#, ,大家/r,可能/v,会/v,发现/v,，/w,上面/f,的/u,计算/v,公式/n,，/w,没有/v,除/p,以/p,贝叶斯/nr,准则/n,的/u,公式/n,的/u,分母/n,，/w,也/d,就/d,是/v, ,p/en,(/w,w/en,)/w, ,（/w,p/en,(/w,w/en,)/w, ,指/v,的/u,是/v,此/r,文档/n,在/p,所有/b,的/u,文档/n,中/f,出现/v,的/u,概率/n,）/w,就/d,进行/v,概率/n,大小/n,的/u,比较/d,了/u,，/w, ,#, ,因为/c, ,p/en,(/w,w/en,)/w, ,针对/p,的/u,是/v,包含/v,侮辱/v,和/c,非/h,侮辱/v,的/u,全部/m,文档/n,，/w,所以/c, ,p/en,(/w,w/en,)/w, ,是/v,相同/a,的/u,。/w, ,#, ,使用/v, ,numpy/en, ,数组/n,来/v,计算/v,两个/m,向量/n,相乘/v,的/u,结果/n,，/w,这里/r,的/u,相乘/v,是/v,指/v,对应/v,元素/n,相乘/v,，/w,即/v,先/d,将/d,两个/m,向/p,量/n,中/f,的/u,第一/m,个/q,元素/n,相乘/v,，/w,然后/c,将/d,第/m,2个/m,元素/n,相乘/v,，/w,以此类推/l,。/w, ,#, ,我的/nt,理解/v,是/v,：/w,这里/r,的/u, ,vec/en,2/m,classify/en, ,*/w, ,p/en,1/m,vec/en, ,的/u,意思/n,就/d,是/v,将/d,每个/r,词/n,与/p,其/r,对应/v,的/u,概率/n,相/d,关联/vn,起来/v, ,p/en,1/m, ,=/w, ,sum/en,(/w,vec/en,2/m,classify/en, ,*/w, ,p/en,1/m,vec/en,)/w, ,+/w, ,log/en,(/w,pclass/en,1/m,)/w, ,#, ,p/en,(/w,w/en,|/w,c/en,1/m,)/w, ,*/w, ,p/en,(/w,c/en,1/m,)/w, ,，/w,即/v,贝叶斯/nr,准则/n,的/u,分子/n, ,p/en,0/m, ,=/w, ,sum/en,(/w,vec/en,2/m,classify/en, ,*/w, ,p/en,0/m,vec/en,)/w, ,+/w, ,log/en,(/w,1.0/m, ,-/w, ,pclass/en,1/m,)/w, ,#, ,p/en,(/w,w/en,|/w,c/en,0/m,)/w, ,*/w, ,p/en,(/w,c/en,0/m,)/w, ,，/w,即/v,贝叶斯/nr,准则/n,的/u,分子/n,·/w, ,if/en, ,p/en,1/m, ,>, ,p/en,0/m,:/w, ,return/en, ,1/m, ,else/en,:/w, ,return/en, ,0/m, ,def/en, ,testingnb/en,(/w,)/w,:/w, ,"/w,"/w,"/w, ,测试/vn,朴素/a,贝叶斯算法/nw, ,"/w,"/w,"/w, ,#, ,1/m,./w, ,加/v,载/v,数据集/nw, ,listoposts/en,,/w, ,listclasses/en, ,=/w, ,loaddataset/en,(/w,)/w, ,#, ,2/m,./w, ,创建/v,单词/n,集合/v, ,myvocablist/en, ,=/w, ,createvocablist/en,(/w,listoposts/en,)/w, ,#, ,3/m,./w, ,计算/v,单词/n,是否/v,出现/v,并/c,创建/v,数据/n,矩阵/n, ,trainmat/en, ,=/w, ,[/w,]/w, ,for/en, ,postindoc/en, ,in/en, ,listoposts/en,:/w, ,#, ,返回/v,m/en,*/w,len/en,(/w,myvocablist/en,)/w,的/u,矩阵/n,，/w, ,记录/v,的/u,都/d,是/v,0/m,，/w,1/m,信息/n, ,trainmat/en,./w,append/en,(/w,setofwords/en,2/m,vec/en,(/w,myvocablist/en,,/w, ,postindoc/en,)/w,)/w, ,#, ,4/m,./w, ,训练/vn,数据/n, ,p/en,0/m,v/en,,/w, ,p/en,1/m,v/en,,/w, ,pab/en, ,=/w, ,trainnb/en,0/m,(/w,array/en,(/w,trainmat/en,)/w,,/w, ,array/en,(/w,listclasses/en,)/w,)/w, ,#, ,5/m,./w, ,测试/vn,数据/n, ,testentry/en, ,=/w, ,[/w,'/w,love/en,'/w,,/w, ,'/w,my/en,'/w,,/w, ,'/w,dalmation/en,'/w,]/w, ,thisdoc/en, ,=/w, ,array/en,(/w,setofwords/en,2/m,vec/en,(/w,myvocablist/en,,/w, ,testentry/en,)/w,)/w, ,print/en, ,testentry/en,,/w, ,'/w,classified/en, ,as/en,:/w, ,'/w,,/w, ,classifynb/en,(/w,thisdoc/en,,/w, ,p/en,0/m,v/en,,/w, ,p/en,1/m,v/en,,/w, ,pab/en,)/w, ,testentry/en, ,=/w, ,[/w,'/w,stupid/en,'/w,,/w, ,'/w,garbage/en,'/w,]/w, ,thisdoc/en, ,=/w, ,array/en,(/w,setofwords/en,2/m,vec/en,(/w,myvocablist/en,,/w, ,testentry/en,)/w,)/w, ,print/en, ,testentry/en,,/w, ,'/w,classified/en, ,as/en,:/w, ,'/w,,/w, ,classifynb/en,(/w,thisdoc/en,,/w, ,p/en,0/m,v/en,,/w, ,p/en,1/m,v/en,,/w, ,pab/en,)/w,完整/a,代码/n,地址/n,:/w, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,apachecn/en,//w,machinelearning/en,//w,blob/en,//w,master/en,//w,src/en,//w,python/en,//w,4/m,./w,naivebayes/en,//w,bayes/en,./w,py/en,项目/n,案例/n,2/m,:/w, ,使用/v,朴素/a,贝叶斯/nr,过滤/v,垃圾/n,邮件/n,项目/n,概述/v,完成/v,朴素/a,贝叶斯/nr,的/u,一个/m,最/d,著名/a,的/u,应用/vn,:/w, ,电子/n,邮件/n,垃圾/n,过滤/v,。/w,开发/v,流程/n,使用/v,朴素/a,贝叶斯/nr,对/p,电子/n,邮件/n,进行/v,分类/vn,收集/v,数据/n,:/w, ,提供/v,文本/n,文件/n, ,准备/v,数据/n,:/w, ,将/d,文本/n,文件/n,解析/v,成/v,词条/n,向量/n, ,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n, ,训练/vn,算法/n,:/w, ,使用/v,我们/r,之前/f,建立/v,的/u, ,trainnb/en,(/w,)/w, ,函数/n, ,测试/vn,算法/n,:/w, ,使用/v,朴素/a,贝叶斯/nr,进行/v,交叉/vn,验证/vn, ,使用/v,算法/n,:/w, ,构建/v,一个/m,完整/a,的/u,程序/n,对/p,一组/mq,文档/n,进行/v,分类/vn,，/w,将/d,错分/nw,的/u,文档/n,输出/v,到/v,屏幕/n,上/f,收集/v,数据/n,:/w, ,提供/v,文本/n,文件/n,文本/n,文件/n,内容/n,如下/v,:/w,hi/en, ,peter/en,,/w, ,with/en, ,jose/en, ,out/en, ,of/en, ,town/en,,/w, ,do/en, ,you/en, ,want/en, ,to/en, ,meet/en, ,once/en, ,in/en, ,a/en, ,while/en, ,to/en, ,keep/en, ,things/en, ,going/en, ,and/en, ,do/en, ,some/en, ,interesting/en, ,stuff/en,?/w, ,let/en, ,me/en, ,know/en, ,eugene/en,准备/v,数据/n,:/w, ,将/d,文本/n,文件/n,解析/v,成/v,词条/n,向量/n,使用/v,正/d,则/d,表达/v,式/k,来/v,切分/v,文本/n,>,>,>, ,mysent/en, ,=/w, ,'/w,this/en, ,book/en, ,is/en, ,the/en, ,best/en, ,book/en, ,on/en, ,python/en, ,or/en, ,m/en,./w,l/en,./w, ,i/en, ,have/en, ,ever/en, ,laid/en, ,eyes/en, ,upon/en,./w,'/w, ,>,>,>, ,import/en, ,re/en, ,>,>,>, ,regex/en, ,=/w, ,re/en,./w,compile/en,(/w,'/w,\/w,\/w,w/en,*/w,'/w,)/w, ,>,>,>, ,listoftokens/en, ,=/w, ,regex/en,./w,split/en,(/w,mysent/en,)/w, ,>,>,>, ,listoftokens/en, ,[/w,'/w,this/en,'/w,,/w, ,'/w,book/en,'/w,,/w, ,'/w,is/en,'/w,,/w, ,'/w,the/en,'/w,,/w, ,'/w,best/en,'/w,,/w, ,'/w,book/en,'/w,,/w, ,'/w,on/en,'/w,,/w, ,'/w,python/en,'/w,,/w, ,'/w,or/en,'/w,,/w, ,'/w,m/en,./w,l/en,./w,'/w,,/w, ,'/w,i/en,'/w,,/w, ,'/w,have/en,'/w,,/w, ,'/w,ever/en,'/w,,/w, ,'/w,laid/en,'/w,,/w, ,'/w,eyes/en,'/w,,/w, ,'/w,upon/en,'/w,,/w, ,'/w,'/w,]/w,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n,训练/vn,算法/n,:/w, ,使用/v,我们/r,之前/f,建立/v,的/u, ,trainnb/en,0/m,(/w,)/w, ,函数/n,def/en, ,trainnb/en,0/m,(/w,trainmatrix/en,,/w, ,traincategory/en,)/w,:/w, ,"/w,"/w,"/w, ,训练/vn,数据/n,优化/v,版本/n, ,:/w,param/en, ,trainmatrix/en,:/w, ,文件/n,单词/n,矩阵/n, ,:/w,param/en, ,traincategory/en,:/w, ,文件/n,对应/v,的/u,类别/n, ,:/w,return/en,:/w, ,"/w,"/w,"/w, ,#, ,总/b,文件/n,数/m, ,numtraindocs/en, ,=/w, ,len/en,(/w,trainmatrix/en,)/w, ,#, ,总/b,单词/n,数/m, ,numwords/en, ,=/w, ,len/en,(/w,trainmatrix/en,[/w,0/m,]/w,)/w, ,#, ,侮辱性/n,文件/n,的/u,出现/v,概率/n, ,pabusive/en, ,=/w, ,sum/en,(/w,traincategory/en,)/w, ,//w, ,float/en,(/w,numtraindocs/en,)/w, ,#, ,构造/v,单词/n,出现/v,次数/n,列表/v, ,#, ,p/en,0/m,num/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,num/en, ,侮辱/v,的/u,统计/v, ,p/en,0/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w,#,[/w,0/m,,/w,0/m,./w,./w,./w,./w,./w,./w,]/w,-/w,>,[/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,./w,./w,]/w, ,p/en,1/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w, ,#, ,整个/b,数据集/nw,单词/n,出现/v,总数/n,，/w,2.0/m,根据/p,样本/n,//w,实际/n,调查/vn,结果/n,调整/vn,分/q,母/b,的/u,值/n,（/w,2/m,主要/b,是/v,避免/v,分母/n,为/p,0/m,，/w,当然/d,值/n,可以/v,调整/vn,）/w, ,#, ,p/en,0/m,denom/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,denom/en, ,侮辱/v,的/u,统计/v, ,p/en,0/m,denom/en, ,=/w, ,2.0/m, ,p/en,1/m,denom/en, ,=/w, ,2.0/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtraindocs/en,)/w,:/w, ,if/en, ,traincategory/en,[/w,i/en,]/w, ,=/w,=/w, ,1/m,:/w, ,#, ,累加/v,辱骂/vn,词/n,的/u,频次/nz, ,p/en,1/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,#, ,对/p,每篇/r,文章/n,的/u,辱骂/vn,的/u,频次/nz, ,进行/v,统计/v,汇总/v, ,p/en,1/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,else/en,:/w, ,p/en,0/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,p/en,0/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,#, ,类别/n,1/m,，/w,即/v,侮辱性/n,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,1/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,1/m,vect/en, ,=/w, ,log/en,(/w,p/en,1/m,num/en, ,//w, ,p/en,1/m,denom/en,)/w, ,#, ,类别/n,0/m,，/w,即/v,正常/a,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,0/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,0/m,vect/en, ,=/w, ,log/en,(/w,p/en,0/m,num/en, ,//w, ,p/en,0/m,denom/en,)/w, ,return/en, ,p/en,0/m,vect/en,,/w, ,p/en,1/m,vect/en,,/w, ,pabusive/en,测试/vn,算法/n,:/w, ,使用/v,朴素/a,贝叶斯/nr,进行/v,交叉/vn,验证/vn,文件/n,解析/v,及/c,完整/a,的/u,垃圾/n,邮件/n,测试/vn,函数/n,#, ,切分/v,文本/n, ,def/en, ,textparse/en,(/w,bigstring/en,)/w,:/w, ,'/w,'/w,'/w, ,desc/en,:/w, ,接收/v,一个/m,大/a,字符串/n,并/c,将/d,其/r,解析/v,为/p,字符/n,串列/n,表/n, ,args/en,:/w, ,bigstring/en, ,--/nrf, ,大/a,字符串/n, ,returns/en,:/w, ,去掉/v,少于/v, ,2/m, ,个/q,字符/n,的/u,字符/n,串/v,，/w,并/c,将/d,所有/b,字符/n,串/v,转换/v,为/p,小写/n,，/w,返回/v,字符/n,串列/n,表/n, ,'/w,'/w,'/w, ,import/en, ,re/en, ,#, ,使用/v,正/d,则/d,表达/v,式/k,来/v,切分/v,句子/n,，/w,其中/r,分隔符/n,是/v,除/p,单词/n,、/w,数字/n,外/f,的/u,任意/d,字符/n,串/v, ,listoftokens/en, ,=/w, ,re/en,./w,split/en,(/w,r/en,'/w,\/w,w/en,*/w,'/w,,/w, ,bigstring/en,)/w, ,return/en, ,[/w,tok/en,./w,lower/en,(/w,)/w, ,for/en, ,tok/en, ,in/en, ,listoftokens/en, ,if/en, ,len/en,(/w,tok/en,)/w, ,>, ,2/m,]/w, ,def/en, ,spamtest/en,(/w,)/w,:/w, ,'/w,'/w,'/w, ,desc/en,:/w, ,对/p,贝叶斯垃圾/nw,邮件/n,分类器/nw,进行/v,自动化/vn,处理/v,。/w, ,args/en,:/w, ,none/en, ,returns/en,:/w, ,对/p,测试/vn,集中/v,的/u,每/r,封/q,邮件/n,进行/v,分类/vn,，/w,若/c,邮件/n,分类/vn,错误/n,，/w,则/d,错误/n,数/m,加/v, ,1/m,，/w,最后/f,返回/v,总/b,的/u,错误/n,百分比/n,。/w, ,'/w,'/w,'/w, ,doclist/en, ,=/w, ,[/w,]/w, ,classlist/en, ,=/w, ,[/w,]/w, ,fulltext/en, ,=/w, ,[/w,]/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,1/m,,/w, ,26/m,)/w,:/w, ,#, ,切分/v,，/w,解析/v,数据/n,，/w,并/c,归类/vn,为/p, ,1/m, ,类别/n, ,wordlist/en, ,=/w, ,textparse/en,(/w,open/en,(/w,'/w,input/en,//w,4/m,./w,naivebayes/en,//w,email/en,//w,spam/en,//w,%/w,d/en,./w,txt/en,'/w, ,%/w, ,i/en,)/w,./w,read/en,(/w,)/w,)/w, ,doclist/en,./w,append/en,(/w,wordlist/en,)/w, ,classlist/en,./w,append/en,(/w,1/m,)/w, ,#, ,切分/v,，/w,解析/v,数据/n,，/w,并/c,归类/vn,为/p, ,0/m, ,类别/n, ,wordlist/en, ,=/w, ,textparse/en,(/w,open/en,(/w,'/w,input/en,//w,4/m,./w,naivebayes/en,//w,email/en,//w,ham/en,//w,%/w,d/en,./w,txt/en,'/w, ,%/w, ,i/en,)/w,./w,read/en,(/w,)/w,)/w, ,doclist/en,./w,append/en,(/w,wordlist/en,)/w, ,fulltext/en,./w,extend/en,(/w,wordlist/en,)/w, ,classlist/en,./w,append/en,(/w,0/m,)/w, ,#, ,创建/v,词汇/n,表/n, ,vocablist/en, ,=/w, ,createvocablist/en,(/w,doclist/en,)/w, ,trainingset/en, ,=/w, ,range/en,(/w,50/m,)/w, ,testset/en, ,=/w, ,[/w,]/w, ,#, ,随机/d,取/v, ,10/m, ,个/q,邮件/n,用/p,来/v,测试/vn, ,for/en, ,i/en, ,in/en, ,range/en,(/w,10/m,)/w,:/w, ,#, ,random/en,./w,uniform/en,(/w,x/en,,/w, ,y/en,)/w, ,随机/d,生成/vn,一个/m,范围/n,为/p, ,x/en, ,-/w, ,y/en, ,的/u,实数/n, ,randindex/en, ,=/w, ,int/en,(/w,random/en,./w,uniform/en,(/w,0/m,,/w, ,len/en,(/w,trainingset/en,)/w,)/w,)/w, ,testset/en,./w,append/en,(/w,trainingset/en,[/w,randindex/en,]/w,)/w, ,del/en,(/w,trainingset/en,[/w,randindex/en,]/w,)/w, ,trainmat/en, ,=/w, ,[/w,]/w, ,trainclasses/en, ,=/w, ,[/w,]/w, ,for/en, ,docindex/en, ,in/en, ,trainingset/en,:/w, ,trainmat/en,./w,append/en,(/w,setofwords/en,2/m,vec/en,(/w,vocablist/en,,/w, ,doclist/en,[/w,docindex/en,]/w,)/w,)/w, ,trainclasses/en,./w,append/en,(/w,classlist/en,[/w,docindex/en,]/w,)/w, ,p/en,0/m,v/en,,/w, ,p/en,1/m,v/en,,/w, ,pspam/en, ,=/w, ,trainnb/en,0/m,(/w,array/en,(/w,trainmat/en,)/w,,/w, ,array/en,(/w,trainclasses/en,)/w,)/w, ,errorcount/en, ,=/w, ,0/m, ,for/en, ,docindex/en, ,in/en, ,testset/en,:/w, ,wordvector/en, ,=/w, ,setofwords/en,2/m,vec/en,(/w,vocablist/en,,/w, ,doclist/en,[/w,docindex/en,]/w,)/w, ,if/en, ,classifynb/en,(/w,array/en,(/w,wordvector/en,)/w,,/w, ,p/en,0/m,v/en,,/w, ,p/en,1/m,v/en,,/w, ,pspam/en,)/w, ,!/w,=/w, ,classlist/en,[/w,docindex/en,]/w,:/w, ,errorcount/en, ,+/w,=/w, ,1/m, ,print/en, ,'/w,the/en, ,errorcount/en, ,is/en,:/w, ,'/w,,/w, ,errorcount/en, ,print/en, ,'/w,the/en, ,testset/en, ,length/en, ,is/en, ,:/w,'/w,,/w, ,len/en,(/w,testset/en,)/w, ,print/en, ,'/w,the/en, ,error/en, ,rate/en, ,is/en, ,:/w,'/w,,/w, ,float/en,(/w,errorcount/en,)/w,//w,len/en,(/w,testset/en,)/w,使用/v,算法/n,:/w, ,构建/v,一个/m,完整/a,的/u,程序/n,对/p,一组/mq,文档/n,进行/v,分类/vn,，/w,将/d,错分/nw,的/u,文档/n,输出/v,到/v,屏幕/n,上/f,完整/a,代码/n,地址/n,:/w, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,apachecn/en,//w,machinelearning/en,//w,blob/en,//w,master/en,//w,src/en,//w,python/en,//w,4/m,./w,naivebayes/en,//w,bayes/en,./w,py/en,项目/n,案例/n,3/m,:/w, ,使用/v,朴素/a,贝叶斯分类器/nw,从/p,个人/n,广告/n,中/f,获取/v,区域/n,倾向/n,项目/n,概述/v,广告商/nw,往往/d,想/v,知道/v,关于/p,一个/m,人/n,的/u,一些/m,特定/b,人口/n,统计/v,信息/n,，/w,以便/d,能/v,更/d,好/a,地/u,定向/b,推销/v,广告/n,。/w,我们/r,将/d,分别/d,从/p,美国/ns,的/u,两个/m,城市/n,中/f,选取/v,一些/m,人/n,，/w,通过/p,分析/vn,这些/r,人/n,发布/v,的/u,信息/n,，/w,来/v,比较/d,这/r,两个/m,城市/n,的/u,人们/n,在/p,广告/n,用/p,词/n,上/f,是否/v,不同/a,。/w,如果/c,结论/n,确实/ad,不同/a,，/w,那么/r,他们/r,各自/r,常用/a,的/u,词/n,是/v,那些/r,，/w,从/p,人们/n,的/u,用/p,词/n,当中/f,，/w,我们/r,能否/v,对/p,不同/a,城市/n,的/u,人/n,所/u,关心/v,的/u,内容/n,有所/v,了解/v,。/w,开发/v,流程/n,收集/v,数据/n,:/w, ,从/p, ,rss/en, ,源/ng,收集/v,内容/n,，/w,这里/r,需要/v,对/p, ,rss/en, ,源/ng,构建/v,一个/m,接口/n, ,准备/v,数据/n,:/w, ,将/d,文本/n,文件/n,解析/v,成/v,词条/n,向量/n, ,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n, ,训练/vn,算法/n,:/w, ,使用/v,我们/r,之前/f,简历/n,的/u, ,trainnb/en,0/m,(/w,)/w, ,函数/n, ,测试/vn,算法/n,:/w, ,观察/v,错误/n,率/v,，/w,确保/v,分类器/nw,可用/v,。/w,可以/v,修改/v,切分/v,程序/n,，/w,以/p,降低/v,错误/n,率/v,，/w,提高/v,分类/vn,结果/n, ,使用/v,算法/n,:/w, ,构建/v,一个/m,完整/a,的/u,程序/n,，/w,封装/vn,所有/b,内容/n,。/w,给/p,定/v,两个/m, ,rss/en, ,源/ng,，/w,改/v,程序/n,会/v,显示/v,最/d,常用/a,的/u,公共/b,词/n,收集/v,数据/n,:/w, ,从/p, ,rss/en, ,源/ng,收集/v,内容/n,，/w,这里/r,需要/v,对/p, ,rss/en, ,源/ng,构建/v,一个/m,接口/n,也/d,就/d,是/v,导入/v, ,rss/en, ,源/ng,，/w,我们/r,使用/v, ,python/en, ,下载/v,文本/n,，/w,在/p,http/en,:/w,//w,//w,code/en,./w,google/en,./w,com/en,//w,p/en,//w,feedparser/en,//w, ,下/f,浏览/vn,相关/v,文档/n,，/w,安装/v, ,feedparse/en,，/w,首先/d,解压/v,下载/v,的/u,包/v,，/w,并/c,将/d,当前/t,目录/n,切换/vn,到/v,解压/v,文件/n,所/u,在/p,的/u,文件夹/n,，/w,然后/c,在/p, ,python/en, ,提示符/n,下/f,输入/v,：/w,>,>,>, ,python/en, ,setup/en,./w,py/en, ,install/en,准备/v,数据/n,:/w, ,将/d,文本/n,文件/n,解析/v,成/v,词条/n,向量/n,文档/n,词袋/nw,模型/n,我们/r,将/d,每个/r,词/n,的/u,出现/v,与否/u,作为/v,一个/m,特征/n,，/w,这/r,可以/v,被/p,描述/v,为/p, ,词/n,集/vg,模型/n,(/w,set/en,-/w,of/en,-/w,words/en, ,model/en,)/w,。/w,如果/c,一个/m,词/n,在/p,文档/n,中/f,出现/v,不/d,止/v,一次/mq,，/w,这/r,可能/v,意味/n,着/u,包含/v,该词/nw,是否/v,出现/v,在/p,文档/n,中/f,所/u,不/d,能/v,表达/v,的/u,某种/r,信息/n,，/w,这种/r,方法/n,被/p,称为/v, ,词袋/nw,模型/n,(/w,bag/en,-/w,of/en,-/w,words/en, ,model/en,)/w,。/w,在/p,词袋/nw,中/f,，/w,每个/r,单词/n,可以/v,出现/v,多次/m,，/w,而/c,在/p,词/n,集中/v,，/w,每个/r,词/n,只能/v,出现/v,一次/mq,。/w,为/p,适应/v,词袋/nw,模型/n,，/w,需要/v,对/p,函数/n, ,setofwords/en,2/m,vec/en,(/w,)/w, ,稍加/v,修改/v,，/w,修改/v,后/f,的/u,函数/n,为/p, ,bagofwords/en,2/m,vec/en,(/w,)/w, ,。/w,如下/v,给/p,出/v,了/u,基于/p,词袋/nw,模型/n,的/u,朴素/a,贝叶斯/nr,代码/n,。/w,它/r,与/p,函数/n, ,setofwords/en,2/m,vec/en,(/w,)/w, ,几乎/d,完全/ad,相同/a,，/w,唯一/b,不同/a,的/u,是/v,每当/p,遇到/v,一个/m,单词/n,时/ng,，/w,它/r,会/v,增加/v,词向量/nw,中/f,的/u,对应值/nw,，/w,而/c,不/d,只是/d,将/d,对应/v,的/u,数值/n,设/v,为/p, ,1/m, ,。/w,def/en, ,bagofwords/en,2/m,vecmn/en,(/w,vocalist/en,,/w, ,inputset/en,)/w,:/w, ,returnvec/en, ,=/w, ,[/w,0/m,]/w, ,*/w, ,len/en,(/w,vocablist/en,)/w, ,for/en, ,word/en, ,in/en, ,inputset/en,:/w, ,if/en, ,word/en, ,in/en, ,inputset/en,:/w, ,returnvec/en,[/w,vocablist/en,./w,index/en,(/w,word/en,)/w,]/w, ,+/w,=/w, ,1/m, ,return/en, ,returnvec/en,#,创建/v,一个/m,包含/v,在/p,所有/b,文档/n,中/f,出现/v,的/u,不/d,重复/v,词/n,的/u,列表/v, ,def/en, ,createvocablist/en,(/w,dataset/en,)/w,:/w, ,vocabset/en,=/w,set/en,(/w,[/w,]/w,)/w, ,#,创建/v,一个/m,空集/nw, ,for/en, ,document/en, ,in/en, ,dataset/en,:/w, ,vocabset/en,=/w,vocabset/en,|/w,set/en,(/w,document/en,)/w, ,#,创建/v,两个/m,集合/v,的/u,并/c,集/vg, ,return/en, ,list/en,(/w,vocabset/en,)/w, ,def/en, ,setofwords/en,2/m,vecmn/en,(/w,vocablist/en,,/w,inputset/en,)/w,:/w, ,returnvec/en,=/w,[/w,0/m,]/w,*/w,len/en,(/w,vocablist/en,)/w, ,#,创建/v,一个/m,其中/r,所/u,含/v,元素/n,都/d,为/p,0/m,的/u,向量/n, ,for/en, ,word/en, ,in/en, ,inputset/en,:/w, ,if/en, ,word/en, ,in/en, ,vocablist/en,:/w, ,returnvec/en,[/w,vocablist/en,./w,index/en,(/w,word/en,)/w,]/w,+/w,=/w,1/m, ,return/en, ,returnvec/en, ,#,文件/n,解析/v, ,def/en, ,textparse/en,(/w,bigstring/en,)/w,:/w, ,import/en, ,re/en, ,listoftokens/en,=/w,re/en,./w,split/en,(/w,r/en,'/w,\/w,w/en,*/w,'/w,,/w,bigstring/en,)/w, ,return/en, ,[/w,tok/en,./w,lower/en,(/w,)/w, ,for/en, ,tok/en, ,in/en, ,listoftokens/en, ,if/en, ,len/en,(/w,tok/en,)/w,>,2/m,]/w,分析/vn,数据/n,:/w, ,检查/vn,词条/n,确保/v,解析/v,的/u,正确性/n,训练/vn,算法/n,:/w, ,使用/v,我们/r,之前/f,简历/n,的/u, ,trainnb/en,0/m,(/w,)/w, ,函数/n,def/en, ,trainnb/en,0/m,(/w,trainmatrix/en,,/w, ,traincategory/en,)/w,:/w, ,"/w,"/w,"/w, ,训练/vn,数据/n,优化/v,版本/n, ,:/w,param/en, ,trainmatrix/en,:/w, ,文件/n,单词/n,矩阵/n, ,:/w,param/en, ,traincategory/en,:/w, ,文件/n,对应/v,的/u,类别/n, ,:/w,return/en,:/w, ,"/w,"/w,"/w, ,#, ,总/b,文件/n,数/m, ,numtraindocs/en, ,=/w, ,len/en,(/w,trainmatrix/en,)/w, ,#, ,总/b,单词/n,数/m, ,numwords/en, ,=/w, ,len/en,(/w,trainmatrix/en,[/w,0/m,]/w,)/w, ,#, ,侮辱性/n,文件/n,的/u,出现/v,概率/n, ,pabusive/en, ,=/w, ,sum/en,(/w,traincategory/en,)/w, ,//w, ,float/en,(/w,numtraindocs/en,)/w, ,#, ,构造/v,单词/n,出现/v,次数/n,列表/v, ,#, ,p/en,0/m,num/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,num/en, ,侮辱/v,的/u,统计/v, ,#, ,避免/v,单词/n,列表/v,中/f,的/u,任何/r,一个/m,单词/n,为/p,0/m,，/w,而/c,导致/v,最后/f,的/u,乘积/n,为/p,0/m,，/w,所以/c,将/d,每个/r,单词/n,的/u,出现/v,次数/n,初始/b,化为/v, ,1/m, ,p/en,0/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w,#,[/w,0/m,,/w,0/m,./w,./w,./w,./w,./w,./w,]/w,-/w,>,[/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,1/m,./w,./w,./w,./w,./w,]/w, ,p/en,1/m,num/en, ,=/w, ,ones/en,(/w,numwords/en,)/w, ,#, ,整个/b,数据集/nw,单词/n,出现/v,总数/n,，/w,2.0/m,根据/p,样本/n,//w,实际/n,调查/vn,结果/n,调整/vn,分/q,母/b,的/u,值/n,（/w,2/m,主要/b,是/v,避免/v,分母/n,为/p,0/m,，/w,当然/d,值/n,可以/v,调整/vn,）/w, ,#, ,p/en,0/m,denom/en, ,正常/a,的/u,统计/v, ,#, ,p/en,1/m,denom/en, ,侮辱/v,的/u,统计/v, ,p/en,0/m,denom/en, ,=/w, ,2.0/m, ,p/en,1/m,denom/en, ,=/w, ,2.0/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtraindocs/en,)/w,:/w, ,if/en, ,traincategory/en,[/w,i/en,]/w, ,=/w,=/w, ,1/m,:/w, ,#, ,累加/v,辱骂/vn,词/n,的/u,频次/nz, ,p/en,1/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,#, ,对/p,每篇/r,文章/n,的/u,辱骂/vn,的/u,频次/nz, ,进行/v,统计/v,汇总/v, ,p/en,1/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,else/en,:/w, ,p/en,0/m,num/en, ,+/w,=/w, ,trainmatrix/en,[/w,i/en,]/w, ,p/en,0/m,denom/en, ,+/w,=/w, ,sum/en,(/w,trainmatrix/en,[/w,i/en,]/w,)/w, ,#, ,类别/n,1/m,，/w,即/v,侮辱性/n,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,1/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,1/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,1/m,vect/en, ,=/w, ,log/en,(/w,p/en,1/m,num/en, ,//w, ,p/en,1/m,denom/en,)/w, ,#, ,类别/n,0/m,，/w,即/v,正常/a,文档/n,的/u,[/w,log/en,(/w,p/en,(/w,f/en,1/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,2/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,3/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,4/m,|/w,c/en,0/m,)/w,)/w,,/w,log/en,(/w,p/en,(/w,f/en,5/m,|/w,c/en,0/m,)/w,)/w,./w,./w,./w,./w,]/w,列表/v, ,p/en,0/m,vect/en, ,=/w, ,log/en,(/w,p/en,0/m,num/en, ,//w, ,p/en,0/m,denom/en,)/w, ,return/en, ,p/en,0/m,vect/en,,/w, ,p/en,1/m,vect/en,,/w, ,pabusive/en,测试/vn,算法/n,:/w, ,观察/v,错误/n,率/v,，/w,确保/v,分类器/nw,可用/v,。/w,可以/v,修改/v,切分/v,程序/n,，/w,以/p,降低/v,错误/n,率/v,，/w,提高/v,分类/vn,结果/n,#,rss/en,源/ng,分类器/nw,及/c,高频词/nw,去除/v,函数/n, ,def/en, ,calcmostfreq/en,(/w,vocablist/en,,/w,fulltext/en,)/w,:/w, ,import/en, ,operator/en, ,freqdict/en,=/w,{/w,}/w, ,for/en, ,token/en, ,in/en, ,vocablist/en,:/w, ,#,遍历/nw,词汇表/n,中/f,的/u,每个/r,词/n, ,freqdict/en,[/w,token/en,]/w,=/w,fulltext/en,./w,count/en,(/w,token/en,)/w, ,#,统计/v,每个/r,词/n,在/p,文本/n,中/f,出现/v,的/u,次数/n, ,sortedfreq/en,=/w,sorted/en,(/w,freqdict/en,./w,iteritems/en,(/w,)/w,,/w,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w,reverse/en,=/w,true/en,)/w, ,#,根据/p,每个/r,词/n,出现/v,的/u,次数/n,从/p,高/a,到底/d,对/p,字典/n,进行/v,排序/vn, ,return/en, ,sortedfreq/en,[/w,:/w,30/m,]/w, ,#,返回/v,出现/v,次数/n,最高/a,的/u,30个/m,单词/n, ,def/en, ,localwords/en,(/w,feed/en,1/m,,/w,feed/en,0/m,)/w,:/w, ,import/en, ,feedparser/en, ,doclist/en,=/w,[/w,]/w,;/w,classlist/en,=/w,[/w,]/w,;/w,fulltext/en,=/w,[/w,]/w, ,minlen/en,=/w,min/en,(/w,len/en,(/w,feed/en,1/m,[/w,'/w,entries/en,'/w,]/w,)/w,,/w,len/en,(/w,feed/en,0/m,[/w,'/w,entries/en,'/w,]/w,)/w,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,minlen/en,)/w,:/w, ,wordlist/en,=/w,textparse/en,(/w,feed/en,1/m,[/w,'/w,entries/en,'/w,]/w,[/w,i/en,]/w,[/w,'/w,summary/en,'/w,]/w,)/w, ,#,每次/r,访问/v,一条/mq,rss/en,源/ng, ,doclist/en,./w,append/en,(/w,wordlist/en,)/w, ,fulltext/en,./w,extend/en,(/w,wordlist/en,)/w, ,classlist/en,./w,append/en,(/w,1/m,)/w, ,wordlist/en,=/w,textparse/en,(/w,feed/en,0/m,[/w,'/w,entries/en,'/w,]/w,[/w,i/en,]/w,[/w,'/w,summary/en,'/w,]/w,)/w, ,doclist/en,./w,append/en,(/w,wordlist/en,)/w, ,fulltext/en,./w,extend/en,(/w,wordlist/en,)/w, ,classlist/en,./w,append/en,(/w,0/m,)/w, ,vocablist/en,=/w,createvocablist/en,(/w,doclist/en,)/w, ,top/en,30/m,words/en,=/w,calcmostfreq/en,(/w,vocablist/en,,/w,fulltext/en,)/w, ,for/en, ,pairw/en, ,in/en, ,top/en,30/m,words/en,:/w, ,if/en, ,pairw/en,[/w,0/m,]/w, ,in/en, ,vocablist/en,:/w,vocablist/en,./w,remove/en,(/w,pairw/en,[/w,0/m,]/w,)/w, ,#,去掉/v,出现/v,次数/n,最高/a,的/u,那些/r,词/n, ,trainingset/en,=/w,range/en,(/w,2/m,*/w,minlen/en,)/w,;/w,testset/en,=/w,[/w,]/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,20/m,)/w,:/w, ,randindex/en,=/w,int/en,(/w,random/en,./w,uniform/en,(/w,0/m,,/w,len/en,(/w,trainingset/en,)/w,)/w,)/w, ,testset/en,./w,append/en,(/w,trainingset/en,[/w,randindex/en,]/w,)/w, ,del/en,(/w,trainingset/en,[/w,randindex/en,]/w,)/w, ,trainmat/en,=/w,[/w,]/w,;/w,trainclasses/en,=/w,[/w,]/w, ,for/en, ,docindex/en, ,in/en, ,trainingset/en,:/w, ,trainmat/en,./w,append/en,(/w,bagofwords/en,2/m,vecmn/en,(/w,vocablist/en,,/w,doclist/en,[/w,docindex/en,]/w,)/w,)/w, ,trainclasses/en,./w,append/en,(/w,classlist/en,[/w,docindex/en,]/w,)/w, ,p/en,0/m,v/en,,/w,p/en,1/m,v/en,,/w,pspam/en,=/w,trainnbo/en,(/w,array/en,(/w,trainmat/en,)/w,,/w,array/en,(/w,trainclasses/en,)/w,)/w, ,errorcount/en,=/w,0/m, ,for/en, ,docindex/en, ,in/en, ,testset/en,:/w, ,wordvector/en,=/w,bagofwords/en,2/m,vecmn/en,(/w,vocablist/en,,/w,doclist/en,[/w,docindex/en,]/w,)/w, ,if/en, ,classifynb/en,(/w,array/en,(/w,wordvector/en,)/w,,/w,p/en,0/m,v/en,,/w,p/en,1/m,v/en,,/w,pspam/en,)/w,!/w,=/w,classlist/en,[/w,docindex/en,]/w,:/w, ,errorcount/en,+/w,=/w,1/m, ,print/en, ,'/w,the/en, ,error/en, ,rate/en, ,is/en,:/w,'/w,,/w,float/en,(/w,errorcount/en,)/w,//w,len/en,(/w,testset/en,)/w, ,return/en, ,vocablist/en,,/w,p/en,0/m,v/en,,/w,p/en,1/m,v/en, ,#,朴素/a,贝叶斯/nr,分类/vn,函数/n, ,def/en, ,classifynb/en,(/w,vec/en,2/m,classify/en,,/w,p/en,0/m,vec/en,,/w,p/en,1/m,vec/en,,/w,pclass/en,1/m,)/w,:/w, ,p/en,1/m,=/w,sum/en,(/w,vec/en,2/m,classify/en,*/w,p/en,1/m,vec/en,)/w,+/w,log/en,(/w,pclass/en,1/m,)/w, ,p/en,0/m,=/w,sum/en,(/w,vec/en,2/m,classify/en,*/w,p/en,0/m,vec/en,)/w,+/w,log/en,(/w,1.0/m,-/w,pclass/en,1/m,)/w, ,if/en, ,p/en,1/m,>,p/en,0/m,:/w, ,return/en, ,1/m, ,else/en,:/w, ,return/en, ,0/m,使用/v,算法/n,:/w, ,构建/v,一个/m,完整/a,的/u,程序/n,，/w,封装/vn,所有/b,内容/n,。/w,给/p,定/v,两个/m, ,rss/en, ,源/ng,，/w,改/v,程序/n,会/v,显示/v,最/d,常用/a,的/u,公共/b,词/n,函数/n, ,localwords/en,(/w,)/w, ,使用/v,了/u,两个/m, ,rss/en, ,源/ng,作为/v,参数/n,，/w,rss/en, ,源/ng,要/v,在/p,函数/n,外/f,导入/v,，/w,这样/r,做/v,的/u,原因/n,是/v, ,rss/en, ,源/ng,会/v,随/v,时间/n,而/c,改变/v,，/w,重新/d,加/v,载/v, ,rss/en, ,源/ng,就/d,会/v,得到/v,新/a,的/u,数据/n,>,>,>, ,reload/en,(/w,bayes/en,)/w, ,</w,module/en, ,'/w,bayes/en,'/w, ,from/en, ,'/w,bayes/en,./w,pyc/en,'/w,>, ,>,>,>, ,import/en, ,feedparser/en, ,>,>,>, ,ny/en,=/w,feedparser/en,./w,parse/en,(/w,'/w,http/en,:/w,//w,//w,newyork/en,./w,craigslist/en,./w,org/en,//w,stp/en,//w,index/en,./w,rss/en,'/w,)/w, ,>,>,>, ,sy/en,=/w,feedparser/en,./w,parse/en,(/w,'/w,http/en,:/w,//w,//w,sfbay/en,./w,craigslist/en,./w,org/en,//w,stp/en,//w,index/en,./w,rss/en,'/w,)/w, ,>,>,>, ,vocablist/en,,/w,psf/en,,/w,pny/en,=/w,bayes/en,./w,localwords/en,(/w,ny/en,,/w,sf/en,)/w, ,the/en, ,error/en, ,rate/en, ,is/en,:/w, ,0.2/m, ,>,>,>, ,vocablist/en,,/w,psf/en,,/w,pny/en,=/w,bayes/en,./w,localwords/en,(/w,ny/en,,/w,sf/en,)/w, ,the/en, ,error/en, ,rate/en, ,is/en,:/w, ,0.3/m, ,>,>,>, ,vocablist/en,,/w,psf/en,,/w,pny/en,=/w,bayes/en,./w,localwords/en,(/w,ny/en,,/w,sf/en,)/w, ,the/en, ,error/en, ,rate/en, ,is/en,:/w, ,0.55/m,为了/p,得到/v,错误/n,率/v,的/u,精确/a,估计/v,，/w,应该/v,多次/m,进行/v,上述/b,实验/vn,，/w,然后/c,取/v,平均值/n,接/v,下来/v,，/w,我们/r,要/v,分析/vn,一下/m,数据/n,，/w,显示/v,地域/n,相关/v,的/u,用/p,词/n,可以/v,先/d,对/p,向量/n,psf/en,与/p,pny/en,进行/v,排序/vn,，/w,然后/c,按照/p,顺序/n,打印/v,出来/v,，/w,将/d,下面/f,的/u,代码/n,添加/vn,到/v,文件/n,中/f,：/w,#,最/d,具/vg,表征性/nw,的/u,词汇/n,显示/v,函数/n, ,def/en, ,gettopwords/en,(/w,ny/en,,/w,sf/en,)/w,:/w, ,import/en, ,operator/en, ,vocablist/en,,/w,p/en,0/m,v/en,,/w,p/en,1/m,v/en,=/w,localwords/en,(/w,ny/en,,/w,sf/en,)/w, ,topny/en,=/w,[/w,]/w,;/w,topsf/en,=/w,[/w,]/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,len/en,(/w,p/en,0/m,v/en,)/w,)/w,:/w, ,if/en, ,p/en,0/m,v/en,[/w,i/en,]/w,>,-/w,6.0/m,:/w,topsf/en,./w,append/en,(/w,(/w,vocablist/en,[/w,i/en,]/w,,/w,p/en,0/m,v/en,[/w,i/en,]/w,)/w,)/w, ,if/en, ,p/en,1/m,v/en,[/w,i/en,]/w,>,-/w,6.0/m,:/w,topny/en,./w,append/en,(/w,(/w,vocablist/en,[/w,i/en,]/w,,/w,p/en,1/m,v/en,[/w,i/en,]/w,)/w,)/w, ,sortedsf/en,=/w,sorted/en,(/w,topsf/en,,/w,key/en,=/w,lambda/en, ,pair/en,:/w,pair/en,[/w,1/m,]/w,,/w,reverse/en,=/w,true/en,)/w, ,print/en, ,"/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w,*/w,sf/en,*/w