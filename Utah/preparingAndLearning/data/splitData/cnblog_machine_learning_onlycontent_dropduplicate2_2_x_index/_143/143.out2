python/en,机器/n,学习/v,实战/n,（/w,一/m,）/w,版权/n,声明/n,：/w,本文/r,为/p,博主/nr,原创/b,文章/n,，/w,转载/v,请/v,指明/v,转载/v,地址/n,www/en,./w,cnblogs/en,./w,com/en,//w,fydeblog/en,//w,p/en,//w,7140974/m,./w,html/en,前言/n,这/r,篇/q,notebook/en,是/v,关于/p,机器/n,学习/v,中/f,监督/vn,学习/v,的/u,k/en,近邻/n,算法/n,，/w,将/d,介绍/v,2个/m,实例/n,，/w,分别/d,是/v,使用/v,k/en,-/w,近邻/n,算法/n,改进/v,约会/vn,网站/n,的/u,效果/n,和/c,手写/v,识别/v,系统/n,./w,操作系统/l,：/w,ubuntu/en,14.04/m, , , , ,运行/vn,环境/n,：/w,anaconda/en,-/w,python/en,2.7/m,-/w,notebook/en, , , , ,参考/v,书籍/n,：/w,机器/n,学习/v,实战/n, , , , , , ,notebook/en, , ,writer/en, ,----/nrf,方阳/nr,k/en,-/w,近邻/n,算法/n,（/w,knn/en,）/w,的/u,工作/vn,原理/n,：/w,存在/v,一个/m,样本/n,数据/n,集合/v,，/w,也/d,称作/v,训练/vn,样本/n,集/vg,，/w,并且/c,样本/n,集中/v,的/u,每个/r,数据/n,都/d,存在/v,标签/n,，/w,即/v,我们/r,知道/v,样本/n,集中/v,每/r,一组/mq,数据/n,与/p,所属/n,分类/vn,的/u,对应/v,关系/n,，/w,输入/v,没有/v,标签/n,的/u,新/a,数据/n,后/f,，/w,将/d,新/a,数据/n,的/u,每个/r,特征/n,与/p,样本/n,集中/v,数据/n,对应/v,的/u,特征/n,进行/v,比较/d,，/w,然后/c,算法/n,提取/v,样本/n,集中/v,特征/n,最/d,相似/a,的/u,分类/vn,标签/n,。/w,注意/v,事项/n,：/w,在/p,这里/r,说/v,一句/mq,，/w,默认/v,环境/n,python/en,2.7/m,的/u,notebook/en,，/w,用/p,python/en,3.6/m,的/u,会/v,出/v,问题/n,，/w,还有/v,我/r,的/u,目录/n,可能/v,跟/p,你们/r,的/u,不/d,一样/u,，/w,你们/r,自己/r,跑/v,的/u,时候/n,记得/v,改/v,目录/n,，/w,我/r,会/v,把/p,notebook/en,和/c,代码/n,以及/c,数据/n,集放/nw,到/v,结尾/v,的/u,百度/nt,云盘/nw,，/w,方便/a,你们/r,下载/v,！/w,1/m,./w,改进/v,约会/vn,网站/n,的/u,匹配/vn,效果/n,1/m,-/w,1/m,./w,准备/v,导入/v,数据/n,1/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,2/m, ,import/en, ,operator/en, ,3/m, ,4/m, ,def/en, ,createdataset/en,(/w,)/w,:/w, ,5/m, ,group/en, ,=/w, ,array/en,(/w,[/w,[/w,1.0/m,,/w,1.1/m,]/w,,/w,[/w,1.0/m,,/w,1.0/m,]/w,,/w,[/w,0/m,,/w,0/m,]/w,,/w,[/w,0/m,,/w,0.1/m,]/w,]/w,)/w, ,6/m, ,labels/en, ,=/w, ,[/w,'/w,a/en,'/w,,/w,'/w,a/en,'/w,,/w,'/w,b/en,'/w,,/w,'/w,b/en,'/w,]/w, ,7/m, ,return/en, ,group/en,,/w, ,labels/en,先/d,来/v,点/q,开胃/a,菜/n,，/w,在/p,上面/f,的/u,代码/n,中/f,，/w,我们/r,导入/v,了/u,两个/m,模块/n,，/w,一个/m,是/v,科学/n,计算/v,包/v,numpy/en,，/w,一个/m,是/v,运算/vn,符模块/nr,，/w,在/p,后面/f,都/d,会/v,用/p,到/v,，/w,在/p,createdataset/en,函数/n,中/f,，/w,我们/r,初始化/v,了/u,group/en,，/w,labels/en,，/w,我们/r,将/d,做/v,这样/r,一件/mq,事/n,，/w,[/w,1.0/m,,/w,1.1/m,]/w,和/c,[/w,1.0/m,,/w,1.0/m,]/w, ,对应/v,属于/v,labels/en,中/f, ,a/en, ,分类/vn,，/w,[/w,0/m,,/w,0/m,]/w,和/c,[/w,0/m,,/w,0.1/m,]/w,对应/v,属于/v,labels/en,中/f,的/u,b/en,分类/vn,，/w,我们/r,想/v,输入/v,一个/m,新/a,的/u,二维/nr,坐标/n,，/w,根据/p,上面/f,的/u,坐标/n,来/v,判断/v,新/a,的/u,坐标/n,属于/v,那/r,一类/mq,，/w,在/p,这/r,之前/f,，/w,我们/r,要/v,实现/v,k/en,-/w,近邻/n,算法/n,，/w,下面/f,就/d,开始/v,实现/v,1/m, ,def/en, ,classify/en,0/m,(/w,inx/en,,/w, ,dataset/en,,/w, ,labels/en,,/w, ,k/en,)/w,:/w, ,2/m, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,3/m, ,diffmat/en, ,=/w, ,tile/en,(/w,inx/en,,/w, ,(/w,datasetsize/en,,/w,1/m,)/w,)/w, ,-/w, ,dataset/en, ,4/m, ,sqdiffmat/en, ,=/w, ,diffmat/en,*/w,*/w,2/m, ,5/m, ,sqdistances/en, ,=/w, ,sqdiffmat/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,6/m, ,distances/en, ,=/w, ,sqdistances/en,*/w,*/w,0.5/m, ,7/m, ,sorteddistindicies/en, ,=/w, ,distances/en,./w,argsort/en,(/w,)/w, ,8/m, ,classcount/en,=/w,{/w,}/w, ,9/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,10/m, ,voteilabel/en, ,=/w, ,labels/en,[/w,sorteddistindicies/en,[/w,i/en,]/w,]/w, ,11/m, ,classcount/en,[/w,voteilabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,voteilabel/en,,/w,0/m,)/w, ,+/w, ,1/m, ,12/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,iteritems/en,(/w,)/w,,/w, ,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w, ,reverse/en,=/w,true/en,)/w, ,13/m, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w,代码/n,解析/v,：/w,函数/n,的/u,第一/m,行/v,是/v,要/v,得到/v,数据集/nw,的/u,数目/n,，/w,例如/v,group/en,./w,shape/en,就是/d,（/w,4/m,，/w,2/m,）/w,，/w,shape/en,[/w,0/m,]/w,反应/vn,数据集/nw,的/u,行/v,，/w,shape/en,[/w,1/m,]/w,反应/vn,列数/nw,函数/n,的/u,第二/m,行/v,是/v,array/en,对应/v,相减/nw,,/w,tile/en,会/v,生成/vn,关于/p,inx/en,的/u,datasetsize/en,大小/n,的/u,array/en,，/w,例如/v,，/w,inx/en,是/v,[/w,0/m,,/w,0/m,]/w,,/w,则/d,tile/en,(/w,inx/en,,/w,(/w,4/m,,/w,1/m,)/w,)/w,是/v,array/en,(/w,[/w,[/w,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,]/w,,/w,[/w,0/m,,/w, ,0/m,]/w,]/w,)/w,,/w,然后/c,与/p,dataset/en,对应/v,相减/nw,，/w,得到/v,新/a,的/u,array/en,函数/n,的/u,第三/nw,行/v,是/v,对/p,第二/m,步/q,的/u,结果/n,进行/v,平方算法/nw,，/w,方便/a,下/f,一步/mq,算/v,距离/n,函数/n,的/u,第四/nw,行/v,是/v,进行/v,求和/vn,，/w,注意/v,是/v,axis/en,=/w,1/m,，/w,也/d,就/d,是/v,array/en,每个/r,二维/nr,数组/n,成员/n,进行/v,求/v,和/c,(/w,行/v,求/v,和/c,)/w,，/w,如果/c,是/v,axis/en,=/w,0/m,就是/d,列求/nr,和/c,第五/nw,行/v,是/v,进行/v,平方/q,距离/n,的/u,开/v,根号/n,以上/f,5行/mq,实现/v,的/u,是/v,距离/n,的/u,计算/v, ,，/w,下面/f,的/u,是/v,选出/v,距离/n,最小/a,的/u,k/en,个/q,点/q,，/w,对/p,类别/n,进行/v,统计/v,，/w,返回/v,所/u,占/v,数目/n,多/a,的/u,类别/n,classcount/en,定义/n,为/p,存储/vn,字典/n,，/w,里面/f,有/v,‘/w,a/en,’/w,和/c,‘/w,b/en,’/w,，/w,它们/r,的/u,值/n,是/v,在/p,前/f,k/en,个/q,距离/n,最小/a,的/u,数据/n,集中/v,的/u,个数/n,，/w,本例/nw,最后/f,classcount/en,=/w,{/w,'/w,a/en,'/w,:/w,1/m,,/w,'/w,b/en,'/w,:/w,2/m,}/w,,/w,函数/n,argsort/en,是/v,返回/v,array/en,数组/n,从小到大/l,的/u,排列/v,的/u,序号/n,，/w,get/en,函数/n,返回/v,字典/n,的/u,键值/nr,，/w,由于/c,后面/f,加/v,了/u,1/m,，/w,所以/c,每次/r,出现/v,键值/nr,就/d,加/v,1/m,，/w,就/d,可以/v,就算/d,出/v,键值/nr,出现/v,的/u,次数/n,里/f,。/w,最后/f,通过/p,sorted/en,函数/n,将/d,classcount/en,字典/n,分解/v,为/p,列表/v,，/w,sorted/en,函数/n,的/u,第二/m,个/q,参数/n,导入/v,了/u,运算/vn,符模块/nr,的/u,itemgetter/en,方法/n,，/w,按照/p,第二/m,个/q,元素/n,的/u,次序/n,（/w,即/v,数字/n,）/w,进行/v,排序/vn,，/w,由于/c,此处/s,reverse/en,=/w,true/en,，/w,是/v,逆序/nw,，/w,所以/c,按照/p,从/p,大/a,到/v,小/a,的/u,次序/n,排列/v,。/w,1/m,-/w,2/m,./w,准备/v,数据/n,：/w,从/p,文本/n,中/f,解析/v,数据/n,这/r,上面/f,是/v,k/en,-/w,近邻/n,的/u,一个/m,小/a,例子/n,，/w,我/r,的/u,标题/n,还/d,没/d,介绍/v,，/w,现在/t,来/v,介绍/v,标题/n,，/w,准备/v,数据/n,，/w,一般/a,都/d,是/v,从/p,文本/n,文件/n,中/f,解析/v,数据/n,，/w,还是/c,从/p,一个/m,例子/n,开始/v,吧/y,！/w,本次/r,例子/n,是/v,改进/v,约会/vn,网站/n,的/u,效果/n,，/w,我们/r,定义/n,三个/m,特征/n,来/v,判别/vn,三种/mq,类型/n,的/u,人/n,特征/n,一/m,：/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,特征/n,二/m,：/w,玩/v,视频/n,游戏/n,所/u,耗/v,时间/n,百分比/n,特征/n,三/m,：/w,每周/r,消费/vn,的/u,冰淇淋/n,公升/q,数/m,根据/p,以上/f,三个/m,特征/n,：/w,来/v,判断/v,一个/m,人/n,是否/v,是/v,自己/r,不/d,喜欢/v,的/u,人/n,，/w,还是/c,魅力/n,一般/a,的/u,人/n,，/w,还是/c,极/d,具/vg,魅力/n,的/u,人/n,于是/c,，/w,收集/v,了/u,1000个/m,样本/n,，/w,放/v,在/p,datingtestset/en,2/m,./w,txt/en,中/f,，/w,共有/v,1000行/mq,，/w,每/r,一行/n,有/v,四列/mq,，/w,前/f,三列/mq,是/v,特征/n,，/w,后/f,三列/mq,是/v,从属/vn,那/r,一类/mq,人/n,，/w,于是/c,问题/n,来/v,了/u,，/w,我们/r,这个/r,文本/n,文件/n,的/u,输入/v,导入/v,到/v,python/en,中/f,来/v,处理/v,，/w,于是/c,需要/v,一个/m,转换/v,函数/n,file/en,2/m,matrix/en,，/w,函数/n,输入/v,是/v,文件/n,名字/n,字符/n,串/v,，/w,输出/v,是/v,训练/vn,样本/n,矩阵/n,（/w,特征/n,矩阵/n,）/w,和/c,类/q,标签/n,向/p,量/n,1/m, ,def/en, ,file/en,2/m,matrix/en,(/w,filename/en,)/w,:/w, ,2/m, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,3/m, ,numberoflines/en, ,=/w, ,len/en,(/w,fr/en,./w,readlines/en,(/w,)/w,)/w, ,#,get/en, ,the/en, ,number/en, ,of/en, ,lines/en, ,in/en, ,the/en, ,file/en, ,4/m, ,returnmat/en, ,=/w, ,zeros/en,(/w,(/w,numberoflines/en,,/w,3/m,)/w,)/w, ,#,prepare/en, ,matrix/en, ,to/en, ,return/en, ,5/m, ,classlabelvector/en, ,=/w, ,[/w,]/w, ,#,prepare/en, ,labels/en, ,return/en, ,6/m, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,7/m, ,index/en, ,=/w, ,0/m, ,8/m, ,for/en, ,line/en, ,in/en, ,fr/en,./w,readlines/en,(/w,)/w,:/w, ,9/m, ,line/en, ,=/w, ,line/en,./w,strip/en,(/w,)/w, ,10/m, ,listfromline/en, ,=/w, ,line/en,./w,split/en,(/w,'/w,\/w,t/en,'/w,)/w, ,11/m, ,returnmat/en,[/w,index/en,,/w,:/w,]/w, ,=/w, ,listfromline/en,[/w,0/m,:/w,3/m,]/w, ,12/m, ,classlabelvector/en,./w,append/en,(/w,int/en,(/w,listfromline/en,[/w,-/w,1/m,]/w,)/w,)/w, ,13/m, ,index/en, ,+/w,=/w, ,1/m, ,14/m, ,return/en, ,returnmat/en,,/w,classlabelvector/en,这个/r,函数/n,比较/d,简单/a,，/w,就/d,不/d,详细/ad,说明/v,里/f,，/w,这里/r,只/d,介绍/v,以下/f,一些/m,函数/n,的/u,功能/n,吧/y,！/w,open/en,函数/n,是/v,打开/v,文件/n,，/w,里面/f,必须/d,是/v,字符/n,串/v,，/w,由于/c,后面/f,没/d,加/v,‘/w,w/en,’/w,，/w,所以/c,是/v,读/v,文件/n,readlines/en,函数/n,是/v,一次/mq,读/v,完/v,文件/n,，/w,通过/p,len/en,函数/n,就/d,得到/v,文件/n,的/u,行数/n,zeros/en,函数/n,是/v,生成/vn,numberoflines/en, ,x/en, ,3/m,的/u,矩阵/n,，/w,是/v,array/en,型/k,的/u,strip/en,函数/n,是/v,截掉/nw,所有/b,的/u,回车/v,符/vg,split/en,函数/n,是/v,以/p,输入/v,参数/n,为/p,分隔符/n,，/w,输出/v,分割/v,后/f,的/u,数据/n,，/w,本例/nw,是/v,制/v,表键/nr,，/w,最后/f,输出/v,元素/n,列表/v,append/en,函数/n,是/v,向/p,列表/v,中/f,加入/v,数据/n,1/m,-/w,3/m,./w,分析/vn,数据/n,：/w,使用/v,matplotlib/en,创建/v,散点/nw,图/n,首先/d,，/w,从/p,上/f,一步/mq,得到/v,训练/vn,样本/n,矩阵/n,和/c,类/q,标签/n,向/p,量/n,,/w,先/d,更换/v,一下/m,路径/n,cd/en, ,//w,home/en,//w,fangyang/en,//w,桌面/n,//w,machinelearninginaction/en,//w,ch/en,02/m,//w,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,datingtestset/en,2/m,./w,txt/en,'/w,)/w,1/m, ,import/en, ,matplotlib/en, ,2/m, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,3/m, ,fig/en, ,=/w, ,plt/en,./w,figure/en,(/w,)/w, ,4/m, ,ax/en, ,=/w, ,fig/en,./w,add/en,_,subplot/en,(/w,111/m,)/w, ,5/m, ,ax/en,./w,scatter/en,(/w,datingdatamat/en,[/w,:/w,,/w,0/m,]/w,,/w, ,datingdatamat/en,[/w,:/w,,/w,1/m,]/w,,/w, ,15.0/m,*/w,array/en,(/w,datinglabels/en,)/w,,/w, ,15.0/m,*/w,array/en,(/w,datinglabels/en,)/w,)/w, ,#,scatter/en,函数/n,是/v,用/p,来/v,画/v,散点/nw,图/n,的/u, ,6/m, ,plt/en,./w,show/en,(/w,)/w,结果/n,显示/v,1/m,-/w,4/m,./w, ,准备/v,数据/n,：/w, ,归/v,一化/nw,处理/v,我们/r,从/p,上图/n,可以/v,上出/nw,，/w,横/v,坐标/n,的/u,特征/n,值/n,是/v,远/a,大于/nrf,纵/c,坐标/n,的/u,特征/n,值/n,的/u,，/w,这样/r,再/d,算/v,新/a,数据/n,和/c,数据集/nw,的/u,数据/n,的/u,距离/n,时/ng,，/w,数字/n,差值/n,最/d,大/a,的/u,属性/n,对/p,计算/v,结果/n,的/u,影响/vn,最/d,大/a,，/w,我们/r,就/d,可能/v,会/v,丢失/v,掉/v,其他/r,属性/n,，/w,例如/v,这个/r,例子/n,，/w,每年/r,获取/v,的/u,飞行/vn,常客/n,里程/n,数/m,对/p,计算/v,结果/n,的/u,影响/vn,远/a,大于/nrf,其余/r,两个/m,特征/n,，/w,这/r,是/v,我们/r,不/d,想/v,看到/v,的/u,，/w,所以/c,这里/r,采用/v,归/v,一化/nw,数值/n,处理/v,，/w,也/d,叫/v,特征/n,缩放/v,，/w,用于/v,将/d,特征/n,缩放/v,到/v,同一个/r,范围/n,内/f,。/w,本例/nw,的/u,缩放/v,公式/n, , , , ,newvalue/en, ,=/w, ,(/w,oldvalue/en, ,-/w, ,min/en,)/w, ,//w, ,(/w,max/en, ,-/w, ,min/en,)/w,其中/r,min/en,和/c,max/en,是/v,数据/n,集中/v,的/u,最/d,小/a,特征/n,值/n,和/c,最/d,大/a,特征/n,值/n,。/w,通过/p,该/r,公式/n,可/v,将/d,特征/n,缩放/v,到/v,区间/n,（/w,0/m,，/w,1/m,）/w,下面/f,是/v,特征/n,缩放/v,的/u,代码/n,1/m, ,def/en, ,autonorm/en,(/w,dataset/en,)/w,:/w, ,2/m, ,minvals/en, ,=/w, ,dataset/en,./w,min/en,(/w,0/m,)/w, ,3/m, ,maxvals/en, ,=/w, ,dataset/en,./w,max/en,(/w,0/m,)/w, ,4/m, ,ranges/en, ,=/w, ,maxvals/en, ,-/w, ,minvals/en, ,5/m, ,normdataset/en, ,=/w, ,zeros/en,(/w,shape/en,(/w,dataset/en,)/w,)/w, ,6/m, ,m/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,7/m, ,normdataset/en, ,=/w, ,dataset/en, ,-/w, ,tile/en,(/w,minvals/en,,/w, ,(/w,m/en,,/w,1/m,)/w,)/w, ,8/m, ,normdataset/en, ,=/w, ,normdataset/en,//w,tile/en,(/w,ranges/en,,/w, ,(/w,m/en,,/w,1/m,)/w,)/w, ,#,element/en, ,wise/en, ,divide/en, ,9/m, ,return/en, ,normdataset/en,,/w, ,ranges/en,,/w, ,minvalsnormdataset/en,（/w,1000/m, ,x/en, ,3/m,）/w,是/v,归/v,一化/nw,后/f,的/u,数据/n,，/w,range/en,（/w,1/m,x/en,3/m,）/w,是/v,特征/n,的/u,范围/n,差/a,（/w,即/v,最/d,大/a,值/n,减去/v,最小值/nz,）/w,，/w,minvals/en,（/w,1/m,x/en,3/m,）/w,是/v,最小值/nz,。/w,原理/n,上面/f,已/d,介绍/v,，/w,这里/r,不/d,在/p,复述/vn,。/w,1/m,-/w,5/m,./w,测试/vn,算法/n,：/w,作为/v,完整/a,程序/n,验证/vn,分类器/nw,好/a,了/u,，/w,我们/r,已经/d,有/v,了/u,k/en,-/w,近邻/n,算法/n,、/w,从/p,文本/n,解析/v,出/v,数据/n,、/w,还有/v,归/v,一化/nw,处理/v,，/w,现在/t,可以/v,使用/v,之前/f,的/u,数据/n,进行/v,测试/vn,了/u,，/w,测试/vn,代码/n,如下/v,1/m, ,def/en, ,datingclasstest/en,(/w,)/w,:/w, ,2/m, ,horatio/en, ,=/w, ,0.50/m, ,3/m, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,datingtestset/en,2/m,./w,txt/en,'/w,)/w, ,#,load/en, ,data/en, ,setfrom/en, ,file/en, ,4/m, ,normmat/en,,/w, ,ranges/en,,/w, ,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,5/m, ,m/en, ,=/w, ,normmat/en,./w,shape/en,[/w,0/m,]/w, ,6/m, ,numtestvecs/en, ,=/w, ,int/en,(/w,m/en,*/w,horatio/en,)/w, ,7/m, ,errorcount/en, ,=/w, ,0.0/m, ,8/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtestvecs/en,)/w,:/w, ,9/m, ,classifierresult/en, ,=/w, ,classify/en,0/m,(/w,normmat/en,[/w,i/en,,/w,:/w,]/w,,/w,normmat/en,[/w,numtestvecs/en,:/w,m/en,,/w,:/w,]/w,,/w,datinglabels/en,[/w,numtestvecs/en,:/w,m/en,]/w,,/w,3/m,)/w, ,10/m, ,print/en, ,"/w,the/en, ,classifier/en, ,came/en, ,back/en, ,with/en,:/w, ,%/w,d/en,,/w, ,the/en, ,real/en, ,answer/en, ,is/en,:/w, ,%/w,d/en,"/w, ,%/w, ,(/w,classifierresult/en,,/w, ,datinglabels/en,[/w,i/en,]/w,)/w, ,11/m, ,if/en, ,(/w,classifierresult/en, ,!/w,=/w, ,datinglabels/en,[/w,i/en,]/w,)/w,:/w, ,errorcount/en, ,+/w,=/w, ,1.0/m, ,12/m, ,print/en, ,"/w,the/en, ,total/en, ,error/en, ,rate/en, ,is/en,:/w, ,%/w,f/en,"/w, ,%/w, ,(/w,errorcount/en,//w,float/en,(/w,numtestvecs/en,)/w,)/w, ,13/m, ,print/en, ,errorcount/en,这里/r,函数/n,用/p,到/v,里/f,之前/f,讲/v,的/u,三个/m,函数/n,：/w,file/en,2/m,matrix/en,、/w,autonorm/en,和/c,classify/en,0/m,./w,这个/r,函数/n,将/d,数据/n,集分/nw,成/v,两个/m,部分/n,，/w,一部分/m,当作/v,分类器/nw,的/u,训练/vn,样本/n,，/w,一部分/m,当作/v,测试/vn,样本/n,，/w,通过/p,horatio/en,进行/v,控制/v,，/w,函数/n,horatio/en,是/v,0.5/m,，/w,它/r,与/p,样本/n,总数/n,相乘/v,，/w,将/d,数据集/nw,平分/v,，/w,如果/c,想/v,把/p,训练/vn,样本/n,调大/nw,一些/m,，/w,可/v,增大/v,horatio/en,，/w,但/c,最好/d,不要/d,超过/v,0.8/m,，/w,以免/c,测试/vn,样本/n,过/u,少/a,，/w,在/p,函数/n,的/u,最后/f,，/w,加/v,了/u,错误/n,累加/v,部分/n,，/w,预测/v,出来/v,的/u,结果/n,不/d,等于/v,实际/n,结果/n,，/w,errorcount/en,就/d,加/v,1/m,，/w,然后/c,最后/f,除/p,以/p,总数/n,就/d,得到/v,错误/n,的/u,概率/n,。/w,说/v,了/u,这么/r,多/a,，/w,都/d,还/d,没有/v,测试/vn,以下/f,，/w,下面/f,来/v,测试/vn,一下/m,！/w,先/d,从/p,简单/a,的/u,开始/v,(/w,已/d,将/d,上面/f,的/u,函数/n,放在/v,knn/en,./w,py/en,中/f,了/u,)/w,1/m, ,import/en, ,knn/en, ,2/m, ,group/en, ,,/w, ,labels/en, ,=/w, ,knn/en,./w,createdataset/en,(/w,)/w,group/en, , , ,#,结果/n,在/p,下/f,array/en,(/w,[/w,[/w, ,1/m,./w, ,,/w, ,1.1/m,]/w,,/w, ,[/w, ,1/m,./w, ,,/w, ,1/m,./w, ,]/w,,/w, ,[/w, ,0/m,./w, ,,/w, ,0/m,./w, ,]/w,,/w, ,[/w, ,0/m,./w, ,,/w, ,0.1/m,]/w,]/w,)/w,labels/en, , ,#,结果/n,在/p,下/f,[/w,'/w,a/en,'/w,,/w, ,'/w,a/en,'/w,,/w, ,'/w,b/en,'/w,,/w, ,'/w,b/en,'/w,]/w,这个/r,小/a,例子/n,最/d,开始/v,提/v,过/u,，/w,有/v,两个/m,分类/vn,a/en,和/c,b/en,，/w,通过/p,上面/f,的/u,group/en,为/p,训练/vn,样本/n,，/w,测试/vn,新/a,的/u,数据/n,属于/v,那/r,一类/mq,1/m, ,knn/en,./w,classify/en,0/m,(/w,[/w,0/m,,/w,0/m,]/w,,/w, ,group/en,,/w, ,labels/en,,/w, ,3/m,)/w, ,#,使用/v,k/en,-/w,近邻/n,算法/n,进行/v,测试/vn,'/w,b/en,'/w, , , , ,#,结果/n,是/v,b/en,分类/vn,直观/a,地/u,可以/v,看出/v,[/w,0/m,,/w,0/m,]/w,是/v,与/p,b/en,所在/n,的/u,样本/n,更/d,近/a,，/w,下面/f,来/v,测试/vn,一下/m,约会/vn,网站/n,的/u,匹配/vn,效果/n,先/d,将/d,文本/n,中/f,的/u,数据导/nw,出来/v,，/w,由于/c,前面/f,在/p,分析/vn,数据/n,画图/v,的/u,时候/n,已经/d,用/p,到/v,里/f,file/en,2/m,matrix/en,，/w,这里/r,就/d,不/d,重复/v,用/p,了/u,。/w,datingdatamat/en, , , ,#,结果/n,在/p,下/f,array/en,(/w,[/w,[/w, ,4.09200000/m,e/en,+/w,04/m,,/w, ,8.32697600/m,e/en,+/w,00/m,,/w, ,9.53952000/m,e/en,-/w,01/m,]/w,,/w, ,[/w, ,1.44880000/m,e/en,+/w,04/m,,/w, ,7.15346900/m,e/en,+/w,00/m,,/w, ,1.67390400/m,e/en,+/w,00/m,]/w,,/w, ,[/w, ,2.60520000/m,e/en,+/w,04/m,,/w, ,1.44187100/m,e/en,+/w,00/m,,/w, ,8.05124000/m,e/en,-/w,01/m,]/w,,/w, ,./w,./w,./w,,/w, ,[/w, ,2.65750000/m,e/en,+/w,04/m,,/w, ,1.06501020/m,e/en,+/w,01/m,,/w, ,8.66627000/m,e/en,-/w,01/m,]/w,,/w, ,[/w, ,4.81110000/m,e/en,+/w,04/m,,/w, ,9.13452800/m,e/en,+/w,00/m,,/w, ,7.28045000/m,e/en,-/w,01/m,]/w,,/w, ,[/w, ,4.37570000/m,e/en,+/w,04/m,,/w, ,7.88260100/m,e/en,+/w,00/m,,/w, ,1.33244600/m,e/en,+/w,00/m,]/w,]/w,)/w,datinglabels/en, , ,#,由于/c,过/u,长/a,，/w,只/d,截取/v,一部分/m,，/w,详细/ad,去/v,看/v,jupyter/en, ,notebook/en,然后/c,对/p,数据/n,进行/v,归/v,一化/nw,处理/v,1/m, ,normmat/en, ,,/w, ,ranges/en, ,,/w, ,minvals/en, ,=/w, ,knn/en,./w,autonorm/en,(/w,datingdatamat/en,)/w, ,#,使用/v,归/v,一化/nw,函数/n,normmatarray/en,(/w,[/w,[/w, ,0.44832535/m,,/w, ,0.39805139/m,,/w, ,0.56233353/m,]/w,,/w, ,[/w, ,0.15873259/m,,/w, ,0.34195467/m,,/w, ,0.98724416/m,]/w,,/w, ,[/w, ,0.28542943/m,,/w, ,0.06892523/m,,/w, ,0.47449629/m,]/w,,/w, ,./w,./w,./w,,/w, ,[/w, ,0.29115949/m,,/w, ,0.50910294/m,,/w, ,0.51079493/m,]/w,,/w, ,[/w, ,0.52711097/m,,/w, ,0.43665451/m,,/w, ,0.4290048/m, ,]/w,,/w, ,[/w, ,0.47940793/m,,/w, ,0.3768091/m, ,,/w, ,0.78571804/m,]/w,]/w,)/w,rangesarray/en,(/w,[/w, ,9.12730000/m,e/en,+/w,04/m,,/w, ,2.09193490/m,e/en,+/w,01/m,,/w, ,1.69436100/m,e/en,+/w,00/m,]/w,)/w,minvalsarray/en,(/w,[/w, ,0/m,./w, ,,/w, ,0/m,./w, ,,/w, ,0.001156/m,]/w,)/w,最后/f,进行/v,测试/vn,，/w,运行/vn,之前/f,的/u,测试/vn,函数/n,datingclasstest/en,1/m, ,knn/en,./w,datingclasstest/en,(/w,)/w,由于/c,过/u,长/a,，/w,只/d,截取/v,一部分/m,，/w,详细/ad,去/v,看/v,jupyter/en, ,notebook/en,可以/v,看到/v,上面/f,结果/n,出现/v,错误/n,32个/m,，/w,错误率/n,6.4%/mq,，/w,所以/c,这个/r,系统/n,还/d,算/v,不错/a,！/w,1/m,-/w,6/m,./w,系统/n,实现/v,我们/r,可以/v,看到/v,，/w,测试/vn,固然/c,不错/a,，/w,但/c,用户/n,交互式/n,很/d,差/a,，/w,所以/c,结合/v,上面/f,，/w,我们/r,要/v,写/v,一个/m,完整/a,的/u,系统/n,，/w,代码/n,如下/v,：/w,1/m, ,def/en, ,classifyperson/en,(/w,)/w,:/w, ,2/m, ,resultlist/en, ,=/w, ,[/w,'/w,not/en, ,at/en, ,all/en,'/w,,/w, ,'/w,in/en, ,small/en, ,doses/en,'/w,,/w, ,'/w,in/en, ,large/en, ,doses/en,'/w,]/w, ,3/m, ,percenttats/en, ,=/w, ,float/en,(/w,raw/en,_,input/en,(/w,"/w,percentage/en, ,of/en, ,time/en, ,spent/en, ,playing/en, ,video/en, ,games/en,?/w,"/w,)/w,)/w, ,4/m, ,ffmiles/en, ,=/w, ,float/en,(/w,raw/en,_,input/en,(/w,"/w,frequent/en, ,flier/en, ,miles/en, ,earned/en, ,per/en, ,year/en,?/w,"/w,)/w,)/w, ,5/m, ,icecream/en, ,=/w, ,float/en,(/w,raw/en,_,input/en,(/w,"/w,liters/en, ,of/en, ,ice/en, ,cream/en, ,consumed/en, ,per/en, ,year/en,?/w,"/w,)/w,)/w, ,6/m, ,datingdatamat/en,,/w, ,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,datingtestset/en,2/m,./w,txt/en,'/w,)/w, ,7/m, ,normmat/en,,/w, ,ranges/en,,/w, ,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,8/m, ,inarr/en, ,=/w, ,array/en,(/w,[/w,ffmiles/en,,/w, ,percenttats/en,,/w, ,icecream/en,]/w,)/w, ,9/m, ,classifierresult/en, ,=/w, ,classify/en,0/m,(/w,(/w,inarr/en,-/w,minvals/en,)/w,//w,ranges/en,,/w, ,normmat/en,,/w, ,datinglabels/en,,/w,3/m,)/w, ,10/m, ,print/en, ,"/w,you/en, ,will/en, ,probably/en, ,like/en, ,this/en, ,person/en,"/w, ,,/w, ,resultlist/en,[/w,classifierresult/en, ,-/w, ,1/m,]/w,运行/vn,情况/n,1/m, ,knn/en,./w,classifyperson/en,(/w,)/w,percentage/en, ,of/en, ,time/en, ,spent/en, ,playing/en, ,video/en, ,games/en,?/w,10/m, , , ,#,这里/r,的/u,数字/n,都/d,是/v,用户/n,自己/r,输入/v,的/u, ,frequent/en, ,flier/en, ,miles/en, ,earned/en, ,per/en, ,year/en,?/w,10000/m, ,liters/en, ,of/en, ,ice/en, ,cream/en, ,consumed/en, ,per/en, ,year/en,?/w,0.5/m, ,you/en, ,will/en, ,probably/en, ,like/en, ,this/en, ,person/en, ,in/en, ,small/en, ,doses/en,这个/r,就/d,是/v,由/p,用户/n,自己/r,输出/v,参数/n,，/w,并/c,判断/v,出/v,感/vg,兴趣/n,程度/n,，/w,非常/d,友好/a,2/m,./w, ,手写/v,识别/v,系统/n,下面/f,再/d,介绍/v,一个/m,例子/n,，/w,也/d,是/v,用/p,k/en,-/w,近邻/n,算法/n,，/w,去/v,实现/v,对/p,一个/m,数字/n,的/u,判断/v,，/w,首先/d,我们/r,是/v,将/d,宽高/nw,是/v,32/m,x/en,32/m,的/u,像素/n,的/u,黑白/b,图像/n,转换/v,成/v,文本/n,文件/n,存储/vn,，/w,但/c,我们/r,知道/v,文本/n,文件/n,必须/d,转换/v,成/v,特征/n,向量/n,，/w,才/d,能/v,进入/v,k/en,-/w,近邻/n,算法/n,中/f,进行/v,处理/v,，/w,所以/c,我们/r,需要/v,一个/m,img/en,2/m,vector/en,函数/n,去/v,实现/v,这个/r,功能/n,!/w,img/en,2/m,vector/en,代码/n,如下/v,：/w,1/m, ,def/en, ,img/en,2/m,vector/en,(/w,filename/en,)/w,:/w, ,2/m, ,returnvect/en, ,=/w, ,zeros/en,(/w,(/w,1/m,,/w,1024/m,)/w,)/w, ,3/m, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,4/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,32/m,)/w,:/w, ,5/m, ,linestr/en, ,=/w, ,fr/en,./w,readline/en,(/w,)/w, ,6/m, ,for/en, ,j/en, ,in/en, ,range/en,(/w,32/m,)/w,:/w, ,7/m, ,returnvect/en,[/w,0/m,,/w,32/m,*/w,i/en,+/w,j/en,]/w, ,=/w, ,int/en,(/w,linestr/en,[/w,j/en,]/w,)/w, ,8/m, ,return/en, ,returnvect/en,这个/r,函数/n,挺/d,简单/a,的/u,，/w,先/d,用/p,zeros/en,生成/vn,1024/m,的/u,一维/mq,array/en,，/w,然后/c,用/p,两重/mq,循环/vn,，/w,外/f,循环/vn,以/p,行/v,递进/v,，/w,内/f,循环/vn,以/p,列/v,递进/v,，/w,将/d,32/m,x/en,32/m,的/u,文本/n,数据/n,依次/d,赋值/v,给/p,returnvect/en,好/a,了/u,，/w,转换/v,函数/n,写/v,好/a,了/u,，/w,说/v,一下/m,训练集/nw,和/c,测试/vn,集/vg,，/w,所有/b,的/u,训练集/nw,都/d,放/v,在/p,trainingdigits/en,文件夹/n,中/f,，/w,测试/vn,集放/nw,在/p,testdigits/en,文件夹/n,中/f,，/w,训练集/nw,有/v,两千/nw,个/q,样本/n,，/w,0/m,～/w,9/m,各/r,有/v,200个/m,，/w,测试/vn,集/vg,大约/d,有/v,900个/m,样本/n,，/w,这里/r,注意/v,一点/m,，/w,所有/b,在/p,文件夹/n,里/f,的/u,命名/v,方式/n,是/v,有/v,要求/v,的/u,，/w,我们/r,是/v,通过/p,命名/v,方式/n,来/v,解析/v,出/v,它/r,的/u,真实/a,数字/n,，/w,然后/c,与/p,通过/p,k/en,-/w,近邻/n,算法/n,得出/v,的/u,结果/n,相/d,对比/v,，/w,例如/v,945/m,./w,txt/en,，/w,这里/r,的/u,数字/n,是/v,9/m,，/w,连接符/n,前面/f,的/u,数字/n,就/d,是/v,这个/r,样本/n,的/u,真实/a,数据/n,。/w,该/r,系统/n,实现/v,的/u,方法/n,与/p,前面/f,的/u,约会/vn,网站/n,的/u,类似/v,，/w,就/d,不/d,多/a,说/v,了/u,。/w,系统/n,测试/vn,代码/n,如下/v,1/m, ,def/en, ,handwritingclasstest/en,(/w,)/w,:/w, ,2/m, ,hwlabels/en, ,=/w, ,[/w,]/w, ,3/m, ,trainingfilelist/en, ,=/w, ,listdir/en,(/w,'/w,trainingdigits/en,'/w,)/w, ,#,load/en, ,the/en, ,training/en, ,set/en, ,4/m, ,m/en, ,=/w, ,len/en,(/w,trainingfilelist/en,)/w, ,5/m, ,trainingmat/en, ,=/w, ,zeros/en,(/w,(/w,m/en,,/w,1024/m,)/w,)/w, ,6/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,m/en,)/w,:/w, ,7/m, ,filenamestr/en, ,=/w, ,trainingfilelist/en,[/w,i/en,]/w, ,8/m, ,filestr/en, ,=/w, ,filenamestr/en,./w,split/en,(/w,'/w,./w,'/w,)/w,[/w,0/m,]/w, ,#,take/en, ,off/en, ,./w,txt/en, ,9/m, ,classnumstr/en, ,=/w, ,int/en,(/w,filestr/en,./w,split/en,(/w,'/w,_,'/w,)/w,[/w,0/m,]/w,)/w, ,10/m, ,hwlabels/en,./w,append/en,(/w,classnumstr/en,)/w, ,11/m, ,trainingmat/en,[/w,i/en,,/w,:/w,]/w, ,=/w, ,img/en,2/m,vector/en,(/w,'/w,trainingdigits/en,//w,%/w,s/en,'/w, ,%/w, ,filenamestr/en,)/w, ,12/m, ,testfilelist/en, ,=/w, ,listdir/en,(/w,'/w,testdigits/en,'/w,)/w, ,#,iterate/en, ,through/en, ,the/en, ,test/en, ,set/en, ,13/m, ,errorcount/en, ,=/w, ,0.0/m, ,14/m, ,mtest/en, ,=/w, ,len/en,(/w,testfilelist/en,)/w, ,15/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,mtest/en,)/w,:/w, ,16/m, ,filenamestr/en, ,=/w, ,testfilelist/en,[/w,i/en,]/w, ,17/m, ,filestr/en, ,=/w, ,filenamestr/en,./w,split/en,(/w,'/w,./w,'/w,)/w,[/w,0/m,]/w, ,#,take/en, ,off/en, ,./w,txt/en, ,18/m, ,classnumstr/en, ,=/w, ,int/en,(/w,filestr/en,./w,split/en,(/w,'/w,_,'/w,)/w,[/w,0/m,]/w,)/w, ,19/m, ,vectorundertest/en, ,=/w, ,img/en,2/m,vector/en,(/w,'/w,testdigits/en,//w,%/w,s/en,'/w, ,%/w, ,filenamestr/en,)/w, ,20/m, ,classifierresult/en, ,=/w, ,classify/en,0/m,(/w,vectorundertest/en,,/w, ,trainingmat/en,,/w, ,hwlabels/en,,/w, ,3/m,)/w, ,21/m, ,print/en, ,"/w,the/en, ,classifier/en, ,came/en, ,back/en, ,with/en,:/w, ,%/w,d/en,,/w, ,the/en, ,real/en, ,answer/en, ,is/en,:/w, ,%/w,d/en,"/w, ,%/w, ,(/w,classifierresult/en,,/w, ,classnumstr/en,)/w, ,22/m, ,if/en, ,(/w,classifierresult/en, ,!/w,=/w, ,classnumstr/en,)/w,:/w, ,errorcount/en, ,+/w,=/w, ,1.0/m, ,23/m, ,print/en, ,"/w,\/w,nthe/en, ,total/en, ,number/en, ,of/en, ,errors/en, ,is/en,:/w, ,%/w,d/en,"/w, ,%/w, ,errorcount/en, ,24/m, ,print/en, ,"/w,\/w,nthe/en, ,total/en, ,error/en, ,rate/en, ,is/en,:/w, ,%/w,f/en,"/w, ,%/w, ,(/w,errorcount/en,//w,float/en,(/w,mtest/en,)/w,)/w,这里/r,的/u,listdir/en,是从/v,os/en,模块/n,导入/v,的/u,，/w,它/r,的/u,功能/n,是/v,列出/v,给/p,定/v,目录/n,下/f,的/u,所有/b,文件/n,名/q,，/w,以/p,字符/n,串/v,形式/n,存放/v,，/w,输出/v,是/v,一个/m,列表/v,这里/r,的/u,split/en,函数/n,是/v,要/v,分离/v,符号/n,，/w,得到/v,该/r,文本/n,的/u,真实/a,数据/n,，/w,第一/m,个/q,split/en,函数/n,是/v,以/p,小数点/n,为/p,分隔符/n,，/w,例如/v,‘/w,1/m,_,186/m,./w,txt/en,’/w, ,,/w,就/d,变成/v,了/u,[/w,'/w,1/m,_,186/m,'/w,,/w,'/w,txt/en,'/w,]/w,,/w,然后/c,取出/v,第一/m,个/q,，/w,就/d,截掉/nw,了/u,./w,txt/en,,/w,第二/m,个/q,split/en,函数/n,是/v,以/p,连接符/n,_,为/p,分隔符/n,，/w,就/d,截掉/nw,后面/f,的/u,序号/n,，/w,剩下/v,前面/f,的/u,字符/n,数据/n,‘/w,1/m,’/w,，/w,然后/c,转/v,成/v,int/en,型/k,就/d,得到/v,了/u,它/r,的/u,真实/a,数据/n,，/w,其他/r,的/u,没什么/l,，/w,跟/p,前面/f,一样/u,下面/f,开始/v,测试/vn,1/m, ,knn/en,./w,handwritingclasstest/en,(/w,)/w,我们/r,可以/v,看到/v,最后/f,结果/n,，/w,错误率/n,1.2%/mq,,/w, ,可/v,见/v,效果/n,还/d,不错/a,！/w,这里/r,把/p,整个/b,knn/en,./w,py/en,文件/n,贴/v,出来/v,，/w,主要/b,是/v,上面/f,已经/d,介绍/v,的/u,函数/n,'/w,'/w,'/w, ,input/en,:/w, ,inx/en,:/w, ,vector/en, ,to/en, ,compare/en, ,to/en, ,existing/en, ,dataset/en, ,(/w,1/m,xn/en,)/w, ,dataset/en,:/w, ,size/en, ,m/en, ,data/en, ,set/en, ,of/en, ,known/en, ,vectors/en, ,(/w,nxm/en,)/w, ,labels/en,:/w, ,data/en, ,set/en, ,labels/en, ,(/w,1/m,xm/en, ,vector/en,)/w, ,k/en,:/w, ,number/en, ,of/en, ,neighbors/en, ,to/en, ,use/en, ,for/en, ,comparison/en, ,(/w,should/en, ,be/en, ,an/en, ,odd/en, ,number/en,)/w, ,output/en,:/w, ,the/en, ,most/en, ,popular/en, ,class/en, ,label/en, ,'/w,'/w,'/w, ,from/en, ,numpy/en, ,import/en, ,*/w, ,import/en, ,operator/en, ,from/en, ,os/en, ,import/en, ,listdir/en, ,def/en, ,classify/en,0/m,(/w,inx/en,,/w, ,dataset/en,,/w, ,labels/en,,/w, ,k/en,)/w,:/w, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,diffmat/en, ,=/w, ,tile/en,(/w,inx/en,,/w, ,(/w,datasetsize/en,,/w,1/m,)/w,)/w, ,-/w, ,dataset/en, ,sqdiffmat/en, ,=/w, ,diffmat/en,*/w,*/w,2/m, ,sqdistances/en, ,=/w, ,sqdiffmat/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,distances/en, ,=/w, ,sqdistances/en,*/w,*/w,0.5/m, ,sorteddistindicies/en, ,=/w, ,distances/en,./w,argsort/en,(/w,)/w, ,classcount/en,=/w,{/w,}/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,voteilabel/en, ,=/w, ,labels/en,[/w,sorteddistindicies/en,[/w,i/en,]/w,]/w, ,classcount/en,[/w,voteilabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,voteilabel/en,,/w,0/m,)/w, ,+/w, ,1/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,iteritems/en,(/w,)/w,,/w, ,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w, ,reverse/en,=/w,true/en,)/w, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,def/en, ,createdataset/en,(/w,)/w,:/w, ,group/en, ,=/w, ,array/en,(/w,[/