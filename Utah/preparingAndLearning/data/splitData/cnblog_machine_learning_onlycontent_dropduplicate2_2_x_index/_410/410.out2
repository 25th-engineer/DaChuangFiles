因为/c,协同/v,过滤/v,内容/n,比较/d,多/a,，/w,就/d,新/a,开/v,一篇/mq,文章/n,啦/y,~/w,~/w,聚类/nw,和/c,线性/n,回归/v,的/u,实战/n,，/w,可以/v,看/v,：/w,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,charlesblc/en,//w,p/en,//w,6159187/m,./w,html/en,协同/v,过滤/v,实战/n,，/w,仍然/d,参考/v,：/w,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,shishanyuan/en,//w,p/en,//w,4747778/m,./w,html/en,其中/r,有/v,一些/m,基础/n,和/c,算法/n,类/q,的/u,，/w,会/v,有/v,其他/r,一些/m,文章/n,来/v,做/v,参考/v,。/w,1.3/m, ,协同/v,过滤/v,实例/n,1/m,./w,3/m,./w,1/m, ,算法/n,说明/v,协同/v,过滤/v,（/w,collaborative/en, ,filtering/en,，/w,简称/v,cf/en,，/w,wiki/en,上/f,的/u,定义/n,是/v,：/w,简单/a,来说/u,是/v,利用/v,某个/r,兴趣/n,相投/v,、/w,拥有/v,共同/d,经验/n,之/u,群体/n,的/u,喜好/v,来/v,推荐/v,感/vg,兴趣/n,的/u,资讯/n,给/p,使用者/n,，/w,个人/n,透过/v,合作/vn,的/u,机制/n,给予/v,资讯/n,相当/d,程度/n,的/u,回应/v,（/w,如/v,评分/vn,）/w,并/c,记录/v,下来/v,以/p,达到/v,过滤/v,的/u,目的/n,，/w,进而/c,帮助/v,别人/r,筛选/v,资讯/n,，/w,回应/v,不/d,一定/d,局限/v,于/p,特别/d,感/vg,兴趣/n,的/u,，/w,特别/d,不/d,感/vg,兴趣/n,资讯/n,的/u,纪录/n,也/d,相当/d,重要/a,。/w,协同/v,过滤/v,常/d,被/p,应用/vn,于/p,推荐/v,系统/n,。/w,这些/r,技术/n,旨在/v,补充/v,用户/n,—/w,商品/n,关联/vn,矩阵/n,中/f,所/u,缺/v,失/v,的/u,部分/n,。/w,mllib/en, ,当前/t,支持/v,基于/p,模型/n,的/u,协同/v,过滤/v,，/w,其中/r,用户/n,和/c,商品/n,通过/p,一/m,小组/n,隐性/b,因子/n,进行/v,表达/v,，/w,并且/c,这些/r,因子/n,也/d,用于/v,预测/v,缺失/n,的/u,元素/n,。/w,mllib/en, ,使用/v,交替/v,最小二乘法/nw,（/w,als/en,）/w, ,来/v,学习/v,这些/r,隐性/b,因子/n,。/w,（/w,als/en,见/v,后/f,文/ng,内容/n,）/w,用户/n,对/p,物品/n,或者/c,信息/n,的/u,偏好/n,，/w,根据/p,应用/vn,本身/r,的/u,不同/a,，/w,可能/v,包括/v,用户/n,对/p,物品/n,的/u,评分/vn,、/w,用户/n,查看/v,物品/n,的/u,记录/v,、/w,用户/n,的/u,购买/v,记录/v,等/u,。/w,其实/d,这些/r,用户/n,的/u,偏好/n,信息/n,可以/v,分为/v,两类/mq,：/w,l/en, , ,显式/nw,的/u,用户/n,反馈/v,：/w,这/r,类/q,是/v,用户/n,在/p,网站/n,上/f,自然/d,浏览/vn,或者/c,使用/v,网站/n,以外/f,，/w,显式/nw,地/u,提供/v,反馈/v,信息/n,，/w,例如/v,用户/n,对/p,物品/n,的/u,评分/vn,或者/c,对/p,物品/n,的/u,评论/n,。/w,l/en, , ,隐式/nw,的/u,用户/n,反馈/v,：/w,这/r,类/q,是/v,用户/n,在/p,使用/v,网站/n,是/v,产生/v,的/u,数据/n,，/w,隐式/nw,地/u,反映/v,了/u,用户/n,对/p,物品/n,的/u,喜好/v,，/w,例如/v,用户/n,购买/v,了/u,某/r,物品/n,，/w,用户/n,查看/v,了/u,某/r,物品/n,的/u,信息/n,，/w,等等/u,。/w,显式/nw,的/u,用户/n,反馈/v,能/v,准确/a,地/u,反映/v,用户/n,对/p,物品/n,的/u,真实/a,喜好/v,，/w,但/c,需要/v,用户/n,付出/v,额外/b,的/u,代价/n,；/w,而/c,隐式/nw,的/u,用户/n,行为/n,，/w,通过/p,一些/m,分析/vn,和/c,处理/v,，/w,也/d,能/v,反映/v,用户/n,的/u,喜好/v,，/w,只是/d,数据/n,不/d,是/v,很/d,精确/a,，/w,有些/r,行为/n,的/u,分析/vn,存在/v,较/d,大/a,的/u,噪音/n,。/w,但/c,只要/c,选择/v,正确/a,的/u,行为/n,特征/n,，/w,隐式/nw,的/u,用户/n,反馈/v,也/d,能/v,得到/v,很/d,好/a,的/u,效果/n,，/w,只是/d,行为/n,特征/n,的/u,选择/v,可能/v,在/p,不同/a,的/u,应用/vn,中/f,有/v,很/d,大/a,的/u,不同/a,，/w,例如/v,在/p,电子商务/nt,的/u,网站/n,上/f,，/w,购买/v,行为/n,其实/d,就/d,是/v,一个/m,能/v,很/d,好/a,表现/v,用户/n,喜好/v,的/u,隐式/nw,反馈/v,。/w,推荐/v,引擎/n,根据/p,不同/a,的/u,推荐/v,机制/n,可能/v,用/p,到/v,数据源/nz,中/f,的/u,一部分/m,，/w,然后/c,根据/p,这些/r,数据/n,，/w,分析/vn,出/v,一定/d,的/u,规则/n,或者/c,直接/ad,对/p,用户/n,对/p,其他/r,物品/n,的/u,喜好/v,进行/v,预测/v,计算/v,。/w,这样/r,推荐/v,引擎/n,可以/v,在/p,用户/n,进入/v,时/ng,给/p,他/r,推荐/v,他/r,可能/v,感/vg,兴趣/n,的/u,物品/n,。/w,mllib/en,目前/t,支持/v,基于/p,协同/v,过滤/v,的/u,模型/n,，/w,在/p,这个/r,模型/n,里/f,，/w,用户/n,和/c,产品/n,被/p,一组/mq,可以/v,用/p,来/v,预测/v,缺失/n,项目/n,的/u,潜在/b,因子/n,来/v,描述/v,。/w,特别/d,是/v,我们/r,实现/v,交替/v,最小/a,二/m,乘/v,（/w,als/en,）/w,算法/n,来/v,学习/v,这些/r,潜在/b,的/u,因子/n,，/w,在/p, ,mllib/en, ,中/f,的/u,实现/v,有/v,如下/v,参数/n,：/w,l/en, , ,numblocks/en,是/v,用于/v,并行化/nw,计算/v,的/u,分/q,块/q,个数/n,（/w,设置/v,为/p,-/w,1时/t, ,为/p,自动/d,配置/vn,）/w,；/w,l/en, , ,rank/en,是/v,模型/n,中/f,隐性/b,因子/n,的/u,个数/n,；/w,l/en, , ,iterations/en,是/v,迭代/vn,的/u,次数/n,；/w,l/en, , ,lambda/en,是/v,als/en, ,的/u,正则化/nw,参数/n,；/w,l/en, , ,implicitprefs/en,决定/v,了/u,是/v,用/p,显性/b,反馈/v,als/en, ,的/u,版本/n,还是/c,用/p,隐性/b,反馈/v,数据集/nw,的/u,版本/n,；/w,l/en, , ,alpha/en,是/v,一个/m,针对/p,于隐性/nw,反馈/v, ,als/en, ,版本/n,的/u,参数/n,，/w,这个/r,参数/n,决定/v,了/u,偏好/n,行为/n,强度/n,的/u,基准/n,。/w,1/m,./w,3/m,./w,2/m, ,实例/n,介绍/v,在/p,本/r,实例/n,中/f,将/d,使用/v,协同/v,过滤算法/nw,对/p,grouplens/en, ,research/en,（/w,http/en,:/w,//w,//w,grouplens/en,./w,org/en,//w,datasets/en,//w,movielens/en,//w,）/w,提供/v,的/u,数据/n,进行/v,分析/vn,，/w,该/r,数据/n,为/p,一组/mq,从/p,20/m,世纪/n,90年/t,末/f,到/v,21/m,世纪/n,初/f,由/p,movielens/en,用户/n,提供/v,的/u,电影/n,评分/vn,数据/n,，/w,这些/r,数据/n,中/f,包括/v,电影/n,评分/vn,、/w,电影元/nw,数据/n,（/w,风格/n,类型/n,和/c,年代/n,）/w,以及/c,关于/p,用户/n,的/u,人口/n,统计学/n,数据/n,（/w,年龄/n,、/w,邮编/j,、/w,性别/n,和/c,职业/n,等/u,）/w,。/w,根据/p,不同/a,需求/n,该/r,组织/v,提供/v,了/u,不同/a,大小/n,的/u,样本/n,数据/n,，/w,不同/a,样本/n,信息/n,中/f,包含/v,三种/mq,数据/n,：/w,评分/vn,、/w,用户/n,信息/n,和/c,电影/n,信息/n,。/w,对/p,这些/r,数据/n,分析/vn,进行/v,如下/v,步骤/n,：/w,1/m,./w, ,装载/vn,如下/v,两种/mq,数据/n,：/w,a/en,)/w,装载/vn,样本/n,评分/vn,数据/n,，/w,其中/r,最后/f,一列/mq,时间/n,戳除/nw,10/m,的/u,余数/n,作为/v,key/en,，/w,rating/en,为/p,值/n,；/w,(/w,key/en,用/p,来/v,分组/vn,的/u,，/w,如下/v,校验/v,组/q,)/w,b/en,)/w,装载/vn,电影/n,目录/n,对照表/n,（/w,电影/n,id/en,-/w,>,电影/n,标题/n,）/w,2/m,./w,将/d,样本/n,评分/vn,表/n,以/p,key/en,值切/nw,分成/v,3个/m,部分/n,，/w,分别/d,用于/v,训练/vn, ,(/w,60%/mq,，/w,并/c,加入/v,用户/n,评分/vn,)/w,,/w, ,校验/v, ,(/w,20%/mq,)/w,,/w, ,and/en, ,测试/vn, ,(/w,20%/mq,)/w,（/w,这个/r,分法/nw,非常/d,重要/a,，/w,因为/c,是/v,多/a,个/q,参数/n,进行/v,实验/vn,的/u,，/w,一定/d,需要/v,校验/v,数据/n,来/v,判断/v,哪/r,种/q,参数/n,是/v,最/d,优/ag,的/u,）/w,3/m,./w,训练/vn,不同/a,参数/n,下/f,的/u,模型/n,，/w,并/c,再/d,校验/v,集中/v,验证/vn,，/w,获取/v,最佳/z,参数/n,下/f,的/u,模型/n,4/m,./w,用/p,最佳/z,模型/n,预测/v,测试/vn,集/vg,的/u,评分/vn,，/w,计算/v,和/c,实际/n,评分/vn,之间/f,的/u,均/d,方根/n,误差/n,5/m,./w,根据/p,用户/n,评分/vn,的/u,数据/n,，/w,推荐/v,前/f,十部/mq,最/d,感/vg,兴趣/n,的/u,电影/n,（/w,注意/v,要/v,剔除/v,用户/n,已经/d,评分/vn,的/u,电影/n,）/w,1/m,./w,3/m,./w,3/m, ,测试/vn,数据/n,说明/v,在/p,movielens/en,提供/v,的/u,电影/n,评分/vn,数据/n,分为/v,三个/m,表/n,：/w,评分/vn,、/w,用户/n,信息/n,和/c,电影/n,信息/n,，/w,在/p,该/r,系列/q,提供/v,的/u,附属/vn,数据/n,提供/v,大概/d,6000位/mq,读者/n,和/c,100万个/m,评分/vn,数据/n,，/w,具体/a,位置/n,为/p,//w,data/en,//w,class/en,8/m,//w,movielens/en,//w,data/en,目录/n,下/f,，/w,对/p,三个/m,表/n,数据/n,说明/v,可以/v,参考/v,该/r,目录/n,下/f,readme/en,文档/n,。/w,1/m,./w,评分/vn,数据/n,说明/v,（/w,ratings/en,./w,data/en,)/w,该/r,评分/vn,数据/n,总共/d,四个字/mq,段/q,，/w,格式/n,为/p,userid/en,:/w,:/w,movieid/en,:/w,:/w,rating/en,:/w,:/w,timestamp/en,，/w,分为/v,为/p,用户/n,编号/v,：/w,：/w,电影/n,编号/v,：/w,：/w,评分/vn,：/w,：/w,评分/vn,时间/n,戳/v,，/w,其中/r,各个/r,字段/n,说明/v,如下/v,：/w, ,l/en,用户/n,编号/v,范围/n,1/m,~/w,6040/m, ,l/en,电影/n,编号/v,1/m,~/w,3952/m, ,l/en,电影/n,评分/vn,为/p,五星/nz,评分/vn,，/w,范围/n,0/m,~/w,5/m, ,l/en,评分/vn,时间/n,戳/v,单位/n,秒/q, ,l/en,每个/r,用户/n,至少/d,有/v,20个/m,电影/n,评分/vn, ,使用/v,的/u,ratings/en,./w,dat/en,的/u,数据/n,样本/n,如下/v,所/u,示/vg,：/w, ,1/m,:/w,:/w,1193/m,:/w,:/w,5/m,:/w,:/w,978300760/m, ,1/m,:/w,:/w,661/m,:/w,:/w,3/m,:/w,:/w,978302109/m, ,1/m,:/w,:/w,914/m,:/w,:/w,3/m,:/w,:/w,978301968/m, ,1/m,:/w,:/w,3408/m,:/w,:/w,4/m,:/w,:/w,978300275/m, ,1/m,:/w,:/w,2355/m,:/w,:/w,5/m,:/w,:/w,978824291/m, ,1/m,:/w,:/w,1197/m,:/w,:/w,3/m,:/w,:/w,978302268/m, ,1/m,:/w,:/w,1287/m,:/w,:/w,5/m,:/w,:/w,978302039/m, ,1/m,:/w,:/w,2804/m,:/w,:/w,5/m,:/w,:/w,9783007192/m,./w,用户/n,信息/n,(/w,users/en,./w,dat/en,)/w,用户/n,信息/n,五个字/mq,段/q,，/w,格式/n,为/p,userid/en,:/w,:/w,gender/en,:/w,:/w,age/en,:/w,:/w,occupation/en,:/w,:/w,zip/en,-/w,code/en,，/w,分为/v,为/p,用户/n,编号/v,：/w,：/w,性别/n,：/w,：/w,年龄/n,：/w,：/w,职业/n,:/w,:/w,邮编/j,，/w,其中/r,各个/r,字段/n,说明/v,如下/v,：/w, ,l/en,用户/n,编号/v,范围/n,1/m,~/w,6040/m, ,l/en,性别/n,，/w,其中/r,m/en,为/p,男性/n,，/w,f/en,为/p,女性/n, ,l/en,不同/a,的/u,数字/n,代表/n,不同/a,的/u,年龄/n,范围/n,，/w,如/v,：/w,25/m,代表/n,25/m,~/w,34岁/mq,范围/n, ,l/en,职业/n,信息/n,，/w,在/p,测试/vn,数据/n,中/f,提供/v,了/u,21/m,中/f,职业/n,分类/vn, ,l/en,地区/n,邮编/j, ,使用/v,的/u,users/en,./w,dat/en,的/u,数据/n,样本/n,如下/v,所/u,示/vg,：/w, ,1/m,:/w,:/w,f/en,:/w,:/w,1/m,:/w,:/w,10/m,:/w,:/w,48067/m, ,2/m,:/w,:/w,m/en,:/w,:/w,56/m,:/w,:/w,16/m,:/w,:/w,70072/m, ,3/m,:/w,:/w,m/en,:/w,:/w,25/m,:/w,:/w,15/m,:/w,:/w,55117/m, ,4/m,:/w,:/w,m/en,:/w,:/w,45/m,:/w,:/w,7/m,:/w,:/w,02460/m, ,5/m,:/w,:/w,m/en,:/w,:/w,25/m,:/w,:/w,20/m,:/w,:/w,55455/m, ,6/m,:/w,:/w,f/en,:/w,:/w,50/m,:/w,:/w,9/m,:/w,:/w,55117/m, ,7/m,:/w,:/w,m/en,:/w,:/w,35/m,:/w,:/w,1/m,:/w,:/w,06810/m, ,8/m,:/w,:/w,m/en,:/w,:/w,25/m,:/w,:/w,12/m,:/w,:/w,114133/m,./w,电影/n,信息/n,(/w,movies/en,./w,dat/en,)/w,电影/n,数据/n,分为/v,三个字/mq,段/q,，/w,格式/n,为/p,movieid/en,:/w,:/w,title/en,:/w,:/w,genres/en,，/w,分为/v,为/p,电影/n,编号/v,：/w,：/w,电影/n,名/q,：/w,：/w,电影/n,类别/n,，/w,其中/r,各个/r,字段/n,说明/v,如下/v,：/w, ,l/en,电影/n,编号/v,1/m,~/w,3952/m, ,l/en,由/p,imdb/en,提供/v,电影/n,名称/n,，/w,其中/r,包括/v,电影/n,上映/v,年份/n, ,l/en,电影/n,分类/vn,，/w,这里/r,使用/v,实际/n,分类/vn,名非/nw,编号/v,，/w,如/v,：/w,action/en,、/w,crime/en,等/u, ,使用/v,的/u,movies/en,./w,dat/en,的/u,数据/n,样本/n,如下/v,所/u,示/vg,：/w, ,1/m,:/w,:/w,toy/en, ,story/en, ,(/w,1995/m,)/w,:/w,:/w,animation/en,|/w,children/en,'/w,s/en,|/w,comedy/en, ,2/m,:/w,:/w,jumanji/en, ,(/w,1995/m,)/w,:/w,:/w,adventure/en,|/w,children/en,'/w,s/en,|/w,fantasy/en, ,3/m,:/w,:/w,grumpier/en, ,old/en, ,men/en, ,(/w,1995/m,)/w,:/w,:/w,comedy/en,|/w,romance/en, ,4/m,:/w,:/w,waiting/en, ,to/en, ,exhale/en, ,(/w,1995/m,)/w,:/w,:/w,comedy/en,|/w,drama/en, ,5/m,:/w,:/w,father/en, ,of/en, ,the/en, ,bride/en, ,part/en, ,ii/en, ,(/w,1995/m,)/w,:/w,:/w,comedy/en, ,6/m,:/w,:/w,heat/en, ,(/w,1995/m,)/w,:/w,:/w,action/en,|/w,crime/en,|/w,thriller/en, ,7/m,:/w,:/w,sabrina/en, ,(/w,1995/m,)/w,:/w,:/w,comedy/en,|/w,romance/en, ,8/m,:/w,:/w,tom/en, ,and/en, ,huck/en, ,(/w,1995/m,)/w,:/w,:/w,adventure/en,|/w,children/en,'/w,s/en,程序/n,代码/n,如下/v,：/w,要/v,注意/v,的/u,是/v,，/w,spark/en,的/u,als/en,协同/v,过滤/v,，/w,是/v,基于/p,矩阵/n,分解/v,的/u,，/w,既/c,不/d,是/v,user/en, ,cf/en,，/w,也/d,不/d,是/v,item/en, ,cf/en,。/w,关于/p,user/en, ,cf/en, ,和/c, ,item/en, ,cf/en,可以/v,看/v,后面/f,。/w,关于/p,里面/f,的/u,some/en,函数/n,，/w,可以/v,参考/v,：/w,https/en,:/w,//w,//w,windor/en,./w,gitbooks/en,./w,io/en,//w,beginners/en,-/w,guide/en,-/w,to/en,-/w,scala/en,//w,content/en,//w,chp/en,5/m,-/w,the/en,-/w,option/en,-/w,type/en,./w,htmlhttp/en,:/w,//w,//w,www/en,./w,jianshu/en,./w,com/en,//w,p/en,//w,95896/m,d/en,06/m,a/en,94/m,doption/en,有/v,两/m,个子/n,类别/n,，/w,some/en,和/c,none/en,。/w,当/p,程序/n,回传/v,some/en,的/u,时候/n,，/w,代表/n,这个/r,函式/nw,成功/a,地/u,给/p,了/u,你/r,一个/m,string/en,，/w,而/c,你/r,可以/v,透过/v,get/en,(/w,)/w,函数/n,拿/v,到/v,那个/r,string/en,，/w,如果/c,程序/n,返回/v,的/u,是/v,none/en,，/w,则/d,代表/n,没有/v,字符/n,串/v,可以/v,给/p,你/r,。/w, ,在/p,返回/v,none/en,，/w,也/d,就是/d,没有/v,string/en,给/p,你/r,的/u,时候/n,，/w,如果/c,你/r,还/d,硬/a,要/v,调用/v,get/en,(/w,)/w,来/v,取得/v, ,string/en, ,的话/u,，/w,scala/en,一样/u,是/v,会/v,抛/v,出/v,一个/m,nosuchelementexception/en,异常/a,给/p,你/r,的/u,。/w, ,我们/r,也/d,可以/v,选用/v,另外/c,一个/m,方法/n,，/w,getorelse/en,。/w,这个/r,方法/n,在/p,这个/r,option/en,是/v,some/en,的/u,实例/n,时/ng,返回/v,对应/v,的/u,值/n,，/w,而/c,在/p,是/v,none/en,的/u,实例/n,时/ng,返回/v,传入/v,的/u,参数/n,。/w,换句话说/c,，/w,传入/v,getorelse/en,的/u,参数/n,实际上/d,是/v,默认/v,返回/v,值/n,。/w,代码/n,如下/v,：/w,package/en, ,com/en,./w,spark/en,./w,my/en, ,import/en, ,org/en,./w,apache/en,./w,log/en,4/m,j/en,./w,{/w,level/en,,/w, ,logger/en,}/w, ,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,{/w,sparkconf/en,,/w, ,sparkcontext/en,}/w, ,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,mllib/en,./w,regression/en,./w,{/w,labeledpoint/en,,/w, ,linearregressionwithsgd/en,}/w, ,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,mllib/en,./w,linalg/en,./w,vectors/en, ,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,mllib/en,./w,recommendation/en,./w,{/w,als/en,,/w, ,matrixfactorizationmodel/en,,/w, ,rating/en,}/w, ,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,rdd/en,./w,rdd/en, ,import/en, ,scala/en,./w,io/en,./w,source/en, ,//w,*/w,*/w, ,*/w, ,created/en, ,by/en, ,baidu/en, ,on/en, ,16/m,//w,11/m,//w,28/m,./w, ,*/w,//w, ,object/en, ,movielensals/en, ,{/w, ,def/en, ,main/en,(/w,args/en,:/w, ,array/en,[/w,string/en,]/w,)/w, ,{/w, ,logger/en,./w,getlogger/en,(/w,"/w,org/en,./w,apache/en,./w,spark/en,"/w,)/w,./w,setlevel/en,(/w,level/en,./w,warn/en,)/w, ,val/en, ,conf/en, ,=/w, ,new/en, ,sparkconf/en,(/w,)/w, ,val/en, ,sc/en, ,=/w, ,new/en, ,sparkcontext/en,(/w,conf/en,)/w, ,println/en,(/w,"/w,begin/en, ,rating/en, ,file/en,"/w,)/w, ,//w,//w, ,装载/vn,数据集/nw, ,val/en, ,text/en, ,=/w, ,sc/en,./w,textfile/en,(/w,"/w,hdfs/en,:/w,//w,//w,master/en,./w,hadoop/en,:/w,8390/m,//w,movie/en,_,data/en,//w,ratings/en,./w,dat/en,"/w,)/w, ,val/en, ,ratings/en, ,=/w, ,text/en,./w,map/en, ,{/w, ,line/en, ,=/w,>, ,val/en, ,parts/en, ,=/w, ,line/en,./w,split/en,(/w,"/w,:/w,:/w,"/w,)/w, ,(/w,parts/en,(/w,3/m,)/w,./w,tolong/en, ,%/w, ,10/m,,/w, ,rating/en,(/w,parts/en,(/w,0/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,1/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,2/m,)/w,./w,todouble/en,)/w,)/w, ,}/w, ,val/en, ,numpartitions/en, ,=/w, ,4/m, ,val/en, ,training/en, ,=/w, ,ratings/en,./w,filter/en,(/w,x/en, ,=/w,>, ,x/en,./w,_,1/m, ,</w, ,6/m,)/w, ,//w,//w, ,分组/vn, ,./w,values/en, ,./w,repartition/en,(/w,numpartitions/en,)/w, ,./w,cache/en,(/w,)/w, ,val/en, ,validation/en, ,=/w, ,ratings/en,./w,filter/en,(/w,x/en, ,=/w,>, ,x/en,./w,_,1/m, ,>,=/w, ,6/m, ,&/w,&/w, ,x/en,./w,_,1/m, ,</w, ,8/m,)/w, ,./w,values/en, ,./w,repartition/en,(/w,numpartitions/en,)/w, ,./w,cache/en,(/w,)/w, ,val/en, ,test/en, ,=/w, ,ratings/en,./w,filter/en,(/w,x/en, ,=/w,>, ,x/en,./w,_,1/m, ,>,=/w, ,8/m,)/w, ,./w,values/en, ,./w,repartition/en,(/w,numpartitions/en,)/w, ,./w,cache/en,(/w,)/w, ,println/en,(/w,"/w,finish/en, ,data/en, ,loading/en,,/w, ,train/en, ,num/en,:/w, ,"/w, ,+/w, ,training/en,./w,count/en,(/w,)/w, ,+/w, ,"/w, ,valid/en, ,num/en,:/w, ,"/w, ,+/w, ,validation/en,./w,count/en,(/w,)/w, ,+/w, ,"/w, ,test/en, ,num/en,:/w, ,"/w, ,+/w, ,test/en,./w,count/en,(/w,)/w,)/w, ,val/en, ,ranks/en, ,=/w, ,list/en,(/w,8/m,,/w, ,12/m,)/w, ,val/en, ,lambdas/en, ,=/w, ,list/en,(/w,0.1/m,,/w, ,10.0/m,)/w, ,val/en, ,numiters/en, ,=/w, ,list/en,(/w,10/m,,/w, ,20/m,)/w, ,var/en, ,bestmodel/en,:/w, ,option/en,[/w,matrixfactorizationmodel/en,]/w, ,=/w, ,none/en, ,var/en, ,bestvalidationrmse/en, ,=/w, ,double/en,./w,maxvalue/en, ,var/en, ,bestrank/en, ,=/w, ,0/m, ,var/en, ,bestlambda/en, ,=/w, ,-/w,1.0/m, ,var/en, ,bestnumiter/en, ,=/w, ,-/w,1/m, ,println/en,(/w,"/w,start/en, ,train/en, ,models/en, ,with/en, ,different/en, ,parameters/en,"/w,)/w, ,for/en, ,(/w,rank/en, ,</w,-/w, ,ranks/en,;/w, ,lambda/en, ,</w,-/w, ,lambdas/en,;/w, ,numiter/en, ,</w,-/w, ,numiters/en,)/w, ,{/w, ,val/en, ,model/en, ,=/w, ,als/en,./w,train/en,(/w,training/en,,/w, ,rank/en,,/w, ,numiter/en,,/w, ,lambda/en,)/w, ,//w,//w, ,注意/v,参数/n,的/u,顺序/n, ,val/en, ,rmse/en, ,=/w, ,computermse/en,(/w,model/en,,/w, ,validation/en,)/w, ,println/en,(/w,"/w,rmse/en,=/w,"/w, ,+/w, ,rmse/en, ,+/w, ,"/w, ,for/en, ,model/en, ,with/en, ,rank/en, ,"/w, ,+/w, ,rank/en, ,+/w, ,"/w, ,lambda/en, ,"/w, ,+/w, ,lambda/en, ,+/w, ,"/w, ,numiter/en, ,"/w, ,+/w, ,numiter/en,)/w, ,if/en, ,(/w,rmse/en, ,</w, ,bestvalidationrmse/en,)/w, ,{/w, ,bestmodel/en, ,=/w, ,some/en,(/w,model/en,)/w, ,bestvalidationrmse/en, ,=/w, ,rmse/en, ,bestrank/en, ,=/w, ,rank/en, ,bestlambda/en, ,=/w, ,lambda/en, ,bestnumiter/en, ,=/w, ,numiter/en, ,}/w, ,}/w, ,//w,//w, ,计算/v,测试/vn,集合/v,的/u,结果/n, ,val/en, ,testrmse/en, ,=/w, ,computermse/en,(/w,bestmodel/en,./w,get/en,,/w, ,test/en,)/w, ,println/en,(/w,"/w,the/en, ,best/en, ,model/en, ,was/en, ,trained/en, ,with/en, ,rank/en, ,=/w, ,"/w, ,+/w, ,bestrank/en, ,+/w, ,"/w, ,and/en, ,lambda/en, ,=/w, ,"/w, ,+/w, ,bestlambda/en, ,+/w, ,"/w, ,and/en, ,numiter/en, ,=/w, ,"/w, ,+/w, ,bestnumiter/en, ,+/w, ,"/w, ,and/en, ,its/en, ,rmse/en, ,is/en, ,"/w, ,+/w, ,testrmse/en,)/w, ,//w,//w, ,跟/p,直接/ad,平均/a,rating/en,做/v,对比/v, ,val/en, ,meanrating/en, ,=/w, ,training/en,./w,union/en,(/w,validation/en,)/w,./w,map/en,(/w,_,./w,rating/en,)/w,./w,mean/en, ,val/en, ,baselinermse/en, ,=/w, ,math/en,./w,sqrt/en,(/w,test/en,./w,map/en,(/w,x/en, ,=/w,>, ,(/w,meanrating/en, ,-/w, ,x/en,./w,rating/en,)/w, ,*/w, ,(/w,meanrating/en, ,-/w, ,x/en,./w,rating/en,)/w,)/w,./w,reduce/en,(/w,_, ,+/w, ,_,)/w, ,//w, ,test/en,./w,count/en,)/w, ,println/en,(/w,"/w,the/en, ,best/en, ,model/en, ,improves/en, ,the/en, ,baseline/en, ,by/en, ,"/w, ,+/w, ,"/w,%/w,1.2/m,f/en,"/w,./w,format/en,(/w,(/w,baselinermse/en, ,-/w, ,testrmse/en,)/w, ,//w, ,baselinermse/en,)/w, ,+/w, ,"/w,%/w,./w,"/w,)/w, ,//w,//w, ,获取/v,某/r,一个/m,用户/n,的/u,推荐/v,结果/n, ,//w,*/w,val/en, ,myratings/en, ,=/w, ,source/en,./w,fromfile/en,(/w,"/w,//w,home/en,//w,work/en,//w,data/en,//w,installed/en,//w,spark/en,-/w,2/m,./w,0/m,./w,1/m,-/w,bin/en,-/w,hadoop/en,2.7/m,//w,mydata/en,//w,movie/en,_,data/en,//w,oneratings/en,./w,dat/en,"/w,)/w, ,./w,getlines/en,(/w,)/w, ,./w,map/en,{/w, ,line/en, ,=/w,>, ,val/en, ,parts/en, ,=/w, ,line/en,./w,split/en,(/w,"/w,:/w,:/w,"/w,)/w, ,rating/en,(/w,parts/en,(/w,0/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,1/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,2/m,)/w,./w,todouble/en,)/w, ,}/w,*/w,//w, ,//w,//w, ,开始/v,以为/v,只能/v,读/v,普通/a,文件/n,,/w,后来/t,发现/v,读/v,hadoop/en,也/d,可以/v,,/w,用/p,collect/en,就/d,可以/v, ,val/en, ,myratings/en, ,=/w, ,sc/en,./w,textfile/en,(/w,"/w,hdfs/en,:/w,//w,//w,master/en,./w,hadoop/en,:/w,8390/m,//w,movie/en,_,data/en,//w,oneratings/en,./w,dat/en,"/w,)/w, ,./w,collect/en,(/w,)/w, ,./w,map/en, ,{/w, ,line/en, ,=/w,>, ,val/en, ,parts/en, ,=/w, ,line/en,./w,split/en,(/w,"/w,:/w,:/w,"/w,)/w, ,rating/en,(/w,parts/en,(/w,0/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,1/m,)/w,./w,toint/en,,/w, ,parts/en,(/w,2/m,)/w,./w,todouble/en,)/w, ,}/w, ,val/en, ,ratedmovies/en, ,=/w, ,myratings/en,./w,toseq/en,./w,map/en,(/w,_,./w,product/en,)/w,./w,toset/en, ,val/en, ,myid/en, ,=/w, ,myratings/en,./w,toseq/en,(/w,0/m,)/w,./w,user/en, ,val/en, ,movies/en, ,=/w, ,sc/en,./w,textfile/en,(/w,"/w,hdfs/en,:/w,//w,//w,master/en,./w,hadoop/en,:/w,8390/m,//w,movie/en,_,data/en,//w,movies/en,./w,dat/en,"/w,)/w, ,./w,map/en, ,{/w, ,line/en, ,=/w,>, ,val/en, ,fields/en, ,=/w, ,line/en,./w,split/en,(/w,"/w,:/w,:/w,"/w,)/w, ,(/w,fields/en,(/w,0/m,)/w,./w,toint/en,,/w, ,fields/en,(/w,1/m,)/w,)/w, ,}/w, ,./w,collect/en,(/w,)/w, ,./w,tomap/en, ,val/en, ,candid/en, ,=/w, ,movies/en,./w,keys/en,./w,filter/en,(/w,x/en, ,=/w,>, ,!/w,ratedmovies/en,./w,contains/en,(/w,x/en,)/w,)/w,./w,toseq/en, ,val/en, ,cand/en, ,=/w, ,sc/en,./w,parallelize/en,(/w,candid/en,)/w, ,//w,//w, ,注意/v,这/r,一行/mq,很/d,神奇/a,,/w,其实/d,是/v,创建/v,rdd/en, ,val/en, ,recommend/en, ,=/w, ,bestmodel/en,./w,get/en, ,./w,predict/en,(/w,cand/en,./w,map/en,(/w,x/en, ,=/w,>, ,(/w,myid/en,,/w, ,x/en,)/w,)/w,)/w, ,./w,collect/en,(/w,)/w, ,./w,sortby/en,(/w,-/w,_,./w,rating/en,)/w, ,//w,//w, ,为了/p,从/p,大/a,到/v,小/a,排序/vn, ,./w,take/en,(/w,10/m,)/w, ,var/en, ,i/en, ,=/w, ,1/m, ,println/en,(/w,"/w,movies/en, ,recommeded/en, ,for/en, ,user/en, ,"/w, ,+/w, ,myid/en,)/w, ,recommend/en,./w,foreach/en,{/w, ,r/en, ,=/w,>, ,println/en,(/w,"/w,%/w,2/m,d/en,"/w,./w,format/en,(/w,i/en,)/w, ,+/w, ,"/w,:/w, ,"/w, ,+/w, ,movies/en,./w,get/en,(/w,r/en,./w,product/en,)/w,)/w, ,i/en, ,+/w,=/w, ,1/m, ,}/w, ,sc/en,./w,stop/en,(/w,)/w, ,println/en,(/w,"/w,all/en, ,elements/en, ,done/en,"/w,)/w, ,}/w, ,//w,//w, ,根据/p,实际/n,数据/n,的/u,均/d,方根/n,误差/n,来/v,判断/v,效果/n, ,def/en, ,computermse/en,(/w,model/en,:/w,matrixfactorizationmodel/en,,/w, ,data/en,:/w,rdd/en,[/w,rating/en,]/w,)/w,:/w, ,double/en, ,=/w, ,{/w, ,val/en, ,predict/en,:/w, ,rdd/en,[/w,rating/en,]/w, ,=/w, ,model/en,./w,predict/en,(/w,data/en,./w,map/en,(/w,x/en,=/w,>,(/w,x/en,./w,user/en,,/w, ,x/en,./w,product/en,)/w,)/w,)/w, ,val/en, ,comparepredict/en, ,=/w, ,predict/en,./w,map/en,(/w,x/en,=/w,>,(/w,(/w,x/en,./w,user/en,,/w, ,x/en,./w,product/en,)/w,,/w, ,x/en,./w,rating/en,)/w,)/w, ,./w,join/en,(/w,data/en,./w,map/en,(/w,x/en,=/w,>,(/w,(/w,x/en,./w,user/en,,/w, ,x/en,./w,product/en,)/w,,/w, ,x/en,./w,rating/en,)/w,)/w,)/w, ,./w,values/en, ,val/en, ,n/en, ,=/w, ,predict/en,./w,count/en,(/w,)/w, ,math/en,./w,sqrt/en,(/w,comparepredict/en,./w,map/en,(/w,x/en,=/w,>,(/w,x/en,./w,_,1/m,-/w,x/en,./w,_,2/m,)/w,*/w,(/w,x/en,./w,_,1/m,-/w,x/en,./w,_,2/m,)/w,)/w,./w,reduce/en,(/w,_,+/w,_,)/w,//w,n/en,)/w, ,}/w, ,}/w,然后/c,准备/v,hadoop/en,的/u,数据/n,$/w, ,hadoop/en, ,fs/en, ,-/w,mkdir/en, ,//w,movie/en,_,data/en, ,$/w, ,hadoop/en, ,fs/en, ,-/w,put/en, ,ratings/en,./w,dat/en, ,//w,movie/en,_,data/en, ,$/w, ,hadoop/en, ,fs/en, ,-/w,put/en, ,movies/en,./w,dat/en, ,//w,movie/en,_,data/en, ,$/w, ,hadoop/en, ,fs/en, ,-/w,put/en, ,oneratings/en,./w,dat/en, ,//w,movie/en,_,data/en, ,$/w, ,hadoop/en, ,fs/en, ,-/w,ls/en, ,//w,movie/en,_,data/en, ,found/en, ,3/m, ,items/en, ,-/w,rw/en,-/w,r/en,--/nrf,r/en,--/nrf, ,3/m, ,work/en, ,supergroup/en, ,171308/m, ,2016/m,-/w,12/m,-/w,12/m, ,23/m,:/w,35/m, ,//w,movie/en,_,data/en,//w,movies/en,./w,dat/en, ,-/w,rw/en,-/w,r/en,--/nrf,r/en,--/nrf, ,3/m, ,work/en, ,supergroup/en, ,2079/m, ,2016/m,-/w,12/m,-/w,12/m, ,23/m,:/w,35/m, ,//w,movie/en,_,data/en,//w,oneratings/en,./w,dat/en, ,-/w,rw/en,-/w,r/en,--/nrf,r/en,--/nrf, ,3/m, ,work/en, ,supergroup/en, ,24594131/m, ,2016/m,-/w,12/m,-/w,12/m, ,23/m,:/w,35/m, ,//w,movie/en,_,data/en,//w,ratings/en,./w,dat/en,准备/v,好/a,jar/en,文件/n,后/f,，/w,运行/vn,命令/n,：/w,./w,//w,bin/en,//w,spark/en,-/w,submit/en, ,--/nrf,class/en, ,com/en,./w,spark/en,./w,my/en,./w,movielensals/en, ,--/nrf,master/en, ,spark/en,:/w,//w,//w,10/m,./w,117/m,./w,146/m,./w,12/m,:/w,7077/m, ,myjars/en,//w,scala/en,-/w,demo/en,./w,jar/en,能够/v,得出/v,结果/n,：/w,$/w, ,./w,//w,bin/en,//w,spark/en,-/w,submit/en, ,--/nrf,class/en, ,com/en,./w,spark/en,./w,my/en,./w,movielensals/en, ,--/nrf,master/en, ,spark/en,:/w,//w,//w,10/m,./w,117/m,./w,146/m,./w,12/m,:/w,7077/m, ,myjars/en,//w,scala/en,-/w,demo/en,./w,jar/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,11/m, ,warn/en, ,util/en,./w,nativecodeloader/en,:/w, ,unable/en, ,to/en, ,load/en, ,native/en,-/w,hadoop/en, ,library/en, ,for/en, ,your/en, ,platform/en,./w,./w,./w, ,using/en, ,builtin/en,-/w,java/en, ,classes/en, ,where/en, ,applicable/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,util/en,./w,log/en,:/w, ,logging/en, ,initialized/en, ,@/w,1690/m,ms/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,server/en,./w,server/en,:/w, ,jetty/en,-/w,9/m,./w,2/m,./w,z/en,-/w,snapshot/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,297/m,ea/en,53/m,a/en,{/w,//w,jobs/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,acb/en,0951/m,{/w,//w,jobs/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,5/m,bf/en,22/m,f/en,18/m,{/w,//w,jobs/en,//w,job/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,267/m,f/en,474/m,e/en,{/w,//w,jobs/en,//w,job/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,7/m,a/en,7471/m,ce/en,{/w,//w,stages/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,28276/m,e/en,50/m,{/w,//w,stages/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,62/m,e/en,70/m,ea/en,3/m,{/w,//w,stages/en,//w,stage/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,3/m,efe/en,7086/m,{/w,//w,stages/en,//w,stage/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,675/m,d/en,8/m,c/en,96/m,{/w,//w,stages/en,//w,pool/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,741/m,b/en,3/m,bc/en,3/m,{/w,//w,stages/en,//w,pool/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,2/m,ed/en,3/m,b/en,1/m,f/en,5/m,{/w,//w,storage/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,63648/m,ee/en,9/m,{/w,//w,storage/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,68/m,d/en,6972/m,f/en,{/w,//w,storage/en,//w,rdd/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,45/m,be/en,7/m,cd/en,5/m,{/w,//w,storage/en,//w,rdd/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,7651218/m,e/en,{/w,//w,environment/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,3185/m,fa/en,6/m,b/en,{/w,//w,environment/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,6/m,d/en,366/m,c/en,9/m,b/en,{/w,//w,executors/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,5/m,b/en,58/m,ed/en,3/m,c/en,{/w,//w,executors/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,24/m,faea/en,88/m,{/w,//w,executors/en,//w,threaddump/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,3/m,a/en,320/m,ade/en,{/w,//w,executors/en,//w,threaddump/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,64/m,beebb/en,7/m,{/w,//w,static/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,7813/m,cb/en,11/m,{/w,//w,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,bcec/en,031/m,{/w,//w,api/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,21005/m,f/en,6/m,c/en,{/w,//w,stages/en,//w,stage/en,//w,kill/en,,/w,null/en,,/w,available/en,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,server/en,./w,serverconnector/en,:/w, ,started/en, ,serverconnector/en,@/w,6/m,d/en,0068/m,ad/en,{/w,http/en,//w,1.1/m,}/w,{/w,0/m,./w,0/m,./w,0/m,./w,0/m,:/w,4040/m,}/w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,server/en,./w,server/en,:/w, ,started/en, ,@/w,1816/m,ms/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,12/m, ,info/en, ,handler/en,./w,contexthandler/en,:/w, ,started/en, ,o/en,./w,s/en,./w,j/en,./w,s/en,./w,servletcontexthandler/en,@/w,b/en,273/m,a/en,59/m,{/w,//w,metrics/en,//w,json/en,,/w,null/en,,/w,available/en,}/w, ,begin/en, ,rating/en, ,file/en, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,44/m,:/w,14/m, ,info/en, ,mapred/en,./w,fileinputformat/en,:/w, ,total/en, ,input/en, ,paths/en, ,to/en, ,process/en, ,:/w, ,1/m, ,finish/en, ,data/en, ,loading/en,,/w, ,train/en, ,num/en,:/w, ,602241/m, ,valid/en, ,num/en,:/w, ,198919/m, ,test/en, ,num/en,:/w, ,199049/m, ,start/en, ,train/en, ,models/en, ,with/en, ,different/en, ,parameters/en, ,rmse/en,=/w,0.8806912752883373/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,0.1/m, ,numiter/en, ,10/m, ,rmse/en,=/w,0.8723240467041277/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,0.1/m, ,numiter/en, ,20/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,10.0/m, ,numiter/en, ,10/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,10.0/m, ,numiter/en, ,20/m, ,rmse/en,=/w,0.8771920345984275/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,12/m, ,lambda/en, ,0.1/m, ,numiter/en, ,10/m, ,rmse/en,=/w,0.8708229872082264/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,12/m, ,lambda/en, ,0.1/m, ,numiter/en, ,20/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,12/m, ,lambda/en, ,10.0/m, ,numiter/en, ,10/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,12/m, ,lambda/en, ,10.0/m, ,numiter/en, ,20/m, ,the/en, ,best/en, ,model/en, ,was/en, ,trained/en, ,with/en, ,rank/en, ,=/w, ,12/m, ,and/en, ,lambda/en, ,=/w, ,0.1/m, ,and/en, ,numiter/en, ,=/w, ,20/m, ,and/en, ,its/en, ,rmse/en, ,is/en, ,0.8685987185037917/m, ,the/en, ,best/en, ,model/en, ,improves/en, ,the/en, ,baseline/en, ,by/en, ,0.22%/mq,./w, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,45/m,:/w,17/m, ,info/en, ,mapred/en,./w,fileinputformat/en,:/w, ,total/en, ,input/en, ,paths/en, ,to/en, ,process/en, ,:/w, ,1/m, ,16/m,//w,12/m,//w,12/m, ,23/m,:/w,45/m,:/w,17/m, ,info/en, ,mapred/en,./w,fileinputformat/en,:/w, ,total/en, ,input/en, ,paths/en, ,to/en, ,process/en, ,:/w, ,1/m, ,movies/en, ,recommeded/en, ,for/en, ,user/en, ,1000/m, ,1/m,:/w, ,some/en,(/w,bewegte/en, ,mann/en,,/w, ,der/en, ,(/w,1994/m,)/w,)/w, ,2/m,:/w, ,some/en,(/w,for/en, ,all/en, ,mankind/en, ,(/w,1989/m,)/w,)/w, ,3/m,:/w, ,some/en,(/w,sanjuro/en, ,(/w,1962/m,)/w,)/w, ,4/m,:/w, ,some/en,(/w,man/en, ,of/en, ,the/en, ,century/en, ,(/w,1999/m,)/w,)/w, ,5/m,:/w, ,some/en,(/w,bandits/en, ,(/w,1997/m,)/w,)/w, ,6/m,:/w, ,some/en,(/w,chushingura/en, ,(/w,1962/m,)/w,)/w, ,7/m,:/w, ,some/en,(/w,leather/en, ,jacket/en, ,love/en, ,story/en, ,(/w,1997/m,)/w,)/w, ,8/m,:/w, ,some/en,(/w,usual/en, ,suspects/en,,/w, ,the/en, ,(/w,1995/m,)/w,)/w, ,9/m,:/w, ,some/en,(/w,wrong/en, ,trousers/en,,/w, ,the/en, ,(/w,1993/m,)/w,)/w, ,10/m,:/w, ,some/en,(/w,rear/en, ,window/en, ,(/w,1954/m,)/w,)/w, ,./w,./w,./w, ,all/en, ,elements/en, ,done/en,参考/v,资料/n,（/w,1/m,）/w,spark/en,官/n,网/n, ,mlllib/en,说明/v, , ,http/en,:/w,//w,//w,spark/en,./w,apache/en,./w,org/en,//w,docs/en,//w,1/m,./w,1/m,./w,0/m,//w,mllib/en,-/w,guide/en,./w,html/en,（/w,2/m,）/w,《/w,机器/n,学习/v,常见/a,算法/n,分类/vn,汇总/v,》/w, ,http/en,:/w,//w,//w,www/en,./w,ctocio/en,./w,com/en,//w,hotnews/en,//w,15919/m,./w,html/en,可以/v,继续/v,看/v,一下/m, ,als/en,的/u,介绍/v,：/w,https/en,:/w,//w,//w,www/en,./w,zhihu/en,./w,com/en,//w,question/en,//w,31509438/m,//w,answer/en,//w,52268608/m,对于/p,一个/m,users/en,-/w,products/en,-/w,rating/en,的/u,评分/vn,数据集/nw,，/w,als/en,会/v,建立/v,一个/m,user/en,*/w,product/en,的/u,m/en,*/w,n/en,的/u,矩阵/n, ,其中/r,，/w,m/en,为/p,users/en,的/u,数量/n,，/w,n/en,为/p,products/en,的/u,数量/n, ,但是/c,在/p,这个/r,数据/n,集中/v,，/w,并/c,不/d,是/v,每个/r,用户/n,都/d,对/p,每个/r,产品/n,进行/v,过/u,评分/vn,，/w,所以/c,这个/r,矩阵/n,往往/d,是/v,稀疏/a,的/u,，/w,用户/n,i/en,对/p,产品/n,j/en,的/u,评分/vn,往往/d,是/v,空/a,的/u, ,als/en,所/u,做/v,的/u,事情/n,就/d,是/v,将/d,这个/r,稀疏/a,矩阵/n,通过/p,一定/d,的/u,规律/n,填/v,满/a,，/w,这样/r,就/d,可以/v,从/p,矩阵/n,中/f,得到/v,任意/d,一个/m,user/en,对/p,任意/d,一个/m,product/en,的/u,评分/vn,，/w,als/en,填充/v,的/u,评分/vn,项/q,也/d,称为/v,用户/n,i/en,对/p,产品/n,j/en,的/u,预测/v,得分/n,所以/c,说/v,，/w,als/en,算法/n,的/u,核心/n,就是/d,通过/p,什么/r,样子/n,的/u,规律/n,来/v,填/v,满/a,（/w,预测/v,）/w,这个/r,稀疏/a,矩阵/n, ,它/r,是/v,这么/r,做/v,的/u,：/w, ,假设/v,m/en,*/w,n/en,的/u,评分/vn,矩阵/n,r/en,，/w,可以/v,被/p,近似/a,分解/v,成/v,u/en,*/w,(/w,v/en,)/w,t/en, ,u/en,为/p,m/en,*/w,d/en,的/u,用户/n,特征/n,向量/n,矩阵/n, ,v/en,为/p,n/en,*/w,d/en,的/u,产品/n,特征/n,向/p,量/n,矩阵/n,（/w,(/w,v/en,)/w,t/en,代表/n,v/en,的/u,转置/nw,，/w,原谅/vn,我/r,不/d,会/v,打/v,转置/nw,这个/r,符号/n,。/w,。/w,）/w, ,d/en,为/p,user/en,//w,product/en,的/u,特征值/n,的/u,数量/n,关于/p,d/en,这个/r,值/n,的/u,理解/v,，/w,大概/d,可以/v,是/v,这样/r,的/u,对于/p,每个/r,产品/n,，/w,可以/v,从/p,d/en,个/q,角度/n,进行/v,评价/v,，/w,以/p,电影/n,为/p,例/n,，/w,可以/v,从/p,主演/v,，/w,导演/n,，/w,特效/n,，/w,剧情/n,4个/m,角度/n,来/v,评价/v,一部/mq,电影/n,，/w,那么/r,d/en,就/d,等于/v,4/m,可以/v,认为/v,，/w,每/r,部/q,电影/n,在/p,这/r,4个/m,角度/n,上/f,都/d,有/v,一个/m,固定/a,的/u,基准/n,评分/vn,值/n, ,例如/v,《/w,末日/n,崩塌/vn,》/w,这部/r,电影/n,是/v,一个/m,产品/n,，/w,它/r,的/u,特征/n,向量/n,是/v,由/p,d/en,个/q,特征值/n,组成/v,的/u, ,d/en,=/w,4/m,，/w,有/v,4个/m,特征值/n,，/w,分别/d,是/v,主演/v,，/w,导演/n,，/w,特效/n,，/w,剧情/n, ,每个/r,特征值/n,的/u,基准/n,评分/vn,值/n,分别/d,为/p,（/w,满分/n,为/p,1.0/m,）/w,：/w, ,主演/v,：/w,0.9/m,（/w,大/a,光头/n,还是/c,那么/r,霸气/n,）/w, ,导演/n,：/w,0.7/m, ,特效/n,：/w,0.8/m, ,剧情/n,：/w,0.6/m, ,矩阵/n,v/en,由/p,n/en,个/q,product/en,*/w,d/en,个/q,特征值/n,组成/v, ,注/v,：/w,不/d,太/d,清楚/a,，/w,这个/r,d/en,是否/v,指/v,的/u,就/d,是/v,spark/en,程序/n,里面/f,的/u,rank/en,对于/p,矩阵/n,u/en,，/w,假设/v,对于/p,任意/d,的/u,用户/n,a/en,，/w,该/r,用户/n,对/p,一部/mq,电影/n,的/u,综合/vn,评分/vn,和/c,电影/n,的/u,特征值/n,存在/v,一定/d,的/u,线性/n,关系/n,，/w,即/v,电影/n,的/u,综合/vn,评分/vn,=/w,(/w,a/en,1/m,*/w,d/en,1/m,+/w,a/en,2/m,*/w,d/en,2/m,+/w,a/en,3/m,*/w,d/en,3/m,+/w,a/en,4/m,*/w,d/en,4/m,)/w,其中/r,a/en,1/m,-/w,4/m,为/p,用户/n,a/en,的/u,特征值/n,，/w,d/en,1/m,-/w,4/m,为/p,之前/f,所/u,说/v,的/u,电影/n,的/u,特征值/n,参考/v,：/w,协同/v,过滤/v,中/f,的/u,矩阵/n,分解/v,算法/n,研究/vn,那么/r,对于/p,之前/f,als/en,算法/n,的/u,这个/r,假设/v, ,m/en,*/w,n/en,的/u,评分/vn,矩阵/n,r/en,，/w,可以/v,被/p,近似/a,分解/v,成/v,u/en,*/w,(/w,v/en,)/w,t/en, ,就/d,是/v,成立/v,的/u,，/w,某个/r,用户/n,对/p,某个/r,产品/n,的/u,评分/vn,可以/v,通过/p,矩阵/n,u/en,某行/nw,和/c,矩阵/n,v/en,（/w,转置/nw,）/w,的/u,某/r,列/v,相/d,乘/v,得到/v, ,那么/r,现在/t,的/u,问题/n,是/v,，/w,如何/r,确定/v,用户/n,和/c,产品/n,的/u,特征值/n,？/w,（/w,之前/f,仅仅/d,是/v,举例子/nw,，/w,实际/n,中/f,这/r,两个/m,都/d,是/v,未知/vn,的/u,变量/n,）/w, ,采用/v,的/u,是/v,交替/v,的/u,最小二乘法/nw,在/p,上面/f,的/u,公式/n,中/f,，/w,a/en,表示/v,评分/vn,数据/n,集中/v,用户/n,i/en,对/p,产品/n,j/en,的/u,真实/a,评分/vn,，/w,另外/c,一部分/m,表示/v,用户/n,i/en,的/u,特征/n,向量/n,（/w,转置/nw,）/w,*/w,产品/n,j/en,的/u,特征/n,向量/n,（/w,这里/r,可以/v,得到/v,预测/v,的/u,i/en,对/p,j/en,的/u,评分/vn,）/w, ,用/p,真实/a,评分/vn,减去/v,预测/v,评分/vn,然后/c,求/v,平方/q,，/w,对/p,下/f,一个/m,用户/n,，/w,下/f,一个/m,产品/n,进行/v,相同/a,的/u,计算/v,，/w,将/d,所有/b,结果/n,累/a,加/v,起来/v,（/w,其中/r,，/w,数据集/nw,构成/v,的/u,矩阵/n,是/v,存在/v,大量/m,的/u,空/a,打分/v,，/w,并/c,没有/v,实际/n,的/u,评分/vn,，/w,解决/v,的/u,方法/n,是/v,就/d,只/d,看/v,对/p,已知/nz,打分/v,的/u,项/q,）/w,参考/v,：/w,als/en, ,在/p, ,spark/en, ,mllib/en, ,中/f,的/u,实现/v,但是/c,这里/r,之前/f,问题/n,还是/c,存在/v,，/w,就/d,是/v,用户/n,和/c,产品/n,的/u,特征/n,向量/n,都/d,是/v,未知/vn,的/u,，/w,这个/r,式子/n,存在/v,两个/m,未知/vn,变量/n,。/w,具体/a,算/v,法略/nw,，/w,见/v,原文/n,。/w,总结/v,一下/m,：/w,als/en,算法/n,的/u,核心/n,就是/d,将/d,稀疏/a,评分/vn,矩阵/n,分解/v,为/p,用户/n,特征/n,向/p,量/n,矩阵/n,和/c,产品/n,特征/n,向/p,量/n,矩阵/n,的/u,乘积/n,交替/v,使用/v,最小二乘法/nw,逐步/d,计算/v,用户/n,//w,产品/n,特征/n,向量/n,，/w,使得/v,差/a,平方/q,和/c,最/d,小/a,通过/p,用户/n,//w,产品/n,特征/n,向量/n,的/u,矩阵/n,来/v,预测/v,某个/r,用户/n,对/p,某个/r,产品/n,的/u,评分/vn,另/r,，/w,问/v,：/w, ,als/en,训练/vn,出来/v,的/u,模型/n,里面/f,有/v,用户/n,和/c,产品/n,的/u,所有/b,特征/n,向量/n,，/w,我/r,可/v,不/d,可以/v,拿/v,这些/r,特征/n,向/p,量/n,来/v,计算/v,用户/n,//w,产品/n,的/u,相似/a,度/q,，/w,然后/c,用/p,usercf/en,或者/c,itemcf/en,来/v,计算/v,推荐/v,，/w,mllib/en,里面/f,现在/t,都/d,没有/v,这/r,两个/m,算法/n,的/u,实现/v,？/w,回答/v,：/w,当然/d,可以/v,，/w,但是/c,感觉/n,这个/r,是/v,在/p,绕/v,远/a,路/n,，/w,本来/d,都/d,已经/d,有/v,factor/en,信息/n,可以/v,直接/ad,计算/v,了/u,，/w,还/d,通过/p,相似/a,度/q,来/v,计算/v,评分/vn,有点/d,舍近求远/i,了/u,。/w,上面/f,这/r,段/q,问答/vn,，/w,其实/d,讲/v,出/v,了/u,als/en,和/c, ,item/en,//w,user/en, ,cf/en, ,的/u,区别/n,。/w,他们/r,是/v,殊途同归/i,。/w,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,skyeva/en,//w,p/en,//w,5570098/m,./w,htmlals/en, ,其实/d,是/v, ,交替/v,最小/a,二/m,乘/v,（/w,alternating/en, ,least/en, ,squares/en,）/w,1/m,./w, ,基础/n,回顾/v,矩阵/n,的/u,奇异值/nw,分解/v, ,svd/en,（/w,特别/d,详细/ad,的/u,总结/v,，/w,参考/v, ,http/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,wangzhiqing/en,3/m,//w,article/en,//w,details/en,//w,7446444/m,）/w,矩阵/n,与/p,向量/n,相乘/v,的/u,结果/n,与/p,特征值/n,，/w,特征/n,向量/n,有关/vn,。/w,数值/n,小/a,的/u,特征值/n,对/p,矩阵/n,-/w,向量/n,相乘/v,的/u,结果/n,贡献/n,小/a,1/m,）/w,低秩/nw,近似/a,2/m,）/w,特征/n,降维/nw,相似/a,度/q,和/c,距离/n,度量/v,（/w,参考/v, ,http/en,:/w,//w,//w,blog/en,./w,sina/en,./w,com/en,./w,cn/en,//w,s/en,//w,blog/en,_,62/m,b/en,83291010127/m,bf/en,./w,html/en,）/w,2/m,./w, ,als/en, ,交替/v,最小/a,二/m,乘/v,（/w,alternating/en, ,least/en, ,squares/en,）/w,在/p,机器/n,学习/v,中/f,，/w,als/en, ,指/v,使用/v,交替/v,最小/a,二/m,乘/v,求解/v,的/u,一个/m,协同/v,推荐/v,算法/n,。/w,它/r,通过/p,观察/v,到/v,的/u,所有/b,用户/n,给/p,商品/n,的/u,打分/v,，/w,来/v,推断/vn,每个/r,用户/n,的/u,喜好/v,并/c,向/p,用户/n,推荐/v,适合/v,的/u,商品/n,。/w,每/r,一行/n,代表/n,一个/m,用户/n,（/w,u/en,1/m,,/w,u/en,2/m,,/w,…/w,,/w,u/en,8/m,）/w,,/w, ,每/r,一列/mq,代表/n,一个/m,商品/n,（/w,v/en,1/m,,/w,v/en,2/m,,/w,…/w,,/w,v/en,8/m,）/w,,/w,用户/n,的/u,打分/v,为/p,1/m,-/w,9分/mq,。/w,这个/r,矩阵/n,只/d,显示/v,了/u,观察/v,到/v,的/u,打分/v,，/w,我们/r,需要/v,推测/v,没有/v,观察/v,到/v,的/u,打分/v,。/w,als/en,的/u,核心/n,就/d,是/v,这样/r,一个/m,假设/v,：/w,打分/v,矩阵/n,是/v,近似/a,低秩/nw,的/u,。/w,换句话说/c,，/w,就/d,是/v,一个/m,m/en,*/w,n/en,的/u,打分/v,矩阵/n,可以/v,由/p,分解/v,的/u,两个/m,小/a,矩阵/n,u/en,（/w,m/en,*/w,k/en,）/w,和/c,v/en,（/w,k/en,*/w,n/en,）/w,的/u,乘积/n,来/v,近似/a,，/w,即/v, ,a/en,=/w,uvt/en,,/w,k/en,</w,=/w,m/en,,/w,n/en, ,。/w,这/r,就/d,是/v,als/en,的/u,矩阵/n,分解/v,方法/n,。/w,这样/r,我们/r,把/p,系统/n,的/u,自由度/n,从/p,o/en,(/w,mn/en,)/w,降/v,到/v,了/u,o/en,(/w,(/w,m/en,+/w,n/en,)/w,k/en,)/w,。/w,低维/nw,空间/n,的/u,选取/v,。/w,这个/r,低维/nw,空间/n,要/v,能够/v,很/d,好/a,的/u,区分/v,事物/n,，/w,那么/r,就/d,需要/v,一个/m,明确/ad,的/u,可/v,量化/v,目标/n,，/w,这/r,就/d,是/v,重构/v,误差/n,。/w,在/p,als/en,中/f,我们/r,使用/v, ,f/en,范数/nr, ,来/v,量化/v,重构/v,误差/n,，/w,就/d,是/v,每个/r,元素/n,重构/v,误差/n,的/u,平方和/n,。/w,这里/r,存在/v,一个/m,问题/n,，/w,我们/r,只/d,观察/v,到/v,部分/n,打分/v,，/w,a/en,中/f,的/u,大量/m,未知元/nw,是/v,我们/r,想/v,推断/vn,的/u,，/w,所以/c,这个/r,重构/v,误差/n,是/v,包含/v,未知数/n,的/u,。/w,解决/v,方案/n,很/d,简单/a,：/w,只/d,计算/v,已知/nz,打分/v,的/u,重构/v,误差/n,。/w,3/m,./w, ,协同/v,过滤/v,协同/v,过滤/v,分析/vn,用户/n,以及/c,用户/n,相关/v,的/u,产品/n,的/u,相关性/n,，/w,用以/d,识别/v,新/a,的/u,用户/n,-/w,产品/n,相关性/n,。/w,协同/v,过滤/v,系统/n,需要/v,的/u,唯一/b,信息/n,是/v,用户/n,过去/t,的/u,行为/n,信息/n,，/w,比如/v,对/p,产品/n,的/u,评价/v,信息/n,。/w,推荐/v,系统/n,依赖/v,不同/a,类型/n,的/u,输入/v,数据/n,，/w,最/d,方便/a,的/u,是/v,高/a,质量/n,的/u,显式/nw,反馈/v,数据/n,，/w,它们/r,包含/v,用户/n,对/p,感/vg,兴趣/n,商品/n,明确/ad,的/u,评价/v,。/w,例如/v,，/w,netflix/en,收集/v,的/u,用户/n,对/p,电影/n,评价/v,的/u,星星/n,等级/n,数据/n,。/w,但是/c,显式/nw,反馈/v,数据/n,不/d,一定/d,总是/d,找/v,得到/v,，/w,因此/c,推荐/v,系统/n,可以/v,从/p,更/d,丰富/a,的/u,隐式/nw,反馈/v,信息/n,中/f,推测/v,用户/n,的/u,偏好/n,。/w, ,隐式/nw,反馈/v,类型/n,包括/v,购买/v,历史/n,、/w,浏览/vn,历史/n,、/w,搜索/vn,模式/n,甚至/d,鼠标/n,动作/n,。/w,4/m,./w, ,显示/v,反馈/v,模型/n,通过/p,内积/n, ,rij/en, ,=/w, ,uit/en, ,vj/en, ,来/v,预测/v,，/w,另外/c,加入/v,正则化/nw,参数/n, ,lamda/en, ,来/v,预防/v, ,过/u,拟合/nz,。/w,最小化/nw,重构/v,误差/n,：/w,5/m,./w, ,隐式/nw,反馈/v,模型/n,（/w,此处/s,隐藏/v,细节/n,）/w,最小化/nw,损失/n,函数/n,（/w,看起来/v,就/d,是/v,变成/v,了/u,多/a,个/q,）/w,：/w,6/m,./w, , ,求解/v,：/w,最优化/nz,1/m,）/w,显示/v,和/c,隐式/nw,的/u,异同/n,：/w,显示/v,模型/n,只/d,基于/p,观察/v,到/v,的/u,值/n,；/w,隐式/nw,需要/v,考虑/v,不同/a,的/u,信任度/nw,，/w,最/d,优化/v,时/ng,需要/v,考虑/v,所有/b,可能/v,的/u,u/en,，/w,v/en,对/p,2/m,)/w, ,交替/v,最小/a,二/m,乘/v,求解/v,：/w,即/v,固定/a, ,ui/en, ,求/v, ,vi/en,+/w,1/m, ,再/d,固定/a, ,vi/en,+/w,1/m, , ,求/v, ,ui/en,+/w,1/m,例子/n,import/en, ,org/en,./w,apache/en,./w,spark/en,./w,mllib/en,./w,recommendation/en,./w,_, ,//w,//w,处理/v,训练/vn,数据/n, ,val/en, ,data/en, ,=/w, ,sc/en,./w,textfile/en,(/w,"/w,data/en,//w,mllib/en,//w,als/en,//w,test/en,./w,data/en,"/w,)/w, ,val/en, ,ratings/en, ,=/w, ,data/en,./w,map/en,(/w,_,./w,split/en,(/w,'/w,,/w,'/w,)/w, ,match/en, ,{/w, ,case/en, ,array/en,(/w,user/en,,/w, ,item/en,,/w, ,rate/en,)/w, ,=/w,>, ,rating/en,(/w,user/en,./w,toint/en,,/w, ,item/en,./w,toint/en,,/w, ,rate/en,./w,todouble/en,)/w, ,}/w,)/w, ,//w,//w, ,使用/v,als/en,训练/vn,推荐/v,模型/n, ,val/en, ,rank/en, ,=/w, ,10/m, ,val/en, ,numiterations/en, ,=/w, ,10/m, ,val/en, ,model/en, ,=/w, ,als/en,./w,train/en,(/w,ratings/en,,/w, ,rank/en,,/w, ,numiterations/en,,/w, ,0.01/m,)/w,als/en,算法/n,实现/v,于/p,org/en,./w,apache/en,./w,spark/en,./w,ml/en,./w,recommendation/en,./w,als/en,./w,scala/en,文件/n,中/f,rating/en,也/d,在/p,recommendation/en,里面/f,注意/v,，/w,上面/f,参数/n,最后/f,的/u,lambda/en,一般/a,要/v,小于/v,1/m,./w,在/p,之前/f,的/u,spark/en,例子/n,里/f,，/w,用/p,了/u,val/en, ,lambdas/en, ,=/w, ,list/en,(/w,0.1/m,,/w, ,10.0/m,)/w, ,两种/mq,。/w,根据/p,跑/v,的/u,结果/n,，/w,看起来/v,0.1/m,的/u,效果/n,要/v,远远/d,好/a,于/p,10.0/m,的/u,结果/n,。/w,如下/v,：/w,rmse/en,=/w,0.8806912752883373/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,0.1/m, ,numiter/en, ,10/m, ,rmse/en,=/w,0.8723240467041277/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,0.1/m, ,numiter/en, ,20/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/en, ,rank/en, ,8/m, ,lambda/en, ,10.0/m, ,numiter/en, ,10/m, ,rmse/en,=/w,3.756322766790857/m, ,for/en, ,model/en, ,with/