最近/t,在/p,看/v,《/w,机器/n,学习/v,实战/n,》/w,这/r,本/r,书/n,，/w,因为/c,自己/r,本身/r,很/d,想/v,深入/v,的/u,了解/v,机器/n,学习/v,算法/n,，/w,加之/c,想/v,学/v,python/en,，/w,就/d,在/p,朋友/n,的/u,推荐/v,之下/f,选择/v,了/u,这/r,本/r,书/n,进行/v,学习/v,。/w,一/m, ,./w, ,k/en,-/w,近邻/n,算法/n,（/w,knn/en,）/w,概述/v,最/d,简单/a,最/d,初级/b,的/u,分类器/nw,是/v,将/d,全部/m,的/u,训练/vn,数据/n,所/u,对应/v,的/u,类别/n,都/d,记录/v,下来/v,，/w,当/p,测试/vn,对象/n,的/u,属性/n,和/c,某个/r,训练/vn,对象/n,的/u,属性/n,完全/ad,匹配/vn,时/ng,，/w,便/d,可以/v,对/p,其/r,进行/v,分类/vn,。/w,但是/c,怎么/r,可能/v,所有/b,测试/vn,对象/n,都/d,会/v,找到/v,与/p,之/u,完全/ad,匹配/vn,的/u,训练/vn,对象/n,呢/y,，/w,其次/c,就/d,是/v,存在/v,一个/m,测试/vn,对象/n,同时/c,与/p,多/a,个/q,训练/vn,对象/n,匹配/vn,，/w,导致/v,一个/m,训练/vn,对象/n,被/p,分/q,到/v,了/u,多/a,个/q,类/q,的/u,问题/n,，/w,基于/p,这些/r,问题/n,呢/y,，/w,就/d,产生/v,了/u,knn/en,。/w,knn/en,是/v,通过/p,测量/vn,不同/a,特征/n,值/n,之间/f,的/u,距离/n,进行/v,分类/vn,。/w,它/r,的/u,思路/n,是/v,：/w,如果/c,一个/m,样本/n,在/p,特征/n,空间/n,中/f,的/u,k/en,个/q,最/d,相似/a,(/w,即/v,特征/n,空间/n,中/f,最/d,邻近/v,)/w,的/u,样本/n,中/f,的/u,大多数/m,属于/v,某/r,一个/m,类别/n,，/w,则/d,该/r,样本/n,也/d,属于/v,这个/r,类别/n,，/w,其中/r,k/en,通常/d,是/v,不/d,大于/v,20/m,的/u,整数/n,。/w,knn/en,算法/n,中/f,，/w,所/u,选择/v,的/u,邻居/n,都/d,是/v,已经/d,正确/a,分类/vn,的/u,对象/n,。/w,该/r,方法/n,在/p,定类/nw,决策/n,上/f,只/d,依据/n,最/d,邻近/v,的/u,一个/m,或者/c,几/m,个/q,样本/n,的/u,类别/n,来/v,决定/v,待/v,分/q,样本/n,所/u,属/v,的/u,类别/n,。/w,下面/f,通过/p,一个/m,简单/a,的/u,例子/n,说明/v,一下/m,：/w,如下/v,图/n,，/w,绿色/n,圆/vg,要/v,被/p,决定/v,赋予/v,哪个/r,类/q,，/w,是/v,红色/n,三角形/n,还是/c,蓝色/n,四方形/nw,？/w,如果/c,k/en,=/w,3/m,，/w,由于/c,红色/n,三角形/n,所/u,占/v,比例/n,为/p,2/m,//w,3/m,，/w,绿色/n,圆/vg,将/d,被/p,赋予/v,红色/n,三角形/n,那个/r,类/q,，/w,如果/c,k/en,=/w,5/m,，/w,由于/c,蓝色/n,四方形/nw,比例/n,为/p,3/m,//w,5/m,，/w,因此/c,绿色/n,圆/vg,被/p,赋予/v,蓝色/n,四方形/nw,类/q,。/w,由此/d,也/d,说明/v,了/u,knn/en,算法/n,的/u,结果/n,很/d,大/a,程度/n,取决于/v,k/en,的/u,选择/v,。/w,在/p,knn/en,中/f,，/w,通过/p,计算/v,对象/n,间/f,距离/n,来/v,作为/v,各个/r,对象/n,之间/f,的/u,非/h,相似性/n,指标/n,，/w,避免/v,了/u,对象/n,之间/f,的/u,匹配/vn,问题/n,，/w,在/p,这里/r,距离/n,一般/a,使用/v,欧氏/nr,距离/n,或/c,曼哈顿/ns,距离/n,：/w,同时/c,，/w,knn/en,通过/p,依据/n,k/en,个/q,对象/n,中/f,占优/v,的/u,类别/n,进行/v,决策/n,，/w,而/c,不/d,是/v,单一/a,的/u,对象/n,类别/n,决策/n,。/w,这/r,两点/mq,就/d,是/v,knn/en,算法/n,的/u,优势/n,。/w,接下来/l,对/p,knn/en,算法/n,的/u,思想/n,总结/v,一下/m,：/w,就是/d,在/p,训练/vn,集中/v,数据/n,和/c,标签/n,已知/nz,的/u,情况/n,下/f,，/w,输入/v,测试/vn,数据/n,，/w,将/d,测试/vn,数据/n,的/u,特征/n,与/p,训练/vn,集中/v,对应/v,的/u,特征/n,进行/v,相互/d,比较/d,，/w,找到/v,训练/vn,集中/v,与/p,之/u,最为/d,相似/a,的/u,前/f,k/en,个/q,数据/n,，/w,则/d,该/r,测试/vn,数据/n,对应/v,的/u,类别/n,就/d,是/v,k/en,个/q,数据/n,中/f,出现/v,次数/n,最/d,多/a,的/u,那个/r,分类/vn,，/w,其/r,算法/n,的/u,描述/v,为/p,：/w,1/m,）/w,计算/v,测试/vn,数据/n,与/p,各个/r,训练/vn,数据/n,之间/f,的/u,距离/n,；/w,2/m,）/w,按照/p,距离/n,的/u,递增/v,关系/n,进行/v,排序/vn,；/w,3/m,）/w,选取/v,距离/n,最小/a,的/u,k/en,个/q,点/q,；/w,4/m,）/w,确定/v,前/f,k/en,个/q,点/q,所/u,在/p,类别/n,的/u,出现/v,频率/n,；/w,5/m,）/w,返回/v,前/f,k/en,个/q,点/q,中/f,出现/v,频率/n,最/d,高/a,的/u,类别/n,作为/v,测试/vn,数据/n,的/u,预测/v,分类/vn,。/w,二/m, ,./w,python/en,实现/v,首先/d,呢/y,，/w,需要/v,说明/v,的/u,是/v,我/r,用/p,的/u,是/v,python/en,3/m,./w,4/m,./w,3/m,，/w,里面/f,有/v,一些/m,用法/n,与/p,2.7/m,还是/c,有些/r,出入/v,。/w,建立/v,一个/m,knn/en,./w,py/en,文件/n,对/p,算法/n,的/u,可行性/n,进行/v,验证/vn,，/w,如下/v,：/w,#,coding/en,:/w,utf/en,-/w,8/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,import/en, ,operator/en, ,#,#,给/p,出/v,训练/vn,数据/n,以及/c,对应/v,的/u,类别/n, ,def/en, ,createdataset/en,(/w,)/w,:/w, ,group/en, ,=/w, ,array/en,(/w,[/w,[/w,1.0/m,,/w,2.0/m,]/w,,/w,[/w,1.2/m,,/w,0.1/m,]/w,,/w,[/w,0.1/m,,/w,1.4/m,]/w,,/w,[/w,0.3/m,,/w,3.5/m,]/w,]/w,)/w, ,labels/en, ,=/w, ,[/w,'/w,a/en,'/w,,/w,'/w,a/en,'/w,,/w,'/w,b/en,'/w,,/w,'/w,b/en,'/w,]/w, ,return/en, ,group/en,,/w,labels/en, ,#,#,#,通过/p,knn/en,进行/v,分类/vn, ,def/en, ,classify/en,(/w,input/en,,/w,datase/en, ,t/en,,/w,label/en,,/w,k/en,)/w,:/w, ,datasize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,#,#,#,#,计算/v,欧式/b,距离/n, ,diff/en, ,=/w, ,tile/en,(/w,input/en,,/w,(/w,datasize/en,,/w,1/m,)/w,)/w, ,-/w, ,dataset/en, ,sqdiff/en, ,=/w, ,diff/en, ,*/w,*/w, ,2/m, ,squaredist/en, ,=/w, ,sum/en,(/w,sqdiff/en,,/w,axis/en, ,=/w, ,1/m,)/w,#,#,#,行/v,向/p,量/n,分别/d,相加/v,，/w,从而/c,得到/v,新/a,的/u,一个/m,行/v,向/p,量/n, ,dist/en, ,=/w, ,squaredist/en, ,*/w,*/w, ,0.5/m, ,#,#,对/p,距离/n,进行/v,排序/vn, ,sorteddistindex/en, ,=/w, ,argsort/en,(/w,dist/en,)/w,#,#,argsort/en,(/w,)/w,根据/p,元素/n,的/u,值/n,从/p,大/a,到/v,小/a,对/p,元素/n,进行/v,排序/vn,，/w,返回/v,下/f,标/v, ,classcount/en,=/w,{/w,}/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,votelabel/en, ,=/w, ,label/en,[/w,sorteddistindex/en,[/w,i/en,]/w,]/w, ,#,#,#,对/p,选取/v,的/u,k/en,个/q,样本/n,所/u,属/v,的/u,类别/n,个数/n,进行/v,统计/v, ,classcount/en,[/w,votelabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,votelabel/en,,/w,0/m,)/w, ,+/w, ,1/m, ,#,#,#,选取/v,出现/v,的/u,类别/n,次数/n,最/d,多/a,的/u,类别/n, ,maxcount/en, ,=/w, ,0/m, ,for/en, ,key/en,,/w,value/en, ,in/en, ,classcount/en,./w,items/en,(/w,)/w,:/w, ,if/en, ,value/en, ,>, ,maxcount/en,:/w, ,maxcount/en, ,=/w, ,value/en, ,classes/en, ,=/w, ,key/en, ,return/en, ,classes/en,接下来/l,，/w,在/p,命令/n,行/v,窗口/s,输入/v,如下/v,代码/n,：/w,#,-/w,*/w,-/w,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,sys/en, ,sys/en,./w,path/en,./w,append/en,(/w,"/w,./w,./w,./w,文件/n,路径/n,./w,./w,./w,"/w,)/w, ,import/en, ,knn/en, ,from/en, ,numpy/en, ,import/en, ,*/w, ,dataset/en,,/w,labels/en, ,=/w, ,knn/en,./w,createdataset/en,(/w,)/w, ,input/en, ,=/w, ,array/en,(/w,[/w,1.1/m,,/w,0.3/m,]/w,)/w, ,k/en, ,=/w, ,3/m, ,output/en, ,=/w, ,knn/en,./w,classify/en,(/w,input/en,,/w,dataset/en,,/w,labels/en,,/w,k/en,)/w, ,print/en,(/w,"/w,测试/vn,数据/n,为/p,:/w,"/w,,/w,input/en,,/w,"/w,分类/vn,结果/n,为/p,：/w,"/w,,/w,output/en,)/w,回/v,车/n,之后/f,的/u,结果/n,为/p,：/w,测试/vn,数据/n,为/p,：/w, ,[/w, ,1.1/m, , ,0.3/m,]/w, ,分类/vn,为/p,：/w, ,a/en,答案/n,符合/v,我们/r,的/u,预期/vn,，/w,要/v,证明/v,算法/n,的/u,准确性/n,，/w,势必/d,还/d,需要/v,通过/p,处理/v,复杂/a,问题/n,进行/v,验证/vn,，/w,之后/f,另行/d,说明/v,。/w,这/r,是/v,第一/m,次/q,用/p,python/en,编/v,的/u,一个/m,小/a,程序/n,，/w,势必/d,会/v,遇到/v,各种/r,问题/n,，/w,在/p,此次/r,编程/vn,调试/v,过程/n,中/f,遇到/v,了/u,如下/v,问题/n,：/w,1/m, ,导入/v,./w,py/en,文件/n,路径/n,有/v,问题/n,，/w,因此/c,需要/v,在/p,最/d,开始/v,加/v,如下/v,代码/n,：/w,import/en, ,syssys/en,./w,path/en,./w,append/en,(/w,"/w,文件/n,路径/n,"/w,)/w,，/w,这样/r,就/d,不/d,会/v,存在/v,路径/n,有/v,误/v,的/u,问题/n,了/u,；/w,2/m, ,在/p,python/en,提示/vn,代码/n,存在/v,问题/n,时/ng,，/w,一定/d,要/v,及时/ad,改正/v,，/w,改正/v,之后/f,保存/v,之后/f,再/d,执行/v,命令/n,行/v,，/w,这/r,一点/mq,跟/p,matlab/en,是/v,不/d,一样/u,的/u,，/w,所以/c,在/p,python/en,中/f,最好/d,是/v,敲代码/nw,的/u,同时/c,在/p,命令/n,行/v,中/f,一段/mq,一段/mq,的/u,验证/vn,；/w,3/m, ,在/p,调用/v,文件/n,时/ng,函数/n,名/q,一定/d,要/v,写/v,正确/a,，/w,否则/c,会/v,出现/v,：/w,'/w,module/en,'/w, ,object/en, ,has/en, ,no/en, ,attribute/en, ,'/w,creatdataset/en,'/w,；/w,4/m, ,'/w,int/en,'/w, ,object/en, ,has/en, ,no/en, ,attribute/en, ,'/w,kclassify/en,'/w,，/w,这个/r,问题/n,出现/v,的/u,原因/n,是/v,之前/f,我/r,讲/v,文件/n,保存/v,名/q,为/p,k/en,./w,py/en,,/w,在/p,执行/v,output/en, ,=/w, ,k/en,./w,classify/en,(/w,input/en,,/w,dataset/en,,/w,labels/en,,/w,k/en,)/w,这/r,一句/mq,就/d,会/v,出错/v,。/w,根据/p,函数/n,式/k,编程/vn,的/u,思想/n,，/w,每个/r,函数/n,都/d,可以/v,看/v,为/p,是/v,一个/m,变量/n,而/c,将/d,k/en,赋值/v,后/f,，/w,调用/v,k/en,./w,py/en,时/ng,就/d,会/v,出现/v,问题/n,。/w,三/m, ,matlab/en,实现/v,之前/f,一直/d,在/p,用/p,matlab/en,做/v,聚类/nw,算法/n,的/u,一些/m,优化/v,，/w,其次/c,就/d,是/v,数模/nw,的/u,一些/m,常用/a,算法/n,，/w,对于/p,别的/r,算法/n,，/w,还/d,真/d,是/v,没有/v,上手/vd,编/v,过/u,，/w,基础/n,还/d,在/p,，/w,思想/n,还/d,在/p,，/w,当然/d,要/v,动手/v,编/v,一下/m,，/w,也/d,是/v,不/d,希望/v,在/p,学/v,python/en,的/u,同时/c,对/p,matlab/en,逐渐/d,陌生/a,吧/y,，/w,走走/v,停/v,停/v,，/w,停/v,很/d,重要/a,。/w,首先/d,，/w,建立/v,knn/en,./w,m/en,文件/n,，/w,如下/v,：/w,%/w,%/w, ,knn/en, ,clear/en, ,all/en, ,clc/en, ,%/w,%/w, ,data/en, ,traindata/en, ,=/w, ,[/w,1.0/m,,/w,2.0/m,;/w,1.2/m,,/w,0.1/m,;/w,0.1/m,,/w,1.4/m,;/w,0.3/m,,/w,3.5/m,]/w,;/w, ,trainclass/en, ,=/w, ,[/w,1/m,,/w,1/m,,/w,2/m,,/w,2/m,]/w,;/w, ,testdata/en, ,=/w, ,[/w,0.5/m,,/w,2.3/m,]/w,;/w, ,k/en, ,=/w, ,3/m,;/w, ,%/w,%/w, ,distance/en, ,row/en, ,=/w, ,size/en,(/w,traindata/en,,/w,1/m,)/w,;/w, ,col/en, ,=/w, ,size/en,(/w,traindata/en,,/w,2/m,)/w,;/w, ,test/en, ,=/w, ,repmat/en,(/w,testdata/en,,/w,row/en,,/w,1/m,)/w,;/w, ,dis/en, ,=/w, ,zeros/en,(/w,1/m,,/w,row/en,)/w,;/w, ,for/en, ,i/en, ,=/w, ,1/m,:/w,row/en, ,diff/en, ,=/w, ,0/m,;/w, ,for/en, ,j/en, ,=/w, ,1/m,:/w,col/en, ,diff/en, ,=/w, ,diff/en, ,+/w, ,(/w,test/en,(/w,i/en,,/w,j/en,)/w, ,-/w, ,traindata/en,(/w,i/en,,/w,j/en,)/w,)/w,./w,^,2/m,;/w, ,end/en, ,dis/en,(/w,1/m,,/w,i/en,)/w, ,=/w, ,diff/en,./w,^,0.5/m,;/w, ,end/en, ,%/w,%/w, ,sort/en, ,jointdis/en, ,=/w, ,[/w,dis/en,;/w,trainclass/en,]/w,;/w, ,sortdis/en,=/w, ,sortrows/en,(/w,jointdis/en,'/w,)/w,;/w, ,sortdisclass/en, ,=/w, ,sortdis/en,'/w,;/w, ,%/w,%/w, ,find/en, ,class/en, ,=/w, ,sort/en,(/w,2/m,:/w,1/m,:/w,k/en,)/w,;/w, ,member/en, ,=/w, ,unique/en,(/w,class/en,)/w,;/w, ,num/en, ,=/w, ,size/en,(/w,member/en,)/w,;/w, ,max/en, ,=/w, ,0/m,;/w, ,for/en, ,i/en, ,=/w, ,1/m,:/w,num/en, ,count/en, ,=/w, ,find/en,(/w,class/en, ,=/w,=/w, ,member/en,(/w,i/en,)/w,)/w,;/w, ,if/en, ,count/en, ,>, ,max/en, ,max/en, ,=/w, ,count/en,;/w, ,label/en, ,=/w, ,member/en,(/w,i/en,)/w,;/w, ,end/en, ,end/en, ,disp/en,(/w,'/w,最终/d,的/u,分类/vn,结果/n,为/p,：/w,'/w,)/w,;/w, ,fprintf/en,(/w,'/w,%/w,d/en,\/w,n/en,'/w,,/w,label/en,)/w,运行/vn,之后/f,的/u,结果/n,是/v,，/w,最终/d,的/u,分类/vn,结果/n,为/p,：/w,2/m,。/w,和/c,预期/vn,结果/n,一样/u,。/w,三/m, ,实战/n,之前/f,，/w,对/p,knn/en,进行/v,了/u,一个/m,简单/a,的/u,验证/vn,，/w,今天/t,我们/r,使用/v,knn/en,改进/v,约会/vn,网站/n,的/u,效果/n,，/w,个人/n,理解/v,，/w,这个/r,问题/n,也/d,可以/v,转化/v,为/p,其它/r,的/u,比如/v,各个/r,网站/n,迎合/v,客户/n,的/u,喜好/v,所/u,作出/v,的/u,推荐/v,之类/r,的/u,，/w,当然/d,，/w,今天/t,的/u,这个/r,例子/n,功能/n,也/d,实在/d,有限/a,。/w,在/p,这里/r,根据/p,一个/m,人/n,收集/v,的/u,约会/vn,数据/n,，/w,根据/p,主要/b,的/u,样本/n,特征/n,以及/c,得到/v,的/u,分类/vn,，/w,对/p,一些/m,未知/vn,类别/n,的/u,数据/n,进行/v,分类/vn,，/w,大致/d,就/d,是/v,这样/r,。/w,我/r,使用/v,的/u,是/v,python/en, ,3/m,./w,4/m,./w,3/m,,/w,首先/d,建立/v,一个/m,文件/n,，/w,例如/v,date/en,./w,py/en,,/w,具体/a,的/u,代码/n,如下/v,：/w,#,coding/en,:/w,utf/en,-/w,8/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,import/en, ,operator/en, ,from/en, ,collections/en, ,import/en, ,counter/en, ,import/en, ,matplotlib/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,#,#,#,导入/v,特征/n,数据/n, ,def/en, ,file/en,2/m,matrix/en,(/w,filename/en,)/w,:/w, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,contain/en, ,=/w, ,fr/en,./w,readlines/en,(/w,)/w,#,#,#,读/v,取/v,文件/n,的/u,所有/b,内容/n, ,count/en, ,=/w, ,len/en,(/w,contain/en,)/w, ,returnmat/en, ,=/w, ,zeros/en,(/w,(/w,count/en,,/w,3/m,)/w,)/w, ,classlabelvector/en, ,=/w, ,[/w,]/w, ,index/en, ,=/w, ,0/m, ,for/en, ,line/en, ,in/en, ,contain/en,:/w, ,line/en, ,=/w, ,line/en,./w,strip/en,(/w,)/w, ,#,#,#,截取/v,所有/b,的/u,回车/v,字符/n, ,listfromline/en, ,=/w, ,line/en,./w,split/en,(/w,'/w,\/w,t/en,'/w,)/w, ,returnmat/en,[/w,index/en,,/w,:/w,]/w, ,=/w, ,listfromline/en,[/w,0/m,:/w,3/m,]/w,#,#,#,选取/v,前/f,三个/m,元素/n,，/w,存储/vn,在/p,特征/n,矩阵/n,中/f, ,classlabelvector/en,./w,append/en,(/w,listfromline/en,[/w,-/w,1/m,]/w,)/w,#,#,#,将/d,列表/v,的/u,最后/f,一列/mq,存储/vn,到/v,向量/n,classlabelvector/en,中/f, ,index/en, ,+/w,=/w, ,1/m, ,#,#,将/d,列表/v,的/u,最后/f,一列/mq,由/p,字符/n,串/v,转化/v,为/p,数字/n,，/w,便于/v,以后/f,的/u,计算/v, ,dictclasslabel/en, ,=/w, ,counter/en,(/w,classlabelvector/en,)/w, ,classlabel/en, ,=/w, ,[/w,]/w, ,kind/en, ,=/w, ,list/en,(/w,dictclasslabel/en,)/w, ,for/en, ,item/en, ,in/en, ,classlabelvector/en,:/w, ,if/en, ,item/en, ,=/w,=/w, ,kind/en,[/w,0/m,]/w,:/w, ,item/en, ,=/w, ,1/m, ,elif/en, ,item/en, ,=/w,=/w, ,kind/en,[/w,1/m,]/w,:/w, ,item/en, ,=/w, ,2/m, ,else/en,:/w, ,item/en, ,=/w, ,3/m, ,classlabel/en,./w,append/en,(/w,item/en,)/w, ,return/en, ,returnmat/en,,/w,classlabel/en,#,#,#,#,#,将/d,文本/n,中/f,的/u,数据/n,导入/v,到/v,列表/v, ,#,#,绘图/vn,（/w,可以/v,直观/a,的/u,表示/v,出/v,各/r,特征/n,对/p,分类/vn,结果/n,的/u,影响/vn,程度/n,）/w, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,d/en,:/w,\/w,python/en,\/w,mechine/en, ,learing/en, ,in/en, ,action/en,\/w,knn/en,\/w,datingtestset/en,./w,txt/en,'/w,)/w, ,fig/en, ,=/w, ,plt/en,./w,figure/en,(/w,)/w, ,ax/en, ,=/w, ,fig/en,./w,add/en,_,subplot/en,(/w,111/m,)/w, ,ax/en,./w,scatter/en,(/w,datingdatamat/en,[/w,:/w,,/w,0/m,]/w,,/w,datingdatamat/en,[/w,:/w,,/w,1/m,]/w,,/w,15.0/m,*/w,array/en,(/w,datinglabels/en,)/w,,/w,15.0/m,*/w,array/en,(/w,datinglabels/en,)/w,)/w, ,plt/en,./w,show/en,(/w,)/w, ,#,#, ,归/v,一/m,化/v,数据/n,,/w,保证/v,特征/n,等/u,权重/nz, ,def/en, ,autonorm/en,(/w,dataset/en,)/w,:/w, ,minvals/en, ,=/w, ,dataset/en,./w,min/en,(/w,0/m,)/w, ,maxvals/en, ,=/w, ,dataset/en,./w,max/en,(/w,0/m,)/w, ,ranges/en, ,=/w, ,maxvals/en, ,-/w, ,minvals/en, ,normdataset/en, ,=/w, ,zeros/en,(/w,shape/en,(/w,dataset/en,)/w,)/w,#,#,建立/v,与/p,dataset/en,结构/n,一样/u,的/u,矩阵/n, ,m/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,1/m,,/w,m/en,)/w,:/w, ,normdataset/en,[/w,i/en,,/w,:/w,]/w, ,=/w, ,(/w,dataset/en,[/w,i/en,,/w,:/w,]/w, ,-/w, ,minvals/en,)/w, ,//w, ,ranges/en, ,return/en, ,normdataset/en,,/w,ranges/en,,/w,minvals/en, ,#,#,knn/en,算法/n, ,def/en, ,classify/en,(/w,input/en,,/w,dataset/en,,/w,label/en,,/w,k/en,)/w,:/w, ,datasize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,#,#,#,#,计算/v,欧式/b,距离/n, ,diff/en, ,=/w, ,tile/en,(/w,input/en,,/w,(/w,datasize/en,,/w,1/m,)/w,)/w, ,-/w, ,dataset/en, ,sqdiff/en, ,=/w, ,diff/en, ,*/w,*/w, ,2/m, ,squaredist/en, ,=/w, ,sum/en,(/w,sqdiff/en,,/w,axis/en, ,=/w, ,1/m,)/w,#,#,#,行/v,向/p,量/n,分别/d,相加/v,，/w,从而/c,得到/v,新/a,的/u,一个/m,行/v,向/p,量/n, ,dist/en, ,=/w, ,squaredist/en, ,*/w,*/w, ,0.5/m, ,#,#,对/p,距离/n,进行/v,排序/vn, ,sorteddistindex/en, ,=/w, ,argsort/en,(/w,dist/en,)/w,#,#,argsort/en,(/w,)/w,根据/p,元素/n,的/u,值/n,从/p,大/a,到/v,小/a,对/p,元素/n,进行/v,排序/vn,，/w,返回/v,下/f,标/v, ,classcount/en,=/w,{/w,}/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,votelabel/en, ,=/w, ,label/en,[/w,sorteddistindex/en,[/w,i/en,]/w,]/w, ,#,#,#,对/p,选取/v,的/u,k/en,个/q,样本/n,所/u,属/v,的/u,类别/n,个数/n,进行/v,统计/v, ,classcount/en,[/w,votelabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,votelabel/en,,/w,0/m,)/w, ,+/w, ,1/m, ,#,#,#,选取/v,出现/v,的/u,类别/n,次数/n,最/d,多/a,的/u,类别/n, ,maxcount/en, ,=/w, ,0/m, ,for/en, ,key/en,,/w,value/en, ,in/en, ,classcount/en,./w,items/en,(/w,)/w,:/w, ,if/en, ,value/en, ,>, ,maxcount/en,:/w, ,maxcount/en, ,=/w, ,value/en, ,classes/en, ,=/w, ,key/en, ,return/en, ,classes/en, ,#,#,测试/vn,(/w,选取/v,10%/mq,测试/vn,）/w, ,def/en, ,datingtest/en,(/w,)/w,:/w, ,rate/en, ,=/w, ,0.10/m, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,d/en,:/w,\/w,python/en,\/w,mechine/en, ,learing/en, ,in/en, ,action/en,\/w,knn/en,\/w,datingtestset/en,./w,txt/en,'/w,)/w, ,normmat/en,,/w,ranges/en,,/w,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,m/en, ,=/w, ,normmat/en,./w,shape/en,[/w,0/m,]/w, ,testnum/en, ,=/w, ,int/en,(/w,m/en, ,*/w, ,rate/en,)/w, ,errorcount/en, ,=/w, ,0.0/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,1/m,,/w,testnum/en,)/w,:/w, ,classifyresult/en, ,=/w, ,classify/en,(/w,normmat/en,[/w,i/en,,/w,:/w,]/w,,/w,normmat/en,[/w,testnum/en,:/w,m/en,,/w,:/w,]/w,,/w,datinglabels/en,[/w,testnum/en,:/w,m/en,]/w,,/w,3/m,)/w, ,print/en,(/w,"/w,分类/vn,后/f,的/u,结果/n,为/p,:/w,,/w,"/w,,/w, ,classifyresult/en,)/w, ,print/en,(/w,"/w,原/b,结果/n,为/p,：/w,"/w,,/w,datinglabels/en,[/w,i/en,]/w,)/w, ,if/en,(/w,classifyresult/en, ,!/w,=/w, ,datinglabels/en,[/w,i/en,]/w,)/w,:/w, ,errorcount/en, ,+/w,=/w, ,1.0/m, ,print/en,(/w,"/w,误/v,分率/n,为/p,:/w,"/w,,/w,(/w,errorcount/en,//w,float/en,(/w,testnum/en,)/w,)/w,)/w, ,#,#,#,预测/v,函数/n, ,def/en, ,classifyperson/en,(/w,)/w,:/w, ,resultlist/en, ,=/w, ,[/w,'/w,一点/m,也/d,不/d,喜欢/v,'/w,,/w,'/w,有/v,一/m,丢/v,丢/v,喜欢/v,'/w,,/w,'/w,灰常/d,喜欢/v,'/w,]/w, ,percenttats/en, ,=/w, ,float/en,(/w,input/en,(/w,"/w,玩/v,视频/n,所/u,占/v,的/u,时间/n,比/p,?/w,"/w,)/w,)/w, ,miles/en, ,=/w, ,float/en,(/w,input/en,(/w,"/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程数/n,?/w,"/w,)/w,)/w, ,icecream/en, ,=/w, ,float/en,(/w,input/en,(/w,"/w,每周/r,所/u,消费/vn,的/u,冰淇淋/n,公升/q,数/m,?/w,"/w,)/w,)/w, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,d/en,:/w,\/w,python/en,\/w,mechine/en, ,learing/en, ,in/en, ,action/en,\/w,knn/en,\/w,datingtestset/en,2/m,./w,txt/en,'/w,)/w, ,normmat/en,,/w,ranges/en,,/w,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,inarr/en, ,=/w, ,array/en,(/w,[/w,miles/en,,/w,percenttats/en,,/w,icecream/en,]/w,)/w, ,classifierresult/en, ,=/w, ,classify/en,(/w,(/w,inarr/en,-/w,minvals/en,)/w,//w,ranges/en,,/w,normmat/en,,/w,datinglabels/en,,/w,3/m,)/w, ,print/en,(/w,"/w,你/r,对/p,这个/r,人/n,的/u,喜欢/v,程度/n,:/w,"/w,,/w,resultlist/en,[/w,classifierresult/en, ,-/w, ,1/m,]/w,)/w,新建/v,test/en,./w,py/en,文件/n,了解/v,程序/n,的/u,运行/vn,结果/n,，/w,代码/n,：/w,#,coding/en,:/w,utf/en,-/w,8/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,import/en, ,operator/en, ,from/en, ,collections/en, ,import/en, ,counter/en, ,import/en, ,matplotlib/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,import/en, ,sys/en, ,sys/en,./w,path/en,./w,append/en,(/w,"/w,d/en,:/