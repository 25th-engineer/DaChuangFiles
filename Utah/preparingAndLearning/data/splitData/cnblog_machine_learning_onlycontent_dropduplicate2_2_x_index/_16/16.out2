1/m, ,knn/en,算法/n,1.1/m, ,knn/en,算法/n,简介/n,knn/en,（/w,k/en,-/w,nearest/en, ,neighbor/en,）/w,工作/vn,原理/n,：/w,存在/v,一个/m,样本/n,数据/n,集合/v,，/w,也/d,称为/v,训练/vn,样本/n,集/vg,，/w,并且/c,样本/n,集中/v,每个/r,数据/n,都/d,存在/v,标签/n,，/w,即/v,我们/r,知道/v,样本/n,集中/v,每/r,一/m,数据/n,与/p,所属/n,分类/vn,对应/v,的/u,关系/n,。/w,输入/v,没有/v,标签/n,的/u,数据/n,后/f,，/w,将/d,新/a,数据/n,中/f,的/u,每个/r,特征/n,与/p,样本/n,集中/v,数据/n,对应/v,的/u,特征/n,进行/v,比较/d,，/w,提取/v,出/v,样本/n,集中/v,特征/n,最/d,相似/a,数据/n,（/w,最近/t,邻/vg,）/w,的/u,分类/vn,标签/n,。/w,一般来说/l,，/w,我们/r,只/d,选择/v,样本/n,数据/n,集中/v,前/f,k/en,个/q,最/d,相似/a,的/u,数据/n,，/w,这/r,就/d,是/v,k/en,近邻/n,算法/n,中/f,k/en,的/u,出处/n,，/w,通常/d,k/en,是/v,不/d,大于/v,20/m,的/u,整数/n,。/w,最后/f,选择/v,k/en,个/q,最/d,相似/a,数据/n,中/f,出现/v,次数/n,最/d,多/a,的/u,分类/vn,作为/v,新/a,数据/n,的/u,分类/vn,。/w,说明/v,：/w,knn/en,没有/v,显示/v,的/u,训练/vn,过程/n,，/w,它/r,是/v,“/w,懒惰/a,学习/v,”/w,的/u,代表/n,，/w,它/r,在/p,训练/vn,阶段/n,只是/d,把/p,数据/n,保存/v,下来/v,，/w,训练/vn,时间/n,开销/v,为/p,0/m,，/w,等/u,收到/v,测试/vn,样本/n,后/f,进行/v,处理/v,。/w,举例/v,：/w,以/p,电影/n,分类/vn,作为/v,例子/n,，/w,电影/n,题材/n,可/v,分为/v,爱情/n,片/q,，/w,动作片/nw,等/u,，/w,那么/r,爱情/n,片/q,有/v,哪些/r,特征/n,？/w,动作片/nw,有/v,哪些/r,特征/n,呢/y,？/w,也就是说/l,给/p,定/v,一部/mq,电影/n,，/w,怎么/r,进行/v,分类/vn,？/w,这里/r,假定/v,将/d,电影/n,分为/v,爱情/n,片/q,和/c,动作片/nw,两类/mq,，/w,如果/c,一部/mq,电影/n,中/f,接吻/v,镜头/n,很多/m,，/w,打斗/v,镜头/n,较/d,少/a,，/w,显然/ad,是/v,属于/v,爱情/n,片/q,，/w,反之为动作片/nw,。/w,有人/r,曾/d,根据/p,电影/n,中/f,打斗/v,动作/n,和/c,接吻/v,动作/n,数量/n,进行/v,评估/vn,，/w,数据/n,如下/v,：/w,电影/n,名称/n,打斗/v,镜头/n,接吻/v,镜头/n,电影/n,类别/n,califoria/en, ,man/en,3104/m,爱情/n,片/q,beautigul/en, ,woman/en,181/m,爱情/n,片/q,kevin/en, ,longblade/en,10110/m,动作片/nw,amped/en, ,ii/en,982/m,动作片/nw,给/p,定/v,一部/mq,电影/n,数据/n,（/w,18/m,，/w,90/m,）/w,打斗/v,镜头/n,18个/m,，/w,接吻/v,镜头/n,90个/m,，/w,如何/r,知道/v,它/r,是/v,什么/r,类型/n,的/u,呢/y,？/w,knn/en,是/v,这样/r,做/v,的/u,，/w,首先/d,计算/v,未知/vn,电影/n,与/p,样本/n,集中/v,其他/r,电影/n,的/u,距离/n,（/w,这里/r,使用/v,曼哈顿/ns,距离/n,）/w,，/w,数据/n,如下/v,：/w,电影/n,名称/n,与/p,未知/vn,分类/vn,电影/n,的/u,距离/n,califoria/en, ,man/en,20.5/m,beautigul/en, ,woman/en,19.2/m,kevin/en, ,longblade/en,115.3/m,amped/en, ,ii/en,118.9/m,现在/t,我们/r,按照/p,距离/n,的/u,递增/v,顺序/n,排序/vn,，/w,可以/v,找到/v,k/en,个/q,距离/n,最近/t,的/u,电影/n,，/w,加入/v,k/en,=/w,3/m,,/w,那么/r,来/v,看/v,排序/vn,的/u,前/f,3个/m,电影/n,的/u,类别/n,，/w,爱情/n,片/q,，/w,爱情/n,片/q,，/w,动作片/nw,，/w,下面/f,来/v,进行/v,投票/v,，/w,这部/r,未知/vn,的/u,电影/n,爱情/n,片/q,2票/mq,，/w,动作片/nw,1票/mq,，/w,那么/r,我们/r,就/d,认为/v,这部/r,电影/n,属于/v,爱情/n,片/q,。/w,1.2/m, ,knn/en,算法/n,优/ag,缺点/n,优点/n,：/w,精度/n,高/a,，/w,对/p,异常/a,值/n,不/d,敏感/a,、/w,无数/m,据/p,输入/v,假定/v,缺点/n,：/w,计算/v,复杂/a,度/q,高/a,、/w,空间/n,复杂/a,度/q,高/a,1.3/m, ,knn/en,算法/n,python/en,代码/n,实现/v,实现/v,步骤/n,：/w,（/w,1/m,）/w,计算/v,距离/n,（/w,2/m,）/w,选择/v,距离/n,最小/a,的/u,k/en,个/q,点/q,（/w,3/m,）/w,排序/vn,python/en, ,3/m,代码/n,：/w,1/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,2/m, ,import/en, ,operator/en, ,3/m, ,4/m, ,def/en, ,classify/en,(/w,intx/en,,/w,dataset/en,,/w,labels/en,,/w,k/en,)/w,:/w, ,5/m, ,'/w,'/w,'/w, ,6/m, ,knn/en,算法/n, ,7/m, ,'/w,'/w,'/w, ,8/m, ,#,numpy/en,中/f,shape/en,[/w,0/m,]/w,返回/v,数/m,组/q,的/u,行数/n,，/w,shape/en,[/w,1/m,]/w,返回/v,列/v,数/m, ,9/m, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,10/m, ,#,将/d,intx/en,在/p,横向/n,重复/v,datasetsize/en,次/q,，/w,纵向/n,重复/v,1次/mq, ,11/m, ,#,例如/v,intx/en,=/w,(/w,[/w,1/m,,/w,2/m,]/w,)/w,---/nrf,>,(/w,[/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,]/w,)/w,便于/v,后面/f,计算/v, ,12/m, ,diffmat/en, ,=/w, ,np/en,./w,tile/en,(/w,intx/en,,/w,(/w,datasetsize/en,,/w,1/m,)/w,)/w,-/w,dataset/en, ,13/m, ,#,二维/nr,特征/n,相减/nw,后/f,乘方/n, ,14/m, ,sqdifmax/en, ,=/w, ,diffmat/en,*/w,*/w,2/m, ,15/m, ,#,计算/v,距离/n, ,16/m, ,seqdistances/en, ,=/w, ,sqdifmax/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,17/m, ,distances/en, ,=/w, ,seqdistances/en,*/w,*/w,0.5/m, ,18/m, ,print/en, ,(/w,"/w,distances/en,:/w,"/w,,/w,distances/en,)/w, ,19/m, ,#,返回/v,distance/en,中/f,元素/n,从小到大/l,排序/vn,后/f,的/u,索引/n, ,20/m, ,sortdistance/en, ,=/w, ,distances/en,./w,argsort/en,(/w,)/w, ,21/m, ,print/en, ,(/w,"/w,sortdistance/en,:/w,"/w,,/w,sortdistance/en,)/w, ,22/m, ,classcount/en, ,=/w, ,{/w,}/w, ,23/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,24/m, ,#,取出/v,前/f,k/en,个/q,元素/n,的/u,类别/n, ,25/m, ,votelabel/en, ,=/w, ,labels/en,[/w,sortdistance/en,[/w,i/en,]/w,]/w, ,26/m, ,print/en, ,(/w,"/w,第/m,%/w,d/en,个/q,votelabel/en,=/w,%/w,s/en,"/w,,/w,i/en,,/w,votelabel/en,)/w, ,27/m, ,classcount/en,[/w,votelabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,votelabel/en,,/w,0/m,)/w,+/w,1/m, ,28/m, ,#,dict/en,./w,get/en,(/w,key/en,,/w,default/en,=/w,none/en,)/w,,/w,字典/n,的/u,get/en,(/w,)/w,方法/n,,/w,返回/v,指定/v,键/nr,的/u,值/n,,/w,如果/c,值/n,不/d,在/p,字典/n,中/f,返回/v,默认值/nw,。/w, ,29/m, ,#,计算/v,类别/n,次数/n, ,30/m, ,31/m, ,#,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,根据/p,字典/n,的/u,值/n,进行/v,排序/vn, ,32/m, ,#,key/en,=/w,operator/en,./w,itemgetter/en,(/w,0/m,)/w,根据/p,字典/n,的/u,键/nr,进行/v,排序/vn, ,33/m, ,#,reverse/en,降序/nw,排序/vn,字典/n, ,34/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,items/en,(/w,)/w,,/w,key/en, ,=/w, ,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w,reverse/en, ,=/w, ,true/en,)/w, ,35/m, ,#,结果/n,sortedclasscount/en, ,=/w, ,[/w,(/w,'/w,动作片/nw,'/w,,/w, ,2/m,)/w,,/w, ,(/w,'/w,爱情/n,片/q,'/w,,/w, ,1/m,)/w,]/w, ,36/m, ,print/en, ,(/w,"/w,sortedclasscount/en,:/w,"/w,,/w,sortedclasscount/en,)/w, ,37/m, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w,view/en, ,code/en,2/m, ,knn/en,算法/n,实例/n,2.1/m, ,knn/en,实现/v,电影/n,分类/vn,1/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,2/m, ,import/en, ,operator/en, ,3/m, ,4/m, ,def/en, ,createdataset/en,(/w,)/w,:/w, ,5/m, ,#,四组/mq,二维/nr,特征/n, ,6/m, ,group/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,5/m,,/w,115/m,]/w,,/w,[/w,7/m,,/w,106/m,]/w,,/w,[/w,56/m,,/w,11/m,]/w,,/w,[/w,66/m,,/w,9/m,]/w,]/w,)/w, ,7/m, ,#,四组/mq,对应/v,标签/n, ,8/m, ,labels/en, ,=/w, ,(/w,'/w,动作片/nw,'/w,,/w,'/w,动作片/nw,'/w,,/w,'/w,爱情/n,片/q,'/w,,/w,'/w,爱情/n,片/q,'/w,)/w, ,9/m, ,return/en, ,group/en,,/w,labels/en, ,10/m, ,11/m, ,def/en, ,classify/en,(/w,intx/en,,/w,dataset/en,,/w,labels/en,,/w,k/en,)/w,:/w, ,12/m, ,'/w,'/w,'/w, ,13/m, ,knn/en,算法/n, ,14/m, ,'/w,'/w,'/w, ,15/m, ,#,numpy/en,中/f,shape/en,[/w,0/m,]/w,返回/v,数/m,组/q,的/u,行数/n,，/w,shape/en,[/w,1/m,]/w,返回/v,列/v,数/m, ,16/m, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,17/m, ,#,将/d,intx/en,在/p,横向/n,重复/v,datasetsize/en,次/q,，/w,纵向/n,重复/v,1次/mq, ,18/m, ,#,例如/v,intx/en,=/w,(/w,[/w,1/m,,/w,2/m,]/w,)/w,---/nrf,>,(/w,[/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,,/w,[/w,1/m,,/w,2/m,]/w,]/w,)/w,便于/v,后面/f,计算/v, ,19/m, ,diffmat/en, ,=/w, ,np/en,./w,tile/en,(/w,intx/en,,/w,(/w,datasetsize/en,,/w,1/m,)/w,)/w,-/w,dataset/en, ,20/m, ,#,二维/nr,特征/n,相减/nw,后/f,乘方/n, ,21/m, ,sqdifmax/en, ,=/w, ,diffmat/en,*/w,*/w,2/m, ,22/m, ,#,计算/v,距离/n, ,23/m, ,seqdistances/en, ,=/w, ,sqdifmax/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,24/m, ,distances/en, ,=/w, ,seqdistances/en,*/w,*/w,0.5/m, ,25/m, ,print/en, ,(/w,"/w,distances/en,:/w,"/w,,/w,distances/en,)/w, ,26/m, ,#,返回/v,distance/en,中/f,元素/n,从小到大/l,排序/vn,后/f,的/u,索引/n, ,27/m, ,sortdistance/en, ,=/w, ,distances/en,./w,argsort/en,(/w,)/w, ,28/m, ,print/en, ,(/w,"/w,sortdistance/en,:/w,"/w,,/w,sortdistance/en,)/w, ,29/m, ,classcount/en, ,=/w, ,{/w,}/w, ,30/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,31/m, ,#,取出/v,前/f,k/en,个/q,元素/n,的/u,类别/n, ,32/m, ,votelabel/en, ,=/w, ,labels/en,[/w,sortdistance/en,[/w,i/en,]/w,]/w, ,33/m, ,print/en, ,(/w,"/w,第/m,%/w,d/en,个/q,votelabel/en,=/w,%/w,s/en,"/w,,/w,i/en,,/w,votelabel/en,)/w, ,34/m, ,classcount/en,[/w,votelabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,votelabel/en,,/w,0/m,)/w,+/w,1/m, ,35/m, ,#,dict/en,./w,get/en,(/w,key/en,,/w,default/en,=/w,none/en,)/w,,/w,字典/n,的/u,get/en,(/w,)/w,方法/n,,/w,返回/v,指定/v,键/nr,的/u,值/n,,/w,如果/c,值/n,不/d,在/p,字典/n,中/f,返回/v,默认值/nw,。/w, ,36/m, ,#,计算/v,类别/n,次数/n, ,37/m, ,38/m, ,#,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,根据/p,字典/n,的/u,值/n,进行/v,排序/vn, ,39/m, ,#,key/en,=/w,operator/en,./w,itemgetter/en,(/w,0/m,)/w,根据/p,字典/n,的/u,键/nr,进行/v,排序/vn, ,40/m, ,#,reverse/en,降序/nw,排序/vn,字典/n, ,41/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,items/en,(/w,)/w,,/w,key/en, ,=/w, ,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w,reverse/en, ,=/w, ,true/en,)/w, ,42/m, ,#,结果/n,sortedclasscount/en, ,=/w, ,[/w,(/w,'/w,动作片/nw,'/w,,/w, ,2/m,)/w,,/w, ,(/w,'/w,爱情/n,片/q,'/w,,/w, ,1/m,)/w,]/w, ,43/m, ,print/en, ,(/w,"/w,sortedclasscount/en,:/w,"/w,,/w,sortedclasscount/en,)/w, ,44/m, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,45/m, ,46/m, ,47/m, ,48/m, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,49/m, ,group/en,,/w,labels/en, ,=/w, ,createdataset/en,(/w,)/w, ,50/m, ,test/en, ,=/w, ,[/w,20/m,,/w,101/m,]/w, ,51/m, ,test/en,_,class/en, ,=/w, ,classify/en,(/w,test/en,,/w,group/en,,/w,labels/en,,/w,3/m,)/w, ,52/m, ,print/en, ,(/w,test/en,_,class/en,)/w,view/en, ,code/en,2.2/m, ,改进/v,约会/vn,网站/n,匹配/vn,这个/r,例子/n,简单/a,说/v,就是/d,通过/p,knn/en,找到/v,你/r,喜欢/v,的/u,人/n,，/w,首先/d,数据/n,样本/n,包含/v,三个/m,特征/n,，/w,（/w,a/en,）/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,（/w,b/en,）/w,玩游戏/n,消耗/v,的/u,时间/n,（/w,c/en,）/w,每周/r,消耗/v,的/u,冰激淋公升数/nw,，/w,样本/n,数据/n,放在/v,txt/en,中/f,，/w,如下/v,，/w,前/f,三/m,列为/v,三个/m,特征/n,值/n,，/w,最后/f,一列/mq,为/p,标签/n,下面/f,首先/d,读/v,取/v,数据/n,，/w,获取/v,数据集/nw,和/c,标签/n,1/m, ,def/en, ,file/en,2/m,matrix/en,(/w,filename/en,)/w,:/w, ,2/m, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,3/m, ,arraylines/en, ,=/w, ,fr/en,./w,readlines/en,(/w,)/w, ,4/m, ,#,获取/v,行数/n, ,5/m, ,numberoflines/en, ,=/w, ,len/en,(/w,arraylines/en,)/w, ,6/m, ,#,返回/v,numpy/en,的/u,数据/n,矩阵/n,,/w,目前/t,矩阵/n,数据/n,为/p,0/m, ,7/m, ,returnmat/en, ,=/w, ,np/en,./w,zeros/en,(/w,[/w,numberoflines/en,,/w,3/m,]/w,)/w, ,8/m, ,#,返回/v,的/u,分类/vn,标签/n, ,9/m, ,classlabelvector/en, ,=/w, ,[/w,]/w, ,10/m, ,#,行/v,的/u,索引/n, ,11/m, ,index/en, ,=/w, ,0/m, ,12/m, ,for/en, ,line/en, ,in/en, ,arraylines/en,:/w, ,13/m, ,#,str/en,./w,strip/en,(/w,rm/en,)/w, ,删除/v,str/en,头/n,和/c,尾/q,指定/v,的/u,字符/n, ,rm/en,为/p,空/a,时/ng,，/w,默认/v,删除/v,空白符/n,(/w,包括/v,'/w,\/w,n/en,'/w,,/w,'/w,\/w,r/en,'/w,,/w,'/w,\/w,t/en,'/w,,/w,'/w, ,'/w,)/w, ,14/m, ,line/en, ,=/w, ,line/en,./w,strip/en,(/w,)/w, ,15/m, ,#,每/r,行/v,数据/n,是/v,\/w,t/en,划分/v,的/u,，/w,将/d,每/r,行/v,数据/n,按照/p,\/w,t/en,进行/v,切片/v,划分/v, ,16/m, ,listfromline/en, ,=/w, ,line/en,./w,split/en,(/w,'/w,\/w,t/en,'/w,)/w, ,17/m, ,#,取出/v,前/f,三列/mq,数据/n,存放/v,到/v,returnmat/en, ,18/m, ,returnmat/en,[/w,index/en,,/w,:/w,]/w, ,=/w, ,listfromline/en,[/w,0/m,:/w,3/m,]/w, ,19/m, ,#,根据/p,文本/n,中/f,标记/n,的/u,喜欢/v,程度/n,进行/v,分类/vn, ,20/m, ,if/en, ,listfromline/en,[/w,-/w,1/m,]/w, ,=/w,=/w, ,"/w,didntlike/en,"/w,:/w, ,21/m, ,classlabelvector/en,./w,append/en,(/w,1/m,)/w, ,22/m, ,elif/en, ,listfromline/en,[/w,-/w,1/m,]/w, ,=/w,=/w, ,"/w,smalldoses/en,"/w,:/w, ,23/m, ,classlabelvector/en,./w,append/en,(/w,2/m,)/w, ,24/m, ,else/en,:/w, ,25/m, ,classlabelvector/en,./w,append/en,(/w,3/m,)/w, ,26/m, ,index/en, ,+/w,=/w, ,1/m, ,27/m, ,return/en, ,returnmat/en,,/w,classlabelvectorview/en, ,code/en,数据/n,和/c,标签/n,我们/r,可以/v,打印/v,一下/m,：/w,下面/f,下面/f,用/p,matplotlib/en,作/v,图/n,看/v,一下/m,数据/n,信息/n,：/w,1/m, ,from/en, ,matplotlib/en,./w,font/en,_,manager/en, ,import/en, ,fontproperties/en, ,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,3/m, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,4/m, ,from/en, ,preparedata/en,_,1/m, ,import/en, ,file/en,2/m,matrix/en, ,5/m, ,import/en, ,matplotlib/en,./w,lines/en, ,as/en, ,mlines/en, ,6/m, ,#, ,from/en, ,matplotlib/en,./w,font/en,_,manage/en, ,import/en, ,fontproperties/en, ,7/m, ,'/w,'/w,'/w, ,8/m, ,函数/n,说明/v,：/w,数据/n,可视化/nz, ,9/m, ,parameters/en,:/w, ,10/m, ,datingdatamat/en, ,-/w, ,特征/n,矩/ng,阵/ng, ,11/m, ,datinglabels/en, ,-/w, ,分类/vn,标签/n,向/p,量/n, ,12/m, ,returns/en,:/w, ,13/m, ,无/v, ,14/m, ,'/w,'/w,'/w, ,15/m, ,def/en, ,showdatas/en,(/w,datingdatamat/en,,/w,datinglabels/en,)/w,:/w, ,16/m, ,#,设置/v,汉子/n,格式/n, ,17/m, ,font/en, ,=/w, ,fontproperties/en,(/w,fname/en,=/w,r/en,"/w,c/en,:/w,\/w,windows/en,\/w,fonts/en,\/w,simsun/en,./w,ttc/en,"/w,,/w, ,size/en,=/w,14/m,)/w, ,18/m, ,#,函数/n,返回/v,一个/m,figure/en,图像/n,和/c,一个/m,子图/nr,ax/en,的/u,array/en,列表/v,。/w, ,19/m, ,fig/en,,/w,axs/en, ,=/w, ,plt/en,./w,subplots/en,(/w,nrows/en,=/w,2/m,,/w,ncols/en,=/w,2/m,,/w,sharex/en,=/w,false/en,,/w,sharey/en,=/w,false/en,,/w,figsize/en,=/w,(/w,13/m,,/w,8/m,)/w,)/w, ,20/m, ,21/m, ,numberoflabels/en, ,=/w, ,len/en,(/w,datinglabels/en,)/w, ,22/m, ,labelcolors/en, ,=/w, ,[/w,]/w, ,23/m, ,for/en, ,i/en, ,in/en, ,datinglabels/en,:/w, ,24/m, ,if/en, ,i/en,=/w,=/w,1/m,:/w, ,25/m, ,labelcolors/en,./w,append/en,(/w,'/w,black/en,'/w,)/w, ,26/m, ,if/en, ,i/en, ,=/w,=/w,2/m,:/w, ,27/m, ,labelcolors/en,./w,append/en,(/w,'/w,orange/en,'/w,)/w, ,28/m, ,if/en, ,i/en,=/w,=/w,3/m,:/w, ,29/m, ,labelcolors/en,./w,append/en,(/w,"/w,red/en,"/w,)/w, ,30/m, ,#,画/v,散点/nw,图/n,，/w,以/p,数据/n,矩阵/n,的/u,第一/m,列/v,（/w,飞行/vn,常客/n,历程/n,）/w,、/w,第二/m,列/v,（/w,玩游戏/n,）/w,数据话/nw,散点/nw,图/n, ,31/m, ,#,散点/nw,大小/n,为/p,15/m, ,透明度/n,为/p,0.5/m, ,32/m, ,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,scatter/en,(/w,x/en,=/w,datingdatamat/en,[/w,:/w,,/w,0/m,]/w,,/w,y/en,=/w,datingdatamat/en,[/w,:/w,,/w,1/m,]/w,,/w,color/en,=/w,labelcolors/en,,/w, ,33/m, ,s/en,=/w,15/m,,/w,alpha/en,=/w,0.5/m,)/w, ,34/m, ,axs/en,0/m,_,title/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,title/en,(/w,u/en,"/w,每年/r,获得/v,的/u,飞行/vn,里程/n,数/m,与/p,玩/v,视频/n,游戏/n,消耗/v,时间/n,占/v,比/p,"/w,,/w, ,35/m, ,fontproperties/en,=/w,font/en,)/w, ,36/m, ,axs/en,0/m,_,xlabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,xlabel/en,(/w,"/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,37/m, ,axs/en,0/m,_,ylabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,ylabel/en,(/w,"/w,玩游戏/n,消耗/v,的/u,时间/n,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,38/m, ,plt/en,./w,setp/en,(/w,axs/en,0/m,_,title/en,_,text/en,,/w,size/en,=/w,9/m,,/w,weight/en,=/w,'/w,bold/en,'/w,,/w,color/en,=/w,'/w,red/en,'/w,)/w, ,39/m, ,#,画/v,散点/nw,图/n,，/w,以/p,数据/n,矩阵/n,的/u,第一/m,列/v,（/w,飞行/vn,常客/n,历程/n,）/w,、/w,第三/nw,列/v,（/w,冰激淋/nw,公斤/q,数/m,）/w,数据话/nw,散点/nw,图/n, ,40/m, ,#,散点/nw,大小/n,为/p,15/m, ,透明度/n,为/p,0.5/m, ,41/m, ,axs/en,[/w,0/m,]/w,[/w,1/m,]/w,./w,scatter/en,(/w,x/en,=/w,datingdatamat/en,[/w,:/w,,/w,0/m,]/w,,/w,y/en,=/w,datingdatamat/en,[/w,:/w,,/w,2/m,]/w,,/w,color/en,=/w,labelcolors/en,,/w, ,42/m, ,s/en,=/w,15/m,,/w,alpha/en,=/w,0.5/m,)/w, ,43/m, ,axs/en,0/m,_,title/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,title/en,(/w,"/w,每年/r,获得/v,的/u,飞行/vn,里程/n,数/m,与/p,冰激淋/nw,公斤/q,数/m,占/v,比/p,"/w,,/w, ,44/m, ,fontproperties/en,=/w,font/en,)/w, ,45/m, ,axs/en,0/m,_,xlabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,xlabel/en,(/w,"/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,46/m, ,axs/en,0/m,_,ylabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,ylabel/en,(/w,"/w,所/u,吃/v,冰激淋/nw,公斤/q,数/m,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,47/m, ,plt/en,./w,setp/en,(/w,axs/en,0/m,_,title/en,_,text/en,,/w,size/en,=/w,9/m,,/w,weight/en,=/w,'/w,bold/en,'/w,,/w,color/en,=/w,'/w,red/en,'/w,)/w, ,48/m, ,#,画/v,散点/nw,图/n,，/w,以/p,数据/n,矩阵/n,的/u,第二/m,列/v,（/w,玩游戏/n,）/w,、/w,第三/nw,列/v,（/w,冰激淋/nw,公斤/q,数/m,）/w,数据话/nw,散点/nw,图/n, ,49/m, ,#,散点/nw,大小/n,为/p,15/m, ,透明度/n,为/p,0.5/m, ,50/m, ,axs/en,[/w,1/m,]/w,[/w,0/m,]/w,./w,scatter/en,(/w,x/en,=/w,datingdatamat/en,[/w,:/w,,/w,1/m,]/w,,/w,y/en,=/w,datingdatamat/en,[/w,:/w,,/w,2/m,]/w,,/w,color/en,=/w,labelcolors/en,,/w, ,51/m, ,s/en,=/w,15/m,,/w,alpha/en,=/w,0.5/m,)/w, ,52/m, ,axs/en,0/m,_,title/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,title/en,(/w,"/w,玩游戏/n,时间/n,与/p,冰激淋/nw,公斤/q,数/m,占/v,比/p,"/w,,/w, ,53/m, ,fontproperties/en,=/w,font/en,)/w, ,54/m, ,axs/en,0/m,_,xlabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,xlabel/en,(/w,"/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,55/m, ,axs/en,0/m,_,ylabel/en,_,text/en,=/w,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,set/en,_,ylabel/en,(/w,"/w,所/u,吃/v,冰激淋/nw,公斤/q,数/m,"/w,,/w,fontproperties/en,=/w,font/en,)/w, ,56/m, ,plt/en,./w,setp/en,(/w,axs/en,0/m,_,title/en,_,text/en,,/w,size/en,=/w,9/m,,/w,weight/en,=/w,'/w,bold/en,'/w,,/w,color/en,=/w,'/w,red/en,'/w,)/w, ,57/m, ,58/m, ,#,设置/v,图例/n, ,59/m, ,didntlike/en, ,=/w, ,mlines/en,./w,line/en,2/m,d/en,(/w,[/w,]/w,,/w,[/w,]/w,,/w,color/en,=/w,'/w,black/en,'/w,,/w,marker/en,=/w,'/w,./w,'/w,,/w,markersize/en,=/w,6/m,,/w,label/en,=/w,'/w,didntlike/en,'/w,)/w, ,60/m, ,smalldose/en, ,=/w, ,mlines/en,./w,line/en,2/m,d/en,(/w,[/w,]/w,,/w,[/w,]/w,,/w,color/en,=/w,'/w,orange/en,'/w,,/w,marker/en,=/w,'/w,./w,'/w,,/w,markersize/en,=/w,6/m,,/w,label/en,=/w,'/w,smalldose/en,'/w,)/w, ,61/m, ,largedose/en, ,=/w, ,mlines/en,./w,line/en,2/m,d/en,(/w,[/w,]/w,,/w,[/w,]/w,,/w,color/en,=/w,'/w,red/en,'/w,,/w,marker/en,=/w,'/w,./w,'/w,,/w,markersize/en,=/w,6/m,,/w,label/en,=/w,'/w,largedose/en,'/w,)/w, ,62/m, ,63/m, ,#,添加/vn,图例/n, ,64/m, ,axs/en,[/w,0/m,]/w,[/w,0/m,]/w,./w,legend/en,(/w,handles/en,=/w,[/w,didntlike/en,,/w,smalldose/en,,/w,largedose/en,]/w,)/w, ,65/m, ,axs/en,[/w,0/m,]/w,[/w,1/m,]/w,./w,legend/en,(/w,handles/en,=/w,[/w,didntlike/en,,/w,smalldose/en,,/w,largedose/en,]/w,)/w, ,66/m, ,axs/en,[/w,1/m,]/w,[/w,0/m,]/w,./w,legend/en,(/w,handles/en,=/w,[/w,didntlike/en,,/w,smalldose/en,,/w,largedose/en,]/w,)/w, ,67/m, ,68/m, ,plt/en,./w,show/en,(/w,)/w, ,69/m, ,70/m, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,71/m, ,filename/en, ,=/w, ,"/w,datingtestset/en,./w,txt/en,"/w, ,72/m, ,returnmat/en,,/w,classlabelvector/en, ,=/w, ,file/en,2/m,matrix/en,(/w,filename/en,)/w, ,73/m, ,showdatas/en,(/w,returnmat/en,,/w,classlabelvector/en,)/w, ,74/m, ,75/m,view/en, ,code/en,这里/r,我/r,把/p,py/en,文件/n,分开/v,写/v,了/u,，/w,还要/v,注意/v,txt/en,数据/n,的/u,路径/n,，/w,高大/a,上/f,的/u,图/n,：/w,样本/n,数据/n,中/f,的/u,到底/d,喜欢/v,什么/r,样子/n,的/u,人/n,？/w,自己/r,去/v,分析/vn,一下/m,吧/y,。/w,下面/f,要/v,对/p,数据/n,进行/v,归/v,一化/nw,，/w,归/v,一化/nw,的/u,原因/n,就/d,不/d,多/a,说/v,了/u,，/w,1/m, ,from/en, ,preparedata/en,_,1/m, ,import/en, ,file/en,2/m,matrix/en, ,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,3/m, ,'/w,'/w,'/w, ,4/m, ,函数/n,说明/v,：/w,数据/n,归/v,一化/nw, ,5/m, ,parameters/en,:/w, ,6/m, ,dataset/en, ,-/w, ,特征/n,矩/ng,阵/ng, ,7/m, ,returns/en,:/w, ,8/m, ,normdataset/en, ,-/w, ,归/v,一化/nw,后/f,的/u,特征/n,矩/ng,阵/ng, ,9/m, ,ranges/en, ,-/w, ,数据/n,范围/n, ,10/m, ,minvals/en, ,-/w, ,数据/n,最小值/nz, ,11/m, ,'/w,'/w,'/w, ,12/m, ,13/m, ,def/en, ,autonorm/en,(/w,dataset/en,)/w,:/w, ,14/m, ,#,获得/v,数据/n,的/u,最大/a,最小值/nz, ,15/m, ,print/en, ,(/w,dataset/en,)/w, ,16/m, ,print/en, ,(/w,"/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,"/w,)/w, ,17/m, ,minvals/en, ,=/w, ,dataset/en,./w,min/en,(/w,0/m,)/w, ,18/m, ,maxvals/en, ,=/w, ,dataset/en,./w,max/en,(/w,0/m,)/w, ,19/m, ,print/en, ,(/w,"/w,minvalues/en,:/w,"/w,,/w,minvals/en,)/w, ,20/m, ,print/en, ,(/w,"/w,maxvaluse/en,:/w,"/w,,/w,maxvals/en,)/w, ,21/m, ,#,计算/v,最/d,大/a,最小值/nz,的/u,差/a, ,22/m, ,ranges/en, ,=/w, ,maxvals/en, ,-/w, ,minvals/en, ,23/m, ,print/en, ,(/w,)/w, ,24/m, ,#,shape/en,(/w,dataset/en,)/w,返回/v,dataset/en,的/u,矩阵/n,行列/n,数/m, ,25/m, ,normdataset/en,=/w,np/en,./w,zeros/en,(/w,np/en,./w,shape/en,(/w,dataset/en,)/w,)/w, ,26/m, ,#,返回/v,dataset/en,的/u,行数/n, ,27/m, ,m/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,28/m, ,#,原始值/nw,减去/v,最小值/nz, ,29/m, ,normdataset/en,=/w,dataset/en,-/w,np/en,./w,tile/en,(/w,minvals/en,,/w,(/w,m/en,,/w,1/m,)/w,)/w, ,30/m, ,#,除/p,以/p,最/d,大/a,值/n,和/c,最小值/nz,的/u,差/a,，/w,得到/v,的/u,归/v,一化/nw,的/u,数据/n, ,31/m, ,normdataset/en, ,=/w, ,normdataset/en,//w,np/en,./w,tile/en,(/w,ranges/en,,/w,(/w,m/en,,/w,1/m,)/w,)/w, ,32/m, ,return/en, ,normdataset/en,,/w,ranges/en,,/w,minvalsview/en, ,code/en,归/v,一化/nw,后/f,的/u,数据/n,如下/v,：/w,有/v,了/u,以上/f,步骤/n,，/w,下面/f,就/d,可以/v,构建/v,完整/a,的/u,约会/vn,分类/vn,，/w,去/v,找/v,你/r,喜欢/v,的/u,人/n,了/u,：/w,1/m, ,from/en, ,preparedata/en,_,1/m, ,import/en, ,file/en,2/m,matrix/en, ,2/m, ,from/en, ,datanormal/en,_,3/m, ,import/en, ,autonorm/en, ,3/m, ,import/en, ,operator/en, ,4/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,5/m, ,'/w,'/w,'/w, ,6/m, ,函数/n,说明/v,：/w,knn/en,算法/n,，/w,分类器/nw, ,7/m, ,parameters/en,:/w, ,8/m, ,inx/en, ,-/w, ,用于/v,分类/vn,的/u,数据/n,（/w,测试集/nw,）/w, ,9/m, ,dataset/en, ,-/w, ,用于/v,训练/vn,的/u,数据/n,（/w,训练集/nw,）/w, ,10/m, ,labes/en, ,-/w, ,分类/vn,标签/n, ,11/m, ,k/en, ,-/w, ,knn/en,算法/n,参数/n,，/w,选择/v,距离/n,最小/a,的/u,k/en,个/q,点/q, ,12/m, ,returns/en,:/w, ,13/m, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,-/w, ,分类/vn,结果/n, ,14/m, ,'/w,'/w,'/w, ,15/m, ,def/en, ,classify/en,0/m,(/w,inx/en,,/w,dataset/en,,/w,labes/en,,/w,k/en,)/w,:/w, ,16/m, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,#,返回/v,行数/n, ,17/m, ,diffmat/en, ,=/w, ,np/en,./w,tile/en,(/w,inx/en,,/w,(/w,datasetsize/en,,/w,1/m,)/w,)/w,-/w,dataset/en, ,18/m, ,sqdiffmat/en, ,=/w, ,diffmat/en,*/w,*/w,2/m, ,19/m, ,sqdistances/en, ,=/w, ,sqdiffmat/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,20/m, ,distances/en, ,=/w, ,sqdistances/en,*/w,*/w,0.5/m, ,21/m, ,sorteddistindices/en, ,=/w,distances/en,./w,argsort/en,(/w,)/w, ,22/m, ,classcount/en, ,=/w, ,{/w,}/w, ,23/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,24/m, ,votelabel/en, ,=/w, ,labes/en,[/w,sorteddistindices/en,[/w,i/en,]/w,]/w, ,25/m, ,classcount/en,[/w,votelabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,votelabel/en,,/w,0/m,)/w,+/w,1/m, ,26/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,items/en,(/w,)/w,,/w,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w,reverse/en,=/w,true/en,)/w, ,27/m, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,28/m, ,def/en, ,datingclasstest/en,(/w,)/w,:/w, ,29/m, ,#,filename/en,=/w,"/w,test/en,./w,txt/en,"/w, ,30/m, ,filename/en, ,=/w, ,"/w,datingtestset/en,./w,txt/en,"/w, ,31/m, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,filename/en,)/w, ,32/m, ,#,取/v,所有/b,数据/n,的/u,10%/mq, ,33/m, ,horatio/en, ,=/w, ,0.1/m, ,34/m, ,#,数据/n,归/v,一化/nw,，/w,返回归/nw,一化/nw,后/f,的/u,矩阵/n,，/w,数据/n,范围/n,，/w,数据/n,最小值/nz, ,35/m, ,normmat/en,,/w,ranges/en,,/w,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,36/m, ,#,获得/v,nornmat/en,的/u,行数/n, ,37/m, ,m/en, ,=/w, ,normmat/en,./w,shape/en,[/w,0/m,]/w, ,38/m, ,#,百分之十/nw,的/u,测试/vn,数据/n,的/u,个数/n, ,39/m, ,numtestvecs/en, ,=/w, ,int/en,(/w,m/en,*/w,horatio/en,)/w, ,40/m, ,#,分类/vn,错误/n,计数/v, ,41/m, ,errorcount/en, ,=/w, ,0.0/m, ,42/m, ,43/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtestvecs/en,)/w,:/w, ,44/m, ,#,前/f,numtestvecs/en,个/q,数据/n,作为/v,测试集/nw,，/w,后/f,m/en,-/w,numtestvecs/en,个/q,数据/n,作为/v,训练集/nw, ,45/m, ,classifierresult/en, ,=/w, ,classify/en,0/m,(/w,normmat/en,[/w,i/en,,/w,:/w,]/w,,/w,normmat/en,[/w,numtestvecs/en,:/w,m/en,,/w,:/w,]/w,,/w, ,46/m, ,datinglabels/en,[/w,numtestvecs/en,:/w,m/en,]/w,,/w,10/m,)/w, ,47/m, ,print/en, ,(/w,"/w,分类/vn,结果/n,：/w,%/w,d/en, ,\/w,t/en,真实/a,类别/n,：/w,%/w,d/en,"/w,%/w,(/w,classifierresult/en,,/w,datinglabels/en,[/w,i/en,]/w,)/w,)/w, ,48/m, ,if/en, ,classifierresult/en, ,!/w,=/w, ,datinglabels/en,[/w,i/en,]/w,:/w, ,49/m, ,errorcount/en, ,+/w,=/w, ,1.0/m, ,50/m, ,print/en, ,(/w,"/w,错误率/n,：/w,%/w,f/en,"/w,%/w,(/w,errorcount/en,//w,float/en,(/w,numtestvecs/en,)/w,*/w,100/m,)/w,)/w, ,51/m, ,52/m, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,53/m, ,datingclasstest/en,(/w,)/w,view/en, ,code/en,都/d,是/v,上面/f,的/u,步骤/n,，/w,这里/r,就/d,不/d,解释/v,了/u,，/w,结果/n,如下/v,所/u,示/vg,：/w,2.3/m, ,手写/v,数字/n,识别/v,数据/n,可以/v,样例/nw,可以/v,打开/v,文本/n,文件/n,进行/v,查看/v,，/w,其中/r,txt/en,文件名/n,的/u,第一/m,个/q,数字/n,为/p,本/r,txt/en,中/f,的/u,数字/n,，/w,目录/n,trainingdigits/en,中/f,包含/v,了/u,大约/d,2000个/m,例子/n,，/w,每个/r,数字/n,大约/d,有/v,200个/m,样本/n,，/w,testdigits/en,中/f,包含/v,900个/m,测试/vn,数据/n,，/w,我们/r,使用/v,trainingdigits/en,中/f,的/u,数据/n,训练/vn,分类器/nw,，/w,testdigits/en,中/f,的/u,数据/n,作为/v,测试/vn,，/w,两组/mq,数据/n,没有/v,重合/vn,。/w,数据/n,在/p,这里/r,：/w,https/en,:/w,//w,//w,github/en,./w,com/en,//w,jenny/en,0611/m,//w,ml/en,_,learning/en,01/m,首先/d,我们/r,要/v,将/d,图像/n,数据/n,处理/v,为/p,一个/m,向量/n,，/w,将/d,32/m,*/w,32/m,的/u,二进制/n,图像/n,信息/n,转化/v,为/p,1/m,*/w,1024/m,的/u,向量/n,，/w,再/d,使用/v,前面/f,的/u,分类器/nw,，/w,代码/n,如下/v,：/w,1/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,2/m, ,import/en, ,operator/en, ,3/m, ,from/en, ,os/en, ,import/en, ,listdir/en, ,4/m, ,from/en, ,sklearn/en,./w,neighbors/en, ,import/en, ,kneighborsclassifier/en, ,as/en, ,knn/en, ,5/m, ,6/m, ,'/w,'/w,'/w, ,7/m, ,函数/n,说明/v,：/w,将/d,32/m,*/w,32/m,的/u,二进制/n,图片/n,转换/v,为/p,1/m,*/w,1024/m,向量/n, ,8/m, ,parameters/en,:/w, ,9/m, ,filename/en, ,-/w, ,文件/n,名/q, ,10/m, ,returns/en,:/w, ,11/m, ,returnvect/en, ,-/w, ,返回/v,的/u,二进制/n,图像/n,的/u,1/m,*/w,1024/m,向量/n, ,12/m, ,'/w,'/w,'/w, ,13/m, ,def/en, ,img/en,2/m,vector/en,(/w,filename/en,)/w,:/w, ,14/m, ,#,创建/v,1/m,*/w,1024/m,的/u,0/m,向量/n, ,15/m, ,returnvect/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,1/m,,/w,1024/m,)/w,)/w, ,16/m, ,fr/en, ,=/w, ,open/en,(/w,