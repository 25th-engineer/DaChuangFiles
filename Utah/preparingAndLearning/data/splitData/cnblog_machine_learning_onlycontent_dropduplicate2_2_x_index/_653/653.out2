机器/n,学习/v,是/v,时下/t,非常/d,流行/v,的/u,话题/n,，/w,而/c,tensorflow/en,是/v,机器/n,学习/v,中/f,最/d,有名/a,的/u,工具/n,包/v,。/w,tensorflowsharp/en,是/v,tensorflow/en,的/u,c/en,#,语言/n,表述/vn,。/w,本文/r,会/v,对/p,tensorflowsharp/en,的/u,使用/v,进行/v,一个/m,简单/a,的/u,介绍/v,。/w,本文/r,会先/nw,介绍/v,tensorflow/en,的/u,一些/m,基本/a,概念/n,，/w,然后/c,实现/v,一些/m,基本/a,操作/v,例如/v,数字/n,相加/v,等/u,运算/vn,。/w,然后/c,，/w,实现/v,求/v,两个点/mq,(/w,x/en,1/m,,/w,y/en,1/m,)/w,和/c,(/w,x/en,2/m,,/w,y/en,2/m,)/w,的/u,距离/n,。/w,最后/f,，/w,通过/p,这些/r,前置/n,基础/n,和/c,一些/m,c/en,#,代码/n,，/w,实现/v,使用/v,knn/en,方法/n,识别/v,mnist/en,手写/v,数字/n,集合/v,（/w,前半部/n,分/q,）/w,。/w,阅读/v,本文/r,绝对/d,不/d,需要/v,任何/r,机器/n,学习/v,基础/n,，/w,因为/c,我/r,现在/t,也/d,才/d,刚刚/d,入门/v,，/w,行文/vn,不/d,准确/a,之/u,处/n,难免/v,，/w,敬/v,请/v,见谅/v,。/w,本文/r,的/u,后/f,半/m,部分/n,还/d,在/p,整理/v,之中/f,。/w,1/m,./w, ,什么/r,是/v,机器/n,学习/v,用/p,最/d,最/d,简单/a,的/u,话/n,来说/u,，/w,机器/n,学习/v,就/d,是/v,不断/d,改进/v,一个/m,模型/n,的/u,过程/n,，/w,使/v,之/u,可以/v,更/d,好/a,的/u,描述/v,一组/mq,数据/n,的/u,内在/b,规律/n,。/w,假设/v,，/w,我们/r,拿/v,到/v,若干/m,人/n,的/u,年龄/n,(/w,a/en,1/m,,/w,a/en,2/m,,/w,a/en,3/m,…/w,)/w,和/c,他们/r,的/u,工资/n,(/w,b/en,1/m,,/w,b/en,2/m,,/w,b/en,3/m,…/w,)/w,，/w,此时/r,，/w,我们/r,就/d,可以/v,将/d,这些/r,点/q,画/v,在/p,一个/m,二维/nr,直角/n,坐标/n,系/v,中/f,，/w,包括/v,(/w,a/en,1/m,,/w,b/en,1/m,)/w,，/w,(/w,a/en,2/m,,/w,b/en,2/m,)/w,等等/u,。/w,这些/r,就/d,称为/v,输入/v,或/c,训练/vn,数据/n,。/w,我们/r,可以/v,用/p,数学/n,的/u,最小/a,二/m,乘/v,法/j,拟/v,合/v,一条/mq,直线/n,，/w,这样/r,就/d,可以/v,得到/v,最/d,好/a,的/u,可以/v,描述/v,这些/r,数据/n,的/u,规律/n,y/en,=/w,ax/en,+/w,b/en,了/u,。/w,当然/d,，/w,因为/c,我们/r,有/v,很多/m,个/q,点/q,，/w,所以/c,它们/r,可能/v,不/d,在/p,一条/mq,直线/n,上/f,，/w,因此/c,任何/r,的/u,直线/n,都/d,不/d,会/v,过/u,它们/r,所有/b,的/u,点/q,，/w,即/v,一定/d,会/v,有/v,误差/n,。/w,但/c,对于/p,电脑/n,来说/u,，/w,它/r,可以/v,使用/v,一种/mq,截然不同/i,的/u,方式/n,来/v,得到/v,y/en,=/w,ax/en,+/w,b/en,中/f,a/en,，/w,b/en,的/u,值/n,。/w,首先/d,，/w,它/r,从/p,一个/m,随便/ad,指定/v,的/u,a/en,和/c,b/en,出发/v,（/w,例如/v,a/en,=/w,100/m,,/w,b/en,=/w,1/m,）/w,，/w,然后/c,它/r,算/v,出/v,y/en,=/w,100/m,(/w,a/en,1/m,)/w,+/w,1/m,的/u,值/n,和/c,b/en,1/m,的/u,区别/n,，/w,y/en,=/w,100/m,(/w,a/en,2/m,)/w,+/w,1/m,和/c,b/en,2/m,的/u,区别/n,，/w,等等/u,。/w,它/r,发现/v,误差/n,非常/d,大/a,，/w,此时/r,，/w,它/r,就/d,会/v,调整/vn,a/en,和/c,b/en,的/u,值/n,（/w,通过/p,某种/r,算法/n,）/w,，/w,使得/v,下/f,一次/mq,的/u,误差/n,会/v,变/v,小/a,。/w,如果/c,下次/t,的/u,误差/n,反而/d,变/v,得/u,更/d,大/a,了/u,，/w,那/r,就/d,说明/v,，/w,要么/c,是/v,初始值/n,a/en,,/w,b/en,给/p,的/u,不好/a,，/w,要么/c,是/v,y/en,=/w,ax/en,+/w,b/en,可能/v,不/d,是/v,一个/m,好/a,的/u,模型/n,，/w,可能/v,一个/m,二次方程/l,y/en,=/w,a/en,^,2/m,+/w,bx/en,+/w,c/en,更好/d,，/w,等等/u,。/w,经过/p,n/en,轮/q,调整/vn,（/w,这/r,称为/v,模型/n,的/u,训练/vn,）/w,，/w,误差/n,的/u,总和/n,可能/v,已经/d,到/v,了/u,一个/m,稳定/a,的/u,，/w,较/d,小/a,的/u,值/n,。/w,误差/n,小时/n,，/w,a/en,和/c,b/en,的/u,调整/vn,相对/d,当然/d,也/d,会/v,较/d,小/a,。/w,此时/r,的/u,a/en,和/c,b/en,就/d,会/v,十分/d,接近/v,我们/r,使用/v,最小/a,二/m,乘/v,法/j,做/v,出来/v,的/u,值/n,，/w,这时/r,，/w,就/d,可以/v,认为/v,模型/n,训练/vn,完成/v,了/u,。/w,当然/d,，/w,这/r,只是/d,机器/n,学习/v,最/d,简单/a,的/u,一个/m,例子/n,，/w,使用/v,的/u,模型/n,也/d,只是/d,线性/n,的/u,直线/n,方程/n,。/w,如果/c,使用/v,更加/d,复杂/a,的/u,模型/n,，/w,机器/n,学习/v,可以/v,做出/v,十分/d,强大/a,的/u,事情/n,。/w,2/m,./w, ,环境/n,初始化/v,我/r,使用/v,vs/en,2017/m,创建/v,一个/m,新/a,的/u,控制台/n,应用/vn,，/w,然后/c,，/w,使用/v,下面/f,的/u,命令/n,安装/v,tensorflowsharp/en,：/w,nuget/en, ,install/en, ,tensorflowsharptensorflowsharp/en,的/u,源码/nw,地址/n,：/w,https/en,:/w,//w,//w,github/en,./w,com/en,//w,migueldeicaza/en,//w,tensorflowsharp/en,如果/c,在/p,运行/vn,时/ng,发现/v,问题/n,“/w,找/v,不/d,到/v,libtensorflow/en,./w,dll/en,”/w,，/w,则/d,需要/v,访问/v,http/en,:/w,//w,//w,ci/en,./w,tensorflow/en,./w,org/en,//w,view/en,//w,nightly/en,//w,job/en,//w,nightly/en,-/w,libtensorflow/en,-/w,windows/en,//w,lastsuccessfulbuild/en,//w,artifact/en,//w,lib/en,_,package/en,//w,libtensorflow/en,-/w,cpu/en,-/w,windows/en,-/w,x/en,86/m,_,64/m,./w,zip/en,下载/v,这个/r,压缩/v,包/v,。/w,然后/c,，/w,在/p,下载/v,的/u,压缩/v,包/v,中/f,的/u,\/w,lib/en,中/f,找到/v,tensorflow/en,./w,dll/en,，/w,将/d,它/r,改名/v,为/p,libtensorflow/en,./w,dll/en,，/w,并/c,在/p,你/r,的/u,工程/n,中/f,引用/v,它/r,。/w,这样一来/l,，/w,环境/n,初始化/v,就/d,完成/v,了/u,。/w,3/m,./w, ,tensorflowsharp/en,中/f,的/u,概念/n,tensorflowsharp/en, ,//w, ,tensorflow/en,中/f,最/d,重要/a,的/u,几/m,个/q,概念/n,：/w,图/n,（/w,graph/en,）/w,：/w,它/r,包含/v,了/u,一个/m,计算/v,任务/n,中/f,的/u,所有/b,变量/n,和/c,计算/v,方式/n,。/w,可以/v,将/d,它/r,和/c,c/en,#,中/f,的/u,表达/v,式/k,树/v,进行/v,类比/v,。/w,例如/v,，/w,一个/m,1/m,+/w,2/m,可以/v,被/p,看/v,作为/v,两个/m,常量/n,表达/v,式/k,，/w,以/p,一个/m,二元/b,运算/vn,表达/v,式/k,连接/v,起来/v,。/w,在/p,tensorflow/en,的/u,世界/n,中/f,，/w,则/d,可以/v,看成/v,是/v,两个/m,tensor/en,和/c,一个/m,op/en,（/w,operation/en,的/u,缩写/n,，/w,即/v,操作/v,）/w,。/w,简单/a,来说/u,，/w,做/v,一个/m,机器/n,学习/v,的/u,任务/n,就/d,是/v,计算/v,一张/mq,图/n,。/w,在/p,计算图/nw,之前/f,，/w,当然/d,要/v,把/p,图/n,建立/v,好/a,。/w,例如/v,，/w,计算/v,（/w,1/m,+/w,2/m,）/w,*/w,3/m,再/d,开/v,根号/n,，/w,是/v,一个/m,包括/v,了/u,3个/m,tensor/en,和/c,3个/m,op/en,的/u,图/n,。/w,不过/c,，/w,tensorflow/en,的/u,图/n,和/c,常规/n,的/u,表达式/n,还/d,有所不同/l,，/w,tensorflow/en,中/f,的/u,节点/n,变量/n,是/v,可以/v,被/p,递归/nw,的/u,更新/v,的/u,。/w,我们/r,所/u,说/v,的/u,“/w,训练/vn,”/w,，/w,也/d,就/d,是/v,不/d,停/v,的/u,计算/v,一个/m,图/n,，/w,获得/v,图/n,的/u,计算/v,结果/n,，/w,再/d,根据/p,结果/n,的/u,值/n,调整/vn,节点/n,变量/n,的/u,值/n,，/w,然后/c,根据/p,新/a,的/u,变量/n,的/u,值/n,再/d,重新/d,计算图/nw,，/w,如此/r,重复/v,，/w,直到/v,结果/n,令人满意/l,（/w,小于/v,某个/r,阈值/n,）/w,，/w,或/c,跑/v,到/v,了/u,一个/m,无穷大/n,//w,小/a,（/w,这/r,说明/v,图/n,的/u,变量/n,初始值/n,设置/v,的/u,有/v,问题/n,）/w,，/w,或者/c,结果/n,基本/a,不/d,变/v,了/u,为止/u,。/w,会话/v,（/w,session/en,）/w,：/w,为了/p,获得/v,图/n,的/u,计算/v,结果/n,，/w,图/n,必须/d,在/p,会话/v,中/f,被/p,启动/v,。/w,图/n,是/v,会话/v,类型/n,的/u,一个/m,成员/n,，/w,会话/v,类型/n,还/d,包括/v,一个/m,runner/en,，/w,负责/v,执行/v,这/r,张/q,图/n,。/w,会话/v,的/u,主要/b,任务/n,是/v,在/p,图/n,运算/vn,时/ng,分配/vn,cpu/en,或/c,gpu/en,。/w,张量/nr,（/w,tensor/en,）/w,:/w, ,tensorflow/en,中/f,所有/b,的/u,输入/v,输出/v,变量/n,都/d,是/v,张量/nr,，/w,而/c,不/d,是/v,基本/a,的/u,int/en,，/w,double/en,这样/r,的/u,类型/n,，/w,即使/c,是/v,一个/m,整数/n,1/m,，/w,也/d,必须/d,被/p,包装/vn,成/v,一个/m,0维/mq,的/u,，/w,长度/n,为/p,1/m,的/u,张量/nr,【/w,1/m,】/w,。/w,一个/m,张量/nr,和/c,一个/m,矩阵/n,差不多/l,，/w,可以/v,被/p,看成/v,是/v,一个/m,多/a,维/q,的/u,数组/n,，/w,从/p,最/d,基本/a,的/u,一/m,维到/nw,n/en,维/q,都/d,可以/v,。/w,张量/nr,拥有/v,阶/ng,（/w,rank/en,）/w,，/w,形状/n,（/w,shape/en,）/w,，/w,和/c,数据/n,类型/n,。/w,其中/r,，/w,形状/n,可以/v,被/p,理解/v,为/p,长度/n,，/w,例如/v,，/w,一个/m,形状/n,为/p,2/m,的/u,张量/nr,就/d,是/v,一个/m,长度/n,为/p,2/m,的/u,一/m,维数/nr,组/q,。/w,而/c,阶/ng,可以/v,被/p,理解/v,为/p,维数/nr,。/w,阶数学/nw,实例/n,python/en, ,例子/n,0/m,纯量/nw, ,(/w,只/d,有/v,大小/n,)/w,s/en, ,=/w, ,4831/m,向量/n,(/w,大小/n,和/c,方向/n,)/w,v/en, ,=/w, ,[/w,1.1/m,,/w, ,2.2/m,,/w, ,3.3/m,]/w,2/m,矩阵/n,(/w,数据表/n,)/w,m/en, ,=/w, ,[/w,[/w,1/m,,/w, ,2/m,,/w, ,3/m,]/w,,/w, ,[/w,4/m,,/w, ,5/m,,/w, ,6/m,]/w,,/w, ,[/w,7/m,,/w, ,8/m,,/w, ,9/m,]/w,]/w,33/m,阶/ng,张量/nr, ,(/w,数据/n,立体/b,)/w,t/en, ,=/w, ,[/w,[/w,[/w,2/m,]/w,,/w, ,[/w,4/m,]/w,,/w, ,[/w,6/m,]/w,]/w,,/w, ,[/w,[/w,8/m,]/w,,/w, ,[/w,10/m,]/w,,/w, ,[/w,12/m,]/w,]/w,,/w, ,[/w,[/w,14/m,]/w,,/w, ,[/w,16/m,]/w,,/w, ,[/w,18/m,]/w,]/w,]/w,tensorflow/en,中/f,的/u,运算/vn,（/w,op/en,）/w,有/v,很多/m,很多/m,种/q,，/w,最/d,简单/a,的/u,当然/d,就/d,是/v,加减/v,乘/v,除/p,，/w,它们/r,的/u,输入/v,和/c,输出/v,都/d,是/v,tensor/en,。/w,runner/en,：/w,在/p,建立/v,图/n,之后/f,，/w,必须/d,使用/v,会话/v,中/f,的/u,runner/en,来/v,运行图/n,，/w,才/d,能/v,得到/v,结果/n,。/w,在/p,运行图/n,时/ng,，/w,需要/v,为/p,所有/b,的/u,变量/n,和/c,占位/v,符赋值/nw,，/w,否则/c,就/d,会报/n,错/n,。/w,4/m,./w, ,tensorflowsharp/en,中/f,的/u,几/m,类/q,主要/b,变量/n,const/en,：/w,常量/n,，/w,这/r,很/d,好/a,理解/v,。/w,它们/r,在/p,定义/n,时/ng,就/d,必须/d,被/p,赋值/v,，/w,而且/c,值/n,永远/d,无法/v,被/p,改变/v,。/w,placeholder/en,：/w,占/v,位符/nw,。/w,这/r,是/v,一个/m,在/p,定义/n,时/ng,不/d,需要/v,赋值/v,，/w,但/c,在/p,使用/v,之前/f,必须/d,赋值/v,（/w,feed/en,）/w,的/u,变量/n,，/w,通常/d,用作/v,训练/vn,数据/n,。/w,variable/en,：/w,变量/n,，/w,它/r,和/c,占/v,位符/nw,的/u,不同/a,是/v,它/r,在/p,定义/n,时/ng,需要/v,赋值/v,，/w,而且/c,它/r,的/u,数值/n,是/v,可以/v,在/p,图/n,的/u,计算/v,过程/n,中/f,随时/d,改变/v,的/u,。/w,因此/c,，/w,占位/v,符通/nr,常用/a,作图/v,的/u,输入/v,（/w,即/v,训练/vn,数据/n,）/w,，/w,而/c,变量/n,用作/v,图/n,中/f,可以/v,被/p,“/w,训练/vn,”/w,或/c,“/w,学习/v,”/w,的/u,那些/r,tensor/en,，/w,例如/v,y/en,=/w,ax/en,+/w,b/en,中/f,的/u,a/en,和/c,b/en,。/w,5/m,./w, ,基本/a,运算/vn,下面/f,的/u,代码/n,演示/vn,了/u,常量/n,的/u,使用/v,：/w,//w,//w,基础/n,常量/n,运算/vn,，/w,演示/vn,了/u,常量/n,的/u,使用/v, ,static/en, ,void/en, ,basicoperation/en,(/w,)/w, ,{/w, ,using/en, ,(/w,var/en, ,s/en, ,=/w, ,new/en, ,tfsession/en,(/w,)/w,)/w, ,{/w, ,var/en, ,g/en, ,=/w, ,s/en,./w,graph/en,;/w, ,//w,//w,建立/v,两个/m,tfoutput/en,，/w,都/d,是/v,常数/n, ,var/en, ,v/en,1/m, ,=/w, ,g/en,./w,const/en,(/w,1.5/m,)/w,;/w, ,var/en, ,v/en,2/m, ,=/w, ,g/en,./w,const/en,(/w,0.5/m,)/w,;/w, ,//w,//w,建立/v,一个/m,相加/v,的/u,运算/vn, ,var/en, ,add/en, ,=/w, ,g/en,./w,add/en,(/w,v/en,1/m,,/w, ,v/en,2/m,)/w,;/w, ,//w,//w,获得/v,runner/en, ,var/en, ,runner/en, ,=/w, ,s/en,./w,getrunner/en,(/w,)/w,;/w, ,//w,//w,相加/v, ,var/en, ,result/en, ,=/w, ,runner/en,./w,run/en,(/w,add/en,)/w,;/w, ,//w,//w,获得/v,result/en,的/u,值/n,2/m, ,console/en,./w,writeline/en,(/w,$/w,"/w,相加/v,的/u,结果/n,:/w,{/w,result/en,./w,getvalue/en,(/w,)/w,}/w,"/w,)/w,;/w, ,}/w, ,}/w,使用/v,占/v,位符/nw,：/w,//w,//w,基础/n,占位/v,符/vg,运算/vn, ,static/en, ,void/en, ,basicplaceholderoperation/en,(/w,)/w, ,{/w, ,using/en, ,(/w,var/en, ,s/en, ,=/w, ,new/en, ,tfsession/en,(/w,)/w,)/w, ,{/w, ,var/en, ,g/en, ,=/w, ,s/en,./w,graph/en,;/w, ,//w,//w,占位/v,符/vg, ,-/w, ,一种/mq,不/d,需要/v,初始化/v,，/w,在/p,运算/vn,时/ng,再/d,提供/v,值/n,的/u,对象/n, ,//w,//w,1/m,*/w,2/m,的/u,占位/v,符/vg, ,var/en, ,v/en,1/m, ,=/w, ,g/en,./w,placeholder/en,(/w,tfdatatype/en,./w,double/en,,/w, ,new/en, ,tfshape/en,(/w,2/m,)/w,)/w,;/w, ,var/en, ,v/en,2/m, ,=/w, ,g/en,./w,placeholder/en,(/w,tfdatatype/en,./w,double/en,,/w, ,new/en, ,tfshape/en,(/w,2/m,)/w,)/w,;/w, ,//w,//w,建立/v,一个/m,相乘/v,的/u,运算/vn, ,var/en, ,add/en, ,=/w, ,g/en,./w,mul/en,(/w,v/en,1/m,,/w, ,v/en,2/m,)/w,;/w, ,//w,//w,获得/v,runner/en, ,var/en, ,runner/en, ,=/w, ,s/en,./w,getrunner/en,(/w,)/w,;/w, ,//w,//w,相加/v, ,//w,//w,在/p,这里/r,给/p,占/v,位符/nw,提供/v,值/n, ,var/en, ,data/en,1/m, ,=/w, ,new/en, ,double/en,[/w,]/w, ,{/w, ,0.3/m,,/w, ,0.5/m, ,}/w,;/w, ,var/en, ,data/en,2/m, ,=/w, ,new/en, ,double/en,[/w,]/w, ,{/w, ,0.4/m,,/w, ,0.8/m, ,}/w,;/w, ,var/en, ,result/en, ,=/w, ,runner/en, ,./w,fetch/en,(/w,add/en,)/w, ,./w,addinput/en,(/w,v/en,1/m,,/w, ,new/en, ,tftensor/en,(/w,data/en,1/m,)/w,)/w, ,./w,addinput/en,(/w,v/en,2/m,,/w, ,new/en, ,tftensor/en,(/w,data/en,2/m,)/w,)/w, ,./w,run/en,(/w,)/w,;/w, ,var/en, ,dataresult/en, ,=/w, ,(/w,double/en,[/w,]/w,)/w,result/en,[/w,0/m,]/w,./w,getvalue/en,(/w,)/w,;/w, ,//w,//w,获得/v,result/en,的/u,值/n, ,console/en,./w,writeline/en,(/w,$/w,"/w,相乘/v,的/u,结果/n,:/w, ,[/w,{/w,dataresult/en,[/w,0/m,]/w,}/w,,/w, ,{/w,dataresult/en,[/w,1/m,]/w,}/w,]/w,"/w,)/w,;/w, ,}/w, ,}/w,在/p,上面/f,的/u,代码/n,中/f,，/w,我们/r,使用/v,了/u,fetch/en,方法/n,来/v,获得/v,数据/n,。/w,fetch/en,方法/n,用/p,来/v,帮助/v,取回/v,操作/v,的/u,结果/n,，/w,上面/f,的/u,例子/n,中/f,操作/v,就/d,是/v,add/en,。/w,我们/r,看到/v,，/w,整个/b,图/n,的/u,计算/v,是/v,一个/m,类似/v,管道/n,的/u,流程/n,。/w,在/p,fetch/en,之后/f,，/w,为/p,占/v,位符/nw,输入/v,数据/n,，/w,最后/f,进行/v,运算/vn,。/w,使用/v,常量/n,表示/v,矩阵/n,：/w,//w,//w,基础/n,矩阵/n,运算/vn, ,static/en, ,void/en, ,basicmatrixoperation/en,(/w,)/w, ,{/w, ,using/en, ,(/w,var/en, ,s/en, ,=/w, ,new/en, ,tfsession/en,(/w,)/w,)/w, ,{/w, ,var/en, ,g/en, ,=/w, ,s/en,./w,graph/en,;/w, ,//w,//w,1/m,x/en,2/m,矩阵/n, ,var/en, ,matrix/en,1/m, ,=/w, ,g/en,./w,const/en,(/w,new/en, ,double/en,[/w,,/w,]/w, ,{/w, ,{/w, ,1/m,,/w, ,2/m, ,}/w, ,}/w,)/w,;/w, ,//w,//w,2/m,x/en,1/m,矩阵/n, ,var/en, ,matrix/en,2/m, ,=/w, ,g/en,./w,const/en,(/w,new/en, ,double/en,[/w,,/w,]/w, ,{/w, ,{/w, ,3/m, ,}/w,,/w, ,{/w, ,4/m, ,}/w, ,}/w,)/w,;/w, ,var/en, ,product/en, ,=/w, ,g/en,./w,matmul/en,(/w,matrix/en,1/m,,/w, ,matrix/en,2/m,)/w,;/w, ,var/en, ,result/en, ,=/w, ,s/en,./w,getrunner/en,(/w,)/w,./w,run/en,(/w,product/en,)/w,;/w, ,console/en,./w,writeline/en,(/w,"/w,矩阵/n,相乘/v,的/u,值/n,：/w,"/w, ,+/w, ,(/w,(/w,double/en,[/w,,/w,]/w,)/w,result/en,./w,getvalue/en,(/w,)/w,)/w,[/w,0/m,,/w, ,0/m,]/w,)/w,;/w, ,}/w,;/w, ,}/w,6/m,./w, ,求/v,两个点/mq,的/u,距离/n,（/w,l/en,1/m,,/w,l/en,2/m,）/w,求/v,两点/mq,距离/n,实际上/d,就/d,是/v,若干/m,操作/v,的/u,结合/v,而已/y,。/w,我们/r,知道/v,，/w,(/w,x/en,1/m,,/w,x/en,2/m,)/w,,/w, ,(/w,y/en,1/m,,/w,y/en,2/m,)/w,的/u,距离/n,为/p,：/w,sqrt/en,(/w,(/w,x/en,1/m,-/w,x/en,2/m,)/w,^,2/m, ,+/w, ,(/w,y/en,1/m,-/w,y/en,2/m,)/w,^,2/m,)/w,因此/c,，/w,我们/r,通过/p,张量/nr,的/u,运算/vn,，/w,获得/v,[/w,x/en,1/m,-/w,x/en,2/m,,/w, ,y/en,1/m,-/w,y/en,2/m,]/w, ,(/w,通过/p,sub/en,)/w,[/w,(/w,x/en,1/m,-/w,x/en,2/m,)/w,^,2/m,,/w, ,(/w,y/en,1/m,-/w,y/en,2/m,)/w,^,2/m,]/w, ,(/w,通过/p,pow/en,)/w,然后/c,，/w,把/p,这/r,两个/m,数/m,加/v,起来/v,，/w,这/r,需要/v,reducesum/en,运算符/n,。/w,最后/f,开根/nw,就/d,可以/v,了/u,。/w,我们/r,把/p,整个/b,运算/vn,赋/v,给/p,变量/n,distance/en,，/w,然后/c,fetch/en, ,distance/en,：/w,//w,//w,求/v,两个点/mq,的/u,l/en,2/m,距离/n, ,static/en, ,void/en, ,distancel/en,2/m,(/w,tfsession/en, ,s/en,,/w, ,tfoutput/en, ,v/en,1/m,,/w, ,tfoutput/en, ,v/en,2/m,)/w, ,{/w, ,var/en, ,graph/en, ,=/w, ,s/en,./w,graph/en,;/w, ,//w,//w,定义/n,求/v,距离/n,的/u,运算/vn, ,//w,//w,这里/r,要/v,特别/d,注意/v,，/w,如果/c,第一/m,个/q,系数/n,为/p,double/en,，/w,第二/m,个/q,也/d,需要/v,是/v,double/en,，/w,所以/c,传入/v,2/m,d/en,而/c,不/d,是/v,2/m, ,var/en, ,pow/en, ,=/w, ,graph/en,./w,pow/en,(/w,graph/en,./w,sub/en,(/w,v/en,1/m,,/w, ,v/en,2/m,)/w,,/w, ,graph/en,./w,const/en,(/w,2/m,d/en,)/w,)/w,;/w, ,//w,//w,reducesum/en,运算/vn,将/d,输入/v,的/u,一串/mq,数字/n,相加/v,并/c,得出/v,一个/m,值/n,（/w,而/c,不/d,是/v,保留/v,输入/v,参数/n,的/u,size/en,）/w, ,var/en, ,distance/en, ,=/w, ,graph/en,./w,sqrt/en,(/w,graph/en,./w,reducesum/en,(/w,pow/en,)/w,)/w,;/w, ,//w,//w,获得/v,runner/en, ,var/en, ,runner/en, ,=/w, ,s/en,./w,getrunner/en,(/w,)/w,;/w, ,//w,//w,求/v,距离/n, ,//w,//w,在/p,这里/r,给/p,占/v,位符/nw,提供/v,值/n, ,var/en, ,data/en,1/m, ,=/w, ,new/en, ,double/en,[/w,]/w, ,{/w, ,6/m,,/w, ,4/m, ,}/w,;/w, ,var/en, ,data/en,2/m, ,=/w, ,new/en, ,double/en,[/w,]/w, ,{/w, ,9/m,,/w, ,8/m, ,}/w,;/w, ,var/en, ,result/en, ,=/w, ,runner/en, ,./w,fetch/en,(/w,distance/en,)/w, ,./w,addinput/en,(/w,v/en,1/m,,/w, ,new/en, ,tftensor/en,(/w,data/en,1/m,)/w,)/w, ,./w,addinput/en,(/w,v/en,2/m,,/w, ,new/en, ,tftensor/en,(/w,data/en,2/m,)/w,)/w, ,./w,run/en,(/w,)/w,;/w, ,console/en,./w,writeline/en,(/w,$/w,"/w,点/q,v/en,1/m,和/c,v/en,2/m,的/u,距离/n,为/p,{/w,result/en,[/w,0/m,]/w,./w,getvalue/en,(/w,)/w,}/w,"/w,)/w,;/w, ,}/w,最后/f,，/w,我们/r,根据/p,目前/t,所/u,学/v,，/w,实现/v,knn/en,识别/v,mnist/en,。/w,7/m,./w, ,实现/v,knn/en,识别/v,mnist/en,（/w,1/m,）/w,什么/r,是/v,knnk/en,最/d,近邻/n,(/w,k/en,-/w,nearest/en, ,neighbor/en,，/w,knn/en,)/w,分类/vn,算法/n,，/w,是/v,一个/m,理论/n,上/f,比较/d,成熟/a,的/u,方法/n,，/w,也/d,是/v,最/d,简单/a,的/u,机器/n,学习/v,算法/n,之一/r,。/w,该/r,方法/n,的/u,思路/n,是/v,：/w,如果/c,一个/m,样本/n,在/p,特征/n,空间/n,中/f,的/u,k/en,个/q,最/d,相似/a,(/w,即/v,特征/n,空间/n,中/f,最/d,邻近/v,)/w,的/u,样本/n,中/f,的/u,大多数/m,属于/v,某/r,一个/m,类别/n,，/w,则/d,认为/v,该/r,样本/n,也/d,属于/v,这个/r,类别/n,。/w,图/n,中/f,，/w,绿色/n,圆/vg,要/v,被/p,决定/v,赋予/v,哪个/r,类/q,，/w,是/v,红色/n,三角形/n,还是/c,蓝色/n,四方形/nw,？/w,如果/c,k/en,=/w,3/m,，/w,由于/c,红色/n,三角形/n,所/u,占/v,比例/n,为/p,2/m,//w,3/m,，/w,绿色/n,圆/vg,将/d,被/p,赋予/v,红色/n,三角形/n,那个/r,类/q,，/w,如果/c,k/en,=/w,5/m,，/w,由于/c,蓝色/n,四方形/nw,比例/n,为/p,3/m,//w,5/m,，/w,因此/c,绿色/n,圆/vg,被/p,赋予/v,蓝色/n,四方形/nw,类/q,。/w,在/p,进行/v,计算/v,时/ng,，/w,knn/en,就/d,表现/v,为/p,：/w,首先/d,获得/v,所有/b,的/u,数据/n,然后/c,对/p,一个/m,输入/v,的/u,点/q,，/w,找到/v,离/v,它/r,最近/t,的/u,k/en,个/q,点/q,（/w,通过/p,l/en,1/m,或/c,l/en,2/m,距离/n,）/w,然后/c,，/w,对/p,这/r,k/en,个/q,点/q,所/u,代表/n,的/u,值/n,，/w,找/v,出/v,最/d,多/a,的/u,那个/r,类/q,，/w,那么/r,，/w,这个/r,输入/v,的/u,数据/n,就/d,被/p,认为/v,属于/v,那个/r,类/q,对/p,mnist/en,数据/n,的/u,knn/en,识别/v,，/w,在/p,读/v,入/v,若干/m,个/q,输入/v,数据/n,（/w,和/c,代表/n,的/u,数字/n,）/w,之后/f,，/w,逐个/d,读/v,入/v,测试/vn,数据/n,。/w,对/p,每个/r,测试/vn,数据/n,，/w,找到/v,离/v,他/r,最近/t,的/u,k/en,个/q,输入/v,数据/n,（/w,和/c,代表/n,的/u,数字/n,）/w,，/w,找/v,出/v,最/d,多/a,的/u,代表/n,数字/n,a/en,。/w,此时/r,，/w,测试/vn,数据/n,就/d,被/p,认为/v,代表/n,数字/n,a/en,。/w,因此/c,，/w,使用/v,knn/en,识别/v,mnist/en,数据/n,就/d,可以/v,化为/v,求/v,两个点/mq,（/w,群/q,）/w,的/u,距离/n,的/u,问题/n,。/w,mnist/en,数据集/nw,mnist/en,是/v,一个/m,非常/d,有名/a,的/u,手写/v,数字/n,识别/v,的/u,数据集/nw,。/w,它/r,包含/v,了/u,6万张/mq,手写/v,数字/n,图片/n,，/w,例如/v,：/w,当然/d,，/w,对于/p,我们/r,人类/n,而言/u,，/w,识别/v,上面/f,四幅/mq,图/n,是/v,什么/r,数字/n,是/v,十分/d,容易/a,的/u,，/w,理由/n,很/d,简单/a,，/w,就/d,是/v,“/w,看/v,着/u,像/v,”/w,。/w,比如/v,，/w,第一/m,张/q,图/n,看/v,着/u,就/d,像/v,5/m,。/w,但/c,如果/c,是/v,让/v,计算机/n,来/v,识别/v,，/w,它/r,可/v,无法/v,理解/v,什么/r,叫/v,看/v,着/u,像/v,，/w,就/d,显得/v,非常/d,困难/an,。/w,实际上/d,，/w,解决/v,这个/r,问题/n,有/v,很多/m,种/q,方法/n,，/w,knn/en,是/v,其中/r,最/d,简单/a,的/u,一种/mq,。/w,除了/p,knn/en,之外/f,，/w,还/d,可以/v,使用/v,各种/r,类型/n,的/u,神经/n,网络/n,。/w,我们/r,可以/v,将/d,每个/r,图片/n,看成/v,一个/m,点/q,的/u,集合/v,。/w,实际上/d,，/w,在/p,mnist/en,输入/v,中/f,，/w,图片/n,被/p,表示/v,为/p,28/m,乘/v,28/m,的/u,一个/m,矩阵/n,。/w,例如/v,，/w,当/p,我们/r,成功/a,读取/v,了/u,一张/mq,图/n,之后/f,，/w,将/d,它/r,打印/v,出来/v,会/v,发现/v,结果/n,是/v,这样/r,的/u,（/w,做/v,了/u,一些/m,处理/v,）/w,：/w,其中/r,，/w,数字/n,均/d,为/p,byte/en,类型/n,（/w,0/m,-/w,255/m,）/w,，/w,数字/n,越/d,大/a,，/w,代表/n,灰度/n,越/d,深/a,。/w,当然/d,，/w,0/m,就/d,代表/n,白色/n,了/u,。/w,因此/c,，/w,你/r,可以/v,想象/v,上面/f,的/u,那/r,张/q,图/n,就/d,是/v,一个/m,手写/v,的/u,2/m,。/w,如果/c,把/p,上图/n,的/u,000/m,换/v,成/v,3个/m,空格/n,可以/v,看/v,的/u,更/d,清楚/a,：/w,对于/p,每张/r,这样/r,的/u,图/n,，/w,mnist/en,提供/v,了/u,它/r,的/u,正确/a,答案/n,（/w,即/v,它/r,应该/v,是/v,代表/n,哪个/r,数字/n,）/w,，/w,被/p,称为/v,label/en