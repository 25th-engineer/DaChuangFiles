摘要/n,：/w,本文/r,首先/d,浅/a,谈/v,了/u,自己/r,对/p,决策树/nz,的/u,理解/v,，/w,进而/c,通过/p,python/en,一步步/nw,构造/v,决策树/nz,，/w,并/c,通过/p,matplotlib/en,更/d,直观/a,的/u,绘制/v,树/v,形图/nw,，/w,最后/f,，/w,选取/v,相应/v,的/u,数据集/nw,对/p,算法/n,进行/v,测试/vn,。/w,最近/t,在/p,看/v,《/w,机器/n,学习/v,实战/n,》/w,这/r,本/r,书/n,，/w,因为/c,一直/d,想/v,好好/d,了解/v,机器/n,学习/v,方面/n,的/u,算法/n,，/w,加之/c,想/v,学/v,python/en,，/w,就/d,在/p,朋友/n,的/u,推荐/v,之下/f,选择/v,了/u,这本/r,同等/b,定位/vn,的/u,书/n,。/w,今天/t,就/d,来/v,学习/v,一下/m,决策树/nz,，/w,所有/b,的/u,代码/n,均/d,python/en,3.4/m,实现/v,，/w,确实/ad,与/p,2.7/m,有/v,很多/m,不同/a,。/w,决策树/nz,和/c,knn/en,一样/u,，/w,都/d,是/v,处理/v,分类/vn,问题/n,的/u,算法/n,。/w,对于/p,决策树/nz,的/u,定义/n,不计其数/i,，/w,就/d,我/r,个人/n,而言/u,，/w,首先/d,单/d,看/v,名字/n,，/w,就/d,想到/v,了/u,最小/a,生成/vn,树/v,，/w,猜想/vn,图解/v,的/u,话/n,这个/r,算/v,法会/n,是/v,一棵/mq,树/v,，/w,在/p,机器/n,学习/v,这个/r,层面/n,，/w,将/d,所/u,要/v,处理/v,的/u,数据/n,看做/v,是/v,树/v,的/u,根/q,，/w,相应/v,的/u,选取/v,数据/n,的/u,特征/n,作为/v,一个个/nw,节点/n,（/w,决策点/nw,）/w,，/w,每次/r,选取/v,一个/m,节点/n,将/d,数据集/nw,分为/v,不同/a,的/u,数据子集/nw,，/w,可以/v,看成/v,对/p,树/v,进行/v,分支/n,，/w,这里/r,体现/v,出/v,了/u,决策/n,，/w,直到/v,最后/f,无/v,法/j,可/v,分/q,停止/v,，/w,也/d,就/d,是/v,分支/n,上/f,的/u,数据/n,为/p,同一/b,类型/n,，/w,可以/v,想象/v,一次次/nw,划分/v,之后/f,由/p,根/q,延伸/v,出/v,了/u,许多/m,分支/n,，/w,形象/n,的/u,说/v,就/d,是/v,一棵/mq,树/v,。/w,在/p,机器/n,学习/v,中/f,，/w,决策树/nz,是/v,一个/m,预测/v,模型/n,，/w,它/r,代表/n,的/u,是/v,对象/n,属性/n,与/p,对象/n,值/n,之间/f,的/u,一种/mq,映射/v,关系/n,，/w,我们/r,可以/v,利用/v,决策树/nz,发现/v,数据/n,内部/f,所/u,蕴含/v,的/u,知识/n,，/w,比如/v,在/p,本文/r,的/u,最后/f,我们/r,选取/v,隐形/b,眼镜/n,数据集/nw,根据/p,决策树/nz,学习/v,到/v,眼科/n,医生/n,是/v,如何/r,判断/v,患者/n,佩戴/v,眼镜片/nw,的/u,过程/n,，/w,而/c,k/en,近邻/n,算法/n,虽/c,与/p,决策树/nz,同/p,属/v,分类/vn,，/w,却/d,无从/d,得知/v,数据/n,的/u,内在/b,形式/n,。/w,下面/f,我们/r,就/d,一步步/nw,的/u,学习/v,决策树/nz,：/w,1/m,./w, ,构造/v,决策树/nz,基于/p,之前/f,的/u,了解/v,，/w,在/p,构造/v,决策树/nz,首先/d,需要/v,选取/v,特征/n,将/d,原始/a,数据/n,划分/v,为/p,几/m,个/q,数据集/nw,，/w,那么/r,第一/m,个/q,问题/n,就/d,是/v,当前/t,数据/n,的/u,哪个/r,特征/n,在/p,划分/v,数据/n,分类/vn,时/ng,起/v,决定性/n,作用/n,，/w,所以/c,必须/d,评估/vn,每个/r,特征/n,。/w,进而/c,通过/p,特征/n,将/d,原始/a,数据/n,就/d,被/p,划分/v,为/p,几/m,个/q,数据子集/nw,，/w,这些/r,数据子集/nw,分布/v,在/p,第一/m,个/q,决策点/nw,的/u,所有/b,分支/n,上/f,，/w,如果/c,分支/n,上/f,的/u,所有/b,数据/n,为/p,同一/b,类型/n,，/w,则/d,划分/v,停止/v,，/w,若/c,分支/n,上/f,的/u,所有/b,数据/n,不/d,是/v,同一/b,类型/n,，/w,则/d,还/d,需要/v,继续/v,划分/v,，/w,直到/v,所有/b,具有/v,相同/a,类型/n,的/u,数据/n,均/d,在/p,一个/m,数据子/nw,集中/v,。/w,在用/b,决策树/nz,进行/v,划分/v,时/ng,，/w,关键/n,是/v,每次/r,划分/v,时/ng,选取/v,哪个/r,特征/n,进行/v,划分/v,，/w,在/p,划分/v,数据/n,时/ng,，/w,我们/r,必须/d,采用/v,量化/v,的/u,方法/n,判断/v,如何/r,划分/v,数据/n,。/w,（/w,1/m,）/w,信息/n,增益/v,划分/v,数据/n,时/ng,是/v,根据/p,某/r,一/m,原则/n,进行/v,划分/v,，/w,使得/v,划分/v,在/p,同一/b,集合/v,中/f,的/u,数据/n,具有/v,共同/d,的/u,特征/n,，/w,据此/d,，/w,我们/r,可以/v,理解/v,为/p,划分/v,数据/n,的/u,原则/n,就/d,是/v,是/v,无序/b,的/u,数据/n,变/v,得/u,有/v,序/n,。/w,当然/d,划分/v,数据/n,有/v,很多/m,种/q,方法/n,，/w,在/p,此/r,选用/v,信息论度量/nw,信息/n,，/w,划分/v,组织/v,杂乱无章/i,的/u,数据/n,。/w,信息论/n,是/v,量化/v,处理/v,信息/n,的/u,分支/n,科学/n,，/w,可以/v,在/p,数据/n,划分/v,之前/f,或/c,之后/f,使用/v,信息论/n,量化/v,度量/v,信息/n,的/u,内容/n,。/w,其中/r,在/p,划分/v,数据集/nw,之前/f,之后/f,信息/n,发生/v,的/u,变化/vn,称为/v,信息/n,增益/v,，/w,计算/v,每个/r,特征/n,值/n,划分/v,数据集/nw,获得/v,的/u,信息/n,增益/v,，/w,获得/v,信息/n,增益/v,最/d,高/a,的/u,特征/n,就/d,是/v,最/d,好/a,的/u,选择/v,。/w,首先/d,我们/r,需要/v,知道/v,怎么/r,计算/v,信息/n,增益/v,，/w,集合/v,信息/n,的/u,度量/v,方式/n,称为/v,香/a,农熵/nr,或者/c,简称/v,为/p,熵/g,，/w,熵/g,定义/n,为/p,信息/n,的/u,期望值/n,，/w,那么/r,信息/n,是/v,什么/r,？/w,xi/en,的/u,信息/n,可/v,定义/n,为/p,：/w,l/en,(/w,xi/en,)/w, ,=/w, ,-/w,log/en,(/w,p/en,(/w,xi/en,)/w,)/w,,/w,其中/r,p/en,(/w,xi/en,)/w,是/v,选择/v,该/r,分类/vn,的/u,概率/n,。/w,熵/g,指/v,的/u,是/v,所有/b,类别/n,所有/b,可能/v,值/n,包含/v,的/u,信息/n,期望值/n,，/w,可/v,表示/v,为/p,：/w,熵/g,越/d,高/a,，/w,表明/v,混合/vn,的/u,数据/n,越/d,多/a,，/w,则/d,可以/v,在/p,数据/n,集中/v,添加/vn,更/d,多/a,的/u,分类/vn,。/w,基于/p,上述/b,的/u,分析/vn,，/w,编程/vn,计算/v,给/p,定/v,数据集/nw,的/u,香/a,农熵/nr,，/w,代码/n,如下/v,：/w,from/en, ,math/en, ,import/en, ,log/en, ,#,#,#,计算/v,香农/nr,熵/g,(/w,为/p,float/en,类型/n,）/w, ,def/en, ,calshang/en,(/w,dataset/en,)/w,:/w, ,numentries/en, ,=/w, ,len/en,(/w,dataset/en,)/w, ,labelcounts/en, ,=/w, ,{/w,}/w,#,#,创建/v,字典/n, ,for/en, ,featvec/en, ,in/en, ,dataset/en,:/w, ,currentlabel/en, ,=/w, ,featvec/en,[/w,-/w,1/m,]/w, ,if/en, ,currentlabel/en, ,not/en, ,in/en, ,labelcounts/en,./w,keys/en,(/w,)/w,:/w, ,labelcounts/en,[/w,currentlabel/en,]/w, ,=/w, ,0/m, ,labelcounts/en,[/w,currentlabel/en,]/w, ,+/w,=/w, ,1/m, ,shannonent/en, ,=/w, ,0.0/m, ,for/en, ,key/en, ,in/en, ,labelcounts/en,:/w, ,prob/en, ,=/w, ,float/en,(/w,labelcounts/en,[/w,key/en,]/w,)/w, ,//w, ,numentries/en, ,shannonent/en, ,-/w,=/w, ,prob/en, ,*/w, ,log/en,(/w,prob/en,,/w,2/m,)/w, ,return/en, ,shannonent/en,对/p,此/r,我们/r,可以/v,输入/v,数据集/nw,测试/vn,：/w,def/en, ,creatdataset/en,(/w,)/w,:/w, ,dataset/en, ,=/w, ,[/w,[/w,1/m,,/w,1/m,,/w,'/w,yes/en,'/w,]/w,,/w, ,[/w,1/m,,/w,1/m,,/w,'/w,yes/en,'/w,]/w,,/w, ,[/w,1/m,,/w,0/m,,/w,'/w,no/en,'/w,]/w,,/w, ,[/w,0/m,,/w,1/m,,/w,'/w,no/en,'/w,]/w,,/w, ,[/w,0/m,,/w,1/m,,/w,'/w,no/en,'/w,]/w,]/w, ,labels/en, ,=/w, ,[/w,'/w,no/en, ,surfacing/en,'/w,,/w,'/w,flippers/en,'/w,]/w, ,return/en, ,dataset/en,,/w,labels/en, ,'/w,'/w,'/w, ,#,测试/vn, ,mydata/en,,/w,labels/en, ,=/w, ,creatdataset/en,(/w,)/w, ,print/en,(/w,"/w,原/b,数据/n,为/p,：/w,"/w,,/w,mydata/en,)/w, ,print/en,(/w,"/w,标签/n,为/p,：/w,"/w,,/w,labels/en,)/w, ,shang/en, ,=/w, ,calshang/en,(/w,mydata/en,)/w, ,print/en,(/w,"/w,香/a,农熵/nr,为/p,：/w,"/w,,/w,shang/en,)/w, ,'/w,'/w,'/w,得到/v,熵/g,之后/f,，/w,我们/r,就/d,可以/v,按照/p,获取/v,最/d,大/a,增益/v,的/u,办法/n,划分/v,数据集/nw,。/w,（/w,2/m,）/w,划分/v,数据集/nw,基于/p,之前/f,的/u,分析/vn,，/w,信息/n,增益/v,表示/v,的/u,是/v,信息/n,的/u,变化/vn,，/w,而/c,信息/n,可以/v,用/p,熵/g,来/v,度量/v,，/w,所以/c,我们/r,可以/v,用/p,熵/g,的/u,变化/vn,来/v,表示/v,信息/n,增益/v,。/w,而/c,获得/v,最/d,高/a,信息/n,增益/v,的/u,特征/n,就/d,是/v,最/d,好/a,的/u,选择/v,，/w,故此/c,，/w,我们/r,可以/v,对/p,所有/b,特征/n,遍历/nw,，/w,得到/v,最高/a,信息/n,增益/v,的/u,特征/n,加以/v,选择/v,。/w,首先/d,，/w,我们/r,按照/p,给/p,定/v,特征/n,划分/v,数据集/nw,并/c,进行/v,简单/a,的/u,测试/vn,：/w,#,#,#,划分/v,数据集/nw,（/w,以/p,指定/v,特征/n,将/d,数据/n,进行/v,划分/v,）/w, ,def/en, ,splitdataset/en,(/w,dataset/en,,/w,feature/en,,/w,value/en,)/w,:/w,#,#,传入/v,待/v,划分/v,的/u,数据集/nw,、/w,划分/v,数据集/nw,的/u,特征/n,以及/c,需要/v,返回/v,的/u,特征/n,的/u,值/n, ,newdataset/en, ,=/w, ,[/w,]/w, ,for/en, ,featvec/en, ,in/en, ,dataset/en,:/w, ,if/en, ,featvec/en,[/w,feature/en,]/w, ,=/w,=/w, ,value/en,:/w, ,reducedfeatvec/en, ,=/w, ,featvec/en,[/w,:/w,feature/en,]/w, ,reducedfeatvec/en,./w,extend/en,(/w,featvec/en,[/w,feature/en, ,+/w, ,1/m,:/w,]/w,)/w, ,newdataset/en,./w,append/en,(/w,reducedfeatvec/en,)/w, ,return/en, ,newdataset/en, ,'/w,'/w,'/w, ,#,测试/vn, ,mydata/en,,/w,labels/en, ,=/w, ,creatdataset/en,(/w,)/w, ,print/en,(/w,"/w,原/b,数据/n,为/p,：/w,"/w,,/w,mydata/en,)/w, ,print/en,(/w,"/w,标签/n,为/p,：/w,"/w,,/w,labels/en,)/w, ,split/en, ,=/w, ,splitdataset/en,(/w,mydata/en,,/w,0/m,,/w,1/m,)/w, ,print/en,(/w,"/w,划分/v,后/f,的/u,结果/n,为/p,:/w,"/w,,/w,split/en,)/w, ,'/w,'/w,'/w,接下来/l,我们/r,遍历/nw,整个/b,数据集/nw,，/w,循环/vn,计算/v,香/a,农熵/nr,和/c,splitdataset/en,(/w,)/w,函数/n,，/w,找到/v,最/d,好/a,的/u,划分/v,方式/n,并/c,简单/a,测试/vn,：/w,#,#,选择/v,最/d,好/a,的/u,划分/v,方式/n,(/w,选取/v,每个/r,特征/n,划分/v,数据集/nw,，/w,从中/d,选取/v,信息/n,增益/v,最/d,大/a,的/u,作为/v,最/d,优/ag,划分/v,)/w,在/p,这里/r,体现/v,了/u,信息/n,增益/v,的/u,概念/n, ,def/en, ,choosebest/en,(/w,dataset/en,)/w,:/w, ,featnum/en, ,=/w, ,len/en,(/w,dataset/en,[/w,0/m,]/w,)/w, ,-/w, ,1/m, ,baseentropy/en, ,=/w, ,calshang/en,(/w,dataset/en,)/w, ,bestinforgain/en, ,=/w, ,0.0/m, ,bestfeat/en, ,=/w, ,-/w,1/m,#,#,表示/v,最/d,好/a,划分/v,特征/n,的/u,下标/n, ,for/en, ,i/en, ,in/en, ,range/en,(/w,featnum/en,)/w,:/w, ,featlist/en, ,=/w, ,[/w,example/en,[/w,i/en,]/w, ,for/en, ,example/en, ,in/en, ,dataset/en,]/w, ,#,列表/v, ,uniquefeat/en, ,=/w, ,set/en,(/w,featlist/en,)/w,#,#,得到/v,每个/r,特征/n,中/f,所/u,含/v,的/u,不同/a,元素/n, ,newentropy/en, ,=/w, ,0.0/m, ,for/en, ,value/en, ,in/en, ,uniquefeat/en,:/w, ,subdataset/en, ,=/w, ,splitdataset/en,(/w,dataset/en,,/w,i/en,,/w,value/en,)/w, ,prob/en, ,=/w, ,len/en,(/w,subdataset/en,)/w, ,//w, ,len/en,(/w,dataset/en,)/w, ,newentropy/en, ,+/w,=/w, ,prob/en, ,*/w, ,calshang/en,(/w,subdataset/en,)/w, ,inforgain/en, ,=/w, ,baseentropy/en, ,-/w, ,newentropy/en, ,if/en, ,(/w,inforgain/en, ,>, ,bestinforgain/en,)/w,:/w, ,bestinforgain/en, ,=/w, ,inforgain/en, ,bestfeature/en, ,=/w, ,i/en,#,第/m,i/en,个/q,特征/n,是/v,最/d,有利于/v,划分/v,的/u,特征/n, ,return/en, ,bestfeature/en, ,'/w,'/w,'/w, ,#,#,测试/vn, ,mydata/en,,/w,labels/en, ,=/w, ,creatdataset/en,(/w,)/w, ,best/en, ,=/w, ,choosebest/en,(/w,mydata/en,)/w, ,print/en,(/w,best/en,)/w, ,'/w,'/w,'/w,（/w,3/m,）/w,递归/nw,构建/v,决策树/nz,基于/p,之前/f,的/u,分析/vn,，/w,我们/r,选取/v,划分/v,结果/n,最/d,好/a,的/u,特征/n,划分/v,数据集/nw,，/w,由于/c,特征/n,很/d,可能/v,多/a,与/p,两个/m,，/w,因此/c,可能/v,存在/v,大于/v,两个/m,分支/n,的/u,数据集/nw,划分/v,，/w,第一/m,次/q,划分/v,之后/f,，/w,可以/v,将/d,划分/v,的/u,数据/n,继续/v,向/p,下/f,传递/v,，/w,如果/c,将/d,每/r,一个/m,划分/v,的/u,数据/n,看成/v,是/v,原/b,数据集/nw,，/w,那么/r,之后/f,的/u,每/r,一次/mq,划分/v,都/d,可以/v,看成/v,是/v,和/c,第一/m,次/q,划分/v,相同/a,的/u,过程/n,，/w,据此/d,我们/r,可以/v,采用/v,递归/nw,的/u,原则/n,处理/v,数据集/nw,。/w,递归/nw,结束/v,的/u,条件/n,是/v,：/w,程序/n,遍历/nw,完/v,所有/b,划分/v,数据集/nw,的/u,属性/n,，/w,或者/c,每个/r,分支/n,下/f,的/u,所有/b,实例/n,都/d,有/v,相同/a,的/u,分类/vn,。/w,编程/vn,实现/v,：/w,#,#,递归/nw,构建/v,决策树/nz, ,import/en, ,operator/en, ,#,返回/v,出现/v,次数/n,最/d,多/a,的/u,分类/vn,名称/n, ,def/en, ,majorclass/en,(/w,classlist/en,)/w,:/w, ,classcount/en, ,=/w, ,{/w,}/w, ,for/en, ,vote/en, ,in/en, ,classlist/en,:/w, ,if/en, ,vote/en, ,not/en, ,in/en, ,classcount/en,./w,keys/en,(/w,)/w,:/w, ,classcount/en,[/w,vote/en,]/w, ,=/w, ,0/m, ,classcount/en,[/w,vote/en,]/w, ,+/w,=/w, ,1/m, ,#,降序/nw,排序/vn,，/w,可以/v,指定/v,reverse/en, ,=/w, ,true/en, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,iteritems/en,(/w,)/w,,/w,key/en, ,=/w, ,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w,reverse/en, ,=/w, ,true/en,)/w, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,#,创建/v,树/v, ,def/en, ,creattree/en,(/w,dataset/en,,/w,labels/en,)/w,:/w, ,classlist/en, ,=/w, ,[/w,example/en,[/w,-/w,1/m,]/w, ,for/en, ,example/en, ,in/en, ,dataset/en,]/w, ,if/en, ,classlist/en,./w,count/en,(/w,classlist/en,[/w,0/m,]/w,)/w, ,=/w,=/w, ,len/en,(/w,classlist/en,)/w,:/w, ,return/en, ,classlist/en,[/w,0/m,]/w, ,if/en, ,len/en,(/w,dataset/en,[/w,0/m,]/w,)/w, ,=/w,=/w, ,1/m,:/w, ,return/en, ,majorclass/en,(/w,classlist/en,)/w, ,bestfeat/en, ,=/w, ,choosebest/en,(/w,dataset/en,)/w, ,bestfeatlabel/en, ,=/w, ,labels/en,[/w,bestfeat/en,]/w, ,mytree/en, ,=/w, ,{/w,bestfeatlabel/en,:/w,{/w,}/w,}/w, ,del/en,(/w,labels/en,[/w,bestfeat/en,]/w,)/w, ,featvalues/en, ,=/w, ,[/w,example/en,[/w,bestfeat/en,]/w, ,for/en, ,example/en, ,in/en, ,dataset/en,]/w, ,uniquevals/en, ,=/w, ,set/en,(/w,featvalues/en,)/w, ,for/en, ,value/en, ,in/en, ,uniquevals/en,:/w, ,sublabels/en, ,=/w, ,labels/en,[/w,:/w,]/w, ,mytree/en,[/w,bestfeatlabel/en,]/w,[/w,value/en,]/w, ,=/w, ,creattree/en,(/w,splitdataset/en,(/w,dataset/en,,/w,bestfeat/en,,/w,value/en,)/w,,/w,sublabels/en,)/w, ,return/en, ,mytree/en, ,'/w,'/w,'/w, ,#,测试/vn, ,mydata/en,,/w,labels/en, ,=/w, ,creatdataset/en,(/w,)/w, ,mytree/en, ,=/w, ,creattree/en,(/w,mydata/en,,/w,labels/en,)/w, ,print/en,(/w,mytree/en,)/w, ,'/w,'/w,'/w,2/m,./w,使用/v,matplotlib/en,注解/n,绘制/v,树形图/n,之前/f,我们/r,已经/d,从/p,数据/n,集中/v,成功/a,的/u,创建/v,了/u,决策树/nz,，/w,但是/c,字典/n,的/u,形式/n,非常/d,的/u,不/d,易于/v,理解/v,，/w,因此/c,本节/t,采用/v,matplotlib/en,库/n,创建/v,树形/n,图/n,。/w,首先/d,，/w,使用/v,文本/n,注解/n,绘制/v,树/v,节点/n,：/w,#,#,采用/v,matplotlib/en,绘制/v,树/v,形图/nw, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,decisionnode/en, ,=/w, ,dict/en,(/w,boxstyle/en,=/w,"/w,sawtooth/en,"/w,,/w, ,fc/en,=/w,"/w,0.8/m,"/w,)/w, ,leafnode/en, ,=/w, ,dict/en,(/w,boxstyle/en,=/w,"/w,round/en,4/m,"/w,,/w, ,fc/en,=/w,"/w,0.8/m,"/w,)/w, ,arrow/en,_,args/en, ,=/w, ,dict/en,(/w,arrowstyle/en,=/w,"/w,</w,-/w,"/w,)/w, ,#,绘制/v,树/v,节点/n, ,def/en, ,plotnode/en,(/w,nodetxt/en,,/w, ,centerpt/en,,/w, ,parentpt/en,,/w, ,nodetype/en,)/w,:/w, ,createplot/en,./w,ax/en,1/m,./w,annotate/en,(/w,nodetxt/en,,/w, ,xy/en,=/w,parentpt/en,,/w, ,xycoords/en,=/w,'/w,axes/en, ,fraction/en,'/w,,/w, ,xytext/en,=/w,centerpt/en,,/w, ,textcoords/en,=/w,'/w,axes/en, ,fraction/en,'/w,,/w, ,va/en,=/w,"/w,center/en,"/w,,/w, ,ha/en,=/w,"/w,center/en,"/w,,/w, ,bbox/en,=/w,nodetype/en,,/w, ,arrowprops/en,=/w,arrow/en,_,args/en, ,)/w,获得/v,叶节点/nr,的/u,数目/n,和/c,树/v,的/u,层数/n,，/w,并/c,进行/v,测试/vn,：/w,#,#,获取/v,节点/n,的/u,数目/n,和/c,树/v,的/u,层数/n, ,def/en, ,getnumleafs/en,(/w,mytree/en,)/w,:/w, ,numleafs/en, ,=/w, ,0/m, ,#,firststr/en, ,=/w, ,mytree/en,./w,keys/en,(/w,)/w,[/w,0/m,]/w, ,firstsides/en, ,=/w, ,list/en,(/w,mytree/en,./w,keys/en,(/w,)/w,)/w, ,firststr/en, ,=/w, ,firstsides/en,[/w,0/m,]/w,#,找到/v,输入/v,的/u,第一/m,个/q,元素/n, ,seconddict/en, ,=/w, ,mytree/en,[/w,firststr/en,]/w, ,for/en, ,key/en, ,in/en, ,seconddict/en,./w,keys/en,(/w,)/w,:/w, ,if/en, ,type/en,(/w,seconddict/en,[/w,key/en,]/w,)/w, ,=/w,=/w, ,dict/en,:/w, ,numleafs/en, ,+/w,=/w, ,getnumleafs/en,(/w,seconddict/en,[/w,key/en,]/w,)/w, ,else/en,:/w, ,numleafs/en, ,+/w,=/w, ,1/m, ,return/en, ,numleafs/en, ,def/en, ,gettreedepth/en,(/w,mytree/en,)/w,:/w, ,maxdepth/en, ,=/w, ,1/m, ,firstsides/en, ,=/w, ,list/en,(/w,mytree/en,./w,keys/en,(/w,)/w,)/w, ,firststr/en, ,=/w, ,firstsides/en,[/w,0/m,]/w,#,找到/v,输入/v,的/u,第一/m,个/q,元素/n, ,#,firststr/en, ,=/w, ,mytree/en,./w,keys/en,(/w,)/w,[/w,0/m,]/w, ,seconddict/en, ,=/w, ,mytree/en,[/w,firststr/en,]/w, ,for/en, ,key/en, ,in/en, ,seconddict/en,./w,keys/en,(/w,)/w,:/w, ,if/en, ,type/en,(/w,seconddict/en,[/w,key/en,]/w,)/w, ,=/w,=/w, ,dict/en,:/w, ,thisdepth/en, ,=/w, ,1/m, ,+/w, ,gettreedepth/en,(/w,seconddict/en,[/w,key/en,]/w,)/w, ,else/en,:/w, ,thisdepth/en, ,=/w, ,1/m, ,if/en, ,thisdepth/en, ,>, ,maxdepth/en,:/w, ,maxdepth/en, ,=/w, ,thisdepth/en, ,return/en, ,maxdepth/en, ,def/en, ,retrievetree/en,(/w,i/en,)/w,:/w, ,listoftrees/en, ,=/w,[/w,{/w,'/w,no/en, ,surfacing/en,'/w,:/w, ,{/w,0/m,:/w, ,'/w,no/en,'/w,,/w, ,1/m,:/w, ,{/w,'/w,flippers/en,'/w,:/w, ,{/w,0/m,:/w, ,'/w,no/en,'/w,,/w, ,1/m,:/w, ,'/w,yes/en,'/w,}/w,}/w,}/w,}/w,,/w, ,{/w,'/w,no/en, ,surfacing/en,'/w,:/w, ,{/w,0/m,:/w, ,'/w,no/en,'/w,,/w, ,1/m,:/w, ,{/w,'/w,flippers/en,'/w,:/w, ,{/w,0/m,:/w, ,{/w,'/w,head/en,'/w,:/w, ,{/w,0/m,:/w, ,'/w,no/en,'/w,,/w, ,1/m,:/w, ,'/w,yes/en,'/w,}/w,}/w,,/w, ,1/m,:/w, ,'/w,no/en,'/w,}/w,}/w,}/w,}/w, ,]/w, ,return/en, ,listoftrees/en,[/w,i/en,]/w, ,#,测试/vn, ,mytree/en, ,=/w, ,retrievetree/en,(/w,0/m,)/w, ,print/en,(/w,getnumleafs/en,(/w,mytree/en,)/w,)/w, ,print/en,(/w,gettreedepth/en,(/w,mytree/en,)/w,)/w,在/p,此/r,，/w,我们/r,说明/v,一下/m,python/en,2.7/m,和/c,3.4/m,在/p,实现/v,本/r,段/q,代码/n,的/u,区别/n,：/w,在/p,2.7/m,中/f,，/w,找到/v,key/en,所/u,对应/v,的/u,第一/m,个/q,元素/n,为/p,：/w,firststr/en, ,=/w, ,mytree/en,./w,keys/en,(/w,)/w,[/w,0/m,]/w,，/w,这/r,在/p,3.4/m,中/f,运行会/nw,报错/nw,：/w,'/w,dict/en,_,keys/en,'/w, ,object/en, ,does/en, ,not/en, ,support/en, ,indexing/en,，/w,这/r,是因为/c,python/en,3/m,改变/v,了/u,dict/en,./w,keys/en,,/w,返回/v,的/u,是/v,dict/en,_,keys/en,对象/n,,/w,支持/v,iterable/en, ,但/c,不/d,支持/v,indexable/en,，/w,我们/r,可以/v,将/d,其/r,明确/ad,的/u,转化/v,成/v,list/en,，/w,则/d,此项/r,功能/n,在/p,3/m,中/f,应/v,这样/r,实现/v,：/w,firstsides/en, ,=/w, ,list/en,(/w,mytree/en,./w,keys/en,(/w,)/w,)/w, ,firststr/en, ,=/w, ,firstsides/en,[/w,0/m,]/w,#,找到/v,输入/v,的/u,第一/m,个/q,元素/n,绘制/v,树/v,：/w,def/en, ,plotnode/en,(/w,nodetxt/en,,/w, ,centerpt/en,,/w, ,parentpt/en,,/w, ,nodetype/en,)/w,:/w, ,createplot/en,./w,ax/en,1/m,./w,annotate/en,(/w,nodetxt/en,,/w, ,xy/en,=/w,parentpt/en,,/w, ,xycoords/en,=/w,'/w,axes/en, ,fraction/en,'/w,,/w, ,xytext/en,=/w,centerpt/en,,/w, ,textcoords/en,=/w,'/w,axes/en, ,fraction/en,'/w,,/w, ,va/en,=/w,"/w,center/en,"/w,,/w, ,ha/en,=/w,"/w,center/en,"/w,,/w, ,bbox/en,=/w,nodetype/en,,/w, ,arrowprops/en,=/w,arrow/en,_,args/en, ,)/w, ,def/en, ,plotmidtext/en,(/w,cntrpt/en,,/w, ,parentpt/en,,/w, ,txtstring/en,)/w,:/w, ,xmid/en, ,=/w, ,(/w,parentpt/en,[/w,0/m,]/w,-/w,cntrpt/en,[/w,0/m,]/w,)/w,//w,2.0/m, ,+/w, ,cntrpt/en,[/w,0/m,]/w, ,ymid/en, ,=/w, ,(/w,parentpt/en,[/w,1/m,]/w,-/w,cntrpt/en,[/w,1/m,]/w,)/w,//w,2.0/m, ,+/w, ,cntrpt/en,[/w,1/m,]/w, ,createplot/en,./w,ax/en,1/m,./w,text/en,(/w,xmid/en,,/w, ,ymid/en,,/w, ,txtstring/en,,/w, ,va/en,=/w,"/w,center/en,"/w,,/w, ,ha/en,=/w,"/w,center/en,"/w,,/w, ,rotation/en,=/w,30/m,)/w, ,def/en, ,plottree/en,(/w,mytree/en,,/w, ,parentpt/en,,/w, ,nodetxt/en,)/w,:/w, ,numleafs/en, ,=/w, ,getnumleafs/en,(/w,mytree/en,)/w, ,depth/en, ,=/w, ,gettreedepth/en,(/w,mytree/en,)/w, ,firstsides/en, ,=/w, ,list/en,(/w,mytree/en,./w,keys/en,(/w,)/w,)/w, ,firststr/en, ,=/w, ,firstsides/en,[/w,0/m,]/w,#,找到/v,输入/v,的/u,第一/m,个/q,元素/n, ,cntrpt/en, ,=/w, ,(/w,plottree/en,./w,xoff/en, ,+/w, ,(/w,1.0/m, ,+/w, ,float/en,(/w,numleafs/en,)/w,)/w,//w,2.0/m,//w,plottree/en,./w,totalw/en,,/w, ,plottree/en,./w,yoff/en,)/w, ,plotmidtext/en,(/w,cntrpt/en,,/w, ,parentpt/en,,/w, ,nodetxt/en,)/w, ,plotnode/en,(/w,firststr/en,,/w, ,cntrpt/en,,/w, ,parentpt/en,,/w, ,dec