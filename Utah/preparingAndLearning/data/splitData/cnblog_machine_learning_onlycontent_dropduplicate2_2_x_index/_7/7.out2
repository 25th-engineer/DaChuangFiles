---------------------------------------------------------------------------------------本/nrf,系列/q,文章/n,为/p,《/w,机器/n,学习/v,实战/n,》/w,学习/v,笔记/n,，/w,内容/n,整理/v,自/p,书本/n,，/w,网络/n,以及/c,自己/r,的/u,理解/v,，/w,如/v,有/v,错误/n,欢迎/v,指正/v,。/w,源码/nw,在/p,python/en,3.5/m,上/f,测试/vn,均/d,通过/p,，/w,代码/n,及/c,数据/n, ,--/nrf,>, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,wellat/en,//w,mlaction/en,---------------------------------------------------------------------------------------/nrf,1/m, ,算法/n,概述/v,1.1/m, ,算法/n,特点/n,简单/a,地/u,说/v,，/w,k/en,-/w,近邻/n,算法/n,采用/v,测量/vn,不同/a,特征/n,值/n,之间/f,的/u,距离/n,方法/n,进行/v,分类/vn,。/w,优点/n,：/w,精度/n,高/a,、/w,对/p,异常/a,值/n,不/d,敏感/a,、/w,无数/m,据/p,输入/v,假定/v,缺点/n,：/w,计算/v,复杂/a,度/q,高/a,、/w,空间/n,复杂/a,度/q,高/a,适用/v,数据/n,范围/n,：/w,数值/n,型/k,和/c,标称型/nw,1.2/m, ,工作/vn,原理/n,存在/v,一个/m,训练/vn,样本/n,集/vg,，/w,并且/c,每个/r,样本/n,都/d,存在/v,标签/n,（/w,有/v,监督/vn,学习/v,）/w,。/w,输入/v,没有/v,标签/n,的/u,新/a,样本/n,数据/n,后/f,，/w,将/d,新/a,数据/n,的/u,每个/r,特征/n,与/p,样本/n,集中/v,数据/n,对应/v,的/u,特征/n,进行/v,比较/d,，/w,然后/c,算法/n,提取/v,出/v,与/p,样本/n,集中/v,特征/n,最/d,相似/a,的/u,数据/n,（/w,最近/t,邻/vg,）/w,的/u,分类/vn,标签/n,。/w,一般来说/l,，/w,我们/r,只/d,选择/v,样本/n,数据/n,集中/v,前/f,k/en,个/q,最/d,相似/a,的/u,数据/n,，/w,这/r,就/d,是/v,k/en,-/w,近邻/n,算法/n,中/f,k/en,的/u,出处/n,，/w,而且/c,k/en,通常/d,不/d,大于/v,20/m,。/w,最后/f,选择/v,k/en,个/q,最/d,相似/a,数据/n,中/f,出现/v,次数/n,最/d,多/a,的/u,分类/vn,，/w,作为/v,新/a,数据/n,的/u,分类/vn,。/w,1.3/m, ,实例/n,解释/v,以/p,电影/n,分类/vn,为/p,例子/n,，/w,使用/v,k/en,-/w,近邻/n,算法/n,分类/vn,爱情/n,片/q,和/c,动作片/nw,。/w,有人/r,曾经/d,统计/v,过/u,很多/m,电影/n,的/u,打斗/v,镜头/n,和/c,接吻/v,镜头/n,，/w,下/f,图/n,显示/v,了/u,6部/mq,电影/n,的/u,打斗/v,和/c,接吻/v,镜头/n,数/m,。/w, ,假如/c,有/v,一部/mq,未/d,看/v,过/u,的/u,电影/n,，/w,如何/r,确定/v,它/r,是/v,爱情/n,片/q,还是/c,动作片/nw,呢/y,？/w,①,首先/d,需要/v,统计/v,这个/r,未知/vn,电影/n,存在/v,多少/r,个/q,打斗/v,镜头/n,和/c,接吻/v,镜头/n,，/w,下/f,图/n,中/f,问/v,号/q,位置/n,是/v,该/r,未知/vn,电影/n,出现/v,的/u,镜头/n,数/m,②,之后/f,计算/v,未知/vn,电影/n,与/p,样本/n,集中/v,其他/r,电影/n,的/u,距离/n,（/w,相似/a,度/q,）/w,，/w,具体/a,算法/n,先/d,忽略/v,，/w,结果/n,如下/v,表/n,所/u,示/vg,：/w,③,将/d,相似/a,度/q,列表/v,排序/vn,，/w,选出/v,前/f,k/en,个/q,最/d,相似/a,的/u,样本/n,。/w,此处/s,我们/r,假设/v,k/en,=/w,3/m,，/w,将/d,上/f,表/n,中/f,的/u,相似/a,度/q,进行/v,排序/vn,后/f,前/f,3/m,分别/d,是/v,：/w,he/en,’/w,s/en, ,not/en, ,really/en, ,into/en, ,dudes/en,，/w,beautiful/en, ,woman/en,，/w,california/en, ,man/en,。/w,④,统计/v,最/d,相似/a,样本/n,的/u,分类/vn,。/w,此处/s,很/d,容易/a,知道/v,这/r,3个/m,样本/n,均/d,为/p,爱情/n,片/q,。/w,⑤,将/d,分类/vn,最/d,多/a,的/u,类别/n,作为/v,未知/vn,电影/n,的/u,分类/vn,。/w,那么/r,我们/r,就/d,得出/v,结论/n,，/w,未知/vn,电影/n,属于/v,爱情/n,片/q,。/w,2/m, ,代码/n,实现/v,2.1/m, ,k/en,-/w,近邻/n,简单/a,分类/vn,的/u,应用/vn,2/m,./w,1/m,./w,1/m, ,算法/n,一般/a,流程/n,2/m,./w,1/m,./w,2/m, ,python/en,实现/v,代码/n,及/c,注释/vn,1/m, ,#,coding/en,=/w,utf/en,8/m, ,2/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,3/m, ,import/en, ,operator/en, ,4/m, ,5/m, ,def/en, ,createdataset/en,(/w,)/w,:/w, ,6/m, ,"/w,"/w,"/w, ,7/m, ,函数/n,作用/n,：/w,构建/v,一组/mq,训练/vn,数据/n,（/w,训练/vn,样本/n,）/w,，/w,共/d,4个/m,样本/n, ,8/m, ,同时/c,给/p,出/v,了/u,这/r,4个/m,样本/n,的/u,标签/n,，/w,及/c,labels/en, ,9/m, ,"/w,"/w,"/w, ,10/m, ,group/en, ,=/w, ,array/en,(/w,[/w, ,11/m, ,[/w,1.0/m,,/w, ,1.1/m,]/w,,/w, ,12/m, ,[/w,1.0/m,,/w, ,1.0/m,]/w,,/w, ,13/m, ,[/w,0/m,./w, ,,/w, ,0/m,./w, ,]/w,,/w, ,14/m, ,[/w,0/m,./w, ,,/w, ,0.1/m,]/w, ,15/m, ,]/w,)/w, ,16/m, ,labels/en, ,=/w, ,[/w,'/w,a/en,'/w,,/w, ,'/w,a/en,'/w,,/w, ,'/w,b/en,'/w,,/w, ,'/w,b/en,'/w,]/w, ,17/m, ,return/en, ,group/en,,/w, ,labels/en, ,18/m, ,19/m, ,def/en, ,classify/en,0/m,(/w,inx/en,,/w, ,dataset/en,,/w, ,labels/en,,/w, ,k/en,)/w,:/w, ,20/m, ,"/w,"/w,"/w, ,21/m, ,inx/en, ,是/v,输入/v,的/u,测试/vn,样本/n,，/w,是/v,一个/m,[/w,x/en,,/w, ,y/en,]/w,样式/n,的/u, ,22/m, ,dataset/en, ,是/v,训练/vn,样本/n,集/vg, ,23/m, ,labels/en, ,是/v,训练/vn,样本/n,标签/n, ,24/m, ,k/en, ,是/v,top/en, ,k/en,最/d,相近/a,的/u, ,25/m, ,"/w,"/w,"/w, ,26/m, ,#, ,shape/en,返回/v,矩阵/n,的/u,[/w,行数/n,，/w,列/v,数/m,]/w,，/w, ,27/m, ,#, ,那么/r,shape/en,[/w,0/m,]/w,获取/v,数据集/nw,的/u,行数/n,，/w, ,28/m, ,#, ,行数/n,就/d,是/v,样本/n,的/u,数量/n, ,29/m, ,datasetsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,30/m, ,31/m, ,"/w,"/w,"/w, ,32/m, ,下面/f,的/u,求/v,距离/n,过程/n,就/d,是/v,按照/p,欧氏/nr,距离/n,的/u,公式/n,计算/v,的/u,。/w, ,33/m, ,即/v, ,根号/n,(/w,x/en,^,2/m,+/w,y/en,^,2/m,)/w, ,34/m, ,"/w,"/w,"/w, ,35/m, ,#, ,tile/en,属于/v,numpy/en,模块/n,下边/f,的/u,函数/n, ,36/m, ,#, ,tile/en,（/w,a/en,,/w, ,reps/en,）/w,返回/v,一个/m,shape/en,=/w,reps/en,的/u,矩阵/n,，/w,矩阵/n,的/u,每个/r,元素/n,是/v,a/en, ,37/m, ,#, ,比如/v, ,a/en,=/w,[/w,0/m,,/w,1/m,,/w,2/m,]/w, ,那么/r,，/w,tile/en,(/w,a/en,,/w, ,2/m,)/w,=/w, ,[/w,0/m,,/w, ,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,1/m,,/w, ,2/m,]/w, ,38/m, ,#, ,tile/en,(/w,a/en,,/w,(/w,2/m,,/w,2/m,)/w,)/w, ,=/w, ,[/w,[/w,0/m,,/w, ,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,1/m,,/w, ,2/m,]/w,,/w, ,39/m, ,#, ,[/w,0/m,,/w, ,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,1/m,,/w, ,2/m,]/w,]/w, ,40/m, ,#, ,tile/en,(/w,a/en,,/w,(/w,2/m,,/w,1/m,,/w,2/m,)/w,)/w, ,=/w, ,[/w,[/w,[/w,0/m,,/w, ,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,1/m,,/w, ,2/m,]/w,]/w,,/w, ,41/m, ,#, ,[/w,[/w,0/m,,/w, ,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,1/m,,/w, ,2/m,]/w,]/w,]/w, ,42/m, ,#, ,上边/f,那个/r,结果/n,的/u,分开/v,理解/v,就/d,是/v,：/w, ,43/m, ,#, ,最/d,外/f,层/q,是/v,2个/m,元素/n,，/w,即/v,最/d,外边/f,的/u,[/w,]/w,中/f,包含/v,2个/m,元素/n,，/w,类似/v,于/p,[/w,c/en,,/w,d/en,]/w,,/w,而/c,此处/s,的/u,c/en,=/w,d/en,，/w,因为/c,是/v,复制/v,出来/v,的/u, ,44/m, ,#, ,然后/c,c/en,包含/v,1个/m,元素/n,，/w,即/v,c/en,=/w,[/w,e/en,]/w,,/w,同理/v,d/en,=/w,[/w,e/en,]/w, ,45/m, ,#, ,最后/f,e/en,包含/v,2个/m,元素/n,，/w,即/v,e/en,=/w,[/w,f/en,,/w,g/en,]/w,,/w,此处/s,f/en,=/w,g/en,，/w,因为/c,是/v,复制/v,出来/v,的/u, ,46/m, ,#, ,f/en,就/d,是/v,a/en,了/u,，/w,基础/n,元素/n, ,47/m, ,#, ,综合/vn,起来/v,就/d,是/v,(/w,2/m,,/w,1/m,,/w,2/m,)/w,=/w, ,[/w,c/en,,/w, ,c/en,]/w, ,=/w, ,[/w,[/w,e/en,]/w,,/w, ,[/w,e/en,]/w,]/w, ,=/w, ,[/w,[/w,[/w,f/en,,/w, ,f/en,]/w,]/w,,/w, ,[/w,[/w,f/en,,/w, ,f/en,]/w,]/w,]/w, ,=/w, ,[/w,[/w,[/w,a/en,,/w, ,a/en,]/w,]/w,,/w, ,[/w,[/w,a/en,,/w, ,a/en,]/w,]/w,]/w, ,48/m, ,#, ,这个/r,地方/n,就是/d,为了/p,把/p,输入/v,的/u,测试/vn,样本/n,扩展/v,为/p,和/c,dataset/en,的/u,shape/en,一样/u,，/w,然后/c,就/d,可以/v,直接/ad,做/v,矩阵/n,减法/n,了/u,。/w, ,49/m, ,#, ,比如/v,，/w,dataset/en,有/v,4个/m,样本/n,，/w,就/d,是/v,4/m,*/w,2/m,的/u,矩阵/n,，/w,输入/v,测试/vn,样本/n,肯定/v,是/v,一个/m,了/u,，/w,就/d,是/v,1/m,*/w,2/m,，/w,为了/p,计算/v,输入/v,样本/n,与/p,训练/vn,样本/n,的/u,距离/n, ,50/m, ,#, ,那么/r,，/w,需要/v,对/p,这个/r,数据/n,进行/v,作差/nw,。/w,这/r,是/v,一次/mq,比较/d,，/w,因为/c,训练/vn,样本/n,有/v,n/en,个/q,，/w,那么/r,就要/d,进行/v,n/en,次/q,比较/d,；/w, ,51/m, ,#, ,为了/p,方便/a,计算/v,，/w,把/p,输入/v,样本/n,复制/v,n/en,次/q,，/w,然后/c,直接/ad,与/p,训练/vn,样本/n,作矩/nw,阵差/nw,运算/vn,，/w,就/d,可以/v,一次性/d,比较/d,了/u,n/en,个/q,样本/n,。/w, ,52/m, ,#, ,比如/v,inx/en, ,=/w, ,[/w,0/m,,/w,1/m,]/w,,/w,dataset/en,就/d,用/p,函数/n,返回/v,的/u,结果/n,，/w,那么/r, ,53/m, ,#, ,tile/en,(/w,inx/en,,/w, ,(/w,4/m,,/w,1/m,)/w,)/w,=/w, ,[/w,[/w, ,0.0/m,,/w, ,1.0/m,]/w,,/w, ,54/m, ,#, ,[/w, ,0.0/m,,/w, ,1.0/m,]/w,,/w, ,55/m, ,#, ,[/w, ,0.0/m,,/w, ,1.0/m,]/w,,/w, ,56/m, ,#, ,[/w, ,0.0/m,,/w, ,1.0/m,]/w,]/w, ,57/m, ,#, ,作差/nw,之后/f, ,58/m, ,#, ,diffmat/en, ,=/w, ,[/w,[/w,-/w,1.0/m,,/w,-/w,0.1/m,]/w,,/w, ,59/m, ,#, ,[/w,-/w,1.0/m,,/w, ,0.0/m,]/w,,/w, ,60/m, ,#, ,[/w, ,0.0/m,,/w, ,1.0/m,]/w,,/w, ,61/m, ,#, ,[/w, ,0.0/m,,/w, ,0.9/m,]/w,]/w, ,62/m, ,diffmat/en, ,=/w, ,tile/en,(/w,inx/en,,/w, ,(/w,datasetsize/en,,/w, ,1/m,)/w,)/w, ,-/w, ,dataset/en, ,63/m, ,64/m, ,#, ,diffmat/en,就/d,是/v,输入/v,样本/n,与/p,每个/r,训练/vn,样本/n,的/u,差值/n,，/w,然后/c,对/p,其/r,每个/r,x/en,和/c,y/en,的/u,差值/n,进行/v,平方/q,运算/vn,。/w, ,65/m, ,#, ,diffmat/en,是/v,一个/m,矩阵/n,，/w,矩阵/n,*/w,*/w,2/m,表示/v,对/p,矩阵/n,中/f,的/u,每个/r,元素/n,进行/v,*/w,*/w,2/m,操作/v,，/w,即/v,平方/q,。/w, ,66/m, ,#, ,sqdiffmat/en, ,=/w, ,[/w,[/w,1.0/m,,/w, ,0.01/m,]/w,,/w, ,67/m, ,#, ,[/w,1.0/m,,/w, ,0.0/m, ,]/w,,/w, ,68/m, ,#, ,[/w,0.0/m,,/w, ,1.0/m, ,]/w,,/w, ,69/m, ,#, ,[/w,0.0/m,,/w, ,0.81/m,]/w,]/w, ,70/m, ,sqdiffmat/en, ,=/w, ,diffmat/en, ,*/w,*/w, ,2/m, ,71/m, ,72/m, ,#, ,axis/en,=/w,1/m,表示/v,按照/p,横轴/nw,，/w,sum/en,表示/v,累加/v,，/w,即/v,按照/p,行/v,进行/v,累加/v,。/w, ,73/m, ,#, ,sqdistance/en, ,=/w, ,[/w,[/w,1.01/m,]/w,,/w, ,74/m, ,#, ,[/w,1.0/m, ,]/w,,/w, ,75/m, ,#, ,[/w,1.0/m, ,]/w,,/w, ,76/m, ,#, ,[/w,0.81/m,]/w,]/w, ,77/m, ,sqdistance/en, ,=/w, ,sqdiffmat/en,./w,sum/en,(/w,axis/en,=/w,1/m,)/w, ,78/m, ,79/m, ,#, ,对/p,平方/q,和/c,进行/v,开/v,根号/n, ,80/m, ,distance/en, ,=/w, ,sqdistance/en, ,*/w,*/w, ,0.5/m, ,81/m, ,82/m, ,#, ,按照/p,升序/n,进行/v,快速/d,排序/vn,，/w,返回/v,的/u,是/v,原/b,数/m,组/q,的/u,下标/n,。/w, ,83/m, ,#, ,比如/v,，/w,x/en, ,=/w, ,[/w,30/m,,/w, ,10/m,,/w, ,20/m,,/w, ,40/m,]/w, ,84/m, ,#, ,升序/n,排序/vn,后/f,应该/v,是/v,[/w,10/m,,/w,20/m,,/w,30/m,,/w,40/m,]/w,,/w,他们/r,的/u,原/b,下标/n,是/v,[/w,1/m,,/w,2/m,,/w,0/m,,/w,3/m,]/w, ,85/m, ,#, ,那么/r,，/w,numpy/en,./w,argsort/en,(/w,x/en,)/w, ,=/w, ,[/w,1/m,,/w, ,2/m,,/w, ,0/m,,/w, ,3/m,]/w, ,86/m, ,sorteddistindicies/en, ,=/w, ,distance/en,./w,argsort/en,(/w,)/w, ,87/m, ,88/m, ,#, ,存放/v,最终/d,的/u,分类/vn,结果/n,及/c,相应/v,的/u,结果/n,投票数/nw, ,89/m, ,classcount/en, ,=/w, ,{/w,}/w, ,90/m, ,91/m, ,#, ,投票/v,过程/n,，/w,就/d,是/v,统计/v,前/f,k/en,个/q,最近/t,的/u,样本/n,所/u,属/v,类别/n,包含/v,的/u,样本/n,个/q,数/m, ,92/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,k/en,)/w,:/w, ,93/m, ,#, ,index/en, ,=/w, ,sorteddistindicies/en,[/w,i/en,]/w,是/v,第/m,i/en,个/q,最/d,相近/a,的/u,样本/n,下/f,标/v, ,94/m, ,#, ,voteilabel/en, ,=/w, ,labels/en,[/w,index/en,]/w,是/v,样本/n,index/en,对应/v,的/u,分类/vn,结果/n,(/w,'/w,a/en,'/w, ,or/en, ,'/w,b/en,'/w,)/w, ,95/m, ,voteilabel/en, ,=/w, ,labels/en,[/w,sorteddistindicies/en,[/w,i/en,]/w,]/w, ,96/m, ,#, ,classcount/en,./w,get/en,(/w,voteilabel/en,,/w, ,0/m,)/w,返回/v,voteilabel/en,的/u,值/n,，/w,如果/c,不/d,存在/v,，/w,则/d,返回/v,0/m, ,97/m, ,#, ,然后/c,将/d,票数/n,增/v,1/m, ,98/m, ,classcount/en,[/w,voteilabel/en,]/w, ,=/w, ,classcount/en,./w,get/en,(/w,voteilabel/en,,/w, ,0/m,)/w, ,+/w, ,1/m, ,99/m, ,100/m, ,#, ,把/p,分类/vn,结果/n,进行/v,排序/vn,，/w,然后/c,返回/v,得票数/n,最/d,多/a,的/u,分类/vn,结果/n, ,101/m, ,sortedclasscount/en, ,=/w, ,sorted/en,(/w,classcount/en,./w,items/en,(/w,)/w,,/w, ,key/en,=/w,operator/en,./w,itemgetter/en,(/w,1/m,)/w,,/w, ,reverse/en,=/w,true/en,)/w, ,102/m, ,return/en, ,sortedclasscount/en,[/w,0/m,]/w,[/w,0/m,]/w, ,103/m, ,104/m, ,if/en, ,_,_,name/en,_,_,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,105/m, ,#, ,导入/v,数据/n, ,106/m, ,dataset/en,,/w, ,labels/en, ,=/w, ,createdataset/en,(/w,)/w, ,107/m, ,inx/en, ,=/w, ,[/w,0.1/m,,/w, ,0.1/m,]/w, ,108/m, ,#, ,简单/a,分类/vn, ,109/m, ,classname/en, ,=/w, ,classify/en,0/m,(/w,inx/en,,/w, ,dataset/en,,/w, ,labels/en,,/w, ,3/m,)/w, ,110/m, ,print/en,(/w,'/w,the/en, ,class/en, ,of/en, ,test/en, ,sample/en, ,is/en, ,%/w,s/en,'/w, ,%/w,classname/en,)/w,2.2/m, ,在/p,约会/vn,网站/n,上/f,使用/v,k/en,-/w,近邻/n,算法/n,2/m,./w,2/m,./w,1/m, ,算法/n,一般/a,流程/n,2/m,./w,2/m,./w,2/m, ,python/en,实现/v,代码/n,datingtestset/en,./w,txt/en, ,文件/n,中/f,有/v,1000行/mq,的/u,约会/vn,数据/n,，/w,样本/n,主要/b,包括/v,以下/f,3种/mq,特征/n,：/w,每年/r,获得/v,的/u,飞行/vn,常客/n,里程/n,数/m,玩/v,视频/n,游戏/n,所/u,耗/v,时间/n,百分比/n,每周/r,消费/vn,的/u,冰淇淋/n,公升/q,数/m,将/d,上述/b,特征/n,数据/n,输人/n,到/v,分类器/nw,之前/f,，/w,必须/d,将/d,待/v,处理/v,数据/n,的/u,格式/n,改变/v,为/p,分类器/nw,可以/v,接受/v,的/u,格式/n, ,。/w,在/p,knn/en,./w,py/en,中/f,创建/v,名/q,为/p, ,file/en,2/m,matrix/en, ,的/u,函数/n,，/w,以此/d,来/v,处理/v,输人/n,格式/n,问题/n,。/w,该/r,函数/n,的/u,输人/n,为/p,文件/n,名字/n,符串/nr,，/w,输出/v,为/p,训练/vn,样本/n,矩阵/n,和/c,类/q,标签/n,向量/n,。/w,autonorm/en, ,为数值归一化/nw,函数/n,，/w,将/d,任意/d,取值/v,范围/n,的/u,特征/n,值/n,转化/v,为/p,0/m,到/v,1/m,区间/n,内/f,的/u,值/n,。/w,最后/f,，/w,datingclasstest/en, ,函数/n,是/v,测试/vn,代码/n,。/w,将/d,下面/f,的/u,代码/n,增加/v,到/v, ,knn/en,./w,py/en, ,中/f,。/w,1/m, ,def/en, ,file/en,2/m,matrix/en,(/w,filename/en,)/w,:/w, ,2/m, ,"/w,"/w,"/w, ,3/m, ,从/p,文件/n,中/f,读/v,入/v,训练/vn,数据/n,，/w,并/c,存储/vn,为/p,矩阵/n, ,4/m, ,"/w,"/w,"/w, ,5/m, ,fr/en, ,=/w, ,open/en,(/w,filename/en,)/w, ,6/m, ,arrayolines/en, ,=/w, ,fr/en,./w,readlines/en,(/w,)/w, ,7/m, ,numberoflines/en, ,=/w, ,len/en,(/w,arrayolines/en,)/w, ,#,获取/v, ,n/en,=/w,样本/n,的/u,行数/n, ,8/m, ,returnmat/en, ,=/w, ,zeros/en,(/w,(/w,numberoflines/en,,/w,3/m,)/w,)/w, ,#,创建/v,一个/m,2维/mq,矩阵/n,用于/v,存放/v,训练/vn,样本/n,数据/n,，/w,一共/d,有/v,n/en,行/v,，/w,每/r,一行/n,存放/v,3个/m,数据/n, ,9/m, ,classlabelvector/en, ,=/w, ,[/w,]/w, ,#,创建/v,一个/m,1/m,维数/nr,组/q,用于/v,存放/v,训练/vn,样本/n,标签/n,。/w, ,10/m, ,index/en, ,=/w, ,0/m, ,11/m, ,for/en, ,line/en, ,in/en, ,arrayolines/en,:/w, ,12/m, ,#, ,把/p,回车/v,符号/n,给/p,去掉/v, ,13/m, ,line/en, ,=/w, ,line/en,./w,strip/en,(/w,)/w, ,14/m, ,#, ,把/p,每/r,一行/n,数据/n,用/p,\/w,t/en,分割/v, ,15/m, ,listfromline/en, ,=/w, ,line/en,./w,split/en,(/w,'/w,\/w,t/en,'/w,)/w, ,16/m, ,#, ,把/p,分割/v,好/a,的/u,数据/n,放/v,至/p,数据集/nw,，/w,其中/r,index/en,是/v,该/r,样本/n,数据/n,的/u,下标/n,，/w,就/d,是/v,放/v,到/v,第几/nw,行/v, ,17/m, ,returnmat/en,[/w,index/en,,/w,:/w,]/w, ,=/w, ,listfromline/en,[/w,0/m,:/w,3/m,]/w, ,18/m, ,#, ,把/p,该/r,样本/n,对应/v,的/u,标签/n,放/v,至/p,标签/n,集/vg,，/w,顺序/n,与/p,样本/n,集/vg,对应/v,。/w, ,19/m, ,classlabelvector/en,./w,append/en,(/w,int/en,(/w,listfromline/en,[/w,-/w,1/m,]/w,)/w,)/w, ,20/m, ,index/en, ,+/w,=/w, ,1/m, ,21/m, ,return/en, ,returnmat/en,,/w,classlabelvector/en, ,22/m, ,23/m, ,def/en, ,autonorm/en,(/w,dataset/en,)/w,:/w, ,24/m, ,"/w,"/w,"/w, ,25/m, ,训练/vn,数据/n,归/v,一/m,化/v, ,26/m, ,"/w,"/w,"/w, ,27/m, ,#, ,获取/v,数据/n,集中/v,每/r,一列/mq,的/u,最小/a,数值/n, ,28/m, ,#, ,以/p,createdataset/en,(/w,)/w,中/f,的/u,数据/n,为/p,例/n,，/w,group/en,./w,min/en,(/w,0/m,)/w,=/w,[/w,0/m,,/w,0/m,]/w, ,29/m, ,minvals/en, ,=/w, ,dataset/en,./w,min/en,(/w,0/m,)/w, ,30/m, ,#, ,获取/v,数据/n,集中/v,每/r,一列/mq,的/u,最/d,大/a,数值/n, ,31/m, ,#, ,group/en,./w,max/en,(/w,0/m,)/w,=/w,[/w,1/m,,/w, ,1.1/m,]/w, ,32/m, ,maxvals/en, ,=/w, ,dataset/en,./w,max/en,(/w,0/m,)/w, ,33/m, ,#, ,最大值/nz,与/p,最小/a,的/u,差值/n, ,34/m, ,ranges/en, ,=/w, ,maxvals/en, ,-/w, ,minvals/en, ,35/m, ,#, ,创建/v,一个/m,与/p,dataset/en,同/p,shape/en,的/u,全/a,0/m,矩阵/n,，/w,用于/v,存放/v,归/v,一/m,化/v,后/f,的/u,数据/n, ,36/m, ,normdataset/en, ,=/w, ,zeros/en,(/w,shape/en,(/w,dataset/en,)/w,)/w, ,37/m, ,m/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,38/m, ,#, ,把/p,最小值/nz,扩充/v,为/p,与/p,dataset/en,同/p,shape/en,，/w,然后/c,作差/nw,，/w,具体/a,tile/en,请/v,翻/v,看/v, ,第三/nw,节/n, ,代码/n,中/f,的/u,tile/en, ,39/m, ,normdataset/en, ,=/w, ,dataset/en, ,-/w, ,tile/en,(/w,minvals/en,,/w, ,(/w,m/en,,/w,1/m,)/w,)/w, ,40/m, ,#, ,把/p,最/d,大/a,最/d,小/a,差值/n,扩充/v,为/p,dataset/en,同/p,shape/en,，/w,然后/c,作商/nw,，/w,是/v,指/v,对应/v,元素/n,进行/v,除法/n,运算/vn,，/w,而/c,不/d,是/v,矩阵/n,除法/n,。/w, ,41/m, ,#, ,矩阵/n,除法/n,在/p,numpy/en,中/f,要用/v,linalg/en,./w,solve/en,(/w,a/en,,/w,b/en,)/w, ,42/m, ,normdataset/en, ,=/w, ,normdataset/en,//w,tile/en,(/w,ranges/en,,/w, ,(/w,m/en,,/w,1/m,)/w,)/w, ,43/m, ,return/en, ,normdataset/en,,/w, ,ranges/en,,/w, ,minvals/en, ,44/m, ,45/m, ,def/en, ,datingclasstest/en,(/w,)/w,:/w, ,46/m, ,#, ,将/d,数据/n,集中/v,10%/mq,的/u,数据/n,留/v,作/v,测试/vn,用/p,，/w,其余/r,的/u,90%/mq,用于/v,训练/vn, ,47/m, ,horatio/en, ,=/w, ,0.10/m, ,48/m, ,datingdatamat/en,,/w,datinglabels/en, ,=/w, ,file/en,2/m,matrix/en,(/w,'/w,datingtestset/en,2/m,./w,txt/en,'/w,)/w, ,#,load/en, ,data/en, ,setfrom/en, ,file/en, ,49/m, ,normmat/en,,/w, ,ranges/en,,/w, ,minvals/en, ,=/w, ,autonorm/en,(/w,datingdatamat/en,)/w, ,50/m, ,m/en, ,=/w, ,normmat/en,./w,shape/en,[/w,0/m,]/w, ,51/m, ,numtestvecs/en, ,=/w, ,int/en,(/w,m/en,*/w,horatio/en,)/w, ,52/m, ,errorcount/en, ,=/w, ,0.0/m, ,53/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numtestvecs/en,)/w,:/w, ,54/m, ,classifierresult/en, ,=/w, ,classify/en,0/m,(/w,normmat/en,[/w,i/en,,/w,:/w,]/w,,/w,normmat/en,[/w,numtestvecs/en,:/w,m/en,,/w,:/w,]/w,,/w,datinglabels/en,[/w,numtestvecs/en,:/w,m/en,]/w,,/w,3/m,)/w, ,55/m, ,print/en,(/w,"/w,the/en, ,classifier/en, ,came/en, ,back/en, ,with/en,:/w, ,%/w,d/en,,/w, ,the/en, ,real/en, ,answer/en, ,is/en,:/w, ,%/w,d/en,,/w, ,result/en, ,is/en, ,:/w,%/w,s/en,"/w, ,%/w, ,(/w,classifierresult/en,,/w, ,datinglabels/en,[/w,i/en,]/w,,/w,classifierresult/en,=/w,=/w,datinglabels/en,[/w,i/en,]/w,)/w,)/w, ,56/m, ,if/en, ,(/w,classifierresult/en, ,!/w,=/w, ,datinglabels/en,[/w,i/en,]/w,)/w,:/w, ,errorcount/en, ,+/w,=/w, ,1.0/m, ,57/m, ,print/en,(/w,"/w,the/en, ,total/en, ,error/en, ,rate/en, ,is/en,:/w, ,%/w,f/en,"/w, ,%/w, ,(/w,errorcount/en,//w,float/en,(/w,numtestvecs/en,)/w,)/w,)/w, ,58/m, ,print/en,(/w,errorcount/en,)/w,2.3/m, ,手写/v,识别/v,系统/n,实例/n,2/m,./w,3/m,./w,1/m, ,实例/n,数据/n,为了/p,简单/a,起见/u,，/w,这里/r,构造/v,的/u,系统/n,只能/v,识别/v,数字/n,0/m,到/v,9/m,。/w,需要/v,识别/v,的/u,数字/n,已经/d,使用/v,图形/n,处理/v,软件/n,，/w,处理/v,成/v,具有/v,相同/a,的/u,色彩/n,和/c,大小/n, ,:/w, ,宽髙/nw,是/v,32/m,像素/n,x/en, ,32/m,像素/n,的/u,黑白/b,图像/n,。/w,尽管/c,采用/v,文本/n,格式/n,存储/vn,图像/n,不能/v,有效/a,地/u,利用/v,内存/n,空间/n,，/w,但是/c,为了/p,方便/a,理解/v,，/w,我们/r,还是/c,将/d,图像/n,转换/v,为/p,文本/n,格式/n,。/w,trainingdigits/en,是/v,2000个/m,训练/vn,样本/n,，/w,testdigits/en,是/v,900个/m,测试/vn,样本/n,。/w,2/m,./w,3/m,./w,2/m, ,算法/n,的/u,流程/n,2/m,./w,3/m,./w,3/m, ,python/en,实现/v,代码/n,将/d,下面/f,的/u,代码/n,增加/v,到/v, ,knn/en,./w,py/en, ,中/f,，/w,img/en,2/m,vector/en, ,为/p,图片/n,转换/v,成/v,向/p,量/n,的/u,方法/n,，/w,handwritingclasstest/en, ,为/p,测试/vn,方法/n,：/w,1/m, ,from/en, ,os/en, ,import/en, ,listdir/en, ,2/m, ,def/en, ,img/en,2/m,v