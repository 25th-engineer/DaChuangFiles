catalogue/en,0/m,./w, ,个人/n,理解/v, ,1/m,./w, ,基本/a,使用/v, ,2/m,./w, ,mnist/en,(/w,multiclass/en, ,classification/en,)/w,入门/v, ,3/m,./w, ,深入/v,mnist/en, ,4/m,./w, ,卷积/nw,神经/n,网络/n,：/w,cifar/en,-/w,10/m, ,数据集/nw,分类/vn, ,5/m,./w, ,单词/n,的/u,向量/n,表示/v,(/w,vector/en, ,representations/en, ,of/en, ,words/en,)/w, ,6/m,./w, ,循环/vn,神经/n,网络/n,(/w,rnn/en,)/w,、/w,lstm/en,(/w,long/en,-/w,short/en, ,term/en, ,memory/en,,/w, ,lstm/en,)/w, ,7/m,./w, ,用/p,深度/n,学习/v,网络/n,搭建/v,一个/m,聊天/v,机器人/n,0/m,./w, ,个人/n,理解/v,在/p,学习/v,的/u,最/d,开始/v,，/w,我/r,在/p,这里/r,写/v,一个/m,个人/n,对/p,deep/en, ,leanring/en,和/c,神经/n,网络/n,的/u,粗略/ad,理解/v,，/w,不对/a,的/u,地方/n,请/v,多/a,指教/v,1/m,./w, ,deep/en, ,learning/en,神经/n,网络/n,本质/n,是/v,在/p,lean/en,什么/r,，/w,我/r,觉得/v,是/v,在/p,learn/en,一个/m,一组/mq,参数/n,，/w,或者/c,说/v,是/v,选择/v,模式/n,，/w,也/d,就是/d,我们/r,常/d,说/v,的/u,分类器/nw,，/w,这个/r,分类器/nw,可能/v,是/v,一个/m,高/a,维度/n,分类器/nw,，/w,由/p,一组/mq,参数/n,组成/v, ,2/m,./w, ,拿/v,图像/n,验证/vn,码/v,识别/v,来说/u,，/w,这里/r,的/u,参数/n,就/d,是/v,指/v,图像/n,区域/n,中/f,的/u,权重/nz,分布/v,情况/n,(/w,数字/n,1/m,和/c,数字/n,2/m,的/u,权重/nz,像素/n,空间/n,分布/v,是/v,不同/a,的/u,)/w,，/w,如果/c,我们/r,选定/v,图像/n,的/u,像素/n,空间/n,(/w,例如/v,32/m, ,*/w, ,32/m,)/w, ,+/w, ,rgb/en,色彩/n,通道/n,(/w,3/m,)/w,作为/v,输入/v,特征/n,(/w,本质/n,上/f,这/r,就/d,是/v,特征/n,工程/n,)/w,，/w,这些/r,特征/n,会/v,被/p,tensorflow/en,当成/v,神经元/n,，/w,并/c,在/p,每/r,一层/mq,对/p,这些/r,神经元/n,进行/v,组合/v,，/w,并/c,计算/v,出/v,结果/n,，/w,而/c,下/f,一层/mq,神经/n,网络/n,的/u,神经元/n,，/w,会/v,把/p,这/r,一层/mq,的/u,输出/v,再/d,进行/v,组合/v,，/w,组合/v,时/ng,，/w,根据/p,上/f,一次/mq,预测/v,的/u,准确性/n,，/w,会/v,自动/d,通过/p,back/en, ,propogation/en,给/p,每个/r,组合/v,不同/a,的/u,weight/en,(/w,比重/n,)/w,，/w,这个/r,过程/n,会/v,一直/d,进行/v,，/w,直到/v,调整/vn,出/v,一个/m,最佳/z,拟合/nz,的/u,weight/en,，/w,这个/r,weight/en,往往/d,就/d,是/v,最/d,贴近/v,真实/a,图像/n,的/u,像素/n,空间/n,权重/nz, ,3/m,./w, ,./w, ,世界/n,上/f,的/u,所有/b,事物/n,，/w,都/d,可以/v,抽象/a,为/p,一个/m,高/a,维度/n,矩阵/n,，/w,这个/r,过程/n,在/p,不同/a,的/u,领域/n,会/v,有/v,不同/a,的/u,提取/v,抽象/a,方式/n,，/w,即/v,特征/n,工程/n,，/w,值得/v,注意/v,的/u,是/v,，/w,拥有/v,对应/v,领域/n,的/u,专业/n,知识/n,，/w,非常/d,有助于/v,特征/n,工程/n,的/u,实施/v, ,4/m,./w, ,我们/r,将/d,特定/b,领域/n,的/u,、/w,需要/v,分类/vn,//w,识别/v,的/u,对象/n,抽象/a,为/p,高/a,维度/n,矩阵/n,后/f,，/w,进入/v,deep/en, ,learn/en,算法/n,模型/n,中/f,就/d,成为/v,了/u,神经元/n,(/w,节点/n,)/w,，/w,deep/en, ,learn/en,模型/n,接下来/l,要/v,做/v,的/u,事/n,称之为/v,"/w,拟合/nz,"/w, ,5/m,./w, ,要/v,完成/v,分类/vn,和/c,识别/v,，/w,deep/en, ,learn/en,的/u,目标/n,是/v,找到/v,一个/m,拟合/nz,矩阵/n,(/w,具象/n,来说/u,就/d,是/v,"/w,高/a,维度/n,-/w,1/m,分类/vn,切面/n,"/w,)/w,，/w,要/v,达到/v,这个/r,目的/n,，/w,需要/v,3个/m,元素/n, ,　,　,1/m,)/w, ,拟合/nz,函数/n,(/w,activation/en, ,激活/vn,函数/n,)/w,:/w, ,用于/v,生成/vn,拟合/nz,切面/n, ,　,　,2/m,)/w, ,误差/n,函数/n,(/w,loss/en, ,function/en,)/w,:/w, ,用于/v,在/p,网络/n,计算/v,的/u,过程/n,中/f,计算/v,当前/t,拟合/nz,参数/n,得到/v,的/u,拟合/nz,切面/n,离/v,最优/ad,值/n,的/u,距离/n,，/w,以便/d,随时/d,调整/vn,参数/n, ,　,　,3/m,)/w, ,神经/n,网络结构/l,:/w, ,deep/en, ,learn/en,深度/n,学习/v,和/c,普通/a,神经/n,网络/n,的/u,区别/n,就/d,在于/v,"/w,层数/n,"/w,的/u,不同/a,，/w,深度/n,神经/n,网络/n,往往/d,有/v,3层/mq,以上/f,(/w,输入层/nw,、/w,隐层/nw,、/w,输出/v,层/q,)/w,，/w,当/p,层数/n,增加/v,后/f,，/w,在/p,每/r,一层/mq,选择/v,怎样/r,的/u,组合/v,的/u,交叉/vn,结构/n,就/d,成/v,了/u,一个/m,很/d,难/a,的/u,事情/n,，/w,当前/t,还/d,没有/v,完善/v,的/u,理论/n,支撑/v,能/v,精确/a,地/u,计算/v,出/v,什么样/r,的/u,网络结构/l,能/v,输出/v,最/d,好/a,的/u,结果/n,，/w,通常/d,的/u,做法/n,是/v,根据/p,不/d,认同/vn,的/u,业务/n,场景/n,去/v,不断/d,尝试/vn,不同/a,的/u,网络结构/l,，/w,直到/v,"/w,试/v,出/v,"/w,一个/m,相对/d,较/d,好/a,的/u,网络结构/l,，/w,然后/c,再/d,在/p,这个/r,网络结构/l,的/u,基础/n,之上/f,进行/v,参数/n,调整/vn,值得/v,注意/v,的/u,是/v,，/w,神经/n,网络/n,最/d,大/a,的/u,魔力/n,在于/v,，/w,就/d,在于/v,即使/c,我们/r,无法/v,准确/a,地/u,提取/v,出/v,各种各样/l,很多/m,的/u,特征/n,，/w,而/c,只要/c,给/p,与/p,足够/v,多/a,层/q,的/u,神经/n,网络/n,和/c,神经元/n,，/w,神经/n,网络/n,自己/r,会/v,组合/v,出/v,有用/a,的/u,特征/n,。/w,之所以/c,可以/v,做到/v,这/r,点/q,，/w,我么/nw,可以/v,来看/v,一个/m,实验/vn,http/en,:/w,//w,//w,playground/en,./w,tensorflow/en,./w,org/en,//w,#,activation/en,=/w,tanh/en,&/w,batchsize/en,=/w,10/m,&/w,dataset/en,=/w,spiral/en,&/w,regdataset/en,=/w,reg/en,-/w,plane/en,&/w,learningrate/en,=/w,0.03/m,&/w,regularizationrate/en,=/w,0/m,&/w,noise/en,=/w,0/m,&/w,networkshape/en,=/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,&/w,seed/en,=/w,0.33671/m,&/w,showtestdata/en,=/w,false/en,&/w,discretize/en,=/w,false/en,&/w,perctraindata/en,=/w,50/m,&/w,x/en,=/w,true/en,&/w,y/en,=/w,true/en,&/w,xtimesy/en,=/w,false/en,&/w,xsquared/en,=/w,false/en,&/w,ysquared/en,=/w,false/en,&/w,cosx/en,=/w,false/en,&/w,sinx/en,=/w,false/en,&/w,cosy/en,=/w,false/en,&/w,siny/en,=/w,false/en,&/w,collectstats/en,=/w,false/en,&/w,problem/en,=/w,classification/en,&/w,initzero/en,=/w,false/en,&/w,hidetext/en,=/w,false/en,对于/p,输入/v,来说/u,，/w,我们/r,只/d,给/p,出/v,2个/m,维度/n,的/u,特征/n,x/en,1/m,、/w,x/en,2/m,，/w,而/c,选择/v,1个/m,6层/mq,的/u,，/w,每/r,层/q,有/v,8个/m,神经元/n,的/u,神经/n,网络/n,，/w,在/p,每/r,层/q,网络/n,中/f,，/w,维度/n,被/p,扩展/v,到/v,了/u,8/m,，/w,神经/n,网络/n,会/v,自动/d,在/p,训练/vn,过程/n,中/f,，/w,寻找/v,对/p,它/r,有/v,价值/n,的/u,维度/n,，/w,并/c,给/p,与/p,一定/d,的/u,weight/en,权重/nz,，/w,根据/p,loss/en,函数/n,来/v,不断/d,递归/nw,下降/v,，/w,直到/v,找到/v,一个/m,最/d,好/a,的/u,拟合/nz,权重/nz,参数/n,。/w,dl/en,大大/d,降低/v,了/u,特征/n,工程/n,的/u,难度/n,0/m,x/en,1/m,:/w, ,神经/n,网络/n,到底/d,理解/v,了/u,什么/r,其一/r,，/w,神经/n,网络/n,理解/v,了/u,如何/r,将/d,输入/v,空间/n,解耦/nr,为/p,分/q,层次/n,的/u,卷积/nw,滤波器/n,组/q, ,其二/r,，/w,神经/n,网络/n,理解/v,了/u,从/p,一系列/mq,滤波器/n,的/u,组合/v,到/v,一系列/mq,特定/b,标签/n,的/u,概率/n,映射/v,。/w,神经/n,网络/n,学习/v,到/v,的/u,东西/n,完全/ad,达/v,不/d,到/v,人类/n,的/u,“/w,看见/v,”/w,的/u,意义/n,，/w,从/p,科学/n,的/u,的/u,角度/n,讲/v,，/w,这/r,当然/d,也/d,不/d,意味/n,着/u,我们/r,已经/d,解决/v,了/u,计算机/n,视觉/n,的/u,问题/n,有些/r,人/n,说/v,，/w,卷积/nw,神经/n,网络/n,学习/v,到/v,的/u,对/p,输入/v,空间/n,的/u,分/q,层次/n,解耦/nr,模拟/b,了/u,人类/n,视觉/n,皮层/n,的/u,行为/n,。/w,这种/r,说法/n,可能/v,对/p,也/d,可能/v,不对/a,，/w,但/c,目前/t,未知/vn,我们/r,还/d,没有/v,比较/d,强/a,的/u,证据/n,来/v,承认/v,或/c,否认/v,它/r,。/w,当然/d,，/w,有些/r,人/n,可以/v,期望/v,人类/n,的/u,视觉/n,皮层/n,就/d,是/v,以/p,类似/v,的/u,方式/n,学/v,东西/n,的/u,，/w,某种/r,程度/n,上/f,讲/v,，/w,这/r,是/v,对/p,我们/r,视觉/n,世界/n,的/u,自然/d,解耦/nr,（/w,就/d,像/v,傅里叶/nr,变换/v,是/v,对/p,周期/n,声音/n,信号/n,的/u,一种/mq,解耦/nr,一样/u,自然/d,）/w,【/w,这里/r,是/v,说/v,，/w,就/d,像/v,声音/n,信号/n,的/u,傅里叶/nr,变换/v,表达/v,了/u,不同/a,频率/n,的/u,声音/n,信号/n,这种/r,很/d,自然/d,很/d,物理/n,的/u,理解/v,一样/u,，/w,我们/r,可能/v,会/v,认为/v,我们/r,对/p,视觉/n,信息/n,的/u,识别/v,就/d,是/v,分层/v,来/v,完成/v,的/u,，/w,圆/vg,的/u,是/v,轮子/n,，/w,有/v,四个/m,轮子/n,的/u,是/v,汽车/n,，/w,造型/n,炫酷/nt,的/u,汽车/n,是/v,跑车/n,，/w,像/v,这样/r,】/w,。/w,但是/c,，/w,人类/n,对/p,视觉/n,信号/n,的/u,滤波/v,、/w,分/q,层次/n,、/w,处理/v,的/u,本质/n,很/d,可能/v,和/c,我们/r,弱鸡/nw,的/u,卷积/nw,网络/n,完全/ad,不是/v,一回/mq,事/n,。/w,视觉/n,皮层/n,不/d,是/v,卷积/nw,的/u,，/w,尽管/c,它们/r,也/d,分层/v,，/w,但/c,那些/r,层/q,具有/v,皮质/n,列/v,的/u,结构/n,，/w,而/c,这些/r,结构/n,的/u,真正/d,目的/n,目前/t,还/d,不得而知/l,，/w,这种/r,结构/n,在/p,我们/r,的/u,人工/n,神经/n,网络/n,中/f,还/d,没有/v,出现/v,（/w,尽管/c,乔大帝/nr,geoff/en, ,hinton/en,正在/d,在/p,这个/r,方面/n,努力/ad,）/w,。/w,此外/c,，/w,人类/n,有/v,比/p,给/p,静态/n,图像/n,分类/vn,的/u,感知器多得多/nw,的/u,视觉/n,感知器/nw,，/w,这些/r,感知器/nw,是/v,连续/a,而/c,主动/ad,的/u,，/w,不/d,是/v,静态/n,而/c,被动/a,的/u,，/w,这些/r,感受器/n,还/d,被/p,如/v,眼动/nw,等/u,多种/m,机制/n,复杂/a,控制/v,relevant/en, ,link/en,:/w,https/en,:/w,//w,//w,groups/en,./w,google/en,./w,com/en,//w,a/en,//w,tensorflow/en,./w,org/en,//w,forum/en,//w,#,!/w,forum/en,//w,discuss/en, ,https/en,:/w,//w,//w,stackoverflow/en,./w,com/en,//w,questions/en,//w,tagged/en,//w,tensorflow/en, ,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,resources/en,//w,overview/en,./w,html/en, ,https/en,:/w,//w,//w,www/en,./w,zhihu/en,./w,com/en,//w,question/en,//w,41667903/m, ,http/en,:/w,//w,//w,playground/en,./w,tensorflow/en,./w,org/en,//w,#,activation/en,=/w,tanh/en,&/w,batchsize/en,=/w,10/m,&/w,dataset/en,=/w,spiral/en,&/w,regdataset/en,=/w,reg/en,-/w,plane/en,&/w,learningrate/en,=/w,0.03/m,&/w,regularizationrate/en,=/w,0/m,&/w,noise/en,=/w,0/m,&/w,networkshape/en,=/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,,/w,8/m,&/w,seed/en,=/w,0.33671/m,&/w,showtestdata/en,=/w,false/en,&/w,discretize/en,=/w,false/en,&/w,perctraindata/en,=/w,50/m,&/w,x/en,=/w,true/en,&/w,y/en,=/w,true/en,&/w,xtimesy/en,=/w,false/en,&/w,xsquared/en,=/w,false/en,&/w,ysquared/en,=/w,false/en,&/w,cosx/en,=/w,false/en,&/w,sinx/en,=/w,false/en,&/w,cosy/en,=/w,false/en,&/w,siny/en,=/w,false/en,&/w,collectstats/en,=/w,false/en,&/w,problem/en,=/w,classification/en,&/w,initzero/en,=/w,false/en,&/w,hidetext/en,=/w,false/en,1/m,./w, ,基本/a,使用/v,0/m,x/en,1/m,:/w, ,综述/v,1/m,./w, ,使用/v,图/n, ,(/w,graph/en,)/w, ,来/v,表示/v,计算/v,任务/n,./w, ,2/m,./w, ,在/p,被/p,称之为/v, ,会话/v, ,(/w,session/en,)/w, ,的/u,上下文/n, ,(/w,context/en,)/w, ,中/f,执行图/nw,./w, ,3/m,./w, ,使用/v, ,tensor/en, ,表示/v,数据/n,./w, ,4/m,./w, ,通过/p, ,变量/n, ,(/w,variable/en,)/w, ,维护/v,状态/n,./w, ,5/m,./w, ,使用/v, ,feed/en, ,和/c, ,fetch/en, ,可以/v,为/p,任意/d,的/u,操作/v,(/w,arbitrary/en, ,operation/en,)/w, ,赋值/v,或者/c,从/p,其中/r,获取/v,数据/n,./w,tensorflow/en, ,是/v,一个/m,编程/vn,系统/n,,/w, ,使用/v,图/n,来/v,表示/v,计算/v,任务/n,./w, ,图/n,中/f,的/u,节点/n,被/p,称之为/v, ,op/en, ,(/w,operation/en, ,的/u,缩写/n,)/w,./w, ,一个/m, ,op/en, ,获得/v, ,0/m, ,个/q,或/c,多/a,个/q, ,tensor/en,,/w, ,执行/v,计算/v,,/w, ,产生/v, ,0/m, ,个/q,或/c,多/a,个/q, ,tensor/en,./w, ,每个/r, ,tensor/en, ,是/v,一个/m,类型化/nw,的/u,多维/nrf,数组/n,./w, ,例如/v,,/w, ,你/r,可以/v,将/d,一/m,小组/n,图像/n,集/vg,表示/v,为/p,一个/m,四维/nw,浮点数/nz,数/m,组/q,,/w, ,这/r,四个/m,维度/n,分别/d,是/v, ,[/w,batch/en,,/w, ,height/en,,/w, ,width/en,,/w, ,channels/en,]/w,./w,一个/m, ,tensorflow/en, ,图/n,描述/v,了/u,计算/v,的/u,过程/n,./w, ,为了/p,进行/v,计算/v,,/w, ,图/n,必须/d,在/p, ,会话/v, ,里/f,被/p,启动/v,./w, ,会话/v, ,将/d,图/n,的/u, ,op/en, ,分发/v,到/v,诸如/v, ,cpu/en, ,或/c, ,gpu/en, ,之类/r,的/u, ,设备/n, ,上/f,,/w, ,同时/c,提供/v,执行/v, ,op/en, ,的/u,方法/n,./w, ,这些/r,方法/n,执行/v,后/f,,/w, ,将/d,产生/v,的/u, ,tensor/en, ,返回/v,./w, ,在/p, ,python/en, ,语言/n,中/f,,/w, ,返回/v,的/u, ,tensor/en, ,是/v, ,numpy/en, ,ndarray/en, ,对象/n,;/w, ,在/p, ,c/en, ,和/c, ,c/en,+/w,+/w, ,语言/n,中/f,,/w, ,返回/v,的/u, ,tensor/en, ,是/v, ,tensorflow/en,:/w,:/w,tensor/en, ,实例/n,./w,0/m,x/en,2/m,:/w, ,计算图/nw,tensorflow/en, ,程序/n,通常/d,被/p,组织/v,成/v,一个/m,构建/v,阶段/n,和/c,一个/m,执行/v,阶段/n,./w, ,在/p,构建/v,阶段/n,,/w, ,op/en, ,的/u,执行/v,步骤/n, ,被/p,描述/v,成/v,一个/m,图/n,./w, ,在/p,执行/v,阶段/n,,/w, ,使用/v,会话/v,执行/v,执行图/nw,中/f,的/u, ,op/en,./w,例如/v,,/w, ,通常/d,在/p,构建/v,阶段/n,创建/v,一个/m,图/n,来/v,表示/v,和/c,训练/vn,神经/n,网络/n,,/w, ,然后/c,在/p,执行/v,阶段/n,反复/d,执行图/nw,中/f,的/u,训练/vn, ,op/en,./w,1/m,./w, ,构建/v,图/n,(/w,将/d,待/v,分类/vn,对象/n,抽象/a,为/p,高维矩/nr,阵/ng,)/w,构建/v,图/n,的/u,第一/m,步/q,,/w, ,是/v,创建/v,源/ng, ,op/en, ,(/w,source/en, ,op/en,)/w,./w, ,源/ng, ,op/en, ,不/d,需要/v,任何/r,输入/v,,/w, ,例如/v, ,常量/n, ,(/w,constant/en,)/w,./w, ,源/ng, ,op/en, ,的/u,输出/v,被/p,传递/v,给/p,其它/r, ,op/en, ,做/v,运算/vn,./w,python/en, ,库中/nrf,,/w, ,op/en, ,构造器/nz,的/u,返回/v,值/n,代表/n,被/p,构造/v,出/v,的/u, ,op/en, ,的/u,输出/v,,/w, ,这些/r,返回/v,值/n,可以/v,传递/v,给/p,其它/r, ,op/en, ,构造器/nz,作为/v,输入/v,./w,#, ,-/w,*/w,-/w, ,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,#, ,创建/v,一个/m,常量/n, ,op/en,,/w, ,产生/v,一个/m, ,1/m,x/en,2/m, ,矩阵/n,./w, ,这个/r, ,op/en, ,被/p,作为/v,一个/m,节点/n, ,#, ,加到/v,默认/v,图中/nrf,./w, ,#, ,#, ,构造器/nz,的/u,返回/v,值/n,代表/n,该/r,常量/n, ,op/en, ,的/u,返回/v,值/n,./w, ,matrix/en,1/m, ,=/w, ,tf/en,./w,constant/en,(/w,[/w,[/w,3/m,./w,,/w, ,3/m,./w,]/w,]/w,)/w, ,#, ,创建/v,另外/c,一个/m,常量/n, ,op/en,,/w, ,产生/v,一个/m, ,2/m,x/en,1/m, ,矩阵/n,./w, ,matrix/en,2/m, ,=/w, ,tf/en,./w,constant/en,(/w,[/w,[/w,2/m,./w,]/w,,/w,[/w,2/m,./w,]/w,]/w,)/w, ,#, ,创建/v,一个/m,矩阵/n,乘法/n, ,matmul/en, ,op/en, ,,/w, ,把/p, ,'/w,matrix/en,1/m,'/w, ,和/c, ,'/w,matrix/en,2/m,'/w, ,作为/v,输入/v,./w, ,#, ,返回/v,值/n, ,'/w,product/en,'/w, ,代表/n,矩阵/n,乘法/n,的/u,结果/n,./w, ,product/en, ,=/w, ,tf/en,./w,matmul/en,(/w,matrix/en,1/m,,/w, ,matrix/en,2/m,)/w,默认/v,图/n,现在/t,有/v,三个/m,节点/n,,/w, ,两个/m, ,constant/en,(/w,)/w, ,op/en,,/w, ,和/c,一个/m,matmul/en,(/w,)/w, ,op/en,./w, ,为了/p,真正/d,进行/v,矩阵/n,相/d,乘/v,运算/vn,,/w, ,并/c,得到/v,矩阵/n,乘法/n,的/u, ,结果/n,,/w, ,必须/d,在/p,会话/v,里/f,启动/v,这个/r,图/n,./w,2/m,./w, ,在/p,一个/m,会话/v,中/f,启动/v,图/n,构造/v,阶段/n,完成/v,后/f,,/w, ,才/d,能/v,启动/v,图/n,./w, ,启动/v,图/n,的/u,第一/m,步/q,是/v,创建/v,一个/m, ,session/en, ,对象/n,,/w, ,如果/c,无/v,任何/r,创建/v,参数/n,,/w, ,会话/v,构造器/nz,将/d,启动/v,默认/v,图/n,./w,#, ,-/w,*/w,-/w, ,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,#, ,创建/v,一个/m,常量/n, ,op/en,,/w, ,产生/v,一个/m, ,1/m,x/en,2/m, ,矩阵/n,./w, ,这个/r, ,op/en, ,被/p,作为/v,一个/m,节点/n, ,#, ,加到/v,默认/v,图中/nrf,./w, ,#, ,#, ,构造器/nz,的/u,返回/v,值/n,代表/n,该/r,常量/n, ,op/en, ,的/u,返回/v,值/n,./w, ,matrix/en,1/m, ,=/w, ,tf/en,./w,constant/en,(/w,[/w,[/w,3/m,./w,,/w, ,3/m,./w,]/w,]/w,)/w, ,#, ,创建/v,另外/c,一个/m,常量/n, ,op/en,,/w, ,产生/v,一个/m, ,2/m,x/en,1/m, ,矩阵/n,./w, ,matrix/en,2/m, ,=/w, ,tf/en,./w,constant/en,(/w,[/w,[/w,2/m,./w,]/w,,/w,[/w,2/m,./w,]/w,]/w,)/w, ,#, ,创建/v,一个/m,矩阵/n,乘法/n, ,matmul/en, ,op/en, ,,/w, ,把/p, ,'/w,matrix/en,1/m,'/w, ,和/c, ,'/w,matrix/en,2/m,'/w, ,作为/v,输入/v,./w, ,#, ,返回/v,值/n, ,'/w,product/en,'/w, ,代表/n,矩阵/n,乘法/n,的/u,结果/n,./w, ,product/en, ,=/w, ,tf/en,./w,matmul/en,(/w,matrix/en,1/m,,/w, ,matrix/en,2/m,)/w, ,#, ,默认/v,图/n,现在/t,有/v,三个/m,节点/n,,/w, ,两个/m, ,constant/en,(/w,)/w, ,op/en,,/w, ,和/c,一个/m,matmul/en,(/w,)/w, ,op/en,./w, ,为了/p,真正/d,进行/v,矩阵/n,相/d,乘/v,运算/vn,,/w, ,并/c,得到/v,矩阵/n,乘法/n,的/u, ,结果/n,,/w, ,你/r,必须/d,在/p,会话/v,里/f,启动/v,这个/r,图/n,./w, ,#, ,启动/v,默认/v,图/n,./w, ,sess/en, ,=/w, ,tf/en,./w,session/en,(/w,)/w, ,#, ,调用/v, ,sess/en, ,的/u, ,'/w,run/en,(/w,)/w,'/w, ,方法/n,来/v,执行/v,矩阵/n,乘法/n, ,op/en,,/w, ,传入/v, ,'/w,product/en,'/w, ,作为/v,该/r,方法/n,的/u,参数/n,./w, ,#, ,上面/f,提到/v,,/w, ,'/w,product/en,'/w, ,代表/n,了/u,矩阵/n,乘法/n, ,op/en, ,的/u,输出/v,,/w, ,传入/v,它/r,是/v,向/p,方法/n,表明/v,,/w, ,我们/r,希望/v,取回/v, ,#, ,矩阵/n,乘法/n, ,op/en, ,的/u,输出/v,./w, ,#, ,#, ,整个/b,执行/v,过程/n,是/v,自动化/vn,的/u,,/w, ,会话/v,负责/v,传递/v, ,op/en, ,所/u,需/v,的/u,全部/m,输入/v,./w, ,op/en, ,通常/d,是/v,并发/v,执行/v,的/u,./w, ,#, ,#, ,函数/n,调用/v, ,'/w,run/en,(/w,product/en,)/w,'/w, ,触发/v,了/u,图/n,中/f,三个/m, ,op/en, ,(/w,两个/m,常量/n, ,op/en, ,和/c,一个/m,矩阵/n,乘法/n, ,op/en,)/w, ,的/u,执行/v,./w, ,#, ,#, ,返回/v,值/n, ,'/w,result/en,'/w, ,是/v,一个/m, ,numpy/en, ,`,ndarray/en,`, ,对象/n,./w, ,result/en, ,=/w, ,sess/en,./w,run/en,(/w,product/en,)/w, ,print/en, ,result/en, ,#, ,=/w,=/w,>, ,[/w,[/w, ,12/m,./w,]/w,]/w, ,#, ,任务/n,完成/v,,/w, ,关闭/v,会话/v,./w, ,sess/en,./w,close/en,(/w,)/w,在/p,实现/v,上/f,,/w, ,tensorflow/en, ,将/d,图形/n,定义/n,转换/v,成/v,分布式/b,执行/v,的/u,操作/v,,/w, ,以/p,充分/ad,利用/v,可/v,用/p,的/u,计算/v,资源/n,(/w,如/v, ,cpu/en, ,或/c, ,gpu/en,)/w,./w, ,一般/a,你/r,不/d,需要/v,显式/nw,指定/v,使用/v, ,cpu/en, ,还是/c, ,gpu/en,,/w, ,tensorflow/en, ,能/v,自动/d,检测/vn,./w, ,如果/c,检测/vn,到/v, ,gpu/en,,/w, ,tensorflow/en, ,会/v,尽可能/d,地/u,利用/v,找到/v,的/u,第一/m,个/q, ,gpu/en, ,来/v,执行/v,操作/v,0/m,x/en,3/m,:/w, ,tensortensorflow/en, ,程序/n,使用/v, ,tensor/en, ,数据/n,结构/n,来/v,代表/n,所有/b,的/u,数据/n,,/w, ,计算图/nw,中/f,,/w, ,操作间/n,传递/v,的/u,数据/n,都/d,是/v, ,tensor/en,./w, ,你/r,可以/v,把/p, ,tensorflow/en, ,tensor/en, ,看作/v,是/v,一个/m, ,n/en, ,维/q,的/u,数/m,组/q,或/c,列表/v,./w, ,一个/m, ,tensor/en, ,包含/v,一个/m,静态/n,类型/n, ,rank/en,,/w, ,和/c, ,一个/m, ,shape/en,./w,0/m,x/en,4/m,:/w, ,变量/n,变量/n,维护/v,图/n,执行/v,过程/n,中/f,的/u,状态/n,信息/n,./w, ,下面/f,的/u,例子/n,演示/vn,了/u,如何/r,使用/v,变量/n,实现/v,一个/m,简单/a,的/u,计数器/n,#, ,-/w,*/w,-/w, ,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,#, ,创建/v,一个/m,变量/n,,/w, ,初始化/v,为/p,标量/n, ,0/m,./w, ,state/en, ,=/w, ,tf/en,./w,variable/en,(/w,0/m,,/w, ,name/en,=/w,"/w,counter/en,"/w,)/w, ,#, ,创建/v,一个/m, ,op/en,,/w, ,其/r,作用/n,是/v,使/v, ,state/en, ,增加/v, ,1/m, ,one/en, ,=/w, ,tf/en,./w,constant/en,(/w,1/m,)/w, ,new/en,_,value/en, ,=/w, ,tf/en,./w,add/en,(/w,state/en,,/w, ,one/en,)/w, ,update/en, ,=/w, ,tf/en,./w,assign/en,(/w,state/en,,/w, ,new/en,_,value/en,)/w, ,#, ,启动/v,图/n,后/f,,/w, ,变量/n,必须/d,先/d,经过/p,`,初始化/v,`, ,(/w,init/en,)/w, ,op/en, ,初始化/v,,/w, ,#, ,首先/d,必须/d,增加/v,一个/m,`,初始化/v,`, ,op/en, ,到/v,图/n,中/f,./w, ,init/en,_,op/en, ,=/w, ,tf/en,./w,initialize/en,_,all/en,_,variables/en,(/w,)/w, ,#, ,启动/v,图/n,,/w, ,运行/vn, ,op/en, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,#, ,运行/vn, ,'/w,init/en,'/w, ,op/en, ,sess/en,./w,run/en,(/w,init/en,_,op/en,)/w, ,#, ,打印/v, ,'/w,state/en,'/w, ,的/u,初始值/n, ,print/en, ,sess/en,./w,run/en,(/w,state/en,)/w, ,#, ,运行/vn, ,op/en,,/w, ,更新/v, ,'/w,state/en,'/w,,/w, ,并/c,打印/v, ,'/w,state/en,'/w, ,for/en, ,_, ,in/en, ,range/en,(/w,3/m,)/w,:/w, ,sess/en,./w,run/en,(/w,update/en,)/w, ,print/en, ,sess/en,./w,run/en,(/w,state/en,)/w,代码/n,中/f, ,assign/en,(/w,)/w, ,操作/v,是/v,图/n,所/u,描绘/v,的/u,表达/v,式/k,的/u,一部分/m,,/w, ,正如/v, ,add/en,(/w,)/w, ,操作/v,一样/u,./w, ,所以/c,在/p,调用/v, ,run/en,(/w,)/w, ,执行/v,表达式/n,之前/f,,/w, ,它/r,并/c,不/d,会/v,真正/d,执行/v,赋值/v,操作/v,./w,通常/d,会/v,将/d,一个/m,统计/v,模型/n,中/f,的/u,参数/n,表示/v,为/p,一组/mq,变量/n,./w, ,例如/v,,/w, ,你/r,可以/v,将/d,一个/m,神经/n,网络/n,的/u,权重/nz,作为/v,某个/r,变量/n,存储/vn,在/p,一个/m, ,tensor/en, ,中/f,./w, ,在/p,训练/vn,过程/n,中/f,,/w, ,通过/p,重复/v,运行/vn,训练/vn,图/n,,/w, ,更新/v,这个/r, ,tensor/en,./w,0/m,x/en,5/m,:/w, ,fetch/en,为了/p,取回/v,操作/v,的/u,输出/v,内容/n,,/w, ,可以/v,在/p,使用/v, ,session/en, ,对象/n,的/u, ,run/en,(/w,)/w, ,调用/v, ,执行图/nw,时/ng,,/w, ,传入/v,一些/m, ,tensor/en,,/w, ,这些/r, ,tensor/en,会/v,帮助/v,你/r,取回/v,结果/n,./w, ,在/p,之前/f,的/u,例子/n,里/f,,/w, ,我们/r,只/d,取回/v,了/u,单个/b,节点/n, ,state/en,,/w, ,但是/c,你/r,也/d,可以/v,取回/v,多/a,个/q, ,tensor/en,:/w,#, ,-/w,*/w,-/w, ,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,#, ,启动/v,默认/v,图/n,./w, ,sess/en, ,=/w, ,tf/en,./w,session/en,(/w,)/w, ,input/en,1/m, ,=/w, ,tf/en,./w,constant/en,(/w,3.0/m,)/w, ,input/en,2/m, ,=/w, ,tf/en,./w,constant/en,(/w,2.0/m,)/w, ,input/en,3/m, ,=/w, ,tf/en,./w,constant/en,(/w,5.0/m,)/w, ,intermed/en, ,=/w, ,tf/en,./w,add/en,(/w,input/en,2/m,,/w, ,input/en,3/m,)/w, ,mul/en, ,=/w, ,tf/en,./w,multiply/en,(/w,input/en,1/m,,/w, ,intermed/en,)/w, ,with/en, ,tf/en,./w,session/en,(/w,)/w,:/w, ,result/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,mul/en,,/w, ,intermed/en,]/w,)/w, ,print/en, ,result/en,0/m,x/en,6/m,:/w, ,feed/en,上述/b,示例/n,在/p,计算图/nw,中/f,引入/v,了/u, ,tensor/en,,/w, ,以/p,常量/n,或/c,变量/n,的/u,形式/n,存储/vn,./w, ,tensorflow/en, ,还/d,提供/v,了/u, ,feed/en, ,机制/n,,/w, ,该/r,机制/n, ,可以/v,临时/b,替代/v,图/n,中/f,的/u,任意/d,操作/v,中/f,的/u, ,tensor/en, ,可以/v,对/p,图/n,中/f,任何/r,操作/v,提交/v,补丁/n,,/w, ,直接/ad,插入/v,一个/m, ,tensor/en,./w,feed/en, ,使用/v,一个/m, ,tensor/en, ,值/n,临时/b,替换/v,一个/m,操作/v,的/u,输出/v,结果/n,./w, ,你/r,可以/v,提供/v, ,feed/en, ,数据/n,作为/v, ,run/en,(/w,)/w, ,调用/v,的/u,参数/n,./w, ,feed/en, ,只/d,在/p,调用/v,它/r,的/u,方法/n,内/f,有效/a,,/w, ,方法/n,结束/v,,/w, ,feed/en, ,就/d,会/v,消失/v,./w, ,最/d,常见/a,的/u,用例/nw,是/v,将/d,某些/r,特殊/a,的/u,操作/v,指定/v,为/p, ,"/w,feed/en,"/w, ,操作/v,,/w, ,标记/n,的/u,方法/n,是/v,使用/v, ,tf/en,./w,placeholder/en,(/w,)/w, ,为/p,这些/r,操作/v,创建/v,占位/v,符/vg,./w,#, ,-/w,*/w,-/w, ,coding/en,:/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,input/en,1/m, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,types/en,./w,float/en,32/m,)/w, ,input/en,2/m, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,types/en,./w,float/en,32/m,)/w, ,output/en, ,=/w, ,tf/en,./w,multiply/en,(/w,input/en,1/m,,/w, ,input/en,2/m,)/w, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,print/en, ,sess/en,./w,run/en,(/w,[/w,output/en,]/w,)/w, ,print/en, ,sess/en,./w,run/en,(/w,[/w,output/en,]/w,,/w, ,feed/en,_,dict/en,=/w,{/w,input/en,1/m,:/w,[/w,7/m,./w,]/w,,/w, ,input/en,2/m,:/w,[/w,2/m,./w,]/w,}/w,)/w,0/m,x/en,7/m,:/w, ,batch/en,深度/n,学习/v,的/u,优化/v,算法/n,，/w,说白了/nw,就/d,是/v,梯度/n,下降/v,。/w,每次/r,的/u,参数/n,更新/v,有/v,两种/mq,方式/n,1/m,./w, ,第一/m,种/q,，/w,遍历/nw,全部/m,数据集/nw,算/v,一次/mq,损失/n,函数/n,，/w,然后/c,算/v,函数/n,对/p,各个/r,参数/n,的/u,梯度/n,，/w,更新/v,梯度/n,。/w,这种/r,方法/n,每/r,更新/v,一次/mq,参数/n,都/d,要/v,把/p,数据集/nw,里/f,的/u,所有/b,样本/n,都/d,看/v,一遍/mq,，/w,计算量/nw,开销/v,大/a,，/w,计算/v,速度/n,慢/a,，/w,不/d,支持/v,在线/vn,学习/v,，/w,这/r,称为/v,batch/en, ,gradient/en, ,descent/en,，/w,批/q,梯度/n,下降/v,。/w, ,2/m,./w, ,另/r,一种/mq,，/w,每/r,看/v,一个/m,数据/n,就算/d,一下/m,损失/n,函数/n,，/w,然后/c,求/v,梯度/n,更新/v,参数/n,，/w,这个/r,称为/v,随机/d,梯度/n,下降/v,，/w,stochastic/en, ,gradient/en, ,descent/en,。/w,这个/r,方法/n,速度/n,比较/d,快/a,，/w,但是/c,收敛/vn,性能/n,不/d,太/d,好/a,，/w,可能/v,在/p,最/d,优点/n,附近晃来晃去/nw,，/w,hit/en,不/d,到/v,最/d,优点/n,。/w,两次/mq,参数/n,的/u,更新/v,也/d,有/v,可能/v,互相/d,抵消/v,掉/v,，/w,造成/v,目标/n,函数/n,震荡/vn,的/u,比较/d,剧烈/a,为了/p,克服/v,两种/mq,方法/n,的/u,缺点/n,，/w,现在/t,一般/a,采用/v,的/u,是/v,一种/mq,折/v,中/f,手段/n,，/w,mini/en,-/w,batch/en, ,gradient/en, ,decent/en,，/w,小批/nw,的/u,梯度/n,下降/v,，/w,这种/r,方法/n,把/p,数据/n,分为/v,若干/m,个/q,批/q,，/w,按/p,批/q,来/v,更新/v,参数/n,，/w,这样/r,，/w,一个/m,批/q,中/f,的/u,一组/mq,数据/n,共同/d,决定/v,了/u,本次/r,梯度/n,的/u,方向/n,，/w,下降/v,起来/v,就/d,不/d,容易/a,跑/v,偏/d,，/w,减少/v,了/u,随机性/n,。/w,另一方面/c,因为/c,批/q,的/u,样本/n,数/m,与/p,整个/b,数据集/nw,相比/v,小/a,了/u,很多/m,，/w,计算量/nw,也/d,不/d,是/v,很/d,大/a,基本上/d,现在/t,的/u,梯度/n,下降/v,都/d,是/v,基于/p,mini/en,-/w,batch/en,的/u,，/w,模块/n,中/f,经常/d,会/v,出现/v,batch/en,_,size/en,，/w,就/d,是/v,指/v,这个/r,。/w,我们/r,在/p,代码/n,中/f,常见/a,的/u,优化器/nw,sgd/en,是/v,stochastic/en, ,gradient/en, ,descent/en,的/u,缩写/n,，/w,但/c,不/d,代表/n,是/v,一个/m,样本/n,就/d,更新/v,一回/mq,，/w,还是/c,基于/p,mini/en,-/w,batch/en,的/u,relevant/en, ,link/en,:/w,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,get/en,_,started/en,//w,os/en,_,setup/en,./w,html/en, ,http/en,:/w,//w,//w,keras/en,-/w,cn/en,./w,readthedocs/en,./w,io/en,//w,en/en,//w,latest/en,//w,getting/en,_,started/en,//w,concepts/en,//w,#,batch/en,2/m,./w, ,mnist/en,(/w,multiclass/en, ,classification/en,)/w,入门/v,0/m,x/en,1/m,:/w, ,mnist/en,数据集/nw,https/en,:/w,//w,//w,tensorflow/en,./w,googlesource/en,./w,com/en,//w,tensorflow/en,//w,+/w,//w,master/en,//w,tensorflow/en,//w,examples/en,//w,tutorials/en,//w,mnist/en,//w,input/en,_,data/en,./w,py/en,#,下载/v,下来/v,的/u,数据集/nw,被/p,分/q,成/v,两/m,部分/n,：/w,60000行/mq,的/u,训练/vn,数据集/nw,（/w,mnist/en,./w,train/en,）/w,和/c,10000行/mq,的/u,测试/vn,数据集/nw,（/w,mnist/en,./w,test/en,）/w,。/w,这样/r,的/u,切分/v,很/d,重要/a,，/w,在/p,机器/n,学习/v,模型/n,设计/vn,时/ng,必须/d,有/v,一个/m,单独/d,的/u,测试/vn,数据集/nw,不/d,用于/v,训练/vn,而是/c,用/p,来/v,评估/vn,这个/r,模型/n,的/u,性能/n,，/w,从而/c,更加/d,容易/a,把/p,设计/vn,的/u,模型/n,推广/v,到/v,其他/r,数据集/nw,上/f,（/w,泛化/nw,）/w,。/w,正如/v,前面/f,提到/v,的/u,一样/u,，/w,每/r,一个/m,mnist/en,数据/n,单元/n,有/v,两/m,部分/n,组成/v,：/w,一张/mq,包含/v,手写/v,数字/n,的/u,图片/n,和/c,一个/m,对应/v,的/u,标签/n,(/w,监督/vn,学习/v,中/f,，/w,正确/a,打标/nw,的/u,样本/n,特别/d,重要/a,)/w,。/w,我们/r,把/p,这些/r,图片/n,设/v,为/p,“/w,xs/en,”/w,，/w,把/p,这些/r,标签/n,设/v,为/p,“/w,ys/en,”/w,。/w,训练/vn,数据集/nw,和/c,测试/vn,数据集/nw,都/d,包含/v,xs/en,和/c,ys/en,，/w,比如/v,训练/vn,数据集/nw,的/u,图片/n,是/v, ,mnist/en,./w,train/en,./w,images/en, ,，/w,训练/vn,数据集/nw,的/u,标签/n,是/v, ,mnist/en,./w,train/en,./w,labels/en,。/w,每/r,一张/mq,图片/n,包含/v,28/m,像素/n,x/en,28/m,像素/n,。/w,我们/r,可以/v,用/p,一个/m,数字/n,数/m,组/q,来/v,表示/v,这/r,张/q,图片/n,：/w,我们/r,把/p,这个/r,数组/n,展开/v,成/v,一个/m,向量/n,，/w,长度/n,是/v, ,28/m,x/en,28/m, ,=/w, ,784/m,。/w,如何/r,展开/v,这个/r,数组/n,（/w,数字/n,间/f,的/u,顺序/n,）/w,不/d,重要/a,，/w,只要/c,保持/v,各个/r,图片/n,采用/v,相同/a,的/u,方式/n,展开/v,。/w,从/p,这个/r,角度/n,来看/v,，/w,mnist/en,数据集/nw,的/u,图片/n,就是/d,在/p,784维/mq,向量/n,空间/n,里面/f,的/u,点/q,,/w, ,并且/c,拥有/v,比较/d,复杂/a,的/u,结构/n, ,(/w,提醒/v,:/w, ,此类/r,数据/n,的/u,可视化/nz,是/v,计算/v,密集型/b,的/u,)/w,。/w,展平/nr,图片/n,的/u,数字/n,数/m,组会/nw,丢失/v,图片/n,的/u,二维/nr,结构/n,信息/n,。/w,这/r,显然/ad,是/v,不/d,理想/n,的/u,，/w,最/d,优秀/a,的/u,计算机/n,视觉/n,方法会/nw,挖掘/v,并/c,利用/v,这些/r,结构/n,信息/n,，/w,但/c,在/p,当前/t,锁/v,学习/v,的/u,简单/a,数学/n,模型/n,，/w,softmax/en,回归/v,(/w,softmax/en, ,regression/en,)/w,，/w,不/d,会/v,利用/v,这些/r,结构/n,信息/n,。/w,因此/c,，/w,在/p,mnist/en,训练/vn,数据/n,集中/v,，/w,mnist/en,./w,train/en,./w,images/en, ,是/v,一个/m,形状/n,为/p, ,[/w,60000/m,,/w, ,784/m,]/w, ,的/u,张量/nr,，/w,第一/m,个/q,维度/n,数字/n,用/p,来/v,索引/n,图片/n,，/w,第二/m,个/q,维度/n,数字/n,用/p,来/v,索引/n,每张/r,图片/n,中/f,的/u,像素/n,点/q,。/w,在/p,此/r,张量/nr,里/f,的/u,每/r,一个/m,元素/n,，/w,都/d,表示/v,某/r,张/q,图片/n,里/f,的/u,某个/r,像素/n,的/u,强度/n,值/n,，/w,值介/nw,于/p,0/m,和/c,1/m,之间/f,(/w,黑白/b,图片/n,)/w,。/w,相/d,对应/v,的/u,mnist/en,数据集/nw,的/u,标签/n,是/v,介于/v,0/m,到/v,9/m,的/u,数字/n,，/w,用/p,来/v,描述/v,给/p,定/v,图片/n,里/f,表示/v,的/u,数字/n,。/w,为了/p,用于/v,这个/r,教程/n,，/w,我们/r,使/v,标签/n,数据/n,是/v,"/w,one/en,-/w,hot/en, ,vectors/en,"/w,。/w, ,一个/m,one/en,-/w,hot/en,向量/n,除了/p,某/r,一位/mq,的/u,数字/n,是/v,1/m,以外/f,其余/r,各/r,维度/n,数字/n,都/d,是/v,0/m,。/w,所以/c,在/p,此/r,教程/n,中/f,，/w,数字/n,n/en,将/d,表示/v,成/v,一个/m,只有/c,在/p,第/m,n/en,维度/n,（/w,从/p,0/m,开始/v,）/w,数字/n,为/p,1/m,的/u,10/m,维向量/nw,。/w,比如/v,，/w,标签/n,0/m,将/d,表示/v,成/v,(/w,[/w,1/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,]/w,)/w,。/w,因此/c,，/w, ,mnist/en,./w,train/en,./w,labels/en, ,是/v,一个/m, ,[/w,60000/m,,/w, ,10/m,]/w, ,的/u,数字/n,矩阵/n,。/w,0/m,x/en,2/m,:/w, ,softmax/en,回归/v,我们/r,知道/v,mnist/en,的/u,每/r,一张/mq,图片/n,都/d,表示/v,一个/m,数字/n,，/w,从/p,0/m,到/v,9/m,。/w,我们/r,希望/v,得到/v,给/p,定/v,图片/n,代表/n,每个/r,数字/n,的/u,概率/n,。/w,比如说/l,，/w,我们/r,的/u,模型/n,可能/v,推测/v,一张/mq,包含/v,9/m,的/u,图片/n,代表/n,数字/n,9/m,的/u,概率/n,是/v,80%/mq,但是/c,判断/v,它/r,是/v,8/m,的/u,概率/n,是/v,5%/mq,（/w,因为/c,8/m,和/c,9/m,都/d,有/v,上/f,半/m,部分/n,的/u,小圆/nw,）/w,，/w,然后/c,给予/v,它/r,代表/n,其他/r,数字/n,的/u,概率/n,更/d,小/a,的/u,值/n,。/w,这/r,是/v,一个/m,使用/v,softmax/en,回归/v,（/w,softmax/en, ,regression/en,）/w,模型/n,的/u,经典/n,案例/n,。/w,softmax/en,模型/n,可以/v,用/p,来/v,给/p,不同/a,的/u,对象/n,分配/vn,概率/n,。/w,即使/c,在/p,之后/f,，/w,我们/r,训练/vn,更加/d,精细/a,的/u,模型/n,时/ng,，/w,最后/f,一步/mq,也/d,需要/v,用/p,softmax/en,来/v,分配/vn,概率/n,。/w,softmax/en,回归/v,（/w,softmax/en, ,regression/en,）/w,分/q,两步/mq,1/m,./w, ,第一/m,步/q,为了/p,得到/v,一张/mq,给/p,定/v,图片/n,属于/v,某个/r,特定/b,数字/n,类/q,的/u,证据/n,（/w,evidence/en,）/w,，/w,我们/r,对/p,图片/n,像/v,素值/nr,进行/v,加权/v,求和/vn,。/w,如果/c,这个/r,像素/n,具有/v,很/d,强/a,的/u,证据/n,说明/v,这/r,张/q,图片/n,不/d,属于/v,该类/r,，/w,那么/r,相应/v,的/u,权值/nw,为/p,负数/n,，/w,相反/v,如果/c,这个/r,像素/n,拥有/v,有利/a,的/u,证据/n,支持/v,这/r,张/q,图片/n,属于/v,这个/r,类/q,，/w,那么/r,权值/nw,是/v,正数/v,。/w,下面/f,的/u,图片/n,显示/v,了/u,一个/m,模型/n,学习/v,到/v,的/u,图片/n,上/f,每个/r,像素/n,对于/p,特定/b,数字/n,类/q,的/u,权值/nw,。/w,红色/n,代表/n,负数/n,权值/nw,，/w,蓝色/n,代表/n,正数/v,权值/nw,。/w,我们/r,也/d,需要/v,加入/v,一个/m,额外/b,的/u,偏置量/nw,（/w,bias/en,）/w,，/w,因为/c,输入/v,往往/d,会/v,带有/v,一些/m,无关/v,的/u,干扰量/nw,。/w,因此/c,对于/p,给/p,定/v,的/u,输入/v,图片/n, ,x/en, ,它/r,代表/n,的/u,是/v,数字/n, ,i/en, ,的/u,证据/n,可以/v,表示/v,为/p,其中/r, , ,代表权/n,重/a,，/w, ,代表/n,数字/n, ,i/en, ,类/q,的/u,偏置量/nw,，/w,j/en, ,代表/n,给/p,定/v,图片/n, ,x/en, ,的/u,像素/n,索引/n,用于/v,像素/n,求和/vn,。/w,然后/c,用/p,softmax/en,函数/n,可以/v,把/p,这些/r,证据/n,转换/v,成/v,概率/n, ,y/en,：/w,这里/r,的/u,softmax/en,可以/v,看成/v,是/v,一个/m,激励/v,（/w,activation/en,）/w,函数/n,或者/c,链接/n,（/w,link/en,）/w,函数/n,，/w,把/p,我们/r,定义/n,的/u,线性/n,函数/n,的/u,输出/v,转换/v,成/v,我们/r,想/v,要/v,的/u,格式/n,，/w,也/d,就/d,是/v,关于/p,10个/m,数字/n,类/q,的/u,概率/n,分布/v,。/w,因此/c,，/w,给/p,定/v,一张/mq,图片/n,，/w,它/r,对于/p,每/r,一个/m,数字/n,的/u,吻合度/nw,可以/v,被/p,softmax/en,函数/n,转换/v,成为/v,一个/m,概率/n,值/n,。/w,softmax/en,函数/n,可以/v,定义/n,为/p,展开/v,等/u,式/k,右边/f,的/u,子式/nw,，/w,可以/v,得到/v,：/w,但是/c,更/d,多/a,的/u,时候/n,把/p,softmax/en,模型/n,函数/n,定义/n,为/p,前/f,一种/mq,形式/n,：/w,把/p,输入值/nw,当成/v,幂/n,指数/n,求值/nw,，/w,再/d,正则化/nw,这些/r,结果/n,值/n,。/w,这个/r,幂/n,运算/vn,表示/v,，/w,更/d,大/a,的/u,证据/n,对应/v,更/d,大/a,的/u,假设/v,模型/n,（/w,hypothesis/en,）/w,里面/f,的/u,乘/v,数/m,权重/nz,值/n,。/w,反之/c,，/w,拥有/v,更/d,少/a,的/u,证据/n,意味/n,着/u,在/p,假设/v,模型/n,里面/f,拥有/v,更/d,小/a,的/u,乘数/n,系数/n,。/w,假设/v,模型/n,里/f,的/u,权值/nw,不/d,可以/v,是/v,0/m,值/n,或者/c,负值/n,。/w,softmax/en,然后/c,会/v,正则化/nw,这些/r,权重/nz,值/n,，/w,使/v,它们/r,的/u,总和/n,等于/v,1/m,，/w,以此/d,构造/v,一个/m,有效/a,的/u,概率/n,分布/v,。/w,对于/p,softmax/en,回归/v,模型/n,可以/v,用/p,下面/f,的/u,图/n,解释/v,，/w,对于/p,输入/v,的/u,xs/en,加权/v,求和/vn,，/w,再/d,分别/d,加上/v,一个/m,偏置量/nw,，/w,最后/f,再/d,输入/v,到/v,softmax/en,函数/n,中/f,：/w,如果/c,把/p,它/r,写/v,成/v,一个/m,等式/n,，/w,我们/r,可以/v,得到/v,：/w,我们/r,也/d,可以/v,用/p,向量/n,表示/v,这个/r,计算/v,过程/n,：/w,用/p,矩阵/n,乘法/n,和/c,向量/n,相加/v,。/w,这/r,有助于/v,提高/v,计算/v,效率/n,。/w,（/w,也/d,是/v,一种/mq,更/d,有效/a,的/u,思考/v,方式/n,）/w,更进一步/l,，/w,可以/v,写/v,成/v,更加/d,紧凑/a,的/u,方式/n,验证/vn,码/v,识别/v,体现/v,了/u,模式/n,识别/v,的/u,一个/m,很/d,朴素/a,的/u,思想/n,，/w,就/d,是/v,人/n,的/u,认字/v,过程/n,是/v,经历/n,了/u,一个/m,"/w,学习/v,过程/n,"/w,，/w,在/p,看/v,过/u,了/u,很多/m,人/n,、/w,各种/r,写法/n,、/w,各种/r,字体/n,的/u,字/n,后/f,，/w,人脑/n,中/f,对/p,某个/r,字/n,应该/v,"/w,长/a,的/u,样子/n,"/w,形成/v,了/u,一个/m,权重/nz,认知/vn,模型/n,，/w,不管/c,怎么/r,潦草/a,，/w,只要/c,基本/a,形态/n,在/p,那里/r,，/w,人/n,就/d,能/v,认/v,出来/v,。/w,把/p,这个/r,认知/vn,过程/n,抽象/a,为/p,数学/n,概念/n,，/w,本质/n,上/f,就/d,是/v,特定/b,像素/n,区域/n,给/p,与/p,较/d,高/a,的/u,权重/nz,，/w,根据/p,像/v,素权/nr,重/a,划分/v,出/v,区域/n,，/w,只要/c,大体/d,在/p,这个/r,区域/n,中/f,，/w,就/d,应该/v,有/v,更/d,大/a,的/u,概率/n,是/v,这个/r,字/n,0/m,x/en,3/m,:/w, ,实现/v,回归/v,模型/n,y/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,tf/en,./w,matmul/en,(/w,x/en,,/w,w/en,)/w, ,+/w, ,b/en,)/w,tensorflow/en,不仅仅/d,可以/v,使/v,softmax/en,回归/v,模型/n,计算/v,变/v,得/u,特别/d,简单/a,，/w,它/r,也/d,用/p,这种/r,非常/d,灵活/a,的/u,方式/n,来/v,描述/v,其他/r,各种/r,数值/n,计算/v,，/w,从/p,机器/n,学习/v,模型/n,对/p,物理学/n,模拟/b,仿真/vn,模型/n,。/w,一旦/d,被/p,定义/n,好/a,之后/f,，/w,我们/r,的/u,模型/n,就/d,可以/v,在/p,不同/a,的/u,设备/n,上/f,运行/vn,：/w,计算机/n,的/u,cpu/en,，/w,gpu/en,，/w,甚至/d,是/v,手机/n,0/m,x/en,4/m,:/w, ,训练/vn,模型/n,为了/p,训练/vn,我们/r,的/u,模型/n,，/w,我们/r,首先/d,需要/v,定义/n,一个/m,指标/n,来/v,评估/vn,这个/r,模型/n,是/v,好/a,的/u,。/w,其实/d,，/w,在/p,机器/n,学习/v,，/w,我们/r,通常/d,定义/n,指标/n,来/v,表示/v,一个/m,模型/n,是/v,坏/a,的/u,，/w,这个/r,指标/n,称为/v,成本/n,（/w,cost/en,）/w,或/c,损失/n,（/w,loss/en,）/w,，/w,然后/c,尽量/d,最小化/nw,这个/r,指标/n,。/w,但是/c,，/w,这/r,两种/mq,方式/n,是/v,相同/a,的/u,。/w,一个/m,非常/d,常见/a,的/u,，/w,非常/d,漂亮/a,的/u,成本/n,函数/n,是/v,“/w,交叉/vn,熵/g,”/w,（/w,cross/en,-/w,entropy/en,）/w,。/w,交叉/vn,熵/g,产生/v,于/p,信息论/n,里面/f,的/u,信息/n,压缩/v,编码/n,技术/n,，/w,但是/c,它/r,后来/t,演变/v,成为/v,从/p,博弈论/n,到/v,机器/n,学习/v,等/u,其他/r,领域/n,里/f,的/u,重要/a,技术/n,手段/n,。/w,它/r,的/u,定义/n,如下/v,：/w,y/en, ,是/v,我们/r,预测/v,的/u,概率/n,分布/v,,/w, ,y/en,'/w, ,是/v,实际/n,的/u,分布/v,（/w,我们/r,输入/v,的/u,one/en,-/w,hot/en, ,vector/en,)/w,。/w,比较/d,粗糙/a,的/u,理解/v,是/v,，/w,交叉/vn,熵/g,是/v,用/p,来/v,衡量/v,我们/r,的/u,预测/v,用于/v,描述/v,真相/n,的/u,低效性/nw,。/w,即/v,如果/c,我们/r,的/u,描述/v,越/d,不/d,准确/a,，/w,则/d,不确定性/nw,就/d,越/d,高/a,，/w,熵值/nw,就/d,越/d,大/a,tensorflow/en,拥有/v,一张/mq,描述/v,你/r,各个/r,计算/v,单元/n,的/u,图/n,，/w,它/r,可以/v,自动/d,地/u,使用/v,反向/f,传播/vn,算法/n,(/w,backpropagation/en, ,algorithm/en,)/w,来/v,有效/a,地/u,确定/v,你/r,的/u,变量/n,是/v,如何/r,影响/vn,你/r,想/v,要/v,最小化/nw,的/u,那个/r,成本/n,值/n,的/u,。/w,然后/c,，/w,tensorflow/en,会/v,用/p,你/r,选择/v,的/u,优化/v,算法/n,来/v,不断/d,地/u,修改/v,变量/n,以/p,降低/v,成本/n,。/w, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,0.01/m,)/w,./w,minimize/en,(/w,cross/en,_,entropy/en,)/w,在/p,这里/r,，/w,我们/r,要求/v,tensorflow/en,用/p,梯度/n,下降/v,算法/n,（/w,gradient/en, ,descent/en, ,algorithm/en,）/w,以/p,0.01/m,的/u,学习/v,速率/n,最小化/nw,交叉/vn,熵/g,。/w,梯度/n,下降/v,算法/n,（/w,gradient/en, ,descent/en, ,algorithm/en,）/w,是/v,一个/m,简单/a,的/u,学习/v,过程/n,，/w,tensorflow/en,只/d,需/v,将/d,每个/r,变量/n,一点点/nw,地/u,往/p,使/v,成本/n,不断/d,降低/v,的/u,方向/n,移动/vn,tensorflow/en,在/p,这里/r,实际上/d,所/u,做/v,的/u,是/v,，/w,它/r,会/v,在/p,后台/n,给/p,描述/v,你/r,的/u,计算/v,的/u,那/r,张/q,图/n,里面/f,增加/v,一系列/mq,新/a,的/u,计算/v,操作/v,单元/n,用于/v,实现/v,反向/f,传播/vn,算法/n,和/c,梯度/n,下降/v,算法/n,。/w,然后/c,，/w,它/r,返回/v,给/p,你/r,的/u,只是/d,一个/m,单一/a,的/u,操作/v,，/w,当/p,运行/vn,这个/r,操作/v,时/ng,，/w,它/r,用/p,梯度/n,下降/v,算法/n,训练/vn,你/r,的/u,模型/n,，/w,微调/v,你/r,的/u,变量/n,，/w,不断/d,减少/v,成本/n,。/w,0/m,x/en,5/m,:/w, ,评估/vn,我们/r,的/u,模型/n,首先/d,让/v,我们/r,找/v,出/v,那些/r,预测/v,正确/a,的/u,标签/n,。/w,tf/en,./w,argmax/en, ,是/v,一个/m,非常/d,有用/a,的/u,函数/n,，/w,它/r,能/v,给/p,出/v,某个/r,tensor/en,对象/n,在/p,某/r,一/m,维上/nr,的/u,其/r,数据/n,(/w,softmax/en,预测/v,出/v,了/u,一个/m,类似/v,[/w,1/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,]/w,矩阵/n,，/w,对应/v,为/p,1/m,的/u,那个/r,就/d,是/v,它/r,预测/v,出/v,的/u,最/d,大/a,概率/n,的/u,数字/n,)/w,最大值/nz,所在/n,的/u,索引/n,值/n,(/w,对应/v,的/u,数字/n,)/w,。/w,由于/c,标签/n,向/p,量/n,是/v,由/p,0/m,,/w,1/m,组成/v,，/w,因此/c,最大值/nz,1/m,所在/n,的/u,索引/n,位置/n,就/d,是/v,类别/n,标签/n,，/w,比如/v,tf/en,./w,argmax/en,(/w,y/en,,/w,1/m,)/w,返回/v,的/u,是/v,模型/n,对于/p,任/v,一/m,输入/v,x/en,预测/v,到/v,的/u,标签/n,值/n,，/w,而/c, ,tf/en,./w,argmax/en,(/w,y/en,_,,/w,1/m,)/w, ,代表/n,正确/a,的/u,标签/n,，/w,我们/r,可以/v,用/p, ,tf/en,./w,equal/en, ,来/v,检测/vn,我们/r,的/u,预测/v,是否/v,真实/a,标签/n,匹配/vn,(/w,索引/n,位置/n,一样/u,表示/v,匹配/vn,)/w,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,,/w,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,y/en,_,,/w,1/m,)/w,)/w,这行/r,代码/n,会/v,给/p,我们/r,一组/mq,布尔值/nr,。/w,为了/p,确定/v,正确/a,预测/v,项/q,的/u,比例/n,，/w,我们/r,可以/v,把/p,布尔值/nr,转换/v,成/v,浮/v,点数/n,，/w,然后/c,取/v,平均值/n,。/w,例如/v,，/w,[/w,true/en,,/w, ,false/en,,/w, ,true/en,,/w, ,true/en,]/w, ,会/v,变成/v, ,[/w,1/m,,/w,0/m,,/w,1/m,,/w,1/m,]/w, ,，/w,取/v,平均值/n,后/f,得到/v, ,0/m,./w,75/m,./w,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,"/w,float/en,"/w,)/w,)/w,最后/f,，/w,我们/r,计算所/n,学习/v,到/v,的/u,模型/n,在/p,测试/vn,数据集/nw,上面/f,的/u,正确率/n,。/w,print/en, ,sess/en,./w,run/en,(/w,accuracy/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,_,:/w, ,mnist/en,./w,test/en,./w,labels/en,}/w,)/w,0/m,x/en,6/m,:/w, ,mnist/en,_,softmax/en,./w,py/en,#, ,copyright/en, ,2015/m, ,the/en, ,tensorflow/en, ,authors/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,a/en, ,very/en, ,simple/en, ,mnist/en, ,classifier/en,./w, ,see/en, ,extensive/en, ,documentation/en, ,at/en, ,http/en,:/w,//w,//w,tensorflow/en,./w,org/en,//w,tutorials/en,//w,mnist/en,//w,beginners/en,//w,index/en,./w,md/en, ,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,argparse/en, ,import/en, ,sys/en, ,import/en, ,input/en,_,data/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,flags/en, ,=/w, ,none/en, ,def/en, ,main/en,(/w,_,)/w,:/w, ,#, ,import/en, ,data/en, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,"/w,mnist/en,_,data/en,//w,"/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,#, ,create/en, ,the/en, ,model/en, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,784/m,]/w,)/w, ,w/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,784/m,,/w, ,10/m,]/w,)/w,)/w, ,b/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,]/w,)/w,)/w, ,y/en, ,=/w, ,tf/en,./w,matmul/en,(/w,x/en,,/w, ,w/en,)/w, ,+/w, ,b/en, ,#, ,define/en, ,loss/en, ,and/en, ,optimizer/en, ,y/en,_, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,10/m,]/w,)/w, ,#, ,the/en, ,raw/en, ,formulation/en, ,of/en, ,cross/en,-/w,entropy/en,,/w, ,#, ,#, ,tf/en,./w,reduce/en,_,mean/en,(/w,-/w,tf/en,./w,reduce/en,_,sum/en,(/w,y/en,_, ,*/w, ,tf/en,./w,log/en,(/w,tf/en,./w,nn/en,./w,softmax/en,(/w,y/en,)/w,)/w,,/w, ,#, ,reduction/en,_,indices/en,=/w,[/w,1/m,]/w,)/w,)/w, ,#, ,#, ,can/en, ,be/en, ,numerically/en, ,unstable/en,./w, ,#, ,#, ,so/en, ,here/en, ,we/en, ,use/en, ,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en, ,on/en, ,the/en, ,raw/en, ,#, ,outputs/en, ,of/en, ,'/w,y/en,'/w,,/w, ,and/en, ,then/en, ,average/en, ,across/en, ,the/en, ,batch/en,./w, ,cross/en,_,entropy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w, ,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,labels/en,=/w,y/en,_,,/w, ,logits/en,=/w,y/en,)/w,)/w, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,0.5/m,)/w,./w,minimize/en,(/w,cross/en,_,entropy/en,)/w, ,sess/en, ,=/w, ,tf/en,./w,interactivesession/en,(/w,)/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w,./w,run/en,(/w,)/w, ,#, ,train/en, ,for/en, ,_, ,in/en, ,range/en,(/w,1000/m,)/w,:/w, ,batch/en,_,xs/en,,/w, ,batch/en,_,ys/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,100/m,)/w, ,sess/en,./w,run/en,(/w,train/en,_,step/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,batch/en,_,xs/en,,/w, ,y/en,_,:/w, ,batch/en,_,ys/en,}/w,)/w, ,#, ,test/en, ,trained/en, ,model/en, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,,/w, ,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,y/en,_,,/w, ,1/m,)/w,)/w, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,tf/en,./w,float/en,32/m,)/w,)/w, ,print/en,(/w,sess/en,./w,run/en,(/w,accuracy/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,_,:/w, ,mnist/en,./w,test/en,./w,labels/en,}/w,)/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,parser/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,parser/en,./w,add/en,_,argument/en,(/w,'/w,--/nrf,data/en,_,dir/en,'/w,,/w, ,type/en,=/w,str/en,,/w, ,default/en,=/w,'/w,mnist/en,_,data/en,//w,'/w,,/w, ,help/en,=/w,'/w,directory/en, ,for/en, ,storing/en, ,input/en, ,data/en,'/w,)/w, ,flags/en,,/w, ,unparsed/en, ,=/w, ,parser/en,./w,parse/en,_,known/en,_,args/en,(/w,)/w, ,tf/en,./w,app/en,./w,run/en,(/w,main/en,=/w,main/en,,/w, ,argv/en,=/w,[/w,sys/en,./w,argv/en,[/w,0/m,]/w,]/w, ,+/w, ,unparsed/en,)/w,relevant/en, ,link/en,:/w,http/en,:/w,//w,//w,yann/en,./w,lecun/en,./w,com/en,//w,exdb/en,//w,mnist/en,//w, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,tensorflow/en,//w,tensorflow/en,//w,tree/en,//w,master/en,//w,tensorflow/en,//w,examples/en,//w,tutorials/en,//w,mnist/en, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,aymericdamien/en,//w,tensorflow/en,-/w,examples/en,//w,tree/en,//w,master/en,//w,examples/en, ,https/en,:/w,//w,//w,www/en,./w,tensorflow/en,./w,org/en,//w,get/en,_,started/en,//w,mnist/en,//w,pros/en, ,https/en,:/w,//w,//w,www/en,./w,tensorflow/en,./w,org/en,//w,get/en,_,started/en,//w,mnist/en,//w,beginners/en,3/m,./w, ,深入/v,mnist/en,0/m,x/en,1/m,:/w, ,构建/v,一个/m,多/a,层/q,卷积/nw,网络/n,(/w,多/a,层/q,深度/n,神经/n,网络/n,)/w,1/m,./w, ,权重/nz,初始化/v,为了/p,创建/v,这个/r,模型/n,，/w,我们/r,需要/v,创建/v,大量/m,的/u,权重/nz,和/c,偏置/nw,项/q,。/w,这个/r,模型/n,中/f,的/u,权重/nz,在/p,初始化/v,时/ng,应该/v,加入/v,少量/m,的/u,噪声/n,来/v,打破/v,对称性/n,以及/c,避免/v,0/m,梯度/n,。/w,由于/c,我们/r,使用/v,的/u,是/v,relu/en,神经元/n,，/w,因此/c,比较/d,好/a,的/u,做法/n,是/v,用/p,一个/m,较/d,小/a,的/u,正数/v,来/v,初始化/v,偏置/nw,项/q,，/w,以/p,避免/v,神经元/n,节点/n,输出/v,恒/ag,为/p,0/m,的/u,问题/n,（/w,dead/en, ,neurons/en,）/w,。/w,为了/p,不/d,在/p,建立/v,模型/n,的/u,时候/n,反复/d,做/v,初始化/v,操作/v,，/w,我们/r,定义/n,两个/m,函数/n,用于/v,初始化/v,def/en, ,weight/en,_,variable/en,(/w,shape/en,)/w,:/w, ,initial/en, ,=/w, ,tf/en,./w,truncated/en,_,normal/en,(/w,shape/en,,/w, ,stddev/en,=/w,0.1/m,)/w, ,return/en, ,tf/en,./w,variable/en,(/w,initial/en,)/w, ,def/en, ,bias/en,_,variable/en,(/w,shape/en,)/w,:/w, ,initial/en, ,=/w, ,tf/en,./w,constant/en,(/w,0.1/m,,/w, ,shape/en,=/w,shape/en,)/w, ,return/en, ,tf/en,./w,variable/en,(/w,initial/en,)/w,2/m,./w, ,卷积/nw,和/c,池化/nr,(/w,将/d,低维/nw,特征/n,扩展/v,到/v,高维/nr,空间/n,)/w,tensorflow/en,在/p,卷积/nw,和/c,池化/nr,上/f,有/v,很/d,强/a,的/u,灵活性/n,。/w,我们/r,怎么/r,处理/v,边界/n,？/w,步长/nz,应该/v,设/v,多/a,大/a,？/w,在/p,这个/r,实例/n,里/f,，/w,我们/r,会/v,一直/d,使用/v,vanilla/en,版本/n,。/w,我们/r,的/u,卷积/nw,使用/v,1/m,步长/nz,（/w,stride/en, ,size/en,）/w,，/w,0/m,边/d,距/p,（/w,padding/en, ,size/en,）/w,的/u,模板/n,，/w,保证/v,输出/v,和/c,输入/v,是/v,同一/b,个/q,大小/n,。/w,我们/r,的/u,池化/nr,用/p,简单/a,传统/n,的/u,2/m,x/en,2/m,大小/n,的/u,模板/n,做/v,max/en, ,pooling/en,。/w,为了/p,代码/n,更/d,简洁/a,，/w,我们/r,把/p,这/r,部分/n,抽象/a,成/v,一个/m,函数/n,。/w,def/en, ,conv/en,2/m,d/en,(/w,x/en,,/w, ,w/en,)/w,:/w, ,return/en, ,tf/en,./w,nn/en,./w,conv/en,2/m,d/en,(/w,x/en,,/w, ,w/en,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,1/m,,/w, ,1/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w, ,def/en, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,x/en,)/w,:/w, ,return/en, ,tf/en,./w,nn/en,./w,max/en,_,pool/en,(/w,x/en,,/w, ,ksize/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w,3/m,./w, ,第一/m,层/q,卷积/nw,现在/t,我们/r,可以/v,开始/v,实现/v,第一/m,层/q,了/u,。/w,它/r,由/p,一个/m,卷积/nw,接/v,一个/m,max/en, ,pooling/en,完成/v,。/w,卷积/nw,在/p,每个/r,5/m,x/en,5/m,的/u,patch/en,中/f,算/v,出/v,32个/m,特征/n,。/w,卷积/nw,的/u,权重/nz,张量/nr,形状/n,是/v,[/w,5/m,,/w, ,5/m,,/w, ,1/m,,/w, ,32/m,]/w,，/w,前/f,两个/m,维度/n,是/v,patch/en,的/u,大小/n,，/w,接着/c,是/v,输入/v,的/u,通道/n,数目/n,，/w,最后/f,是/v,输出/v,的/u,通道/n,数目/n,。/w, ,而/c,对于/p,每/r,一个/m,输出/v,通道/n,都/d,有/v,一个/m,对应/v,的/u,偏置量/nw,。/w,w/en,_,conv/en,1/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,5/m,,/w, ,5/m,,/w, ,1/m,,/w, ,32/m,]/w,)/w, ,b/en,_,conv/en,1/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,32/m,]/w,)/w,为了/p,用/p,这/r,一层/mq,，/w,我们/r,把/p,x/en,变成/v,一个/m,4/m,d/en,向量/n,，/w,其/r,第/m,2/m,、/w,第/m,3维/mq,对应/v,图片/n,的/u,宽/a,、/w,高/a,，/w,最后/f,一维/mq,代表/n,图片/n,的/u,颜色/n,通道/n,数/m,(/w,因为/c,是/v,灰度/n,图/n,所以/c,这里/r,的/u,通道/n,数/m,为/p,1/m,，/w,如果/c,是/v,rgb/en,彩色/b,图/n,，/w,则/d,为/p,3/m,)/w,x/en,_,image/en, ,=/w, ,tf/en,./w,reshape/en,(/w,x/en,,/w, ,[/w,-/w,1/m,,/w,28/m,,/w,28/m,,/w,1/m,]/w,)/w,we/en, ,then/en, ,convolve/en, ,x/en,_,image/en, ,with/en, ,the/en, ,weight/en, ,tensor/en,,/w, ,add/en, ,the/en, ,bias/en,,/w, ,apply/en, ,the/en, ,relu/en, ,function/en,,/w, ,and/en, ,finally/en, ,max/en, ,pool/en,./w, ,我们/r,把/p,x/en,_,image/en,和/c,权值/nw,向量/n,进行/v,卷积/nw,，/w,加上/v,偏置/nw,项/q,，/w,然后/c,应用/vn,relu/en,激活/vn,函数/n,，/w,最后/f,进行/v,max/en, ,pooling/en,。/w,h/en,_,conv/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,conv/en,2/m,d/en,(/w,x/en,_,image/en,,/w, ,w/en,_,conv/en,1/m,)/w, ,+/w, ,b/en,_,conv/en,1/m,)/w, ,h/en,_,pool/en,1/m, ,=/w, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,h/en,_,conv/en,1/m,)/w,4/m,./w, ,第二/m,层/q,卷积/nw,为了/p,构建/v,一个/m,更/d,深/a,的/u,网络/n,，/w,我们/r,会/v,把/p,几/m,个/q,类似/v,的/u,层/q,堆/q,叠/v,起来/v,。/w,第二/m,层/q,中/f,，/w,每个/r,5/m,x/en,5/m,的/u,patch/en,会/v,得到/v,64个/m,特征/n,(/w,上/f,一层/mq,的/u,输出/v,是/v,32个/m,特征/n,，/w,作为/v,下/f,一层/mq,的/u,输入/v,)/w,w/en,_,conv/en,2/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,5/m,,/w, ,5/m,,/w, ,32/m,,/w, ,64/m,]/w,)/w, ,b/en,_,conv/en,2/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,64/m,]/w,)/w, ,h/en,_,conv/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,conv/en,2/m,d/en,(/w,h/en,_,pool/en,1/m,,/w, ,w/en,_,conv/en,2/m,)/w, ,+/w, ,b/en,_,conv/en,2/m,)/w, ,h/en,_,pool/en,2/m, ,=/w, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,h/en,_,conv/en,2/m,)/w,5/m,./w, ,密集/a,连接/v,层/q,现在/t,，/w,图片/n,尺寸/n,减小/v,到/v,7/m,x/en,7/m,，/w,我们/r,加入/v,一个/m,有/v,1024个/m,神经元/n,的/u,全/a,连接/v,层/q,，/w,用于/v,处理/v,整个/b,图片/n,。/w,我们/r,把/p,池化/nr,层/q,输出/v,的/u,张量/nr,reshape/en,成/v,一些/m,向量/n,，/w,乘/v,上/f,权/n,重/a,矩阵/n,，/w,加上/v,偏置/nw,，/w,然后/c,对/p,其/r,使用/v,reluw/en,_,fc/en,1/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,7/m, ,*/w, ,7/m, ,*/w, ,64/m,,/w, ,1024/m,]/w,)/w, ,b/en,_,fc/en,1/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,1024/m,]/w,)/w, ,h/en,_,pool/en,2/m,_,flat/en, ,=/w, ,tf/en,./w,reshape/en,(/w,h/en,_,pool/en,2/m,,/w, ,[/w,-/w,1/m,,/w, ,7/m,*/w,7/m,*/w,64/m,]/w,)/w, ,h/en,_,fc/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,h/en,_,pool/en,2/m,_,flat/en,,/w, ,w/en,_,fc/en,1/m,)/w, ,+/w, ,b/en,_,fc/en,1/m,)/w,6/m,./w, ,dropout/en,为了/p,减少/v,过/u,拟合/nz,，/w,我们/r,在/p,输出/v,层/q,之前/f,加入/v,dropout/en,。/w,我们/r,用/p,一个/m,placeholder/en,来/v,代表/n,一个/m,神经元/n,的/u,输出/v,在/p,dropout/en,中/f,保持/v,不/d,变/v,的/u,概率/n,。/w,这样/r,我们/r,可以/v,在/p,训练/vn,过程/n,中/f,启用/v,dropout/en,，/w,在/p,测试/vn,过程/n,中/f,关闭/v,dropout/en,。/w, ,tensorflow/en,的/u,tf/en,./w,nn/en,./w,dropout/en,操作/v,除了/p,可以/v,屏蔽神经元/nw,的/u,输出/v,外/f,，/w,还/d,会/v,自动/d,处理/v,神经元/n,输出/v,值/n,的/u,scale/en,。/w,所以/c,用/p,dropout/en,的/u,时候/n,可以/v,不用/d,考虑/v,scale/en,。/w,keep/en,_,prob/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,"/w,float/en,"/w,)/w, ,h/en,_,fc/en,1/m,_,drop/en, ,=/w, ,tf/en,./w,nn/en,./w,dropout/en,(/w,h/en,_,fc/en,1/m,,/w, ,keep/en,_,prob/en,)/w,7/m,./w, ,输出/v,层/q,最后/f,，/w,我们/r,添加/vn,一个/m,softmax/en,层/q,，/w,就/d,像/v,前面/f,的/u,单/d,层/q,softmax/en, ,regression/en,一样/u,w/en,_,fc/en,2/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,1024/m,,/w, ,10/m,]/w,)/w, ,b/en,_,fc/en,2/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,10/m,]/w,)/w, ,y/en,_,conv/en,=/w,tf/en,./w,nn/en,./w,softmax/en,(/w,tf/en,./w,matmul/en,(/w,h/en,_,fc/en,1/m,_,drop/en,,/w, ,w/en,_,fc/en,2/m,)/w, ,+/w, ,b/en,_,fc/en,2/m,)/w,注意/v,这里/r,和/c,softmax/en, ,regression/en,的/u,区别/n,在于/v,，/w,softmax/en, ,regression/en,的/u,输入/v,维度/n,是/v,图像/n,像素/n,的/u,768维/mq,，/w,而/c,该/r,网络/n,的/u,输入/v,是/v,卷积/nw,后/f,的/u,1024/m,高维/nr,空间/n,，/w,后者/r,抽象度/nw,更好/d,8/m,./w, ,训练/vn,和/c,评估/vn,模型/n,为了/p,进行/v,训练/vn,和/c,评估/vn,，/w,我们/r,使用/v,与/p,之前/f,简单/a,的/u,单/d,层/q,softmax/en,神经/n,网络/n,模型/n,几乎/d,相同/a,的/u,一套/mq,代码/n,，/w,只是/d,我们/r,会/v,用/p,更加/d,复杂/a,的/u,adam/en,优化器/nw,来/v,做/v,梯度/n,最速/nw,下降/v,，/w,在/p,feed/en,_,dict/en,中/f,加入/v,额外/b,的/u,参数/n,keep/en,_,prob/en,来/v,控制/v,dropout/en,比例/n,。/w,然后/c,每/r,100次/mq,迭代/vn,输出/v,一次/mq,日志/n,cross/en,_,entropy/en, ,=/w, ,-/w,tf/en,./w,reduce/en,_,sum/en,(/w,y/en,_,*/w,tf/en,./w,log/en,(/w,y/en,_,conv/en,)/w,)/w, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,adamoptimizer/en,(/w,1/m,e/en,-/w,4/m,)/w,./w,minimize/en,(/w,cross/en,_,entropy/en,)/w, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,_,conv/en,,/w,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,y/en,_,,/w,1/m,)/w,)/w, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,"/w,float/en,"/w,)/w,)/w, ,sess/en,./w,run/en,(/w,tf/en,./w,initialize/en,_,all/en,_,variables/en,(/w,)/w,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,20000/m,)/w,:/w, ,batch/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,50/m,)/w, ,if/en, ,i/en,%/w,100/m, ,=/w,=/w, ,0/m,:/w, ,train/en,_,accuracy/en, ,=/w, ,accuracy/en,./w,eval/en,(/w,feed/en,_,dict/en,=/w,{/w, ,x/en,:/w,batch/en,[/w,0/m,]/w,,/w, ,y/en,_,:/w, ,batch/en,[/w,1/m,]/w,,/w, ,keep/en,_,prob/en,:/w, ,1.0/m,}/w,)/w, ,print/en, ,"/w,step/en, ,%/w,d/en,,/w, ,training/en, ,accuracy/en, ,%/w,g/en,"/w,%/w,(/w,i/en,,/w, ,train/en,_,accuracy/en,)/w, ,train/en,_,step/en,./w,run/en,(/w,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,batch/en,[/w,0/m,]/w,,/w, ,y/en,_,:/w, ,batch/en,[/w,1/m,]/w,,/w, ,keep/en,_,prob/en,:/w, ,0.5/m,}/w,)/w, ,print/en, ,"/w,test/en, ,accuracy/en, ,%/w,g/en,"/w,%/w,accuracy/en,./w,eval/en,(/w,feed/en,_,dict/en,=/w,{/w, ,x/en,:/w, ,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,_,:/w, ,mnist/en,./w,test/en,./w,labels/en,,/w, ,keep/en,_,prob/en,:/w, ,1.0/m,}/w,)/w,9/m,./w, ,tensorflow/en,-/w,deep/en,_,convolution/en,./w,pyimport/en, ,input/en,_,data/en, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,'/w,mnist/en,_,data/en,//w,'/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,def/en, ,weight/en,_,variable/en,(/w,shape/en,)/w,:/w, ,initial/en, ,=/w, ,tf/en,./w,truncated/en,_,normal/en,(/w,shape/en,,/w, ,stddev/en,=/w,0.1/m,)/w, ,return/en, ,tf/en,./w,variable/en,(/w,initial/en,)/w, ,def/en, ,bias/en,_,variable/en,(/w,shape/en,)/w,:/w, ,initial/en, ,=/w, ,tf/en,./w,constant/en,(/w,0.1/m,,/w, ,shape/en,=/w,shape/en,)/w, ,return/en, ,tf/en,./w,variable/en,(/w,initial/en,)/w, ,def/en, ,conv/en,2/m,d/en,(/w,x/en,,/w, ,w/en,)/w,:/w, ,return/en, ,tf/en,./w,nn/en,./w,conv/en,2/m,d/en,(/w,x/en,,/w, ,w/en,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,1/m,,/w, ,1/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w, ,def/en, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,x/en,)/w,:/w, ,return/en, ,tf/en,./w,nn/en,./w,max/en,_,pool/en,(/w,x/en,,/w, ,ksize/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w, ,sess/en, ,=/w, ,tf/en,./w,interactivesession/en,(/w,)/w, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,"/w,float/en,"/w,,/w, ,shape/en,=/w,[/w,none/en,,/w, ,784/m,]/w,)/w, ,y/en,_, ,=/w, ,tf/en,./w,placeholder/en,(/w,"/w,float/en,"/w,,/w, ,shape/en,=/w,[/w,none/en,,/w, ,10/m,]/w,)/w, ,w/en,_,conv/en,1/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,5/m,,/w, ,5/m,,/w, ,1/m,,/w, ,32/m,]/w,)/w, ,b/en,_,conv/en,1/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,32/m,]/w,)/w, ,x/en,_,image/en, ,=/w, ,tf/en,./w,reshape/en,(/w,x/en,,/w, ,[/w,-/w,1/m,,/w, ,28/m,,/w, ,28/m,,/w, ,1/m,]/w,)/w, ,h/en,_,conv/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,conv/en,2/m,d/en,(/w,x/en,_,image/en,,/w, ,w/en,_,conv/en,1/m,)/w, ,+/w, ,b/en,_,conv/en,1/m,)/w, ,h/en,_,pool/en,1/m, ,=/w, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,h/en,_,conv/en,1/m,)/w, ,w/en,_,conv/en,2/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,5/m,,/w, ,5/m,,/w, ,32/m,,/w, ,64/m,]/w,)/w, ,b/en,_,conv/en,2/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,64/m,]/w,)/w, ,h/en,_,conv/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,conv/en,2/m,d/en,(/w,h/en,_,pool/en,1/m,,/w, ,w/en,_,conv/en,2/m,)/w, ,+/w, ,b/en,_,conv/en,2/m,)/w, ,h/en,_,pool/en,2/m, ,=/w, ,max/en,_,pool/en,_,2/m,x/en,2/m,(/w,h/en,_,conv/en,2/m,)/w, ,w/en,_,fc/en,1/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,7/m, ,*/w, ,7/m, ,*/w, ,64/m,,/w, ,1024/m,]/w,)/w, ,b/en,_,fc/en,1/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,1024/m,]/w,)/w, ,h/en,_,pool/en,2/m,_,flat/en, ,=/w, ,tf/en,./w,reshape/en,(/w,h/en,_,pool/en,2/m,,/w, ,[/w,-/w,1/m,,/w, ,7/m, ,*/w, ,7/m, ,*/w, ,64/m,]/w,)/w, ,h/en,_,fc/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,h/en,_,pool/en,2/m,_,flat/en,,/w, ,w/en,_,fc/en,1/m,)/w, ,+/w, ,b/en,_,fc/en,1/m,)/w, ,keep/en,_,prob/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,"/w,float/en,"/w,)/w, ,h/en,_,fc/en,1/m,_,drop/en, ,=/w, ,tf/en,./w,nn/en,./w,dropout/en,(/w,h/en,_,fc/en,1/m,,/w, ,keep/en,_,prob/en,)/w, ,w/en,_,fc/en,2/m, ,=/w, ,weight/en,_,variable/en,(/w,[/w,1024/m,,/w, ,10/m,]/w,)/w, ,b/en,_,fc/en,2/m, ,=/w, ,bias/en,_,variable/en,(/w,[/w,10/m,]/w,)/w, ,y/en,_,conv/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,tf/en,./w,matmul/en,(/w,h/en,_,fc/en,1/m,_,drop/en,,/w, ,w/en,_,fc/en,2/m,)/w, ,+/w, ,b/en,_,fc/en,2/m,)/w, ,cross/en,_,entropy/en, ,=/w, ,-/w,tf/en,./w,reduce/en,_,sum/en,(/w,y/en,_, ,*/w, ,tf/en,./w,log/en,(/w,y/en,_,conv/en,)/w,)/w, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,adamoptimizer/en,(/w,1/m,e/en,-/w,4/m,)/w,./w,minimize/en,(/w,cross/en,_,entropy/en,)/w, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,_,conv/en,,/w, ,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,y/en,_,,/w, ,1/m,)/w,)/w, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,"/w,float/en,"/w,)/w,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,'/w,training/en, ,error/en,'/w,,/w, ,cross/en,_,entropy/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,'/w,training/en, ,accuracy/en,'/w,,/w, ,accuracy/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,'/w,sparsity/en,'/w,,/w, ,tf/en,./w,nn/en,./w,zero/en,_,fraction/en,(/w,h/en,_,fc/en,1/m,)/w,)/w, ,sess/en,./w,run/en,(/w,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w,)/w, ,merged/en,_,summary/en,_,op/en, ,=/w, ,tf/en,./w,summary/en,./w,merge/en,_,all/en,(/w,)/w, ,print/en, ,merged/en,_,summary/en,_,op/en, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,summary/en,./w,filewriter/en,(/w,'/w,./w,//w,mnist/en,_,logs/en,'/w,,/w, ,sess/en,./w,graph/en,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,20000/m,)/w,:/w, ,batch/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,50/m,)/w, ,sess/en,./w,run/en,(/w,train/en,_,step/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,batch/en,[/w,0/m,]/w,,/w, ,y/en,_,:/w, ,batch/en,[/w,1/m,]/w,,/w, ,keep/en,_,prob/en,:/w, ,0.5/m,}/w,)/w, ,if/en, ,i/en, ,%/w, ,100/m, ,=/w,=/w, ,0/m,:/w, ,train/en,_,accuracy/en, ,=/w, ,accuracy/en,./w,eval/en,(/w,feed/en,_,dict/en,=/w,{/w, ,x/en,:/w, ,batch/en,[/w,0/m,]/w,,/w, ,y/en,_,:/w, ,batch/en,[/w,1/m,]/w,,/w, ,keep/en,_,prob/en,:/w, ,1.0/m,}/w,)/w, ,print/en, ,"/w,step/en, ,%/w,d/en,,/w, ,training/en, ,accuracy/en, ,%/w,g/en,"/w, ,%/w, ,(/w,i/en,,/w, ,train/en,_,accuracy/en,)/w, ,summary/en,_,str/en, ,=/w, ,sess/en,./w,run/en,(/w,merged/en,_,summary/en,_,op/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w, ,batch/en,[/w,0/m,]/w,,/w, ,y/en,_,:/w, ,batch/en,[/w,1/m,]/w,,/w, ,keep/en,_,prob/en,:/w, ,0.5/m,}/w,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,i/en,)/w, ,print/en, ,"/w,test/en, ,accuracy/en, ,%/w,g/en,"/w, ,%/w, ,accuracy/en,./w,eval/en,(/w,feed/en,_,dict/en,=/w,{/w, ,x/en,:/w, ,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,_,:/w, ,mnist/en,./w,test/en,./w,labels/en,,/w, ,keep/en,_,prob/en,:/w, ,1.0/m,}/w,)/w,0/m,x/en,2/m,:/w, ,前馈/nw,神经/n,网络/n,（/w,feed/en,-/w,forward/en, ,neural/en, ,network/en,）/w,：/w,full/en, ,connected/en, ,minst/en,1/m,./w, ,构建/v,图表/n, ,（/w,build/en, ,the/en, ,graph/en,）/w,在/p,为/p,数据/n,创建/v,占/v,位符/nw,之后/f,，/w,就/d,可以/v,运行/vn,mnist/en,./w,py/en,文件/n,，/w,经过/p,三/m,阶段/n,的/u,模式/n,函数/n,操作/v,：/w,inference/en,(/w,)/w,，/w, ,loss/en,(/w,)/w,，/w,和/c,training/en,(/w,)/w,。/w,图表/n,就/d,构建/v,完成/v,了/u,1/m,./w,inference/en,(/w,)/w, ,——/w, ,尽可能/d,地/u,构建/v,好/a,图表/n,，/w,满足/v,促使/v,神经/n,网络/n,向前/v,反馈/v,并/c,做出/v,预测/v,的/u,要求/v, ,2/m,./w,loss/en,(/w,)/w, ,——/w, ,往/p,inference/en,图表/n,中/f,添加/vn,生成/vn,损失/n,（/w,loss/en,）/w,所/u,需要/v,的/u,操作/v,（/w,ops/en,）/w, ,3/m,./w,training/en,(/w,)/w, ,——/w, ,往/p,损失/n,图表/n,中/f,添加/vn,计算/v,并/c,应用/vn,梯度/n,（/w,gradients/en,）/w,所/u,需/v,的/u,操作/v,推理/vn,（/w,inference/en,）/w,inference/en,(/w,)/w,函数/n,会/v,尽可能/d,地/u,构建/v,图表/n,，/w,做到/v,返回/v,包含/v,了/u,预测/v,结果/n,（/w,output/en, ,prediction/en,）/w,的/u,tensor/en,。/w,它/r,接受/v,图像/n,占位/v,符为/nr,输入/v,，/w,在/p,此/r,基础/n,上/f,借助/v,relu/en,(/w,rectified/en, ,linear/en, ,units/en,)/w,激活/vn,函数/n,，/w,构建/v,一对/m,完全/ad,连接/v,层/q,（/w,layers/en,）/w,，/w,以及/c,一个/m,有/v,着/u,十个/m,节点/n,（/w,node/en,）/w,、/w,指明/v,了/u,输出/v,logtis/en,模型/n,的/u,线性/n,层/q,。/w,每/r,一层/mq,都/d,创建/v,于/p,一个/m,唯一/b,的/u,tf/en,./w,name/en,_,scope/en,之下/f,，/w,创建/v,于/p,该/r,作用/n,域/ng,之下/f,的/u,所有/b,元素/n,都/d,将/d,带有/v,其/r,前缀/n,。/w,with/en, ,tf/en,./w,name/en,_,scope/en,(/w,'/w,hidden/en,1/m,'/w,)/w, ,as/en, ,scope/en,:/w,在/p,定义/n,的/u,作用/n,域/ng,中/f,，/w,每/r,一层/mq,所/u,使用/v,的/u,权重/nz,和/c,偏差/n,都/d,在/p,tf/en,./w,variable/en,实例/n,中/f,生成/vn,，/w,并且/c,包含/v,了/u,各自/r,期望/v,的/u,shapeweights/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,image/en,_,pixels/en,,/w, ,hidden/en,1/m,_,units/en,]/w,,/w, ,stddev/en,=/w,1.0/m, ,//w, ,math/en,./w,sqrt/en,(/w,float/en,(/w,image/en,_,pixels/en,)/w,)/w,)/w,,/w, ,name/en,=/w,'/w,weights/en,'/w,)/w, ,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,hidden/en,1/m,_,units/en,]/w,)/w,,/w, ,name/en,=/w,'/w,biases/en,'/w,)/w,例如/v,，/w,当/p,这些/r,层/q,是/v,在/p,hidden/en,1/m,作用/n,域/ng,下/f,生成/vn,时/ng,，/w,赋予/v,权重/nz,变量/n,的/u,独特/a,名称/n,将/d,会/v,是/v,"/w,hidden/en,1/m,//w,weights/en,"/w,。/w,每个/r,变量/n,在/p,构建/v,时/ng,，/w,都/d,会/v,获得/v,初始化/v,操作/v,（/w,initializer/en, ,ops/en,）/w,。/w,在/p,这种/r,最/d,常见/a,的/u,情况/n,下/f,，/w,通过/p,tf/en,./w,truncated/en,_,normal/en,函数/n,初始化/v,权重/nz,变量/n,，/w,给/p,赋予/v,的/u,shape/en,则/d,是/v,一个/m,二维/nr,tensor/en,，/w,其中/r,第一/m,个/q,维度/n,代表/n,该/r,层/q,中/f,权重/nz,变量/n,所/u,连接/v,（/w,connect/en, ,from/en,）/w,的/u,单元/n,数量/n,，/w,第二/m,个/q,维度/n,代表/n,该/r,层/q,中/f,权重/nz,变量/n,所/u,连接/v,到/v,的/u,（/w,connect/en, ,to/en,）/w,单元/n,数量/n,。/w,对于/p,名叫/v,hidden/en,1/m,的/u,第一/m,层/q,，/w,相应/v,的/u,维度/n,则/d,是/v,[/w,image/en,_,pixels/en,,/w, ,hidden/en,1/m,_,units/en,]/w,(/w,显然/ad,，/w,第一/m,层/q,的/u,输入/v,是/v,图像/n,像素/n,维度/n,)/w,，/w,因为/c,权重/nz,变量/n,将/d,图像/n,输入/v,连接/v,到/v,了/u,hidden/en,1层/mq,。/w,tf/en,./w,truncated/en,_,normal/en,初始/b,函数/n,将/d,根据/p,所/u,得到/v,的/u,均值/n,和/c,标准差/nz,，/w,生成/vn,一个/m,随机/d,分布/v,。/w,然后/c,，/w,通过/p,tf/en,./w,zeros/en,函数/n,初始化/v,偏差/n,变量/n,（/w,biases/en,）/w,，/w,确保/v,所有/b,偏差/n,的/u,起始值/nw,都/d,是/v,0/m,，/w,而/c,它们/r,的/u,shape/en,则/d,是/v,其/r,在/p,该/r,层/q,中/f,所/u,接到/v,的/u,（/w,connect/en, ,to/en,）/w,单元/n,数量/n,。/w,图表/n,的/u,三个/m,主要/b,操作/v,，/w,分别/d,是/v,两个/m,tf/en,./w,nn/en,./w,relu/en,操作/v,，/w,它们/r,中/f,嵌入/v,了/u,隐藏层/nw,所/u,需/v,的/u,tf/en,./w,matmul/en,；/w,以及/c,logits/en,模型/n,所/u,需/v,的/u,另外/c,一个/m,tf/en,./w,matmul/en,。/w,三者/r,依次/d,生成/vn,，/w,各自/r,的/u,tf/en,./w,variable/en,实例/n,则/d,与/p,输入/v,占/v,位符/nw,或/c,下/f,一层/mq,的/u,输出/v,tensor/en,所/u,连接/v,hidden/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,images/en,,/w, ,weights/en,)/w, ,+/w, ,biases/en,)/w, ,hidden/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,hidden/en,1/m,,/w, ,weights/en,)/w, ,+/w, ,biases/en,)/w, ,logits/en, ,=/w, ,tf/en,./w,matmul/en,(/w,hidden/en,2/m,,/w, ,weights/en,)/w, ,+/w, ,biases/en,最后/f,，/w,程序/n,会/v,返回/v,包含/v,了/u,输出/v,结果/n,的/u,logitstensor/en,损失/n,（/w,loss/en,）/w,loss/en,(/w,)/w,函数/n,通过/p,添加/vn,所/u,需/v,的/u,损失/n,操作/v,，/w,进一步/d,构建/v,图表/n,。/w,首先/d,，/w,labels/en,_,placeholer/en,中/f,的/u,值/n,，/w,将/d,被/p,编码/n,为/p,一个/m,含有/v,1/m,-/w,hot/en, ,values/en,的/u,tensor/en,。/w,例如/v,，/w,如果/c,类/q,标识符/n,为/p,“/w,3/m,”/w,，/w,那么/r,该值/nw,就/d,会/v,被/p,转换/v,为/p,：/w,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,codebatch/en,_,size/en, ,=/w, ,tf/en,./w,size/en,(/w,labels/en,)/w, ,labels/en, ,=/w, ,tf/en,./w,expand/en,_,dims/en,(/w,labels/en,,/w, ,1/m,)/w, ,indices/en, ,=/w, ,tf/en,./w,expand/en,_,dims/en,(/w,tf/en,./w,range/en,(/w,0/m,,/w, ,batch/en,_,size/en,,/w, ,1/m,)/w,,/w, ,1/m,)/w, ,concated/en, ,=/w, ,tf/en,./w,concat/en,(/w,1/m,,/w, ,[/w,indices/en,,/w, ,labels/en,]/w,)/w, ,onehot/en,_,labels/en, ,=/w, ,tf/en,./w,sparse/en,_,to/en,_,dense/en,(/w, ,concated/en,,/w, ,tf/en,./w,pack/en,(/w,[/w,batch/en,_,size/en,,/w, ,num/en,_,classes/en,]/w,)/w,,/w, ,1.0/m,,/w, ,0.0/m,)/w,之后/f,，/w,又/d,添加/vn,一个/m,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,操作/v,，/w,用/p,来/v,比较/d,inference/en,(/w,)/w,函数/n,与/p,1/m,-/w,hot/en,标签/n,所/u,输出/v,的/u,logits/en, ,tensor/en,。/w,cross/en,_,entropy/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,logits/en,,/w, ,onehot/en,_,labels/en,,/w, ,name/en,=/w,'/w,xentropy/en,'/w,)/w,然后/c,，/w,使用/v,tf/en,./w,reduce/en,_,mean/en,函数/n,，/w,计算/v,batch/en,维度/n,（/w,第一/m,维度/n,）/w,下/f,交叉/vn,熵/g,（/w,cross/en, ,entropy/en,）/w,的/u,平均值/n,，/w,将/d,将/d,该值/nw,作为/v,总/b,损失/n,。/w,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,cross/en,_,entropy/en,,/w, ,name/en,=/w,'/w,xentropy/en,_,mean/en,'/w,)/w,最后/f,，/w,程序/n,会/v,返回/v,包含/v,了/u,损失值/nw,的/u,tensor/en,。/w,注意/v,：/w,交叉/vn,熵/g,是/v,信息/n,理论/n,中/f,的/u,概念/n,，/w,可以/v,让/v,我们/r,描述/v,如果/c,基于/p,已/d,有/v,事实/n,，/w,相信/v,神经/n,网络/n,所/u,做/v,的/u,推测/v,最/d,坏/a,会/v,导致/v,什么/r,结果/n,训练/vn,training/en,(/w,)/w,函数/n,添加/vn,了/u,通过/p,梯度/n,下降/v,（/w,gradient/en, ,descent/en,）/w,将/d,损失/n,最小化/nw,所/u,需/v,的/u,操作/v,。/w,首先/d,，/w,该/r,函数/n,从/p,loss/en,(/w,)/w,函数/n,中/f,获取/v,损失/n,tensor/en,，/w,将/d,其/r,交给/v,tf/en,./w,scalar/en,_,summary/en,，/w,后者/r,在/p,与/p,summarywriter/en,（/w,见/v,下文/v,）/w,配合/v,使用/v,时/ng,，/w,可以/v,向/p,事件/n,文件/n,（/w,events/en, ,file/en,）/w,中/f,生成/vn,汇总值/nw,（/w,summary/en, ,values/en,）/w,。/w,在/p,实验/vn,中/f,，/w,每次/r,写入/v,汇总值/nw,时/ng,，/w,它/r,都/d,会/v,释放/v,损失/n,tensor/en,的/u,当前/t,值/n,（/w,snapshot/en, ,value/en,）/w,tf/en,./w,scalar/en,_,summary/en,(/w,loss/en,./w,op/en,./w,name/en,,/w, ,loss/en,)/w,接下来/l,，/w,我们/r,实例化/nw,一个/m,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,，/w,负责/v,按照/p,所/u,要求/v,的/u,学习/v,效率/n,（/w,learning/en, ,rate/en,）/w,应用/vn,梯度/n,下降/v,法/j,（/w,gradients/en,）/w,。/w,optimizer/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,flags/en,./w,learning/en,_,rate/en,)/w,之后/f,，/w,我们/r,生成/vn,一个/m,变量/n,用于/v,保存/v,全局/n,训练/vn,步骤/n,（/w,global/en, ,training/en, ,step/en,）/w,的/u,数值/n,，/w,并/c,使用/v,minimize/en,(/w,)/w,函数/n,更新/v,系统/n,中/f,的/u,三角权/nw,重/a,（/w,triangle/en, ,weights/en,）/w,、/w,增加/v,全局/n,步骤/n,的/u,操作/v,。/w,根据/p,惯例/n,，/w,这个/r,操作/v,被/p,称为/v, ,train/en,_,op/en,，/w,是/v,tensorflow/en,会话/v,（/w,session/en,）/w,诱发/v,一个/m,完整/a,训练/vn,步骤/n,所/u,必须/d,运行/vn,的/u,操作/v,global/en,_,step/en, ,=/w, ,tf/en,./w,variable/en,(/w,0/m,,/w, ,name/en,=/w,'/w,global/en,_,step/en,'/w,,/w, ,trainable/en,=/w,false/en,)/w, ,train/en,_,op/en, ,=/w, ,optimizer/en,./w,minimize/en,(/w,loss/en,,/w, ,global/en,_,step/en,=/w,global/en,_,step/en,)/w,最后/f,，/w,程序/n,返回/v,包含/v,了/u,训练/vn,操作/v,（/w,training/en, ,op/en,）/w,输出/v,结果/n,的/u,tensor/en,2/m,./w, ,训练/vn,模型/n,一旦/d,图表/n,构建/v,完毕/v,，/w,就/d,通过/p,fully/en,_,connected/en,_,feed/en,./w,py/en,文件/n,中/f,的/u,用户/n,代码/n,进行/v,循环/vn,地/u,迭代式/nw,训练/vn,和/c,评估/vn,3/m,./w, ,训练/vn,循环/vn,完成/v,会话/v,中/f,变量/n,的/u,初始化/v,之后/f,，/w,就/d,可以/v,开始/v,训练/vn,了/u,。/w,训练/vn,的/u,每/r,一步/mq,都/d,是/v,通过/p,用户/n,代码/n,控制/v,，/w,而/c,能/v,实现/v,有效/a,训练/vn,的/u,最/d,简单/a,循环/vn,就/d,是/v,：/w,for/en, ,step/en, ,in/en, ,xrange/en,(/w,max/en,_,steps/en,)/w,:/w, ,sess/en,./w,run/en,(/w,train/en,_,op/en,)/w,向/p,图表/n,提供/v,反馈/v,(/w,根据/p,误差/n,逐级/d,传递/v,)/w,执行/v,每/r,一步/mq,时/ng,，/w,我们/r,的/u,代码/n,会/v,生成/vn,一个/m,反馈/v,字典/n,（/w,feed/en, ,dictionary/en,）/w,，/w,其中/r,包含/v,对应/v,步骤/n,中/f,训练/vn,所/u,要/v,使用/v,的/u,例子/n,，/w,这些/r,例子/n,的/u,哈希键/nr,就/d,是/v,其/r,所/u,代表/n,的/u,占/v,位符/nw,操作/v,。/w,fill/en,_,feed/en,_,dict/en,函数/n,会/v,查询/v,给/p,定/v,的/u,dataset/en,，/w,索要/v,下/f,一/m,批次/n,batch/en,_,size/en,的/u,图像/n,和/c,标签/n,，/w,与/p,占位/v,符相/nr,匹配/vn,的/u,tensor/en,则/d,会/v,包含/v,下/f,一/m,批次/n,的/u,图像/n,和/c,标签/n,。/w,images/en,_,feed/en,,/w, ,labels/en,_,feed/en, ,=/w, ,data/en,_,set/en,./w,next/en,_,batch/en,(/w,flags/en,./w,batch/en,_,size/en,)/w,然后/c,，/w,以/p,占/v,位符/nw,为/p,哈希键/nr,，/w,创建/v,一个/m,python/en,字典/n,对象/n,，/w,键值/nr,则/d,是/v,其/r,代表/n,的/u,反馈/v,tensorfeed/en,_,dict/en, ,=/w, ,{/w, ,images/en,_,placeholder/en,:/w, ,images/en,_,feed/en,,/w, ,labels/en,_,placeholder/en,:/w, ,labels/en,_,feed/en,,/w, ,}/w,这个/r,字典/n,随后/d,作为/v,feed/en,_,dict/en,参数/n,，/w,传入/v,sess/en,./w,run/en,(/w,)/w,函数/n,中/f,，/w,为/p,这/r,一步/mq,的/u,训练/vn,提供/v,输入/v,样例/nw,这里/r,简单/a,理解/v,一下/m,前/f,向/p,反馈/v,前馈/nw,就/d,是/v,信号/n,向前/v,传递/v,的/u,意思/n,。/w,bp/en,网络/n,的/u,前馈/nw,表现/v,为/p,输入/v,信号/n,从/p,输入层/nw,（/w,输入层/nw,不/d,参加/v,计算/v,）/w,开始/v,，/w,每/r,一层/mq,的/u,神经元/n,计算/v,出/v,该/r,层/q,各/r,神经元/n,的/u,输出/v,并/c,向/p,下/f,一层/mq,传递/v,直到/v,输出/v,层/q,计算/v,出/v,网络/n,的/u,输出/v,结果/n,，/w,前馈/nw,只是/d,用于/v,计算/v,出/v,网络/n,的/u,输出/v,，/w,不/d,对/p,网络/n,的/u,参数/n,进行/v,调整/vn,。/w,误差/n,反向/f,传播/vn,用于/v,训练/vn,时/ng,网络/n,权值/nw,和/c,阈值/n,的/u,调整/vn,。/w,网络/n,前/f,向/p,传播/vn,计算/v,出来/v,的/u,结果/n,与/p,实际/n,的/u,结果/n,存在/v,误差/n,，/w,在/p,离/v,线/n,训练/vn,时/ng,，/w,这时/r,网络/n,采用/v,批量/d,训练/vn,方法/n,计算/v,出/v,整个/b,样本/n,数据/n,的/u,总/b,误差/n,，/w,然后/c,从/p,输出/v,层/q,开始/v,向前/v,推/v,，/w,一般/a,采用/v,梯度/n,下降/v,法/j,逐/vg,层/q,求/v,出/v,每/r,一层/mq,神经元/n,的/u,阈值/n,和/c,权值/nw,的/u,调/v,增量/n,，/w,循环/vn,迭代/vn,到/v,网络/n,参数/n,符合/v,要求/v,停止/v,检查/vn,状态/n,在/p,运行/vn,sess/en,./w,run/en,函数/n,时/ng,，/w,要/v,在/p,代码/n,中/f,明确/ad,其/r,需要/v,获取/v,的/u,两个/m,值/n,：/w,[/w,train/en,_,op/en,,/w, ,loss/en,]/w,for/en, ,step/en, ,in/en, ,xrange/en,(/w,flags/en,./w,max/en,_,steps/en,)/w,:/w, ,feed/en,_,dict/en, ,=/w, ,fill/en,_,feed/en,_,dict/en,(/w,data/en,_,sets/en,./w,train/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,)/w, ,_,,/w, ,loss/en,_,value/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,train/en,_,op/en,,/w, ,loss/en,]/w,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w,因为/c,要/v,获取/v,这/r,两个/m,值/n,，/w,sess/en,./w,run/en,(/w,)/w,会/v,返回/v,一个/m,有/v,两个/m,元素/n,的/u,元组/nw,。/w,其中/r,每/r,一个/m,tensor/en,对象/n,，/w,对应/v,了/u,返回/v,的/u,元组/nw,中/f,的/u,numpy/en,数/m,组/q,，/w,而/c,这些/r,数/m,组/q,中/f,包含/v,了/u,当前/t,这/r,步/q,训练/vn,中/f,对应/v,tensor/en,的/u,值/n,。/w,由于/c,train/en,_,op/en,并/c,不/d,会/v,产生/v,输出/v,，/w,其/r,在/p,返回/v,的/u,元祖中/nr,的/u,对应/v,元素/n,就/d,是/v,none/en,，/w,所以/c,会/v,被/p,抛弃/v,。/w,但是/c,，/w,如果/c,模型/n,在/p,训练/vn,中/f,出现/v,偏差/n,，/w,loss/en, ,tensor/en,的/u,值/n,可能/v,会/v,变成/v,nan/en,，/w,所以/c,我们/r,要/v,获取/v,它/r,的/u,值/n,，/w,并/c,记录/v,下来/v,。/w,假设/v,训练/vn,一切/r,正常/a,，/w,没有/v,出现/v,nan/en,，/w,训练/vn,循环会/nw,每隔/d,100个/m,训练/vn,步骤/n,，/w,就/d,打印/v,一行/n,简单/a,的/u,状态/n,文本/n,，/w,告知/v,用户/n,当前/t,的/u,训练/vn,状态/n,if/en, ,step/en, ,%/w, ,100/m, ,=/w,=/w, ,0/m,:/w, ,print/en, ,'/w,step/en, ,%/w,d/en,:/w, ,loss/en, ,=/w, ,%/w,./w,2/m,f/en, ,(/w,%/w,./w,3/m,f/en, ,sec/en,)/w,'/w, ,%/w, ,(/w,step/en,,/w, ,loss/en,_,value/en,,/w, ,duration/en,)/w,状态/n,可视化/nz,为了/p,释放/v,tensorboard/en,所/u,使用/v,的/u,事件/n,文件/n,（/w,events/en, ,file/en,）/w,，/w,所有/b,的/u,即时/d,数据/n,（/w,在/p,这里/r,只/d,有/v,一个/m,）/w,都/d,要/v,在/p,图表/n,构建/v,阶段/n,合并/v,至/p,一个/m,操作/v,（/w,op/en,）/w,中/f,summary/en,_,op/en, ,=/w, ,tf/en,./w,merge/en,_,all/en,_,summaries/en,(/w,)/w,在/p,创建/v,好/a,会话/v,（/w,session/en,）/w,之后/f,，/w,可以/v,实例化/nw,一个/m,tf/en,./w,train/en,./w,summarywriter/en,，/w,用于/v,写入/v,包含/v,了/u,图表/n,本身/r,和/c,即时/d,数据/n,具体值/nw,的/u,事件/n,文件/n,summary/en,_,writer/en, ,=/w, ,tf/en,./w,train/en,./w,summarywriter/en,(/w,flags/en,./w,train/en,_,dir/en,,/w, ,graph/en,_,def/en,=/w,sess/en,./w,graph/en,_,def/en,)/w,最后/f,，/w,每次/r,运行/vn,summary/en,_,op/en,时/ng,，/w,都/d,会/v,往/p,事件/n,文件/n,中/f,写入/v,最/d,新/a,的/u,即时/d,数据/n,，/w,函数/n,的/u,输出/v,会/v,传入/v,事件/n,文件/n,读写器/n,（/w,writer/en,）/w,的/u,add/en,_,summary/en,(/w,)/w,函数/n,。/w,summary/en,_,str/en, ,=/w, ,sess/en,./w,run/en,(/w,summary/en,_,op/en,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,step/en,)/w,事件/n,文件/n,写入/v,完毕/v,之后/f,，/w,可以/v,就/d,训练/vn,文件夹/n,打开/v,一个/m,tensorboard/en,，/w,查看/v,即时/d,数据/n,的/u,情况/n,保存/v,检查点/n,（/w,checkpoint/en,）/w,为了/p,得到/v,可以/v,用/p,来/v,后续/vn,恢复/v,模型/n,以/p,进一步/d,训练/vn,或/c,评估/vn,的/u,检查/vn,点/q,文件/n,（/w,checkpoint/en, ,file/en,）/w,，/w,我们/r,实例化/nw,一个/m,tf/en,./w,train/en,./w,saversaver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,)/w,在/p,训练/vn,循环/vn,中/f,，/w,将/d,定期/d,调用/v,saver/en,./w,save/en,(/w,)/w,方法/n,，/w,向/p,训练/vn,文件夹/n,中/f,写入/v,包含/v,了/u,当前/t,所有/b,可/v,训练/vn,变量/n,值得/v,检查/vn,点/q,文件/n,saver/en,./w,save/en,(/w,sess/en,,/w, ,flags/en,./w,train/en,_,dir/en,,/w, ,global/en,_,step/en,=/w,step/en,)/w,这样/r,，/w,我们/r,以后/f,就/d,可以/v,使用/v,saver/en,./w,restore/en,(/w,)/w,方法/n,，/w,重载/v,模型/n,的/u,参数/n,，/w,继续/v,训练/vn,saver/en,./w,restore/en,(/w,sess/en,,/w, ,flags/en,./w,train/en,_,dir/en,)/w,4/m,./w, ,评估/vn,模型/n,每/r,隔/v,一千/nw,个/q,训练/vn,步骤/n,，/w,我们/r,的/u,代码/n,会/v,尝试/vn,使用/v,训练/vn,数据集/nw,与/p,测试/vn,数据集/nw,，/w,对/p,模型/n,进行/v,评估/vn,。/w,do/en,_,eval/en,函数/n,会/v,被/p,调用/v,三次/mq,，/w,分别/d,使用/v,训练/vn,数据集/nw,、/w,验证/vn,数据/n,集合/v,测试/vn,数据集/nw,print/en, ,'/w,training/en, ,data/en, ,eval/en,:/w,'/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,train/en,)/w, ,print/en, ,'/w,validation/en, ,data/en, ,eval/en,:/w,'/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,validation/en,)/w, ,print/en, ,'/w,test/en, ,data/en, ,eval/en,:/w,'/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,test/en,)/w,5/m,./w, ,fully/en,_,connected/en,_,feed/en,./w,py/en,#, ,copyright/en, ,2015/m, ,the/en, ,tensorflow/en, ,authors/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,trains/en, ,and/en, ,evaluates/en, ,the/en, ,mnist/en, ,network/en, ,using/en, ,a/en, ,feed/en, ,dictionary/en,./w,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,missing/en,-/w,docstring/en, ,import/en, ,argparse/en, ,import/en, ,os/en,./w,path/en, ,import/en, ,sys/en, ,import/en, ,time/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,input/en,_,data/en, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,mnist/en, ,#, ,basic/en, ,model/en, ,parameters/en, ,as/en, ,external/en, ,flags/en,./w, ,flags/en, ,=/w, ,none/en, ,def/en, ,placeholder/en,_,inputs/en,(/w,batch/en,_,size/en,)/w,:/w, ,"/w,"/w,"/w,generate/en, ,placeholder/en, ,variables/en, ,to/en, ,represent/en, ,the/en, ,input/en, ,tensors/en,./w, ,these/en, ,placeholders/en, ,are/en, ,used/en, ,as/en, ,inputs/en, ,by/en, ,the/en, ,rest/en, ,of/en, ,the/en, ,model/en, ,building/en, ,code/en, ,and/en, ,will/en, ,be/en, ,fed/en, ,from/en, ,the/en, ,downloaded/en, ,data/en, ,in/en, ,the/en, ,./w,run/en,(/w,)/w, ,loop/en,,/w, ,below/en,./w, ,args/en,:/w, ,batch/en,_,size/en,:/w, ,the/en, ,batch/en, ,size/en, ,will/en, ,be/en, ,baked/en, ,into/en, ,both/en, ,placeholders/en,./w, ,returns/en,:/w, ,images/en,_,placeholder/en,:/w, ,images/en, ,placeholder/en,./w, ,labels/en,_,placeholder/en,:/w, ,labels/en, ,placeholder/en,./w, ,"/w,"/w,"/w, ,#, ,note/en, ,that/en, ,the/en, ,shapes/en, ,of/en, ,the/en, ,placeholders/en, ,match/en, ,the/en, ,shapes/en, ,of/en, ,the/en, ,full/en, ,#, ,image/en, ,and/en, ,label/en, ,tensors/en,,/w, ,except/en, ,the/en, ,first/en, ,dimension/en, ,is/en, ,now/en, ,batch/en,_,size/en, ,#, ,rather/en, ,than/en, ,the/en, ,full/en, ,size/en, ,of/en, ,the/en, ,train/en, ,or/en, ,test/en, ,data/en, ,sets/en,./w, ,images/en,_,placeholder/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,shape/en,=/w,(/w,batch/en,_,size/en,,/w, ,mnist/en,./w,image/en,_,pixels/en,)/w,)/w, ,labels/en,_,placeholder/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,shape/en,=/w,(/w,batch/en,_,size/en,)/w,)/w, ,return/en, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en, ,def/en, ,fill/en,_,feed/en,_,dict/en,(/w,data/en,_,set/en,,/w, ,images/en,_,pl/en,,/w, ,labels/en,_,pl/en,)/w,:/w, ,"/w,"/w,"/w,fills/en, ,the/en, ,feed/en,_,dict/en, ,for/en, ,training/en, ,the/en, ,given/en, ,step/en,./w, ,a/en, ,feed/en,_,dict/en, ,takes/en, ,the/en, ,form/en, ,of/en,:/w, ,feed/en,_,dict/en, ,=/w, ,{/w, ,</w,placeholder/en,>,:/w, ,</w,tensor/en, ,of/en, ,values/en, ,to/en, ,be/en, ,passed/en, ,for/en, ,placeholder/en,>,,/w, ,./w,./w,./w,./w, ,}/w, ,args/en,:/w, ,data/en,_,set/en,:/w, ,the/en, ,set/en, ,of/en, ,images/en, ,and/en, ,labels/en,,/w, ,from/en, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,)/w, ,images/en,_,pl/en,:/w, ,the/en, ,images/en, ,placeholder/en,,/w, ,from/en, ,placeholder/en,_,inputs/en,(/w,)/w,./w, ,labels/en,_,pl/en,:/w, ,the/en, ,labels/en, ,placeholder/en,,/w, ,from/en, ,placeholder/en,_,inputs/en,(/w,)/w,./w, ,returns/en,:/w, ,feed/en,_,dict/en,:/w, ,the/en, ,feed/en, ,dictionary/en, ,mapping/en, ,from/en, ,placeholders/en, ,to/en, ,values/en,./w, ,"/w,"/w,"/w, ,#, ,create/en, ,the/en, ,feed/en,_,dict/en, ,for/en, ,the/en, ,placeholders/en, ,filled/en, ,with/en, ,the/en, ,next/en, ,#, ,`,batch/en, ,size/en,`, ,examples/en,./w, ,images/en,_,feed/en,,/w, ,labels/en,_,feed/en, ,=/w, ,data/en,_,set/en,./w,next/en,_,batch/en,(/w,flags/en,./w,batch/en,_,size/en,,/w, ,flags/en,./w,fake/en,_,data/en,)/w, ,feed/en,_,dict/en, ,=/w, ,{/w, ,images/en,_,pl/en,:/w, ,images/en,_,feed/en,,/w, ,labels/en,_,pl/en,:/w, ,labels/en,_,feed/en,,/w, ,}/w, ,return/en, ,feed/en,_,dict/en, ,def/en, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,set/en,)/w,:/w, ,"/w,"/w,"/w,runs/en, ,one/en, ,evaluation/en, ,against/en, ,the/en, ,full/en, ,epoch/en, ,of/en, ,data/en,./w, ,args/en,:/w, ,sess/en,:/w, ,the/en, ,session/en, ,in/en, ,which/en, ,the/en, ,model/en, ,has/en, ,been/en, ,trained/en,./w, ,eval/en,_,correct/en,:/w, ,the/en, ,tensor/en, ,that/en, ,returns/en, ,the/en, ,number/en, ,of/en, ,correct/en, ,predictions/en,./w, ,images/en,_,placeholder/en,:/w, ,the/en, ,images/en, ,placeholder/en,./w, ,labels/en,_,placeholder/en,:/w, ,the/en, ,labels/en, ,placeholder/en,./w, ,data/en,_,set/en,:/w, ,the/en, ,set/en, ,of/en, ,images/en, ,and/en, ,labels/en, ,to/en, ,evaluate/en,,/w, ,from/en, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,)/w,./w, ,"/w,"/w,"/w, ,#, ,and/en, ,run/en, ,one/en, ,epoch/en, ,of/en, ,eval/en,./w, ,true/en,_,count/en, ,=/w, ,0/m, ,#, ,counts/en, ,the/en, ,number/en, ,of/en, ,correct/en, ,predictions/en,./w, ,steps/en,_,per/en,_,epoch/en, ,=/w, ,data/en,_,set/en,./w,num/en,_,examples/en, ,//w,//w, ,flags/en,./w,batch/en,_,size/en, ,num/en,_,examples/en, ,=/w, ,steps/en,_,per/en,_,epoch/en, ,*/w, ,flags/en,./w,batch/en,_,size/en, ,for/en, ,step/en, ,in/en, ,xrange/en,(/w,steps/en,_,per/en,_,epoch/en,)/w,:/w, ,feed/en,_,dict/en, ,=/w, ,fill/en,_,feed/en,_,dict/en,(/w,data/en,_,set/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,)/w, ,true/en,_,count/en, ,+/w,=/w, ,sess/en,./w,run/en,(/w,eval/en,_,correct/en,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w, ,precision/en, ,=/w, ,float/en,(/w,true/en,_,count/en,)/w, ,//w, ,num/en,_,examples/en, ,print/en,(/w,'/w, ,num/en, ,examples/en,:/w, ,%/w,d/en, ,num/en, ,correct/en,:/w, ,%/w,d/en, ,precision/en, ,@/w, ,1/m,:/w, ,%/w,0.04/m,f/en,'/w, ,%/w, ,(/w,num/en,_,examples/en,,/w, ,true/en,_,count/en,,/w, ,precision/en,)/w,)/w, ,def/en, ,run/en,_,training/en,(/w,)/w,:/w, ,"/w,"/w,"/w,train/en, ,mnist/en, ,for/en, ,a/en, ,number/en, ,of/en, ,steps/en,./w,"/w,"/w,"/w, ,#, ,get/en, ,the/en, ,sets/en, ,of/en, ,images/en, ,and/en, ,labels/en, ,for/en, ,training/en,,/w, ,validation/en,,/w, ,and/en, ,#, ,test/en, ,on/en, ,mnist/en,./w, ,data/en,_,sets/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,flags/en,./w,input/en,_,data/en,_,dir/en,,/w, ,flags/en,./w,fake/en,_,data/en,)/w, ,#, ,tell/en, ,tensorflow/en, ,that/en, ,the/en, ,model/en, ,will/en, ,be/en, ,built/en, ,into/en, ,the/en, ,default/en, ,graph/en,./w, ,with/en, ,tf/en,./w,graph/en,(/w,)/w,./w,as/en,_,default/en,(/w,)/w,:/w, ,#, ,generate/en, ,placeholders/en, ,for/en, ,the/en, ,images/en, ,and/en, ,labels/en,./w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en, ,=/w, ,placeholder/en,_,inputs/en,(/w, ,flags/en,./w,batch/en,_,size/en,)/w, ,#, ,build/en, ,a/en, ,graph/en, ,that/en, ,computes/en, ,predictions/en, ,from/en, ,the/en, ,inference/en, ,model/en,./w, ,logits/en, ,=/w, ,mnist/en,./w,inference/en,(/w,images/en,_,placeholder/en,,/w, ,flags/en,./w,hidden/en,1/m,,/w, ,flags/en,./w,hidden/en,2/m,)/w, ,#, ,add/en, ,to/en, ,the/en, ,graph/en, ,the/en, ,ops/en, ,for/en, ,loss/en, ,calculation/en,./w, ,loss/en, ,=/w, ,mnist/en,./w,loss/en,(/w,logits/en,,/w, ,labels/en,_,placeholder/en,)/w, ,#, ,add/en, ,to/en, ,the/en, ,graph/en, ,the/en, ,ops/en, ,that/en, ,calculate/en, ,and/en, ,apply/en, ,gradients/en,./w, ,train/en,_,op/en, ,=/w, ,mnist/en,./w,training/en,(/w,loss/en,,/w, ,flags/en,./w,learning/en,_,rate/en,)/w, ,#, ,add/en, ,the/en, ,op/en, ,to/en, ,compare/en, ,the/en, ,logits/en, ,to/en, ,the/en, ,labels/en, ,during/en, ,evaluation/en,./w, ,eval/en,_,correct/en, ,=/w, ,mnist/en,./w,evaluation/en,(/w,logits/en,,/w, ,labels/en,_,placeholder/en,)/w, ,#, ,build/en, ,the/en, ,summary/en, ,tensor/en, ,based/en, ,on/en, ,the/en, ,tf/en, ,collection/en, ,of/en, ,summaries/en,./w, ,summary/en, ,=/w, ,tf/en,./w,summary/en,./w,merge/en,_,all/en,(/w,)/w, ,#, ,add/en, ,the/en, ,variable/en, ,initializer/en, ,op/en,./w, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,#, ,create/en, ,a/en, ,saver/en, ,for/en, ,writing/en, ,training/en, ,checkpoints/en,./w, ,saver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,)/w, ,#, ,create/en, ,a/en, ,session/en, ,for/en, ,running/en, ,ops/en, ,on/en, ,the/en, ,graph/en,./w, ,sess/en, ,=/w, ,tf/en,./w,session/en,(/w,)/w, ,#, ,instantiate/en, ,a/en, ,summarywriter/en, ,to/en, ,output/en, ,summaries/en, ,and/en, ,the/en, ,graph/en,./w, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,summary/en,./w,filewriter/en,(/w,flags/en,./w,log/en,_,dir/en,,/w, ,sess/en,./w,graph/en,)/w, ,#, ,and/en, ,then/en, ,after/en, ,everything/en, ,is/en, ,built/en,:/w, ,#, ,run/en, ,the/en, ,op/en, ,to/en, ,initialize/en, ,the/en, ,variables/en,./w, ,sess/en,./w,run/en,(/w,init/en,)/w, ,#, ,start/en, ,the/en, ,training/en, ,loop/en,./w, ,for/en, ,step/en, ,in/en, ,xrange/en,(/w,flags/en,./w,max/en,_,steps/en,)/w,:/w, ,start/en,_,time/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,#, ,fill/en, ,a/en, ,feed/en, ,dictionary/en, ,with/en, ,the/en, ,actual/en, ,set/en, ,of/en, ,images/en, ,and/en, ,labels/en, ,#, ,for/en, ,this/en, ,particular/en, ,training/en, ,step/en,./w, ,feed/en,_,dict/en, ,=/w, ,fill/en,_,feed/en,_,dict/en,(/w,data/en,_,sets/en,./w,train/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,)/w, ,#, ,run/en, ,one/en, ,step/en, ,of/en, ,the/en, ,model/en,./w, ,the/en, ,return/en, ,values/en, ,are/en, ,the/en, ,activations/en, ,#, ,from/en, ,the/en, ,`,train/en,_,op/en,`, ,(/w,which/en, ,is/en, ,discarded/en,)/w, ,and/en, ,the/en, ,`,loss/en,`, ,op/en,./w, ,to/en, ,#, ,inspect/en, ,the/en, ,values/en, ,of/en, ,your/en, ,ops/en, ,or/en, ,variables/en,,/w, ,you/en, ,may/en, ,include/en, ,them/en, ,#, ,in/en, ,the/en, ,list/en, ,passed/en, ,to/en, ,sess/en,./w,run/en,(/w,)/w, ,and/en, ,the/en, ,value/en, ,tensors/en, ,will/en, ,be/en, ,#, ,returned/en, ,in/en, ,the/en, ,tuple/en, ,from/en, ,the/en, ,call/en,./w, ,_,,/w, ,loss/en,_,value/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,train/en,_,op/en,,/w, ,loss/en,]/w,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w, ,duration/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,-/w, ,start/en,_,time/en, ,#, ,write/en, ,the/en, ,summaries/en, ,and/en, ,print/en, ,an/en, ,overview/en, ,fairly/en, ,often/en,./w, ,if/en, ,step/en, ,%/w, ,100/m, ,=/w,=/w, ,0/m,:/w, ,#, ,print/en, ,status/en, ,to/en, ,stdout/en,./w, ,print/en,(/w,'/w,step/en, ,%/w,d/en,:/w, ,loss/en, ,=/w, ,%/w,./w,2/m,f/en, ,(/w,%/w,./w,3/m,f/en, ,sec/en,)/w,'/w, ,%/w, ,(/w,step/en,,/w, ,loss/en,_,value/en,,/w, ,duration/en,)/w,)/w, ,#, ,update/en, ,the/en, ,events/en, ,file/en,./w, ,summary/en,_,str/en, ,=/w, ,sess/en,./w,run/en,(/w,summary/en,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,step/en,)/w, ,summary/en,_,writer/en,./w,flush/en,(/w,)/w, ,#, ,save/en, ,a/en, ,checkpoint/en, ,and/en, ,evaluate/en, ,the/en, ,model/en, ,periodically/en,./w, ,if/en, ,(/w,step/en, ,+/w, ,1/m,)/w, ,%/w, ,1000/m, ,=/w,=/w, ,0/m, ,or/en, ,(/w,step/en, ,+/w, ,1/m,)/w, ,=/w,=/w, ,flags/en,./w,max/en,_,steps/en,:/w, ,checkpoint/en,_,file/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,flags/en,./w,log/en,_,dir/en,,/w, ,'/w,model/en,./w,ckpt/en,'/w,)/w, ,saver/en,./w,save/en,(/w,sess/en,,/w, ,checkpoint/en,_,file/en,,/w, ,global/en,_,step/en,=/w,step/en,)/w, ,#, ,evaluate/en, ,against/en, ,the/en, ,training/en, ,set/en,./w, ,print/en,(/w,'/w,training/en, ,data/en, ,eval/en,:/w,'/w,)/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,train/en,)/w, ,#, ,evaluate/en, ,against/en, ,the/en, ,validation/en, ,set/en,./w, ,print/en,(/w,'/w,validation/en, ,data/en, ,eval/en,:/w,'/w,)/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,validation/en,)/w, ,#, ,evaluate/en, ,against/en, ,the/en, ,test/en, ,set/en,./w, ,print/en,(/w,'/w,test/en, ,data/en, ,eval/en,:/w,'/w,)/w, ,do/en,_,eval/en,(/w,sess/en,,/w, ,eval/en,_,correct/en,,/w, ,images/en,_,placeholder/en,,/w, ,labels/en,_,placeholder/en,,/w, ,data/en,_,sets/en,./w,test/en,)/w, ,def/en, ,main/en,(/w,_,)/w,:/w, ,if/en, ,tf/en,./w,gfile/en,./w,exists/en,(/w,flags/en,./w,log/en,_,dir/en,)/w,:/w, ,tf/en,./w,gfile/en,./w,deleterecursively/en,(/w,flags/en,./w,log/en,_,dir/en,)/w, ,tf/en,./w,gfile/en,./w,makedirs/en,(/w,flags/en,./w,log/en,_,dir/en,)/w, ,run/en,_,training/en,(/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,parser/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,learning/en,_,rate/en,'/w,,/w, ,type/en,=/w,float/en,,/w, ,default/en,=/w,0.01/m,,/w, ,help/en,=/w,'/w,initial/en, ,learning/en, ,rate/en,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,max/en,_,steps/en,'/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,20000/m,,/w, ,help/en,=/w,'/w,number/en, ,of/en, ,steps/en, ,to/en, ,run/en, ,trainer/en,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,hidden/en,1/m,'/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,128/m,,/w, ,help/en,=/w,'/w,number/en, ,of/en, ,units/en, ,in/en, ,hidden/en, ,layer/en, ,1/m,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,hidden/en,2/m,'/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,32/m,,/w, ,help/en,=/w,'/w,number/en, ,of/en, ,units/en, ,in/en, ,hidden/en, ,layer/en, ,2/m,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,batch/en,_,size/en,'/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,100/m,,/w, ,help/en,=/w,'/w,batch/en, ,size/en,./w, ,must/en, ,divide/en, ,evenly/en, ,into/en, ,the/en, ,dataset/en, ,sizes/en,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,input/en,_,data/en,_,dir/en,'/w,,/w, ,type/en,=/w,str/en,,/w, ,default/en,=/w,'/w,mnist/en,_,data/en,//w,'/w,,/w, ,help/en,=/w,'/w,directory/en, ,to/en, ,put/en, ,the/en, ,input/en, ,data/en,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,log/en,_,dir/en,'/w,,/w, ,type/en,=/w,str/en,,/w, ,default/en,=/w,'/w,./w,//w,mnist/en,_,logs/en,'/w,,/w, ,help/en,=/w,'/w,directory/en, ,to/en, ,put/en, ,the/en, ,log/en, ,data/en,./w,'/w, ,)/w, ,parser/en,./w,add/en,_,argument/en,(/w, ,'/w,--/nrf,fake/en,_,data/en,'/w,,/w, ,default/en,=/w,false/en,,/w, ,help/en,=/w,'/w,if/en, ,true/en,,/w, ,uses/en, ,fake/en, ,data/en, ,for/en, ,unit/en, ,testing/en,./w,'/w,,/w, ,action/en,=/w,'/w,store/en,_,true/en,'/w, ,)/w, ,flags/en,,/w, ,unparsed/en, ,=/w, ,parser/en,./w,parse/en,_,known/en,_,args/en,(/w,)/w, ,tf/en,./w,app/en,./w,run/en,(/w,main/en,=/w,main/en,,/w, ,argv/en,=/w,[/w,sys/en,./w,argv/en,[/w,0/m,]/w,]/w, ,+/w, ,unparsed/en,)/w,relevant/en, ,link/en,:/w,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,tutorials/en,//w,mnist/en,_,pros/en,./w,html/en, ,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,tutorials/en,//w,mnist/en,_,tf/en,./w,html/en,4/m,./w, ,卷积/nw,神经/n,网络/n,：/w,cifar/en,-/w,10/m, ,数据集/nw,分类/vn,（/w,将/d,像素/n,空间/n,通卷/nw,积/v,扩展/v,到/v,高维/nr,空间/n,，/w,输入/v,cnn/en,进行/v,计算/v,）/w,对/p,cifar/en,-/w,10/m, ,数据集/nw,的/u,分类/vn,是/v,机器/n,学习/v,中/f,一个/m,公开/ad,的/u,基准/n,测试/vn,问题/n,，/w,其/r,任务/n,是/v,对/p,一组/mq,32/m,x/en,32/m,rgb/en,的/u,图像/n,进行/v,分类/vn,，/w,这些/r,图像/n,涵盖/v,了/u,10个/m,类别/n,：/w,飞机/n,，/w, ,汽车/n,，/w, ,鸟/n,，/w, ,猫/n,，/w, ,鹿/nr,，/w, ,狗/n,，/w, ,青蛙/n,，/w, ,马/n,，/w, ,船/n,以及/c,卡车/n,0/m,x/en,1/m,:/w, ,模型/n,架构/n,本/r,教程/n,中/f,的/u,模型/n,是/v,一个/m,多/a,层/q,架构/n,，/w,由/p,卷积层/nw,和/c,非线性/b,层/q,(/w,nonlinearities/en,)/w,交替/v,多次/m,排列/v,后/f,构成/v,。/w,这些/r,层/q,最终/d,通过/p,全连/nw,通层/nw,对接/v,到/v,softmax/en,分类器/nw,上/f,1/m,./w, ,模型/n,输入/v,输入/v,模型/n,是/v,通过/p, ,inputs/en,(/w,)/w, ,和/c,distorted/en,_,inputs/en,(/w,)/w,函数/n,建立/v,起来/v,的/u,，/w,这/r,2个/m,函数/n,会/v,从/p,cifar/en,-/w,10/m,二进/mq,制/v,文件/n,中/f,读取/v,图片/n,文件/n,，/w,由于/c,每个/r,图片/n,的/u,存储/vn,字/n,节数/nw,是/v,固定/a,的/u,，/w,因此/c,可以/v,使用/v,tf/en,./w,fixedlengthrecordreader/en,函数/n,图片/n,文件/n,的/u,处理/v,流程/n,如下/v,图片/n,会/v,被/p,统一/vn,裁剪/v,到/v,24/m,x/en,24/m,像素/n,大小/n,，/w,裁剪/v,中央/n,区域/n,用于/v,评估/vn,或/c,随机/d,裁剪/v,用于/v,训练/vn,；/w, ,图片/n,会/v,进行/v,近似/a,的/u,白化/nr,处理/v,，/w,使得/v,模型/n,对/p,图片/n,的/u,动态/n,范围/n,变化/vn,不/d,敏感/a,(/w,让/v,识别/v,模型/n,对/p,图像/n,的/u,亮度/n,等/u,因素/n,不/d,敏感/a,)/w,对于/p,训练/vn,，/w,我们/r,另外/c,采取/v,了/u,一系列/mq,随机/d,变换/v,的/u,方法/n,来/v,人为/d,的/u,增加数/n,据/p,集/vg,的/u,大小/n,对/p,图像/n,进行/v,随机/d,的/u,左右/m,翻转/v,；/w, ,随机/d,变换/v,图像/n,的/u,亮度/n,；/w, ,随机/d,变换/v,图像/n,的/u,对比度/n,；/w,2/m,./w, ,模型/n,预测/v,模型/n,的/u,预测/v,流程/n,由/p,inference/en,(/w,)/w,构造/v,，/w,该/r,函数/n,会/v,添加/vn,必要/a,的/u,操作/v,步骤/n,用于/v,计算/v,预测值/n,的/u, ,logits/en,，/w,其/r,对应/v,的/u,模型/n,组织/v,方式/n,如下/v,所/u,示/vg,：/w,conv/en,1/m, ,实现/v,卷积/nw, ,以及/c, ,rectified/en, ,linear/en, ,activation/en,./w, ,pool/en,1/m, ,max/en, ,pooling/en,./w, ,norm/en,1/m, ,局部/n,响应/v,归/v,一化/nw,./w, ,conv/en,2/m, ,卷积/nw, ,and/en, ,rectified/en, ,linear/en, ,activation/en,./w, ,norm/en,2/m, ,局部/n,响应/v,归/v,一化/nw,./w, ,pool/en,2/m, ,max/en, ,pooling/en,./w, ,local/en,3/m, ,基于/p,修正线性/nw,激活/vn,的/u,全/a,连接/v,层/q,./w, ,local/en,4/m, ,基于/p,修正线性/nw,激活/vn,的/u,全/a,连接/v,层/q,./w, ,softmax/en,_,linear/en, ,进行/v,线性/n,变换/v,以/p,输出/v, ,logits/en,./w,0/m,x/en,2/m,:/w, ,模型/n,训练/vn,训练/vn,一个/m,可/v,进行/v,n/en,维/q,分类/vn,的/u,网络/n,的/u,常用/a,方法/n,是/v,使用/v,多项式/n,逻辑/n,回归/v,,/w,又/d,被/p,叫做/v,softmax/en, ,回归/v,。/w,softmax/en, ,回归/v,在/p,网络/n,的/u,输出/v,层/q,上/f,附加/vn,了/u,一个/m,softmax/en, ,nonlinearity/en,，/w,并且/c,计算/v,归/v,一化/nw,的/u,预测值/n,和/c,label/en,的/u,1/m,-/w,hot/en, ,encoding/en,的/u,交叉/vn,熵/g,。/w,在/p,正则化/nw,过程/n,中/f,，/w,我们/r,会/v,对/p,所有/b,学习/v,变量/n,应用权/nw,重/a,衰减/vn,损失/n,(/w,和/c,手写/v,文字/n,识别/v,类似/v,，/w,图像/n,识别/v,的/u,本质/n,就/d,是/v,对应/v,某个/r,形状/n,的/u,物理/n,对/p,应该/v,区域/n,的/u,权重/nz,相应/v,较/d,高/a,，/w,这/r,也/d,是/v,人/n,识别/v,图像/n,甚至/d,畸形/n,图像/n,的/u,本质/n,道理/n,)/w,。/w,模型/n,的/u,目标/n,函数/n,是/v,求/v,交叉/vn,熵/g,损失/n,和/c,所有权/n,重/a,衰减/vn,项/q,的/u,和/c,，/w,loss/en,(/w,)/w,函数/n,的/u,返回/v,值/n,就/d,是/v,这个/r,值/n,。/w,train/en,(/w,)/w, ,函数/n,会/v,添加/vn,一些/m,操作/v,使得/v,目标/n,函数/n,最小化/nw,，/w,这些/r,操作/v,包括/v,计算/v,梯度/n,、/w,更新/v,学习/v,变量/n,(/w,gradientdescentoptimizer/en,)/w,。/w,train/en,(/w,)/w, ,函数/n,最终/d,会/v,返回/v,一个/m,用以/d,对/p,一批/mq,图像/n,执行/v,所有/b,计算/v,的/u,操作/v,步骤/n,，/w,以便/d,训练/vn,并/c,更新/v,模型/n,。/w,0/m,x/en,3/m,:/w, ,开始/v,执行/v,并/c,训练/vn,模型/n,cifar/en,10/m,_,train/en,./w,py/en,输出/v,的/u,终端/n,信息/n,中/f,提供/v,了/u,关于/p,模型/n,如何/r,训练/vn,的/u,一些/m,信息/n,，/w,比如/v,损失/n,是/v,真的/d,在/p,减小/v,还是/c,看到/v,的/u,只/d,是/v,噪声/n,数据/n,？/w, ,为/p,模型/n,提供/v,的/u,图片/n,是否/v,合适/a,？/w, ,梯度/n,、/w,激活/vn,、/w,权重/nz,的/u,值/n,是否/v,合理/a,？/w, ,当前/t,的/u,学习率/nw,是/v,多少/r,？/w,相比/v,于/p,总/b,损失/n,，/w,在/p,训练/vn,过程/n,中/f,的/u,单项/n,损失/n,尤其/d,值得/v,人们/n,的/u,注意/v,。/w,但是/c,由于/c,训练/vn,中/f,使用/v,的/u,数据/n,批量/d,比较/d,小/a,，/w,损失值/nw,中/f,夹杂/v,了/u,相当/d,多/a,的/u,噪声/n,。/w,在/p,实践/v,过程/n,中/f,，/w,我们/r,也/d,发现/v,相比/v,于/p,原始值/nw,，/w,损失值/nw,的/u,移动/vn,平均值/n,显得/v,更为/d,有/v,意义/n,cifar/en,10/m,./w,py/en,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,builds/en, ,the/en, ,cifar/en,-/w,10/m, ,network/en,./w, ,summary/en, ,of/en, ,available/en, ,functions/en,:/w, ,#, ,compute/en, ,input/en, ,images/en, ,and/en, ,labels/en, ,for/en, ,training/en,./w, ,if/en, ,you/en, ,would/en, ,like/en, ,to/en, ,run/en, ,#, ,evaluations/en,,/w, ,use/en, ,inputs/en,(/w,)/w, ,instead/en,./w, ,inputs/en,,/w, ,labels/en, ,=/w, ,distorted/en,_,inputs/en,(/w,)/w, ,#, ,compute/en, ,inference/en, ,on/en, ,the/en, ,model/en, ,inputs/en, ,to/en, ,make/en, ,a/en, ,prediction/en,./w, ,predictions/en, ,=/w, ,inference/en,(/w,inputs/en,)/w, ,#, ,compute/en, ,the/en, ,total/en, ,loss/en, ,of/en, ,the/en, ,prediction/en, ,with/en, ,respect/en, ,to/en, ,the/en, ,labels/en,./w, ,loss/en, ,=/w, ,loss/en,(/w,predictions/en,,/w, ,labels/en,)/w, ,#, ,create/en, ,a/en, ,graph/en, ,to/en, ,run/en, ,one/en, ,step/en, ,of/en, ,training/en, ,with/en, ,respect/en, ,to/en, ,the/en, ,loss/en,./w, ,train/en,_,op/en, ,=/w, ,train/en,(/w,loss/en,,/w, ,global/en,_,step/en,)/w, ,"/w,"/w,"/w, ,#, ,pylint/en,:/w, ,disable/en,=/w,missing/en,-/w,docstring/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,gzip/en, ,import/en, ,os/en, ,import/en, ,re/en, ,import/en, ,sys/en, ,import/en, ,tarfile/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,urllib/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,import/en, ,cifar/en,10/m,_,input/en, ,flags/en, ,=/w, ,tf/en,./w,app/en,./w,flags/en,./w,flags/en, ,#, ,basic/en, ,model/en, ,parameters/en,./w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,batch/en,_,size/en,'/w,,/w, ,128/m,,/w, ,"/w,"/w,"/w,number/en, ,of/en, ,images/en, ,to/en, ,process/en, ,in/en, ,a/en, ,batch/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,data/en,_,dir/en,'/w,,/w, ,'/w,./w,//w,cifar/en,10/m,_,data/en,'/w,,/w, ,"/w,"/w,"/w,path/en, ,to/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,directory/en,./w,"/w,"/w,"/w,)/w, ,#, ,global/en, ,constants/en, ,describing/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,set/en,./w, ,image/en,_,size/en, ,=/w, ,cifar/en,10/m,_,input/en,./w,image/en,_,size/en, ,num/en,_,classes/en, ,=/w, ,cifar/en,10/m,_,input/en,./w,num/en,_,classes/en, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,=/w, ,cifar/en,10/m,_,input/en,./w,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,eval/en, ,=/w, ,cifar/en,10/m,_,input/en,./w,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,eval/en, ,#, ,constants/en, ,describing/en, ,the/en, ,training/en, ,process/en,./w, ,moving/en,_,average/en,_,decay/en, ,=/w, ,0.9999/m, ,#, ,the/en, ,decay/en, ,to/en, ,use/en, ,for/en, ,the/en, ,moving/en, ,average/en,./w, ,num/en,_,epochs/en,_,per/en,_,decay/en, ,=/w, ,350.0/m, ,#, ,epochs/en, ,after/en, ,which/en, ,learning/en, ,rate/en, ,decays/en,./w, ,learning/en,_,rate/en,_,decay/en,_,factor/en, ,=/w, ,0.1/m, ,#, ,learning/en, ,rate/en, ,decay/en, ,factor/en,./w, ,initial/en,_,learning/en,_,rate/en, ,=/w, ,0.1/m, ,#, ,initial/en, ,learning/en, ,rate/en,./w, ,#, ,if/en, ,a/en, ,model/en, ,is/en, ,trained/en, ,with/en, ,multiple/en, ,gpu/en,'/w,s/en, ,prefix/en, ,all/en, ,op/en, ,names/en, ,with/en, ,tower/en,_,name/en, ,#, ,to/en, ,differentiate/en, ,the/en, ,operations/en,./w, ,note/en, ,that/en, ,this/en, ,prefix/en, ,is/en, ,removed/en, ,from/en, ,the/en, ,#, ,names/en, ,of/en, ,the/en, ,summaries/en, ,when/en, ,visualizing/en, ,a/en, ,model/en,./w, ,tower/en,_,name/en, ,=/w, ,'/w,tower/en,'/w, ,data/en,_,url/en, ,=/w, ,'/w,http/en,:/w,//w,//w,www/en,./w,cs/en,./w,toronto/en,./w,edu/en,//w,~/w,kriz/en,//w,cifar/en,-/w,10/m,-/w,binary/en,./w,tar/en,./w,gz/en,'/w, ,def/en, ,_,activation/en,_,summary/en,(/w,x/en,)/w,:/w, ,"/w,"/w,"/w,helper/en, ,to/en, ,create/en, ,summaries/en, ,for/en, ,activations/en,./w, ,creates/en, ,a/en, ,summary/en, ,that/en, ,provides/en, ,a/en, ,histogram/en, ,of/en, ,activations/en,./w, ,creates/en, ,a/en, ,summary/en, ,that/en, ,measure/en, ,the/en, ,sparsity/en, ,of/en, ,activations/en,./w, ,args/en,:/w, ,x/en,:/w, ,tensor/en, ,returns/en,:/w, ,nothing/en, ,"/w,"/w,"/w, ,#, ,remove/en, ,'/w,tower/en,_,[/w,0/m,-/w,9/m,]/w,//w,'/w, ,from/en, ,the/en, ,name/en, ,in/en, ,case/en, ,this/en, ,is/en, ,a/en, ,multi/en,-/w,gpu/en, ,training/en, ,#, ,session/en,./w, ,this/en, ,helps/en, ,the/en, ,clarity/en, ,of/en, ,presentation/en, ,on/en, ,tensorboard/en,./w, ,tensor/en,_,name/en, ,=/w, ,re/en,./w,sub/en,(/w,'/w,%/w,s/en,_,[/w,0/m,-/w,9/m,]/w,*/w,//w,'/w, ,%/w, ,tower/en,_,name/en,,/w, ,'/w,'/w,,/w, ,x/en,./w,op/en,./w,name/en,)/w, ,tf/en,./w,summary/en,./w,histogram/en,(/w,tensor/en,_,name/en, ,+/w, ,'/w,//w,activations/en,'/w,,/w, ,x/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,tensor/en,_,name/en, ,+/w, ,'/w,//w,sparsity/en,'/w,,/w, ,tf/en,./w,nn/en,./w,zero/en,_,fraction/en,(/w,x/en,)/w,)/w, ,def/en, ,_,variable/en,_,on/en,_,cpu/en,(/w,name/en,,/w, ,shape/en,,/w, ,initializer/en,)/w,:/w, ,"/w,"/w,"/w,helper/en, ,to/en, ,create/en, ,a/en, ,variable/en, ,stored/en, ,on/en, ,cpu/en, ,memory/en,./w, ,args/en,:/w, ,name/en,:/w, ,name/en, ,of/en, ,the/en, ,variable/en, ,shape/en,:/w, ,list/en, ,of/en, ,ints/en, ,initializer/en,:/w, ,initializer/en, ,for/en, ,variable/en, ,returns/en,:/w, ,variable/en, ,tensor/en, ,"/w,"/w,"/w, ,with/en, ,tf/en,./w,device/en,(/w,'/w,//w,cpu/en,:/w,0/m,'/w,)/w,:/w, ,var/en, ,=/w, ,tf/en,./w,get/en,_,variable/en,(/w,name/en,,/w, ,shape/en,,/w, ,initializer/en,=/w,initializer/en,)/w, ,return/en, ,var/en, ,def/en, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,name/en,,/w, ,shape/en,,/w, ,stddev/en,,/w, ,wd/en,)/w,:/w, ,"/w,"/w,"/w,helper/en, ,to/en, ,create/en, ,an/en, ,initialized/en, ,variable/en, ,with/en, ,weight/en, ,decay/en,./w, ,note/en, ,that/en, ,the/en, ,variable/en, ,is/en, ,initialized/en, ,with/en, ,a/en, ,truncated/en, ,normal/en, ,distribution/en,./w, ,a/en, ,weight/en, ,decay/en, ,is/en, ,added/en, ,only/en, ,if/en, ,one/en, ,is/en, ,specified/en,./w, ,args/en,:/w, ,name/en,:/w, ,name/en, ,of/en, ,the/en, ,variable/en, ,shape/en,:/w, ,list/en, ,of/en, ,ints/en, ,stddev/en,:/w, ,standard/en, ,deviation/en, ,of/en, ,a/en, ,truncated/en, ,gaussian/en, ,wd/en,:/w, ,add/en, ,l/en,2/m,loss/en, ,weight/en, ,decay/en, ,multiplied/en, ,by/en, ,this/en, ,float/en,./w, ,if/en, ,none/en,,/w, ,weight/en, ,decay/en, ,is/en, ,not/en, ,added/en, ,for/en, ,this/en, ,variable/en,./w, ,returns/en,:/w, ,variable/en, ,tensor/en, ,"/w,"/w,"/w, ,var/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,name/en,,/w, ,shape/en,,/w, ,tf/en,./w,truncated/en,_,normal/en,_,initializer/en,(/w,stddev/en,=/w,stddev/en,)/w,)/w, ,if/en, ,wd/en,:/w, ,weight/en,_,decay/en, ,=/w, ,tf/en,./w,multiply/en,(/w,tf/en,./w,nn/en,./w,l/en,2/m,_,loss/en,(/w,var/en,)/w,,/w, ,wd/en,,/w, ,name/en,=/w,'/w,weight/en,_,loss/en,'/w,)/w, ,tf/en,./w,add/en,_,to/en,_,collection/en,(/w,'/w,losses/en,'/w,,/w, ,weight/en,_,decay/en,)/w, ,return/en, ,var/en, ,def/en, ,distorted/en,_,inputs/en,(/w,)/w,:/w, ,"/w,"/w,"/w,construct/en, ,distorted/en, ,input/en, ,for/en, ,cifar/en, ,training/en, ,using/en, ,the/en, ,reader/en, ,ops/en,./w, ,returns/en,:/w, ,images/en,:/w, ,images/en,./w, ,4/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,3/m,]/w, ,size/en,./w, ,labels/en,:/w, ,labels/en,./w, ,1/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,]/w, ,size/en,./w, ,raises/en,:/w, ,valueerror/en,:/w, ,if/en, ,no/en, ,data/en,_,dir/en, ,"/w,"/w,"/w, ,if/en, ,not/en, ,flags/en,./w,data/en,_,dir/en,:/w, ,raise/en, ,valueerror/en,(/w,'/w,please/en, ,supply/en, ,a/en, ,data/en,_,dir/en,'/w,)/w, ,data/en,_,dir/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,flags/en,./w,data/en,_,dir/en,,/w, ,'/w,cifar/en,-/w,10/m,-/w,batches/en,-/w,bin/en,'/w,)/w, ,return/en, ,cifar/en,10/m,_,input/en,./w,distorted/en,_,inputs/en,(/w,data/en,_,dir/en,=/w,data/en,_,dir/en,,/w, ,batch/en,_,size/en,=/w,flags/en,./w,batch/en,_,size/en,)/w, ,def/en, ,inputs/en,(/w,eval/en,_,data/en,)/w,:/w, ,"/w,"/w,"/w,construct/en, ,input/en, ,for/en, ,cifar/en, ,evaluation/en, ,using/en, ,the/en, ,reader/en, ,ops/en,./w, ,args/en,:/w, ,eval/en,_,data/en,:/w, ,bool/en,,/w, ,indicating/en, ,if/en, ,one/en, ,should/en, ,use/en, ,the/en, ,train/en, ,or/en, ,eval/en, ,data/en, ,set/en,./w, ,returns/en,:/w, ,images/en,:/w, ,images/en,./w, ,4/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,3/m,]/w, ,size/en,./w, ,labels/en,:/w, ,labels/en,./w, ,1/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,]/w, ,size/en,./w, ,raises/en,:/w, ,valueerror/en,:/w, ,if/en, ,no/en, ,data/en,_,dir/en, ,"/w,"/w,"/w, ,if/en, ,not/en, ,flags/en,./w,data/en,_,dir/en,:/w, ,raise/en, ,valueerror/en,(/w,'/w,please/en, ,supply/en, ,a/en, ,data/en,_,dir/en,'/w,)/w, ,data/en,_,dir/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,flags/en,./w,data/en,_,dir/en,,/w, ,'/w,cifar/en,-/w,10/m,-/w,batches/en,-/w,bin/en,'/w,)/w, ,return/en, ,cifar/en,10/m,_,input/en,./w,inputs/en,(/w,eval/en,_,data/en,=/w,eval/en,_,data/en,,/w, ,data/en,_,dir/en,=/w,data/en,_,dir/en,,/w, ,batch/en,_,size/en,=/w,flags/en,./w,batch/en,_,size/en,)/w, ,def/en, ,inference/en,(/w,images/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,cifar/en,-/w,10/m, ,model/en,./w, ,args/en,:/w, ,images/en,:/w, ,images/en, ,returned/en, ,from/en, ,distorted/en,_,inputs/en,(/w,)/w, ,or/en, ,inputs/en,(/w,)/w,./w, ,returns/en,:/w, ,logits/en,./w, ,"/w,"/w,"/w, ,#, ,we/en, ,instantiate/en, ,all/en, ,variables/en, ,using/en, ,tf/en,./w,get/en,_,variable/en,(/w,)/w, ,instead/en, ,of/en, ,#, ,tf/en,./w,variable/en,(/w,)/w, ,in/en, ,order/en, ,to/en, ,share/en, ,variables/en, ,across/en, ,multiple/en, ,gpu/en, ,training/en, ,runs/en,./w, ,#, ,if/en, ,we/en, ,only/en, ,ran/en, ,this/en, ,model/en, ,on/en, ,a/en, ,single/en, ,gpu/en,,/w, ,we/en, ,could/en, ,simplify/en, ,this/en, ,function/en, ,#, ,by/en, ,replacing/en, ,all/en, ,instances/en, ,of/en, ,tf/en,./w,get/en,_,variable/en,(/w,)/w, ,with/en, ,tf/en,./w,variable/en,(/w,)/w,./w, ,#, ,#, ,conv/en,1/m, ,with/en, ,tf/en,./w,variable/en,_,scope/en,(/w,'/w,conv/en,1/m,'/w,)/w, ,as/en, ,scope/en,:/w, ,kernel/en, ,=/w, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,'/w,weights/en,'/w,,/w, ,shape/en,=/w,[/w,5/m,,/w, ,5/m,,/w, ,3/m,,/w, ,64/m,]/w,,/w, ,stddev/en,=/w,1/m,e/en,-/w,4/m,,/w, ,wd/en,=/w,0.0/m,)/w, ,conv/en, ,=/w, ,tf/en,./w,nn/en,./w,conv/en,2/m,d/en,(/w,images/en,,/w, ,kernel/en,,/w, ,[/w,1/m,,/w, ,1/m,,/w, ,1/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w, ,biases/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,'/w,biases/en,'/w,,/w, ,[/w,64/m,]/w,,/w, ,tf/en,./w,constant/en,_,initializer/en,(/w,0.0/m,)/w,)/w, ,bias/en, ,=/w, ,tf/en,./w,nn/en,./w,bias/en,_,add/en,(/w,conv/en,,/w, ,biases/en,)/w, ,conv/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,bias/en,,/w, ,name/en,=/w,scope/en,./w,name/en,)/w, ,_,activation/en,_,summary/en,(/w,conv/en,1/m,)/w, ,#, ,pool/en,1/m, ,pool/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,max/en,_,pool/en,(/w,conv/en,1/m,,/w, ,ksize/en,=/w,[/w,1/m,,/w, ,3/m,,/w, ,3/m,,/w, ,1/m,]/w,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,,/w, ,name/en,=/w,'/w,pool/en,1/m,'/w,)/w, ,#, ,norm/en,1/m, ,norm/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,lrn/en,(/w,pool/en,1/m,,/w, ,4/m,,/w, ,bias/en,=/w,1.0/m,,/w, ,alpha/en,=/w,0.001/m, ,//w, ,9.0/m,,/w, ,beta/en,=/w,0.75/m,,/w, ,name/en,=/w,'/w,norm/en,1/m,'/w,)/w, ,#, ,conv/en,2/m, ,with/en, ,tf/en,./w,variable/en,_,scope/en,(/w,'/w,conv/en,2/m,'/w,)/w, ,as/en, ,scope/en,:/w, ,kernel/en, ,=/w, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,'/w,weights/en,'/w,,/w, ,shape/en,=/w,[/w,5/m,,/w, ,5/m,,/w, ,64/m,,/w, ,64/m,]/w,,/w, ,stddev/en,=/w,1/m,e/en,-/w,4/m,,/w, ,wd/en,=/w,0.0/m,)/w, ,conv/en, ,=/w, ,tf/en,./w,nn/en,./w,conv/en,2/m,d/en,(/w,norm/en,1/m,,/w, ,kernel/en,,/w, ,[/w,1/m,,/w, ,1/m,,/w, ,1/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,)/w, ,biases/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,'/w,biases/en,'/w,,/w, ,[/w,64/m,]/w,,/w, ,tf/en,./w,constant/en,_,initializer/en,(/w,0.1/m,)/w,)/w, ,bias/en, ,=/w, ,tf/en,./w,nn/en,./w,bias/en,_,add/en,(/w,conv/en,,/w, ,biases/en,)/w, ,conv/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,bias/en,,/w, ,name/en,=/w,scope/en,./w,name/en,)/w, ,_,activation/en,_,summary/en,(/w,conv/en,2/m,)/w, ,#, ,norm/en,2/m, ,norm/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,lrn/en,(/w,conv/en,2/m,,/w, ,4/m,,/w, ,bias/en,=/w,1.0/m,,/w, ,alpha/en,=/w,0.001/m, ,//w, ,9.0/m,,/w, ,beta/en,=/w,0.75/m,,/w, ,name/en,=/w,'/w,norm/en,2/m,'/w,)/w, ,#, ,pool/en,2/m, ,pool/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,max/en,_,pool/en,(/w,norm/en,2/m,,/w, ,ksize/en,=/w,[/w,1/m,,/w, ,3/m,,/w, ,3/m,,/w, ,1/m,]/w,,/w, ,strides/en,=/w,[/w,1/m,,/w, ,2/m,,/w, ,2/m,,/w, ,1/m,]/w,,/w, ,padding/en,=/w,'/w,same/en,'/w,,/w, ,name/en,=/w,'/w,pool/en,2/m,'/w,)/w, ,#, ,local/en,3/m, ,with/en, ,tf/en,./w,variable/en,_,scope/en,(/w,'/w,local/en,3/m,'/w,)/w, ,as/en, ,scope/en,:/w, ,#, ,move/en, ,everything/en, ,into/en, ,depth/en, ,so/en, ,we/en, ,can/en, ,perform/en, ,a/en, ,single/en, ,matrix/en, ,multiply/en,./w, ,dim/en, ,=/w, ,1/m, ,for/en, ,d/en, ,in/en, ,pool/en,2/m,./w,get/en,_,shape/en,(/w,)/w,[/w,1/m,:/w,]/w,./w,as/en,_,list/en,(/w,)/w,:/w, ,dim/en, ,*/w,=/w, ,d/en, ,reshape/en, ,=/w, ,tf/en,./w,reshape/en,(/w,pool/en,2/m,,/w, ,[/w,flags/en,./w,batch/en,_,size/en,,/w, ,dim/en,]/w,)/w, ,weights/en, ,=/w, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,'/w,weights/en,'/w,,/w, ,shape/en,=/w,[/w,dim/en,,/w, ,384/m,]/w,,/w, ,stddev/en,=/w,0.04/m,,/w, ,wd/en,=/w,0.004/m,)/w, ,biases/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,'/w,biases/en,'/w,,/w, ,[/w,384/m,]/w,,/w, ,tf/en,./w,constant/en,_,initializer/en,(/w,0.1/m,)/w,)/w, ,local/en,3/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,reshape/en,,/w, ,weights/en,)/w, ,+/w, ,biases/en,,/w, ,name/en,=/w,scope/en,./w,name/en,)/w, ,_,activation/en,_,summary/en,(/w,local/en,3/m,)/w, ,#, ,local/en,4/m, ,with/en, ,tf/en,./w,variable/en,_,scope/en,(/w,'/w,local/en,4/m,'/w,)/w, ,as/en, ,scope/en,:/w, ,weights/en, ,=/w, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,'/w,weights/en,'/w,,/w, ,shape/en,=/w,[/w,384/m,,/w, ,192/m,]/w,,/w, ,stddev/en,=/w,0.04/m,,/w, ,wd/en,=/w,0.004/m,)/w, ,biases/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,'/w,biases/en,'/w,,/w, ,[/w,192/m,]/w,,/w, ,tf/en,./w,constant/en,_,initializer/en,(/w,0.1/m,)/w,)/w, ,local/en,4/m, ,=/w, ,tf/en,./w,nn/en,./w,relu/en,(/w,tf/en,./w,matmul/en,(/w,local/en,3/m,,/w, ,weights/en,)/w, ,+/w, ,biases/en,,/w, ,name/en,=/w,scope/en,./w,name/en,)/w, ,_,activation/en,_,summary/en,(/w,local/en,4/m,)/w, ,#, ,softmax/en,,/w, ,i/en,./w,e/en,./w, ,softmax/en,(/w,wx/en, ,+/w, ,b/en,)/w, ,with/en, ,tf/en,./w,variable/en,_,scope/en,(/w,'/w,softmax/en,_,linear/en,'/w,)/w, ,as/en, ,scope/en,:/w, ,weights/en, ,=/w, ,_,variable/en,_,with/en,_,weight/en,_,decay/en,(/w,'/w,weights/en,'/w,,/w, ,[/w,192/m,,/w, ,num/en,_,classes/en,]/w,,/w, ,stddev/en,=/w,1/m,//w,192.0/m,,/w, ,wd/en,=/w,0.0/m,)/w, ,biases/en, ,=/w, ,_,variable/en,_,on/en,_,cpu/en,(/w,'/w,biases/en,'/w,,/w, ,[/w,num/en,_,classes/en,]/w,,/w, ,tf/en,./w,constant/en,_,initializer/en,(/w,0.0/m,)/w,)/w, ,softmax/en,_,linear/en, ,=/w, ,tf/en,./w,add/en,(/w,tf/en,./w,matmul/en,(/w,local/en,4/m,,/w, ,weights/en,)/w,,/w, ,biases/en,,/w, ,name/en,=/w,scope/en,./w,name/en,)/w, ,_,activation/en,_,summary/en,(/w,softmax/en,_,linear/en,)/w, ,return/en, ,softmax/en,_,linear/en, ,def/en, ,loss/en,(/w,logits/en,,/w, ,labels/en,)/w,:/w, ,"/w,"/w,"/w,add/en, ,l/en,2/m,loss/en, ,to/en, ,all/en, ,the/en, ,trainable/en, ,variables/en,./w, ,add/en, ,summary/en, ,for/en, ,for/en, ,"/w,loss/en,"/w, ,and/en, ,"/w,loss/en,//w,avg/en,"/w,./w, ,args/en,:/w, ,logits/en,:/w, ,logits/en, ,from/en, ,inference/en,(/w,)/w,./w, ,labels/en,:/w, ,labels/en, ,from/en, ,distorted/en,_,inputs/en, ,or/en, ,inputs/en,(/w,)/w,./w, ,1/m,-/w,d/en, ,tensor/en, ,of/en, ,shape/en, ,[/w,batch/en,_,size/en,]/w, ,returns/en,:/w, ,loss/en, ,tensor/en, ,of/en, ,type/en, ,float/en,./w, ,"/w,"/w,"/w, ,#, ,calculate/en, ,the/en, ,average/en, ,cross/en, ,entropy/en, ,loss/en, ,across/en, ,the/en, ,batch/en,./w, ,labels/en, ,=/w, ,tf/en,./w,cast/en,(/w,labels/en,,/w, ,tf/en,./w,int/en,64/m,)/w, ,cross/en,_,entropy/en, ,=/w, ,tf/en,./w,nn/en,./w,sparse/en,_,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w, ,logits/en,=/w,logits/en,,/w, ,labels/en,=/w,labels/en,,/w, ,name/en,=/w,'/w,cross/en,_,entropy/en,_,per/en,_,example/en,'/w,)/w, ,cross/en,_,entropy/en,_,mean/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,cross/en,_,entropy/en,,/w, ,name/en,=/w,'/w,cross/en,_,entropy/en,'/w,)/w, ,tf/en,./w,add/en,_,to/en,_,collection/en,(/w,'/w,losses/en,'/w,,/w, ,cross/en,_,entropy/en,_,mean/en,)/w, ,#, ,the/en, ,total/en, ,loss/en, ,is/en, ,defined/en, ,as/en, ,the/en, ,cross/en, ,entropy/en, ,loss/en, ,plus/en, ,all/en, ,of/en, ,the/en, ,weight/en, ,#, ,decay/en, ,terms/en, ,(/w,l/en,2/m, ,loss/en,)/w,./w, ,return/en, ,tf/en,./w,add/en,_,n/en,(/w,tf/en,./w,get/en,_,collection/en,(/w,'/w,losses/en,'/w,)/w,,/w, ,name/en,=/w,'/w,total/en,_,loss/en,'/w,)/w, ,def/en, ,_,add/en,_,loss/en,_,summaries/en,(/w,total/en,_,loss/en,)/w,:/w, ,"/w,"/w,"/w,add/en, ,summaries/en, ,for/en, ,losses/en, ,in/en, ,cifar/en,-/w,10/m, ,model/en,./w, ,generates/en, ,moving/en, ,average/en, ,for/en, ,all/en, ,losses/en, ,and/en, ,associated/en, ,summaries/en, ,for/en, ,visualizing/en, ,the/en, ,performance/en, ,of/en, ,the/en, ,network/en,./w, ,args/en,:/w, ,total/en,_,loss/en,:/w, ,total/en, ,loss/en, ,from/en, ,loss/en,(/w,)/w,./w, ,returns/en,:/w, ,loss/en,_,averages/en,_,op/en,:/w, ,op/en, ,for/en, ,generating/en, ,moving/en, ,averages/en, ,of/en, ,losses/en,./w, ,"/w,"/w,"/w, ,#, ,compute/en, ,the/en, ,moving/en, ,average/en, ,of/en, ,all/en, ,individual/en, ,losses/en, ,and/en, ,the/en, ,total/en, ,loss/en,./w, ,loss/en,_,averages/en, ,=/w, ,tf/en,./w,train/en,./w,exponentialmovingaverage/en,(/w,0.9/m,,/w, ,name/en,=/w,'/w,avg/en,'/w,)/w, ,losses/en, ,=/w, ,tf/en,./w,get/en,_,collection/en,(/w,'/w,losses/en,'/w,)/w, ,loss/en,_,averages/en,_,op/en, ,=/w, ,loss/en,_,averages/en,./w,apply/en,(/w,losses/en, ,+/w, ,[/w,total/en,_,loss/en,]/w,)/w, ,#, ,attach/en, ,a/en, ,scalar/en, ,summary/en, ,to/en, ,all/en, ,individual/en, ,losses/en, ,and/en, ,the/en, ,total/en, ,loss/en,;/w, ,do/en, ,the/en, ,#, ,same/en, ,for/en, ,the/en, ,averaged/en, ,version/en, ,of/en, ,the/en, ,losses/en,./w, ,for/en, ,l/en, ,in/en, ,losses/en, ,+/w, ,[/w,total/en,_,loss/en,]/w,:/w, ,#, ,name/en, ,each/en, ,loss/en, ,as/en, ,'/w,(/w,raw/en,)/w,'/w, ,and/en, ,name/en, ,the/en, ,moving/en, ,average/en, ,version/en, ,of/en, ,the/en, ,loss/en, ,#, ,as/en, ,the/en, ,original/en, ,loss/en, ,name/en,./w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,l/en,./w,op/en,./w,name/en, ,+/w,'/w, ,(/w,raw/en,)/w,'/w,,/w, ,l/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,l/en,./w,op/en,./w,name/en,,/w, ,loss/en,_,averages/en,./w,average/en,(/w,l/en,)/w,)/w, ,return/en, ,loss/en,_,averages/en,_,op/en, ,def/en, ,train/en,(/w,total/en,_,loss/en,,/w, ,global/en,_,step/en,)/w,:/w, ,"/w,"/w,"/w,train/en, ,cifar/en,-/w,10/m, ,model/en,./w, ,create/en, ,an/en, ,optimizer/en, ,and/en, ,apply/en, ,to/en, ,all/en, ,trainable/en, ,variables/en,./w, ,add/en, ,moving/en, ,average/en, ,for/en, ,all/en, ,trainable/en, ,variables/en,./w, ,args/en,:/w, ,total/en,_,loss/en,:/w, ,total/en, ,loss/en, ,from/en, ,loss/en,(/w,)/w,./w, ,global/en,_,step/en,:/w, ,integer/en, ,variable/en, ,counting/en, ,the/en, ,number/en, ,of/en, ,training/en, ,steps/en, ,processed/en,./w, ,returns/en,:/w, ,train/en,_,op/en,:/w, ,op/en, ,for/en, ,training/en,./w, ,"/w,"/w,"/w, ,#, ,variables/en, ,that/en, ,affect/en, ,learning/en, ,rate/en,./w, ,num/en,_,batches/en,_,per/en,_,epoch/en, ,=/w, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,//w, ,flags/en,./w,batch/en,_,size/en, ,decay/en,_,steps/en, ,=/w, ,int/en,(/w,num/en,_,batches/en,_,per/en,_,epoch/en, ,*/w, ,num/en,_,epochs/en,_,per/en,_,decay/en,)/w, ,#, ,decay/en, ,the/en, ,learning/en, ,rate/en, ,exponentially/en, ,based/en, ,on/en, ,the/en, ,number/en, ,of/en, ,steps/en,./w, ,lr/en, ,=/w, ,tf/en,./w,train/en,./w,exponential/en,_,decay/en,(/w,initial/en,_,learning/en,_,rate/en,,/w, ,global/en,_,step/en,,/w, ,decay/en,_,steps/en,,/w, ,learning/en,_,rate/en,_,decay/en,_,factor/en,,/w, ,staircase/en,=/w,true/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,'/w,learning/en,_,rate/en,'/w,,/w, ,lr/en,)/w, ,#, ,generate/en, ,moving/en, ,averages/en, ,of/en, ,all/en, ,losses/en, ,and/en, ,associated/en, ,summaries/en,./w, ,loss/en,_,averages/en,_,op/en, ,=/w, ,_,add/en,_,loss/en,_,summaries/en,(/w,total/en,_,loss/en,)/w, ,#, ,compute/en, ,gradients/en,./w, ,with/en, ,tf/en,./w,control/en,_,dependencies/en,(/w,[/w,loss/en,_,averages/en,_,op/en,]/w,)/w,:/w, ,opt/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,lr/en,)/w, ,grads/en, ,=/w, ,opt/en,./w,compute/en,_,gradients/en,(/w,total/en,_,loss/en,)/w, ,#, ,apply/en, ,gradients/en,./w, ,apply/en,_,gradient/en,_,op/en, ,=/w, ,opt/en,./w,apply/en,_,gradients/en,(/w,grads/en,,/w, ,global/en,_,step/en,=/w,global/en,_,step/en,)/w, ,#, ,add/en, ,histograms/en, ,for/en, ,trainable/en, ,variables/en,./w, ,for/en, ,var/en, ,in/en, ,tf/en,./w,trainable/en,_,variables/en,(/w,)/w,:/w, ,tf/en,./w,summary/en,./w,histogram/en,(/w,var/en,./w,op/en,./w,name/en,,/w, ,var/en,)/w, ,#, ,add/en, ,histograms/en, ,for/en, ,gradients/en,./w, ,for/en, ,grad/en,,/w, ,var/en, ,in/en, ,grads/en,:/w, ,if/en, ,grad/en, ,is/en, ,not/en, ,none/en,:/w, ,tf/en,./w,summary/en,./w,histogram/en,(/w,var/en,./w,op/en,./w,name/en, ,+/w, ,'/w,//w,gradients/en,'/w,,/w, ,grad/en,)/w, ,#, ,track/en, ,the/en, ,moving/en, ,averages/en, ,of/en, ,all/en, ,trainable/en, ,variables/en,./w, ,variable/en,_,averages/en, ,=/w, ,tf/en,./w,train/en,./w,exponentialmovingaverage/en,(/w, ,moving/en,_,average/en,_,decay/en,,/w, ,global/en,_,step/en,)/w, ,variables/en,_,averages/en,_,op/en, ,=/w, ,variable/en,_,averages/en,./w,apply/en,(/w,tf/en,./w,trainable/en,_,variables/en,(/w,)/w,)/w, ,with/en, ,tf/en,./w,control/en,_,dependencies/en,(/w,[/w,apply/en,_,gradient/en,_,op/en,,/w, ,variables/en,_,averages/en,_,op/en,]/w,)/w,:/w, ,train/en,_,op/en, ,=/w, ,tf/en,./w,no/en,_,op/en,(/w,name/en,=/w,'/w,train/en,'/w,)/w, ,return/en, ,train/en,_,op/en, ,def/en, ,maybe/en,_,download/en,_,and/en,_,extract/en,(/w,)/w,:/w, ,"/w,"/w,"/w,download/en, ,and/en, ,extract/en, ,the/en, ,tarball/en, ,from/en, ,alex/en,'/w,s/en, ,website/en,./w,"/w,"/w,"/w, ,dest/en,_,directory/en, ,=/w, ,flags/en,./w,data/en,_,dir/en, ,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,dest/en,_,directory/en,)/w,:/w, ,os/en,./w,makedirs/en,(/w,dest/en,_,directory/en,)/w, ,filename/en, ,=/w, ,data/en,_,url/en,./w,split/en,(/w,'/w,//w,'/w,)/w,[/w,-/w,1/m,]/w, ,filepath/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,dest/en,_,directory/en,,/w, ,filename/en,)/w, ,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,filepath/en,)/w,:/w, ,def/en, ,_,progress/en,(/w,count/en,,/w, ,block/en,_,size/en,,/w, ,total/en,_,size/en,)/w,:/w, ,sys/en,./w,stdout/en,./w,write/en,(/w,'/w,\/w,r/en,>,>, ,downloading/en, ,%/w,s/en, ,%/w,./w,1/m,f/en,%/w,%/w,'/w, ,%/w, ,(/w,filename/en,,/w, ,float/en,(/w,count/en, ,*/w, ,block/en,_,size/en,)/w, ,//w, ,float/en,(/w,total/en,_,size/en,)/w, ,*/w, ,100.0/m,)/w,)/w, ,sys/en,./w,stdout/en,./w,flush/en,(/w,)/w, ,filepath/en,,/w, ,_, ,=/w, ,urllib/en,./w,request/en,./w,urlretrieve/en,(/w,data/en,_,url/en,,/w, ,filepath/en,,/w, ,reporthook/en,=/w,_,progress/en,)/w, ,print/en,(/w,)/w, ,statinfo/en, ,=/w, ,os/en,./w,stat/en,(/w,filepath/en,)/w, ,print/en,(/w,'/w,successfully/en, ,downloaded/en,'/w,,/w, ,filename/en,,/w, ,statinfo/en,./w,st/en,_,size/en,,/w, ,'/w,bytes/en,./w,'/w,)/w, ,tarfile/en,./w,open/en,(/w,filepath/en,,/w, ,'/w,r/en,:/w,gz/en,'/w,)/w,./w,extractall/en,(/w,dest/en,_,directory/en,)/w,cifar/en,10/m,_,train/en,./w,py/en,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,a/en, ,binary/en, ,to/en, ,train/en, ,cifar/en,-/w,10/m, ,using/en, ,a/en, ,single/en, ,gpu/en,./w, ,accuracy/en,:/w, ,cifar/en,10/m,_,train/en,./w,py/en, ,achieves/en, ,~/w,86%/mq, ,accuracy/en, ,after/en, ,100/m,k/en, ,steps/en, ,(/w,256/m, ,epochs/en, ,of/en, ,data/en,)/w, ,as/en, ,judged/en, ,by/en, ,cifar/en,10/m,_,eval/en,./w,py/en,./w, ,speed/en,:/w, ,with/en, ,batch/en,_,size/en, ,128/m,./w, ,system/en, ,|/w, ,step/en, ,time/en, ,(/w,sec/en,//w,batch/en,)/w, ,|/w, ,accuracy/en, ,------------------------------------------------------------------/nrf, ,1/m, ,tesla/en, ,k/en,20/m,m/en, ,|/w, ,0.35/m,-/w,0.60/m, ,|/w, ,~/w,86%/mq, ,at/en, ,60/m,k/en, ,steps/en, ,(/w,5/m, ,hours/en,)/w, ,1/m, ,tesla/en, ,k/en,40/m,m/en, ,|/w, ,0.25/m,-/w,0.35/m, ,|/w, ,~/w,86%/mq, ,at/en, ,100/m,k/en, ,steps/en, ,(/w,4/m, ,hours/en,)/w, ,usage/en,:/w, ,please/en, ,see/en, ,the/en, ,tutorial/en, ,and/en, ,website/en, ,for/en, ,how/en, ,to/en, ,download/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,set/en,,/w, ,compile/en, ,the/en, ,program/en, ,and/en, ,train/en, ,the/en, ,model/en,./w, ,http/en,:/w,//w,//w,tensorflow/en,./w,org/en,//w,tutorials/en,//w,deep/en,_,cnn/en,//w, ,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,datetime/en, ,import/en, ,datetime/en, ,import/en, ,os/en,./w,path/en, ,import/en, ,time/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,import/en, ,cifar/en,10/m, ,flags/en, ,=/w, ,tf/en,./w,app/en,./w,flags/en,./w,flags/en, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,train/en,_,dir/en,'/w,,/w, ,'/w,./w,//w,cifar/en,10/m,_,train/en,'/w,,/w, ,"/w,"/w,"/w,directory/en, ,where/en, ,to/en, ,write/en, ,event/en, ,logs/en, ,"/w,"/w,"/w, ,"/w,"/w,"/w,and/en, ,checkpoint/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,max/en,_,steps/en,'/w,,/w, ,1000000/m,,/w, ,"/w,"/w,"/w,number/en, ,of/en, ,batches/en, ,to/en, ,run/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,boolean/en,(/w,'/w,log/en,_,device/en,_,placement/en,'/w,,/w, ,false/en,,/w, ,"/w,"/w,"/w,whether/en, ,to/en, ,log/en, ,device/en, ,placement/en,./w,"/w,"/w,"/w,)/w, ,def/en, ,train/en,(/w,)/w,:/w, ,"/w,"/w,"/w,train/en, ,cifar/en,-/w,10/m, ,for/en, ,a/en, ,number/en, ,of/en, ,steps/en,./w,"/w,"/w,"/w, ,with/en, ,tf/en,./w,graph/en,(/w,)/w,./w,as/en,_,default/en,(/w,)/w,:/w, ,global/en,_,step/en, ,=/w, ,tf/en,./w,variable/en,(/w,0/m,,/w, ,trainable/en,=/w,false/en,)/w, ,#, ,get/en, ,images/en, ,and/en, ,labels/en, ,for/en, ,cifar/en,-/w,10/m,./w, ,images/en,,/w, ,labels/en, ,=/w, ,cifar/en,10/m,./w,distorted/en,_,inputs/en,(/w,)/w, ,#, ,build/en, ,a/en, ,graph/en, ,that/en, ,computes/en, ,the/en, ,logits/en, ,predictions/en, ,from/en, ,the/en, ,#, ,inference/en, ,model/en,./w, ,logits/en, ,=/w, ,cifar/en,10/m,./w,inference/en,(/w,images/en,)/w, ,#, ,calculate/en, ,loss/en,./w, ,loss/en, ,=/w, ,cifar/en,10/m,./w,loss/en,(/w,logits/en,,/w, ,labels/en,)/w, ,#, ,build/en, ,a/en, ,graph/en, ,that/en, ,trains/en, ,the/en, ,model/en, ,with/en, ,one/en, ,batch/en, ,of/en, ,examples/en, ,and/en, ,#, ,updates/en, ,the/en, ,model/en, ,parameters/en,./w, ,train/en,_,op/en, ,=/w, ,cifar/en,10/m,./w,train/en,(/w,loss/en,,/w, ,global/en,_,step/en,)/w, ,#, ,create/en, ,a/en, ,saver/en,./w, ,saver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,tf/en,./w,global/en,_,variables/en,(/w,)/w,)/w, ,#, ,build/en, ,the/en, ,summary/en, ,operation/en, ,based/en, ,on/en, ,the/en, ,tf/en, ,collection/en, ,of/en, ,summaries/en,./w, ,summary/en,_,op/en, ,=/w, ,tf/en,./w,summary/en,./w,merge/en,_,all/en,(/w,)/w, ,#, ,build/en, ,an/en, ,initialization/en, ,operation/en, ,to/en, ,run/en, ,below/en,./w, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,#, ,start/en, ,running/en, ,operations/en, ,on/en, ,the/en, ,graph/en,./w, ,sess/en, ,=/w, ,tf/en,./w,session/en,(/w,config/en,=/w,tf/en,./w,configproto/en,(/w, ,log/en,_,device/en,_,placement/en,=/w,flags/en,./w,log/en,_,device/en,_,placement/en,)/w,)/w, ,sess/en,./w,run/en,(/w,init/en,)/w, ,#, ,start/en, ,the/en, ,queue/en, ,runners/en,./w, ,tf/en,./w,train/en,./w,start/en,_,queue/en,_,runners/en,(/w,sess/en,=/w,sess/en,)/w, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,summary/en,./w,filewriter/en,(/w,flags/en,./w,train/en,_,dir/en,,/w, ,graph/en,=/w,sess/en,./w,graph/en,)/w, ,for/en, ,step/en, ,in/en, ,xrange/en,(/w,flags/en,./w,max/en,_,steps/en,)/w,:/w, ,start/en,_,time/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,_,,/w, ,loss/en,_,value/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,train/en,_,op/en,,/w, ,loss/en,]/w,)/w, ,duration/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,-/w, ,start/en,_,time/en, ,assert/en, ,not/en, ,np/en,./w,isnan/en,(/w,loss/en,_,value/en,)/w,,/w, ,'/w,model/en, ,diverged/en, ,with/en, ,loss/en, ,=/w, ,nan/en,'/w, ,if/en, ,step/en, ,%/w, ,10/m, ,=/w,=/w, ,0/m,:/w, ,num/en,_,examples/en,_,per/en,_,step/en, ,=/w, ,flags/en,./w,batch/en,_,size/en, ,examples/en,_,per/en,_,sec/en, ,=/w, ,num/en,_,examples/en,_,per/en,_,step/en, ,//w, ,duration/en, ,sec/en,_,per/en,_,batch/en, ,=/w, ,float/en,(/w,duration/en,)/w, ,format/en,_,str/en, ,=/w, ,(/w,'/w,%/w,s/en,:/w, ,step/en, ,%/w,d/en,,/w, ,loss/en, ,=/w, ,%/w,./w,2/m,f/en, ,(/w,%/w,./w,1/m,f/en, ,examples/en,//w,sec/en,;/w, ,%/w,./w,3/m,f/en, ,'/w, ,'/w,sec/en,//w,batch/en,)/w,'/w,)/w, ,print/en, ,(/w,format/en,_,str/en, ,%/w, ,(/w,datetime/en,./w,now/en,(/w,)/w,,/w, ,step/en,,/w, ,loss/en,_,value/en,,/w, ,examples/en,_,per/en,_,sec/en,,/w, ,sec/en,_,per/en,_,batch/en,)/w,)/w, ,if/en, ,step/en, ,%/w, ,100/m, ,=/w,=/w, ,0/m,:/w, ,summary/en,_,str/en, ,=/w, ,sess/en,./w,run/en,(/w,summary/en,_,op/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,step/en,)/w, ,#, ,save/en, ,the/en, ,model/en, ,checkpoint/en, ,periodically/en,./w, ,if/en, ,step/en, ,%/w, ,1000/m, ,=/w,=/w, ,0/m, ,or/en, ,(/w,step/en, ,+/w, ,1/m,)/w, ,=/w,=/w, ,flags/en,./w,max/en,_,steps/en,:/w, ,checkpoint/en,_,path/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,flags/en,./w,train/en,_,dir/en,,/w, ,'/w,model/en,./w,ckpt/en,'/w,)/w, ,saver/en,./w,save/en,(/w,sess/en,,/w, ,checkpoint/en,_,path/en,,/w, ,global/en,_,step/en,=/w,step/en,)/w, ,def/en, ,main/en,(/w,argv/en,=/w,none/en,)/w,:/w, ,#, ,pylint/en,:/w, ,disable/en,=/w,unused/en,-/w,argument/en, ,cifar/en,10/m,./w,maybe/en,_,download/en,_,and/en,_,extract/en,(/w,)/w, ,if/en, ,tf/en,./w,gfile/en,./w,exists/en,(/w,flags/en,./w,train/en,_,dir/en,)/w,:/w, ,tf/en,./w,gfile/en,./w,deleterecursively/en,(/w,flags/en,./w,train/en,_,dir/en,)/w, ,tf/en,./w,gfile/en,./w,makedirs/en,(/w,flags/en,./w,train/en,_,dir/en,)/w, ,train/en,(/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,tf/en,./w,app/en,./w,run/en,(/w,)/w,cifar/en,10/m,_,input/en,./w,py/en,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,routine/en, ,for/en, ,decoding/en, ,the/en, ,cifar/en,-/w,10/m, ,binary/en, ,file/en, ,format/en,./w,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,os/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,#, ,process/en, ,images/en, ,of/en, ,this/en, ,size/en,./w, ,note/en, ,that/en, ,this/en, ,differs/en, ,from/en, ,the/en, ,original/en, ,cifar/en, ,#, ,image/en, ,size/en, ,of/en, ,32/m, ,x/en, ,32/m,./w, ,if/en, ,one/en, ,alters/en, ,this/en, ,number/en,,/w, ,then/en, ,the/en, ,entire/en, ,model/en, ,#, ,architecture/en, ,will/en, ,change/en, ,and/en, ,any/en, ,model/en, ,would/en, ,need/en, ,to/en, ,be/en, ,retrained/en,./w, ,image/en,_,size/en, ,=/w, ,24/m, ,#, ,global/en, ,constants/en, ,describing/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,set/en,./w, ,num/en,_,classes/en, ,=/w, ,10/m, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,=/w, ,50000/m, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,eval/en, ,=/w, ,10000/m, ,def/en, ,read/en,_,cifar/en,10/m,(/w,filename/en,_,queue/en,)/w,:/w, ,"/w,"/w,"/w,reads/en, ,and/en, ,parses/en, ,examples/en, ,from/en, ,cifar/en,10/m, ,data/en, ,files/en,./w, ,recommendation/en,:/w, ,if/en, ,you/en, ,want/en, ,n/en,-/w,way/en, ,read/en, ,parallelism/en,,/w, ,call/en, ,this/en, ,function/en, ,n/en, ,times/en,./w, ,this/en, ,will/en, ,give/en, ,you/en, ,n/en, ,independent/en, ,readers/en, ,reading/en, ,different/en, ,files/en, ,&/w, ,positions/en, ,within/en, ,those/en, ,files/en,,/w, ,which/en, ,will/en, ,give/en, ,better/en, ,mixing/en, ,of/en, ,examples/en,./w, ,args/en,:/w, ,filename/en,_,queue/en,:/w, ,a/en, ,queue/en, ,of/en, ,strings/en, ,with/en, ,the/en, ,filenames/en, ,to/en, ,read/en, ,from/en,./w, ,returns/en,:/w, ,an/en, ,object/en, ,representing/en, ,a/en, ,single/en, ,example/en,,/w, ,with/en, ,the/en, ,following/en, ,fields/en,:/w, ,height/en,:/w, ,number/en, ,of/en, ,rows/en, ,in/en, ,the/en, ,result/en, ,(/w,32/m,)/w, ,width/en,:/w, ,number/en, ,of/en, ,columns/en, ,in/en, ,the/en, ,result/en, ,(/w,32/m,)/w, ,depth/en,:/w, ,number/en, ,of/en, ,color/en, ,channels/en, ,in/en, ,the/en, ,result/en, ,(/w,3/m,)/w, ,key/en,:/w, ,a/en, ,scalar/en, ,string/en, ,tensor/en, ,describing/en, ,the/en, ,filename/en, ,&/w, ,record/en, ,number/en, ,for/en, ,this/en, ,example/en,./w, ,label/en,:/w, ,an/en, ,int/en,32/m, ,tensor/en, ,with/en, ,the/en, ,label/en, ,in/en, ,the/en, ,range/en, ,0/m,./w,./w,9/m,./w, ,uint/en,8/m,image/en,:/w, ,a/en, ,[/w,height/en,,/w, ,width/en,,/w, ,depth/en,]/w, ,uint/en,8/m, ,tensor/en, ,with/en, ,the/en, ,image/en, ,data/en, ,"/w,"/w,"/w, ,class/en, ,cifar/en,10/m,record/en,(/w,object/en,)/w,:/w, ,pass/en, ,result/en, ,=/w, ,cifar/en,10/m,record/en,(/w,)/w, ,#, ,dimensions/en, ,of/en, ,the/en, ,images/en, ,in/en, ,the/en, ,cifar/en,-/w,10/m, ,dataset/en,./w, ,#, ,see/en, ,http/en,:/w,//w,//w,www/en,./w,cs/en,./w,toronto/en,./w,edu/en,//w,~/w,kriz/en,//w,cifar/en,./w,html/en, ,for/en, ,a/en, ,description/en, ,of/en, ,the/en, ,#, ,input/en, ,format/en,./w, ,label/en,_,bytes/en, ,=/w, ,1/m, ,#, ,2/m, ,for/en, ,cifar/en,-/w,100/m, ,result/en,./w,height/en, ,=/w, ,32/m, ,result/en,./w,width/en, ,=/w, ,32/m, ,result/en,./w,depth/en, ,=/w, ,3/m, ,image/en,_,bytes/en, ,=/w, ,result/en,./w,height/en, ,*/w, ,result/en,./w,width/en, ,*/w, ,result/en,./w,depth/en, ,#, ,every/en, ,record/en, ,consists/en, ,of/en, ,a/en, ,label/en, ,followed/en, ,by/en, ,the/en, ,image/en,,/w, ,with/en, ,a/en, ,#, ,fixed/en, ,number/en, ,of/en, ,bytes/en, ,for/en, ,each/en,./w, ,record/en,_,bytes/en, ,=/w, ,label/en,_,bytes/en, ,+/w, ,image/en,_,bytes/en, ,#, ,read/en, ,a/en, ,record/en,,/w, ,getting/en, ,filenames/en, ,from/en, ,the/en, ,filename/en,_,queue/en,./w, ,no/en, ,#, ,header/en, ,or/en, ,footer/en, ,in/en, ,the/en, ,cifar/en,-/w,10/m, ,format/en,,/w, ,so/en, ,we/en, ,leave/en, ,header/en,_,bytes/en, ,#, ,and/en, ,footer/en,_,bytes/en, ,at/en, ,their/en, ,default/en, ,of/en, ,0/m,./w, ,reader/en, ,=/w, ,tf/en,./w,fixedlengthrecordreader/en,(/w,record/en,_,bytes/en,=/w,record/en,_,bytes/en,)/w, ,result/en,./w,key/en,,/w, ,value/en, ,=/w, ,reader/en,./w,read/en,(/w,filename/en,_,queue/en,)/w, ,#, ,convert/en, ,from/en, ,a/en, ,string/en, ,to/en, ,a/en, ,vector/en, ,of/en, ,uint/en,8/m, ,that/en, ,is/en, ,record/en,_,bytes/en, ,long/en,./w, ,record/en,_,bytes/en, ,=/w, ,tf/en,./w,decode/en,_,raw/en,(/w,value/en,,/w, ,tf/en,./w,uint/en,8/m,)/w, ,#, ,the/en, ,first/en, ,bytes/en, ,represent/en, ,the/en, ,label/en,,/w, ,which/en, ,we/en, ,convert/en, ,from/en, ,uint/en,8/m,-/w,>,int/en,32/m,./w, ,result/en,./w,label/en, ,=/w, ,tf/en,./w,cast/en,(/w, ,tf/en,./w,slice/en,(/w,record/en,_,bytes/en,,/w, ,[/w,0/m,]/w,,/w, ,[/w,label/en,_,bytes/en,]/w,)/w,,/w, ,tf/en,./w,int/en,32/m,)/w, ,#, ,the/en, ,remaining/en, ,bytes/en, ,after/en, ,the/en, ,label/en, ,represent/en, ,the/en, ,image/en,,/w, ,which/en, ,we/en, ,reshape/en, ,#, ,from/en, ,[/w,depth/en, ,*/w, ,height/en, ,*/w, ,width/en,]/w, ,to/en, ,[/w,depth/en,,/w, ,height/en,,/w, ,width/en,]/w,./w, ,depth/en,_,major/en, ,=/w, ,tf/en,./w,reshape/en,(/w,tf/en,./w,slice/en,(/w,record/en,_,bytes/en,,/w, ,[/w,label/en,_,bytes/en,]/w,,/w, ,[/w,image/en,_,bytes/en,]/w,)/w,,/w, ,[/w,result/en,./w,depth/en,,/w, ,result/en,./w,height/en,,/w, ,result/en,./w,width/en,]/w,)/w, ,#, ,convert/en, ,from/en, ,[/w,depth/en,,/w, ,height/en,,/w, ,width/en,]/w, ,to/en, ,[/w,height/en,,/w, ,width/en,,/w, ,depth/en,]/w,./w, ,result/en,./w,uint/en,8/m,image/en, ,=/w, ,tf/en,./w,transpose/en,(/w,depth/en,_,major/en,,/w, ,[/w,1/m,,/w, ,2/m,,/w, ,0/m,]/w,)/w, ,return/en, ,result/en, ,def/en, ,_,generate/en,_,image/en,_,and/en,_,label/en,_,batch/en,(/w,image/en,,/w, ,label/en,,/w, ,min/en,_,queue/en,_,examples/en,,/w, ,batch/en,_,size/en,)/w,:/w, ,"/w,"/w,"/w,construct/en, ,a/en, ,queued/en, ,batch/en, ,of/en, ,images/en, ,and/en, ,labels/en,./w, ,args/en,:/w, ,image/en,:/w, ,3/m,-/w,d/en, ,tensor/en, ,of/en, ,[/w,height/en,,/w, ,width/en,,/w, ,3/m,]/w, ,of/en, ,type/en,./w,float/en,32/m,./w, ,label/en,:/w, ,1/m,-/w,d/en, ,tensor/en, ,of/en, ,type/en,./w,int/en,32/m, ,min/en,_,queue/en,_,examples/en,:/w, ,int/en,32/m,,/w, ,minimum/en, ,number/en, ,of/en, ,samples/en, ,to/en, ,retain/en, ,in/en, ,the/en, ,queue/en, ,that/en, ,provides/en, ,of/en, ,batches/en, ,of/en, ,examples/en,./w, ,batch/en,_,size/en,:/w, ,number/en, ,of/en, ,images/en, ,per/en, ,batch/en,./w, ,returns/en,:/w, ,images/en,:/w, ,images/en,./w, ,4/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,,/w, ,height/en,,/w, ,width/en,,/w, ,3/m,]/w, ,size/en,./w, ,labels/en,:/w, ,labels/en,./w, ,1/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,]/w, ,size/en,./w, ,"/w,"/w,"/w, ,#, ,create/en, ,a/en, ,queue/en, ,that/en, ,shuffles/en, ,the/en, ,examples/en,,/w, ,and/en, ,then/en, ,#, ,read/en, ,'/w,batch/en,_,size/en,'/w, ,images/en, ,+/w, ,labels/en, ,from/en, ,the/en, ,example/en, ,queue/en,./w, ,num/en,_,preprocess/en,_,threads/en, ,=/w, ,16/m, ,images/en,,/w, ,label/en,_,batch/en, ,=/w, ,tf/en,./w,train/en,./w,shuffle/en,_,batch/en,(/w, ,[/w,image/en,,/w, ,label/en,]/w,,/w, ,batch/en,_,size/en,=/w,batch/en,_,size/en,,/w, ,num/en,_,threads/en,=/w,num/en,_,preprocess/en,_,threads/en,,/w, ,capacity/en,=/w,min/en,_,queue/en,_,examples/en, ,+/w, ,3/m, ,*/w, ,batch/en,_,size/en,,/w, ,min/en,_,after/en,_,dequeue/en,=/w,min/en,_,queue/en,_,examples/en,)/w, ,#, ,display/en, ,the/en, ,training/en, ,images/en, ,in/en, ,the/en, ,visualizer/en,./w, ,tf/en,./w,summary/en,./w,image/en,(/w,'/w,images/en,'/w,,/w, ,images/en,)/w, ,return/en, ,images/en,,/w, ,tf/en,./w,reshape/en,(/w,label/en,_,batch/en,,/w, ,[/w,batch/en,_,size/en,]/w,)/w, ,def/en, ,distorted/en,_,inputs/en,(/w,data/en,_,dir/en,,/w, ,batch/en,_,size/en,)/w,:/w, ,"/w,"/w,"/w,construct/en, ,distorted/en, ,input/en, ,for/en, ,cifar/en, ,training/en, ,using/en, ,the/en, ,reader/en, ,ops/en,./w, ,args/en,:/w, ,data/en,_,dir/en,:/w, ,path/en, ,to/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,directory/en,./w, ,batch/en,_,size/en,:/w, ,number/en, ,of/en, ,images/en, ,per/en, ,batch/en,./w, ,returns/en,:/w, ,images/en,:/w, ,images/en,./w, ,4/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,3/m,]/w, ,size/en,./w, ,labels/en,:/w, ,labels/en,./w, ,1/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,]/w, ,size/en,./w, ,"/w,"/w,"/w, ,filenames/en, ,=/w, ,[/w,os/en,./w,path/en,./w,join/en,(/w,data/en,_,dir/en,,/w, ,'/w,data/en,_,batch/en,_,%/w,d/en,./w,bin/en,'/w, ,%/w, ,i/en,)/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,1/m,,/w, ,6/m,)/w,]/w, ,for/en, ,f/en, ,in/en, ,filenames/en,:/w, ,if/en, ,not/en, ,tf/en,./w,gfile/en,./w,exists/en,(/w,f/en,)/w,:/w, ,raise/en, ,valueerror/en,(/w,'/w,failed/en, ,to/en, ,find/en, ,file/en,:/w, ,'/w, ,+/w, ,f/en,)/w, ,#, ,create/en, ,a/en, ,queue/en, ,that/en, ,produces/en, ,the/en, ,filenames/en, ,to/en, ,read/en,./w, ,filename/en,_,queue/en, ,=/w, ,tf/en,./w,train/en,./w,string/en,_,input/en,_,producer/en,(/w,filenames/en,)/w, ,#, ,read/en, ,examples/en, ,from/en, ,files/en, ,in/en, ,the/en, ,filename/en, ,queue/en,./w, ,read/en,_,input/en, ,=/w, ,read/en,_,cifar/en,10/m,(/w,filename/en,_,queue/en,)/w, ,reshaped/en,_,image/en, ,=/w, ,tf/en,./w,cast/en,(/w,read/en,_,input/en,./w,uint/en,8/m,image/en,,/w, ,tf/en,./w,float/en,32/m,)/w, ,height/en, ,=/w, ,image/en,_,size/en, ,width/en, ,=/w, ,image/en,_,size/en, ,#, ,image/en, ,processing/en, ,for/en, ,training/en, ,the/en, ,network/en,./w, ,note/en, ,the/en, ,many/en, ,random/en, ,#, ,distortions/en, ,applied/en, ,to/en, ,the/en, ,image/en,./w, ,#, ,randomly/en, ,crop/en, ,a/en, ,[/w,height/en,,/w, ,width/en,]/w, ,section/en, ,of/en, ,the/en, ,image/en,./w, ,distorted/en,_,image/en, ,=/w, ,tf/en,./w,random/en,_,crop/en,(/w,reshaped/en,_,image/en,,/w, ,[/w,height/en,,/w, ,width/en,,/w, ,3/m,]/w,)/w, ,#, ,randomly/en, ,flip/en, ,the/en, ,image/en, ,horizontally/en,./w, ,distorted/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,random/en,_,flip/en,_,left/en,_,right/en,(/w,distorted/en,_,image/en,)/w, ,#, ,because/en, ,these/en, ,operations/en, ,are/en, ,not/en, ,commutative/en,,/w, ,consider/en, ,randomizing/en, ,#, ,randomize/en, ,the/en, ,order/en, ,their/en, ,operation/en,./w, ,distorted/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,random/en,_,brightness/en,(/w,distorted/en,_,image/en,,/w, ,max/en,_,delta/en,=/w,63/m,)/w, ,distorted/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,random/en,_,contrast/en,(/w,distorted/en,_,image/en,,/w, ,lower/en,=/w,0.2/m,,/w, ,upper/en,=/w,1.8/m,)/w, ,#, ,subtract/en, ,off/en, ,the/en, ,mean/en, ,and/en, ,divide/en, ,by/en, ,the/en, ,variance/en, ,of/en, ,the/en, ,pixels/en,./w, ,float/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,per/en,_,image/en,_,standardization/en,(/w,distorted/en,_,image/en,)/w, ,#, ,ensure/en, ,that/en, ,the/en, ,random/en, ,shuffling/en, ,has/en, ,good/en, ,mixing/en, ,properties/en,./w, ,min/en,_,fraction/en,_,of/en,_,examples/en,_,in/en,_,queue/en, ,=/w, ,0.4/m, ,min/en,_,queue/en,_,examples/en, ,=/w, ,int/en,(/w,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,*/w, ,min/en,_,fraction/en,_,of/en,_,examples/en,_,in/en,_,queue/en,)/w, ,print/en, ,(/w,'/w,filling/en, ,queue/en, ,with/en, ,%/w,d/en, ,cifar/en, ,images/en, ,before/en, ,starting/en, ,to/en, ,train/en,./w, ,'/w, ,'/w,this/en, ,will/en, ,take/en, ,a/en, ,few/en, ,minutes/en,./w,'/w, ,%/w, ,min/en,_,queue/en,_,examples/en,)/w, ,#, ,generate/en, ,a/en, ,batch/en, ,of/en, ,images/en, ,and/en, ,labels/en, ,by/en, ,building/en, ,up/en, ,a/en, ,queue/en, ,of/en, ,examples/en,./w, ,return/en, ,_,generate/en,_,image/en,_,and/en,_,label/en,_,batch/en,(/w,float/en,_,image/en,,/w, ,read/en,_,input/en,./w,label/en,,/w, ,min/en,_,queue/en,_,examples/en,,/w, ,batch/en,_,size/en,)/w, ,def/en, ,inputs/en,(/w,eval/en,_,data/en,,/w, ,data/en,_,dir/en,,/w, ,batch/en,_,size/en,)/w,:/w, ,"/w,"/w,"/w,construct/en, ,input/en, ,for/en, ,cifar/en, ,evaluation/en, ,using/en, ,the/en, ,reader/en, ,ops/en,./w, ,args/en,:/w, ,eval/en,_,data/en,:/w, ,bool/en,,/w, ,indicating/en, ,if/en, ,one/en, ,should/en, ,use/en, ,the/en, ,train/en, ,or/en, ,eval/en, ,data/en, ,set/en,./w, ,data/en,_,dir/en,:/w, ,path/en, ,to/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,directory/en,./w, ,batch/en,_,size/en,:/w, ,number/en, ,of/en, ,images/en, ,per/en, ,batch/en,./w, ,returns/en,:/w, ,images/en,:/w, ,images/en,./w, ,4/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,image/en,_,size/en,,/w, ,3/m,]/w, ,size/en,./w, ,labels/en,:/w, ,labels/en,./w, ,1/m,d/en, ,tensor/en, ,of/en, ,[/w,batch/en,_,size/en,]/w, ,size/en,./w, ,"/w,"/w,"/w, ,if/en, ,not/en, ,eval/en,_,data/en,:/w, ,filenames/en, ,=/w, ,[/w,os/en,./w,path/en,./w,join/en,(/w,data/en,_,dir/en,,/w, ,'/w,data/en,_,batch/en,_,%/w,d/en,./w,bin/en,'/w, ,%/w, ,i/en,)/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,1/m,,/w, ,6/m,)/w,]/w, ,num/en,_,examples/en,_,per/en,_,epoch/en, ,=/w, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,else/en,:/w, ,filenames/en, ,=/w, ,[/w,os/en,./w,path/en,./w,join/en,(/w,data/en,_,dir/en,,/w, ,'/w,test/en,_,batch/en,./w,bin/en,'/w,)/w,]/w, ,num/en,_,examples/en,_,per/en,_,epoch/en, ,=/w, ,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,eval/en, ,for/en, ,f/en, ,in/en, ,filenames/en,:/w, ,if/en, ,not/en, ,tf/en,./w,gfile/en,./w,exists/en,(/w,f/en,)/w,:/w, ,raise/en, ,valueerror/en,(/w,'/w,failed/en, ,to/en, ,find/en, ,file/en,:/w, ,'/w, ,+/w, ,f/en,)/w, ,#, ,create/en, ,a/en, ,queue/en, ,that/en, ,produces/en, ,the/en, ,filenames/en, ,to/en, ,read/en,./w, ,filename/en,_,queue/en, ,=/w, ,tf/en,./w,train/en,./w,string/en,_,input/en,_,producer/en,(/w,filenames/en,)/w, ,#, ,read/en, ,examples/en, ,from/en, ,files/en, ,in/en, ,the/en, ,filename/en, ,queue/en,./w, ,read/en,_,input/en, ,=/w, ,read/en,_,cifar/en,10/m,(/w,filename/en,_,queue/en,)/w, ,reshaped/en,_,image/en, ,=/w, ,tf/en,./w,cast/en,(/w,read/en,_,input/en,./w,uint/en,8/m,image/en,,/w, ,tf/en,./w,float/en,32/m,)/w, ,height/en, ,=/w, ,image/en,_,size/en, ,width/en, ,=/w, ,image/en,_,size/en, ,#, ,image/en, ,processing/en, ,for/en, ,evaluation/en,./w, ,#, ,crop/en, ,the/en, ,central/en, ,[/w,height/en,,/w, ,width/en,]/w, ,of/en, ,the/en, ,image/en,./w, ,resized/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,resize/en,_,image/en,_,with/en,_,crop/en,_,or/en,_,pad/en,(/w,reshaped/en,_,image/en,,/w, ,width/en,,/w, ,height/en,)/w, ,#, ,subtract/en, ,off/en, ,the/en, ,mean/en, ,and/en, ,divide/en, ,by/en, ,the/en, ,variance/en, ,of/en, ,the/en, ,pixels/en,./w, ,float/en,_,image/en, ,=/w, ,tf/en,./w,image/en,./w,per/en,_,image/en,_,whitening/en,(/w,resized/en,_,image/en,)/w, ,#, ,ensure/en, ,that/en, ,the/en, ,random/en, ,shuffling/en, ,has/en, ,good/en, ,mixing/en, ,properties/en,./w, ,min/en,_,fraction/en,_,of/en,_,examples/en,_,in/en,_,queue/en, ,=/w, ,0.4/m, ,min/en,_,queue/en,_,examples/en, ,=/w, ,int/en,(/w,num/en,_,examples/en,_,per/en,_,epoch/en, ,*/w, ,min/en,_,fraction/en,_,of/en,_,examples/en,_,in/en,_,queue/en,)/w, ,#, ,generate/en, ,a/en, ,batch/en, ,of/en, ,images/en, ,and/en, ,labels/en, ,by/en, ,building/en, ,up/en, ,a/en, ,queue/en, ,of/en, ,examples/en,./w, ,return/en, ,_,generate/en,_,image/en,_,and/en,_,label/en,_,batch/en,(/w,float/en,_,image/en,,/w, ,read/en,_,input/en,./w,label/en,,/w, ,min/en,_,queue/en,_,examples/en,,/w, ,batch/en,_,size/en,)/w,0/m,x/en,4/m,:/w, ,评估/vn,模型/n,现在/t,可以/v,在/p,另/r,一部分/m,数据集/nw,上来/v,评估/vn,训练/vn,模型/n,的/u,性能/n,。/w,脚本/n,文件/n,cifar/en,10/m,_,eval/en,./w,py/en,对/p,模型/n,进行/v,了/u,评估/vn,，/w,利用/v, ,inference/en,(/w,)/w,函数/n,重构/v,模型/n,，/w,并/c,使用/v,了/u,在/p,评估/vn,数据集/nw,所有/b,10/m,,/w,000张/mq,cifar/en,-/w,10/m,图片/n,进行/v,测试/vn,。/w,最终/d,计算/v,出/v,的/u,精度/n,为/p,1/m,:/w,n/en,，/w,n/en,=/w,预测值/n,中置信度/nw,最高/a,的/u,一项/mq,与/p,图片/n,真实/a,label/en,匹配/vn,的/u,频次/nz,。/w,(/w,it/en, ,calculates/en, ,the/en, ,precision/en, ,at/en, ,1/m,:/w, ,how/en, ,often/en, ,the/en, ,top/en, ,prediction/en, ,matches/en, ,the/en, ,true/en, ,label/en, ,of/en, ,the/en, ,image/en,)/w,。/w,为了/p,监控/vn,模型/n,在/p,训练/vn,过程/n,中/f,的/u,改进/v,情况/n,，/w,评估/vn,用/p,的/u,脚本/n,文件/n,会/v,周期性/n,的/u,在/p,最新/a,的/u,检查/vn,点/q,文件/n,上/f,运行/vn,，/w,这些/r,检查/vn,点/q,文件/n,是/v,由/p,cifar/en,10/m,_,train/en,./w,py/en,产生/v,。/w,cifar/en,10/m,_,eval/en,./w,py/en,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,evaluation/en, ,for/en, ,cifar/en,-/w,10/m,./w, ,accuracy/en,:/w, ,cifar/en,10/m,_,train/en,./w,py/en, ,achieves/en, ,83.0%/mq, ,accuracy/en, ,after/en, ,100/m,k/en, ,steps/en, ,(/w,256/m, ,epochs/en, ,of/en, ,data/en,)/w, ,as/en, ,judged/en, ,by/en, ,cifar/en,10/m,_,eval/en,./w,py/en,./w, ,speed/en,:/w, ,on/en, ,a/en, ,single/en, ,tesla/en, ,k/en,40/m,,/w, ,cifar/en,10/m,_,train/en,./w,py/en, ,processes/en, ,a/en, ,single/en, ,batch/en, ,of/en, ,128/m, ,images/en, ,in/en, ,0.25/m,-/w,0.35/m, ,sec/en, ,(/w,i/en,./w,e/en,./w, ,350/m, ,-/w, ,600/m, ,images/en, ,//w,sec/en,)/w,./w, ,the/en, ,model/en, ,reaches/en, ,~/w,86%/mq, ,accuracy/en, ,after/en, ,100/m,k/en, ,steps/en, ,in/en, ,8/m, ,hours/en, ,of/en, ,training/en, ,time/en,./w, ,usage/en,:/w, ,please/en, ,see/en, ,the/en, ,tutorial/en, ,and/en, ,website/en, ,for/en, ,how/en, ,to/en, ,download/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,set/en,,/w, ,compile/en, ,the/en, ,program/en, ,and/en, ,train/en, ,the/en, ,model/en,./w, ,http/en,:/w,//w,//w,tensorflow/en,./w,org/en,//w,tutorials/en,//w,deep/en,_,cnn/en,//w, ,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,datetime/en, ,import/en, ,datetime/en, ,import/en, ,math/en, ,import/en, ,time/en, ,import/en, ,tensorflow/en,./w,python/en,./w,platform/en, ,from/en, ,tensorflow/en,./w,python/en,./w,platform/en, ,import/en, ,gfile/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,import/en, ,cifar/en,10/m, ,flags/en, ,=/w, ,tf/en,./w,app/en,./w,flags/en,./w,flags/en, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,eval/en,_,dir/en,'/w,,/w, ,'/w,./w,//w,cifar/en,10/m,_,eval/en,'/w,,/w, ,"/w,"/w,"/w,directory/en, ,where/en, ,to/en, ,write/en, ,event/en, ,logs/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,eval/en,_,data/en,'/w,,/w, ,'/w,test/en,'/w,,/w, ,"/w,"/w,"/w,either/en, ,'/w,test/en,'/w, ,or/en, ,'/w,train/en,_,eval/en,'/w,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,checkpoint/en,_,dir/en,'/w,,/w, ,'/w,./w,//w,cifar/en,10/m,_,train/en,'/w,,/w, ,"/w,"/w,"/w,directory/en, ,where/en, ,to/en, ,read/en, ,model/en, ,checkpoints/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,eval/en,_,interval/en,_,secs/en,'/w,,/w, ,60/m, ,*/w, ,5/m,,/w, ,"/w,"/w,"/w,how/en, ,often/en, ,to/en, ,run/en, ,the/en, ,eval/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,num/en,_,examples/en,'/w,,/w, ,10000/m,,/w, ,"/w,"/w,"/w,number/en, ,of/en, ,examples/en, ,to/en, ,run/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,boolean/en,(/w,'/w,run/en,_,once/en,'/w,,/w, ,false/en,,/w, ,"/w,"/w,"/w,whether/en, ,to/en, ,run/en, ,eval/en, ,only/en, ,once/en,./w,"/w,"/w,"/w,)/w, ,def/en, ,eval/en,_,once/en,(/w,saver/en,,/w, ,summary/en,_,writer/en,,/w, ,top/en,_,k/en,_,op/en,,/w, ,summary/en,_,op/en,)/w,:/w, ,"/w,"/w,"/w,run/en, ,eval/en, ,once/en,./w, ,args/en,:/w, ,saver/en,:/w, ,saver/en,./w, ,summary/en,_,writer/en,:/w, ,summary/en, ,writer/en,./w, ,top/en,_,k/en,_,op/en,:/w, ,top/en, ,k/en, ,op/en,./w, ,summary/en,_,op/en,:/w, ,summary/en, ,op/en,./w, ,"/w,"/w,"/w, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,ckpt/en, ,=/w, ,tf/en,./w,train/en,./w,get/en,_,checkpoint/en,_,state/en,(/w,flags/en,./w,checkpoint/en,_,dir/en,)/w, ,if/en, ,ckpt/en, ,and/en, ,ckpt/en,./w,model/en,_,checkpoint/en,_,path/en,:/w, ,#, ,restores/en, ,from/en, ,checkpoint/en, ,saver/en,./w,restore/en,(/w,sess/en,,/w, ,ckpt/en,./w,model/en,_,checkpoint/en,_,path/en,)/w, ,#, ,assuming/en, ,model/en,_,checkpoint/en,_,path/en, ,looks/en, ,something/en, ,like/en,:/w, ,#, ,//w,my/en,-/w,favorite/en,-/w,path/en,//w,cifar/en,10/m,_,train/en,//w,model/en,./w,ckpt/en,-/w,0/m,,/w, ,#, ,extract/en, ,global/en,_,step/en, ,from/en, ,it/en,./w, ,global/en,_,step/en, ,=/w, ,ckpt/en,./w,model/en,_,checkpoint/en,_,path/en,./w,split/en,(/w,'/w,//w,'/w,)/w,[/w,-/w,1/m,]/w,./w,split/en,(/w,'/w,-/w,'/w,)/w,[/w,-/w,1/m,]/w, ,else/en,:/w, ,print/en,(/w,'/w,no/en, ,checkpoint/en, ,file/en, ,found/en,'/w,)/w, ,return/en, ,#, ,start/en, ,the/en, ,queue/en, ,runners/en,./w, ,coord/en, ,=/w, ,tf/en,./w,train/en,./w,coordinator/en,(/w,)/w, ,try/en,:/w, ,threads/en, ,=/w, ,[/w,]/w, ,for/en, ,qr/en, ,in/en, ,tf/en,./w,get/en,_,collection/en,(/w,tf/en,./w,graphkeys/en,./w,queue/en,_,runners/en,)/w,:/w, ,threads/en,./w,extend/en,(/w,qr/en,./w,create/en,_,threads/en,(/w,sess/en,,/w, ,coord/en,=/w,coord/en,,/w, ,daemon/en,=/w,true/en,,/w, ,start/en,=/w,true/en,)/w,)/w, ,num/en,_,iter/en, ,=/w, ,int/en,(/w,math/en,./w,ceil/en,(/w,flags/en,./w,num/en,_,examples/en, ,//w, ,flags/en,./w,batch/en,_,size/en,)/w,)/w, ,true/en,_,count/en, ,=/w, ,0/m, ,#, ,counts/en, ,the/en, ,number/en, ,of/en, ,correct/en, ,predictions/en,./w, ,total/en,_,sample/en,_,count/en, ,=/w, ,num/en,_,iter/en, ,*/w, ,flags/en,./w,batch/en,_,size/en, ,step/en, ,=/w, ,0/m, ,while/en, ,step/en, ,</w, ,num/en,_,iter/en, ,and/en, ,not/en, ,coord/en,./w,should/en,_,stop/en,(/w,)/w,:/w, ,predictions/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,top/en,_,k/en,_,op/en,]/w,)/w, ,true/en,_,count/en, ,+/w,=/w, ,np/en,./w,sum/en,(/w,predictions/en,)/w, ,step/en, ,+/w,=/w, ,1/m, ,#, ,compute/en, ,precision/en, ,@/w, ,1/m,./w, ,precision/en, ,=/w, ,true/en,_,count/en, ,//w, ,total/en,_,sample/en,_,count/en, ,print/en,(/w,'/w,%/w,s/en,:/w, ,precision/en, ,@/w, ,1/m, ,=/w, ,%/w,./w,3/m,f/en,'/w, ,%/w, ,(/w,datetime/en,./w,now/en,(/w,)/w,,/w, ,precision/en,)/w,)/w, ,summary/en, ,=/w, ,tf/en,./w,summary/en,(/w,)/w, ,summary/en,./w,parsefromstring/en,(/w,sess/en,./w,run/en,(/w,summary/en,_,op/en,)/w,)/w, ,summary/en,./w,value/en,./w,add/en,(/w,tag/en,=/w,'/w,precision/en, ,@/w, ,1/m,'/w,,/w, ,simple/en,_,value/en,=/w,precision/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,,/w, ,global/en,_,step/en,)/w, ,except/en, ,exception/en, ,as/en, ,e/en,:/w, ,#, ,pylint/en,:/w, ,disable/en,=/w,broad/en,-/w,except/en, ,coord/en,./w,request/en,_,stop/en,(/w,e/en,)/w, ,coord/en,./w,request/en,_,stop/en,(/w,)/w, ,coord/en,./w,join/en,(/w,threads/en,,/w, ,stop/en,_,grace/en,_,period/en,_,secs/en,=/w,10/m,)/w, ,def/en, ,evaluate/en,(/w,)/w,:/w, ,"/w,"/w,"/w,eval/en, ,cifar/en,-/w,10/m, ,for/en, ,a/en, ,number/en, ,of/en, ,steps/en,./w,"/w,"/w,"/w, ,with/en, ,tf/en,./w,graph/en,(/w,)/w,./w,as/en,_,default/en,(/w,)/w,:/w, ,#, ,get/en, ,images/en, ,and/en, ,labels/en, ,for/en, ,cifar/en,-/w,10/m,./w, ,eval/en,_,data/en, ,=/w, ,flags/en,./w,eval/en,_,data/en, ,=/w,=/w, ,'/w,test/en,'/w, ,images/en,,/w, ,labels/en, ,=/w, ,cifar/en,10/m,./w,inputs/en,(/w,eval/en,_,data/en,=/w,eval/en,_,data/en,)/w, ,#, ,build/en, ,a/en, ,graph/en, ,that/en, ,computes/en, ,the/en, ,logits/en, ,predictions/en, ,from/en, ,the/en, ,#, ,inference/en, ,model/en,./w, ,logits/en, ,=/w, ,cifar/en,10/m,./w,inference/en,(/w,images/en,)/w, ,#, ,calculate/en, ,predictions/en,./w, ,top/en,_,k/en,_,op/en, ,=/w, ,tf/en,./w,nn/en,./w,in/en,_,top/en,_,k/en,(/w,logits/en,,/w, ,labels/en,,/w, ,1/m,)/w, ,#, ,restore/en, ,the/en, ,moving/en, ,average/en, ,version/en, ,of/en, ,the/en, ,learned/en, ,variables/en, ,for/en, ,eval/en,./w, ,variable/en,_,averages/en, ,=/w, ,tf/en,./w,train/en,./w,exponentialmovingaverage/en,(/w, ,cifar/en,10/m,./w,moving/en,_,average/en,_,decay/en,)/w, ,variables/en,_,to/en,_,restore/en, ,=/w, ,variable/en,_,averages/en,./w,variables/en,_,to/en,_,restore/en,(/w,)/w, ,saver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,variables/en,_,to/en,_,restore/en,)/w, ,#, ,build/en, ,the/en, ,summary/en, ,operation/en, ,based/en, ,on/en, ,the/en, ,tf/en, ,collection/en, ,of/en, ,summaries/en,./w, ,summary/en,_,op/en, ,=/w, ,tf/en,./w,summary/en,./w,merge/en,_,all/en,(/w,)/w, ,graph/en, ,=/w, ,tf/en,./w,get/en,_,default/en,_,graph/en,(/w,)/w,./w,as/en,_,graph/en,_,def/en,(/w,)/w, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,summary/en,./w,filewriter/en,(/w,flags/en,./w,eval/en,_,dir/en,,/w, ,graph/en,=/w,graph/en,)/w, ,while/en, ,true/en,:/w, ,eval/en,_,once/en,(/w,saver/en,,/w, ,summary/en,_,writer/en,,/w, ,top/en,_,k/en,_,op/en,,/w, ,summary/en,_,op/en,)/w, ,if/en, ,flags/en,./w,run/en,_,once/en,:/w, ,break/en, ,time/en,./w,sleep/en,(/w,flags/en,./w,eval/en,_,interval/en,_,secs/en,)/w, ,def/en, ,main/en,(/w,argv/en,=/w,none/en,)/w,:/w, ,#, ,pylint/en,:/w, ,disable/en,=/w,unused/en,-/w,argument/en, ,cifar/en,10/m,./w,maybe/en,_,download/en,_,and/en,_,extract/en,(/w,)/w, ,if/en, ,gfile/en,./w,exists/en,(/w,flags/en,./w,eval/en,_,dir/en,)/w,:/w, ,gfile/en,./w,deleterecursively/en,(/w,flags/en,./w,eval/en,_,dir/en,)/w, ,gfile/en,./w,makedirs/en,(/w,flags/en,./w,eval/en,_,dir/en,)/w, ,evaluate/en,(/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,tf/en,./w,app/en,./w,run/en,(/w,)/w,google/en,的/u,tensorflow/en, ,api/en,在/p,1.0/m,正式/ad,版本/n,后/f,变化/vn,很/d,大/a,，/w,旧/a,的/u,代码/n,在/p,迁移/vn,到/v,1.0/m,后/f,需要/v,修改/v,对应/v,的/u,api/en,名字/n,0/m,x/en,5/m,:/w, ,在/p,gpu/en,上/f,运行/vn,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,a/en, ,binary/en, ,to/en, ,train/en, ,cifar/en,-/w,10/m, ,using/en, ,multiple/en, ,gpu/en,'/w,s/en, ,with/en, ,synchronous/en, ,updates/en,./w, ,accuracy/en,:/w, ,cifar/en,10/m,_,multi/en,_,gpu/en,_,train/en,./w,py/en, ,achieves/en, ,~/w,86%/mq, ,accuracy/en, ,after/en, ,100/m,k/en, ,steps/en, ,(/w,256/m, ,epochs/en, ,of/en, ,data/en,)/w, ,as/en, ,judged/en, ,by/en, ,cifar/en,10/m,_,eval/en,./w,py/en,./w, ,speed/en,:/w, ,with/en, ,batch/en,_,size/en, ,128/m,./w, ,system/en, ,|/w, ,step/en, ,time/en, ,(/w,sec/en,//w,batch/en,)/w, ,|/w, ,accuracy/en, ,--------------------------------------------------------------------/nrf, ,1/m, ,tesla/en, ,k/en,20/m,m/en, ,|/w, ,0.35/m,-/w,0.60/m, ,|/w, ,~/w,86%/mq, ,at/en, ,60/m,k/en, ,steps/en, ,(/w,5/m, ,hours/en,)/w, ,1/m, ,tesla/en, ,k/en,40/m,m/en, ,|/w, ,0.25/m,-/w,0.35/m, ,|/w, ,~/w,86%/mq, ,at/en, ,100/m,k/en, ,steps/en, ,(/w,4/m, ,hours/en,)/w, ,2/m, ,tesla/en, ,k/en,20/m,m/en, ,|/w, ,0.13/m,-/w,0.20/m, ,|/w, ,~/w,84%/mq, ,at/en, ,30/m,k/en, ,steps/en, ,(/w,2.5/m, ,hours/en,)/w, ,3/m, ,tesla/en, ,k/en,20/m,m/en, ,|/w, ,0.13/m,-/w,0.18/m, ,|/w, ,~/w,84%/mq, ,at/en, ,30/m,k/en, ,steps/en, ,4/m, ,tesla/en, ,k/en,20/m,m/en, ,|/w, ,~/w,0.10/m, ,|/w, ,~/w,84%/mq, ,at/en, ,30/m,k/en, ,steps/en, ,usage/en,:/w, ,please/en, ,see/en, ,the/en, ,tutorial/en, ,and/en, ,website/en, ,for/en, ,how/en, ,to/en, ,download/en, ,the/en, ,cifar/en,-/w,10/m, ,data/en, ,set/en,,/w, ,compile/en, ,the/en, ,program/en, ,and/en, ,train/en, ,the/en, ,model/en,./w, ,http/en,:/w,//w,//w,tensorflow/en,./w,org/en,//w,tutorials/en,//w,deep/en,_,cnn/en,//w, ,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,datetime/en, ,import/en, ,datetime/en, ,import/en, ,os/en,./w,path/en, ,import/en, ,re/en, ,import/en, ,time/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,import/en, ,cifar/en,10/m, ,flags/en, ,=/w, ,tf/en,./w,app/en,./w,flags/en,./w,flags/en, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,string/en,(/w,'/w,train/en,_,dir/en,'/w,,/w, ,'/w,./w,//w,cifar/en,10/m,_,train/en,'/w,,/w, ,"/w,"/w,"/w,directory/en, ,where/en, ,to/en, ,write/en, ,event/en, ,logs/en, ,"/w,"/w,"/w, ,"/w,"/w,"/w,and/en, ,checkpoint/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,max/en,_,steps/en,'/w,,/w, ,1000000/m,,/w, ,"/w,"/w,"/w,number/en, ,of/en, ,batches/en, ,to/en, ,run/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,integer/en,(/w,'/w,num/en,_,gpus/en,'/w,,/w, ,1/m,,/w, ,"/w,"/w,"/w,how/en, ,many/en, ,gpus/en, ,to/en, ,use/en,./w,"/w,"/w,"/w,)/w, ,tf/en,./w,app/en,./w,flags/en,./w,define/en,_,boolean/en,(/w,'/w,log/en,_,device/en,_,placement/en,'/w,,/w, ,false/en,,/w, ,"/w,"/w,"/w,whether/en, ,to/en, ,log/en, ,device/en, ,placement/en,./w,"/w,"/w,"/w,)/w, ,def/en, ,tower/en,_,loss/en,(/w,scope/en,)/w,:/w, ,"/w,"/w,"/w,calculate/en, ,the/en, ,total/en, ,loss/en, ,on/en, ,a/en, ,single/en, ,tower/en, ,running/en, ,the/en, ,cifar/en, ,model/en,./w, ,args/en,:/w, ,scope/en,:/w, ,unique/en, ,prefix/en, ,string/en, ,identifying/en, ,the/en, ,cifar/en, ,tower/en,,/w, ,e/en,./w,g/en,./w, ,'/w,tower/en,_,0/m,'/w, ,returns/en,:/w, ,tensor/en, ,of/en, ,shape/en, ,[/w,]/w, ,containing/en, ,the/en, ,total/en, ,loss/en, ,for/en, ,a/en, ,batch/en, ,of/en, ,data/en, ,"/w,"/w,"/w, ,#, ,get/en, ,images/en, ,and/en, ,labels/en, ,for/en, ,cifar/en,-/w,10/m,./w, ,images/en,,/w, ,labels/en, ,=/w, ,cifar/en,10/m,./w,distorted/en,_,inputs/en,(/w,)/w, ,#, ,build/en, ,inference/en, ,graph/en,./w, ,logits/en, ,=/w, ,cifar/en,10/m,./w,inference/en,(/w,images/en,)/w, ,#, ,build/en, ,the/en, ,portion/en, ,of/en, ,the/en, ,graph/en, ,calculating/en, ,the/en, ,losses/en,./w, ,note/en, ,that/en, ,we/en, ,will/en, ,#, ,assemble/en, ,the/en, ,total/en,_,loss/en, ,using/en, ,a/en, ,custom/en, ,function/en, ,below/en,./w, ,_, ,=/w, ,cifar/en,10/m,./w,loss/en,(/w,logits/en,,/w, ,labels/en,)/w, ,#, ,assemble/en, ,all/en, ,of/en, ,the/en, ,losses/en, ,for/en, ,the/en, ,current/en, ,tower/en, ,only/en,./w, ,losses/en, ,=/w, ,tf/en,./w,get/en,_,collection/en,(/w,'/w,losses/en,'/w,,/w, ,scope/en,)/w, ,#, ,calculate/en, ,the/en, ,total/en, ,loss/en, ,for/en, ,the/en, ,current/en, ,tower/en,./w, ,total/en,_,loss/en, ,=/w, ,tf/en,./w,add/en,_,n/en,(/w,losses/en,,/w, ,name/en,=/w,'/w,total/en,_,loss/en,'/w,)/w, ,#, ,compute/en, ,the/en, ,moving/en, ,average/en, ,of/en, ,all/en, ,individual/en, ,losses/en, ,and/en, ,the/en, ,total/en, ,loss/en,./w, ,loss/en,_,averages/en, ,=/w, ,tf/en,./w,train/en,./w,exponentialmovingaverage/en,(/w,0.9/m,,/w, ,name/en,=/w,'/w,avg/en,'/w,)/w, ,loss/en,_,averages/en,_,op/en, ,=/w, ,loss/en,_,averages/en,./w,apply/en,(/w,losses/en, ,+/w, ,[/w,total/en,_,loss/en,]/w,)/w, ,#, ,attach/en, ,a/en, ,scalar/en, ,summary/en, ,to/en, ,all/en, ,individual/en, ,losses/en, ,and/en, ,the/en, ,total/en, ,loss/en,;/w, ,do/en, ,the/en, ,#, ,same/en, ,for/en, ,the/en, ,averaged/en, ,version/en, ,of/en, ,the/en, ,losses/en,./w, ,for/en, ,l/en, ,in/en, ,losses/en, ,+/w, ,[/w,total/en,_,loss/en,]/w,:/w, ,#, ,remove/en, ,'/w,tower/en,_,[/w,0/m,-/w,9/m,]/w,//w,'/w, ,from/en, ,the/en, ,name/en, ,in/en, ,case/en, ,this/en, ,is/en, ,a/en, ,multi/en,-/w,gpu/en, ,training/en, ,#, ,session/en,./w, ,this/en, ,helps/en, ,the/en, ,clarity/en, ,of/en, ,presentation/en, ,on/en, ,tensorboard/en,./w, ,loss/en,_,name/en, ,=/w, ,re/en,./w,sub/en,(/w,'/w,%/w,s/en,_,[/w,0/m,-/w,9/m,]/w,*/w,//w,'/w, ,%/w, ,cifar/en,10/m,./w,tower/en,_,name/en,,/w, ,'/w,'/w,,/w, ,l/en,./w,op/en,./w,name/en,)/w, ,#, ,name/en, ,each/en, ,loss/en, ,as/en, ,'/w,(/w,raw/en,)/w,'/w, ,and/en, ,name/en, ,the/en, ,moving/en, ,average/en, ,version/en, ,of/en, ,the/en, ,loss/en, ,#, ,as/en, ,the/en, ,original/en, ,loss/en, ,name/en,./w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,loss/en,_,name/en, ,+/w,'/w, ,(/w,raw/en,)/w,'/w,,/w, ,l/en,)/w, ,tf/en,./w,summary/en,./w,scalar/en,(/w,loss/en,_,name/en,,/w, ,loss/en,_,averages/en,./w,average/en,(/w,l/en,)/w,)/w, ,with/en, ,tf/en,./w,control/en,_,dependencies/en,(/w,[/w,loss/en,_,averages/en,_,op/en,]/w,)/w,:/w, ,total/en,_,loss/en, ,=/w, ,tf/en,./w,identity/en,(/w,total/en,_,loss/en,)/w, ,return/en, ,total/en,_,loss/en, ,def/en, ,average/en,_,gradients/en,(/w,tower/en,_,grads/en,)/w,:/w, ,"/w,"/w,"/w,calculate/en, ,the/en, ,average/en, ,gradient/en, ,for/en, ,each/en, ,shared/en, ,variable/en, ,across/en, ,all/en, ,towers/en,./w, ,note/en, ,that/en, ,this/en, ,function/en, ,provides/en, ,a/en, ,synchronization/en, ,point/en, ,across/en, ,all/en, ,towers/en,./w, ,args/en,:/w, ,tower/en,_,grads/en,:/w, ,list/en, ,of/en, ,lists/en, ,of/en, ,(/w,gradient/en,,/w, ,variable/en,)/w, ,tuples/en,./w, ,the/en, ,outer/en, ,list/en, ,is/en, ,over/en, ,individual/en, ,gradients/en,./w, ,the/en, ,inner/en, ,list/en, ,is/en, ,over/en, ,the/en, ,gradient/en, ,calculation/en, ,for/en, ,each/en, ,tower/en,./w, ,returns/en,:/w, ,list/en, ,of/en, ,pairs/en, ,of/en, ,(/w,gradient/en,,/w, ,variable/en,)/w, ,where/en, ,the/en, ,gradient/en, ,has/en, ,been/en, ,averaged/en, ,across/en, ,all/en, ,towers/en,./w, ,"/w,"/w,"/w, ,average/en,_,grads/en, ,=/w, ,[/w,]/w, ,for/en, ,grad/en,_,and/en,_,vars/en, ,in/en, ,zip/en,(/w,*/w,tower/en,_,grads/en,)/w,:/w, ,#, ,note/en, ,that/en, ,each/en, ,grad/en,_,and/en,_,vars/en, ,looks/en, ,like/en, ,the/en, ,following/en,:/w, ,#, ,(/w,(/w,grad/en,0/m,_,gpu/en,0/m,,/w, ,var/en,0/m,_,gpu/en,0/m,)/w,,/w, ,./w,./w,./w, ,,/w, ,(/w,grad/en,0/m,_,gpun/en,,/w, ,var/en,0/m,_,gpun/en,)/w,)/w, ,grads/en, ,=/w, ,[/w,]/w, ,for/en, ,g/en,,/w, ,_, ,in/en, ,grad/en,_,and/en,_,vars/en,:/w, ,#, ,add/en, ,0/m, ,dimension/en, ,to/en, ,the/en, ,gradients/en, ,to/en, ,represent/en, ,the/en, ,tower/en,./w, ,expanded/en,_,g/en, ,=/w, ,tf/en,./w,expand/en,_,dims/en,(/w,g/en,,/w, ,0/m,)/w, ,#, ,append/en, ,on/en, ,a/en, ,'/w,tower/en,'/w, ,dimension/en, ,which/en, ,we/en, ,will/en, ,average/en, ,over/en, ,below/en,./w, ,grads/en,./w,append/en,(/w,expanded/en,_,g/en,)/w, ,#, ,average/en, ,over/en, ,the/en, ,'/w,tower/en,'/w, ,dimension/en,./w, ,grad/en, ,=/w, ,tf/en,./w,concat/en,(/w,0/m,,/w, ,grads/en,)/w, ,grad/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,grad/en,,/w, ,0/m,)/w, ,#, ,keep/en, ,in/en, ,mind/en, ,that/en, ,the/en, ,variables/en, ,are/en, ,redundant/en, ,because/en, ,they/en, ,are/en, ,shared/en, ,#, ,across/en, ,towers/en,./w, ,so/en, ,./w,./w, ,we/en, ,will/en, ,just/en, ,return/en, ,the/en, ,first/en, ,tower/en,'/w,s/en, ,pointer/en, ,to/en, ,#, ,the/en, ,variable/en,./w, ,v/en, ,=/w, ,grad/en,_,and/en,_,vars/en,[/w,0/m,]/w,[/w,1/m,]/w, ,grad/en,_,and/en,_,var/en, ,=/w, ,(/w,grad/en,,/w, ,v/en,)/w, ,average/en,_,grads/en,./w,append/en,(/w,grad/en,_,and/en,_,var/en,)/w, ,return/en, ,average/en,_,grads/en, ,def/en, ,train/en,(/w,)/w,:/w, ,"/w,"/w,"/w,train/en, ,cifar/en,-/w,10/m, ,for/en, ,a/en, ,number/en, ,of/en, ,steps/en,./w,"/w,"/w,"/w, ,with/en, ,tf/en,./w,graph/en,(/w,)/w,./w,as/en,_,default/en,(/w,)/w,,/w, ,tf/en,./w,device/en,(/w,'/w,//w,cpu/en,:/w,0/m,'/w,)/w,:/w, ,#, ,create/en, ,a/en, ,variable/en, ,to/en, ,count/en, ,the/en, ,number/en, ,of/en, ,train/en,(/w,)/w, ,calls/en,./w, ,this/en, ,equals/en, ,the/en, ,#, ,number/en, ,of/en, ,batches/en, ,processed/en, ,*/w, ,flags/en,./w,num/en,_,gpus/en,./w, ,global/en,_,step/en, ,=/w, ,tf/en,./w,get/en,_,variable/en,(/w, ,'/w,global/en,_,step/en,'/w,,/w, ,[/w,]/w,,/w, ,initializer/en,=/w,tf/en,./w,constant/en,_,initializer/en,(/w,0/m,)/w,,/w, ,trainable/en,=/w,false/en,)/w, ,#, ,calculate/en, ,the/en, ,learning/en, ,rate/en, ,schedule/en,./w, ,num/en,_,batches/en,_,per/en,_,epoch/en, ,=/w, ,(/w,cifar/en,10/m,./w,num/en,_,examples/en,_,per/en,_,epoch/en,_,for/en,_,train/en, ,//w, ,flags/en,./w,batch/en,_,size/en,)/w, ,decay/en,_,steps/en, ,=/w, ,int/en,(/w,num/en,_,batches/en,_,per/en,_,epoch/en, ,*/w, ,cifar/en,10/m,./w,num/en,_,epochs/en,_,per/en,_,decay/en,)/w, ,#, ,decay/en, ,the/en, ,learning/en, ,rate/en, ,exponentially/en, ,based/en, ,on/en, ,the/en, ,number/en, ,of/en, ,steps/en,./w, ,lr/en, ,=/w, ,tf/en,./w,train/en,./w,exponential/en,_,decay/en,(/w,cifar/en,10/m,./w,initial/en,_,learning/en,_,rate/en,,/w, ,global/en,_,step/en,,/w, ,decay/en,_,steps/en,,/w, ,cifar/en,10/m,./w,learning/en,_,rate/en,_,decay/en,_,factor/en,,/w, ,staircase/en,=/w,true/en,)/w, ,#, ,create/en, ,an/en, ,optimizer/en, ,that/en, ,performs/en, ,gradient/en, ,descent/en,./w, ,opt/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,lr/en,)/w, ,#, ,calculate/en, ,the/en, ,gradients/en, ,for/en, ,each/en, ,model/en, ,tower/en,./w, ,tower/en,_,grads/en, ,=/w, ,[/w,]/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,flags/en,./w,num/en,_,gpus/en,)/w,:/w, ,with/en, ,tf/en,./w,device/en,(/w,'/w,//w,gpu/en,:/w,%/w,d/en,'/w, ,%/w, ,i/en,)/w,:/w, ,with/en, ,tf/en,./w,name/en,_,scope/en,(/w,'/w,%/w,s/en,_,%/w,d/en,'/w, ,%/w, ,(/w,cifar/en,10/m,./w,tower/en,_,name/en,,/w, ,i/en,)/w,)/w, ,as/en, ,scope/en,:/w, ,#, ,calculate/en, ,the/en, ,loss/en, ,for/en, ,one/en, ,tower/en, ,of/en, ,the/en, ,cifar/en, ,model/en,./w, ,this/en, ,function/en, ,#, ,constructs/en, ,the/en, ,entire/en, ,cifar/en, ,model/en, ,but/en, ,shares/en, ,the/en, ,variables/en, ,across/en, ,#, ,all/en, ,towers/en,./w, ,loss/en, ,=/w, ,tower/en,_,loss/en,(/w,scope/en,)/w, ,#, ,reuse/en, ,variables/en, ,for/en, ,the/en, ,next/en, ,tower/en,./w, ,tf/en,./w,get/en,_,variable/en,_,scope/en,(/w,)/w,./w,reuse/en,_,variables/en,(/w,)/w, ,#, ,retain/en, ,the/en, ,summaries/en, ,from/en, ,the/en, ,final/en, ,tower/en,./w, ,summaries/en, ,=/w, ,tf/en,./w,get/en,_,collection/en,(/w,tf/en,./w,graphkeys/en,./w,summaries/en,,/w, ,scope/en,)/w, ,#, ,calculate/en, ,the/en, ,gradients/en, ,for/en, ,the/en, ,batch/en, ,of/en, ,data/en, ,on/en, ,this/en, ,cifar/en, ,tower/en,./w, ,grads/en, ,=/w, ,opt/en,./w,compute/en,_,gradients/en,(/w,loss/en,)/w, ,#, ,keep/en, ,track/en, ,of/en, ,the/en, ,gradients/en, ,across/en, ,all/en, ,towers/en,./w, ,tower/en,_,grads/en,./w,append/en,(/w,grads/en,)/w, ,#, ,we/en, ,must/en, ,calculate/en, ,the/en, ,mean/en, ,of/en, ,each/en, ,gradient/en,./w, ,note/en, ,that/en, ,this/en, ,is/en, ,the/en, ,#, ,synchronization/en, ,point/en, ,across/en, ,all/en, ,towers/en,./w, ,grads/en, ,=/w, ,average/en,_,gradients/en,(/w,tower/en,_,grads/en,)/w, ,#, ,add/en, ,a/en, ,summary/en, ,to/en, ,track/en, ,the/en, ,learning/en, ,rate/en,./w, ,summaries/en,./w,append/en,(/w,tf/en,./w,summary/en,./w,scalar/en,(/w,'/w,learning/en,_,rate/en,'/w,,/w, ,lr/en,)/w,)/w, ,#, ,add/en, ,histograms/en, ,for/en, ,gradients/en,./w, ,for/en, ,grad/en,,/w, ,var/en, ,in/en, ,grads/en,:/w, ,if/en, ,grad/en, ,is/en, ,not/en, ,none/en,:/w, ,summaries/en,./w,append/en,(/w, ,tf/en,./w,summary/en,./w,histogram/en,(/w,var/en,./w,op/en,./w,name/en, ,+/w, ,'/w,//w,gradients/en,'/w,,/w, ,grad/en,)/w,)/w, ,#, ,apply/en, ,the/en, ,gradients/en, ,to/en, ,adjust/en, ,the/en, ,shared/en, ,variables/en,./w, ,apply/en,_,gradient/en,_,op/en, ,=/w, ,opt/en,./w,apply/en,_,gradients/en,(/w,grads/en,,/w, ,global/en,_,step/en,=/w,global/en,_,step/en,)/w, ,#, ,add/en, ,histograms/en, ,for/en, ,trainable/en, ,variables/en,./w, ,for/en, ,var/en, ,in/en, ,tf/en,./w,trainable/en,_,variables/en,(/w,)/w,:/w, ,summaries/en,./w,append/en,(/w,tf/en,./w,summary/en,./w,histogram/en,(/w,var/en,./w,op/en,./w,name/en,,/w, ,var/en,)/w,)/w, ,#, ,track/en, ,the/en, ,moving/en, ,averages/en, ,of/en, ,all/en, ,trainable/en, ,variables/en,./w, ,variable/en,_,averages/en, ,=/w, ,tf/en,./w,train/en,./w,exponentialmovingaverage/en,(/w, ,cifar/en,10/m,./w,moving/en,_,average/en,_,decay/en,,/w, ,global/en,_,step/en,)/w, ,variables/en,_,averages/en,_,op/en, ,=/w, ,variable/en,_,averages/en,./w,apply/en,(/w,tf/en,./w,trainable/en,_,variables/en,(/w,)/w,)/w, ,#, ,group/en, ,all/en, ,updates/en, ,to/en, ,into/en, ,a/en, ,single/en, ,train/en, ,op/en,./w, ,train/en,_,op/en, ,=/w, ,tf/en,./w,group/en,(/w,apply/en,_,gradient/en,_,op/en,,/w, ,variables/en,_,averages/en,_,op/en,)/w, ,#, ,create/en, ,a/en, ,saver/en,./w, ,saver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,tf/en,./w,global/en,_,variables/en,(/w,)/w,)/w, ,#, ,build/en, ,the/en, ,summary/en, ,operation/en, ,from/en, ,the/en, ,last/en, ,tower/en, ,summaries/en,./w, ,summary/en,_,op/en, ,=/w, ,tf/en,./w,summary/en,./w,merge/en,(/w,summaries/en,)/w, ,#,tf/en,./w,summary/en,./w,merge/en,_,all/en,(/w,summaries/en,)/w, ,#, ,build/en, ,an/en, ,initialization/en, ,operation/en, ,to/en, ,run/en, ,below/en,./w, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,#, ,start/en, ,running/en, ,operations/en, ,on/en, ,the/en, ,graph/en,./w, ,allow/en,_,soft/en,_,placement/en, ,must/en, ,be/en, ,set/en, ,to/en, ,#, ,true/en, ,to/en, ,build/en, ,towers/en, ,on/en, ,gpu/en,,/w, ,as/en, ,some/en, ,of/en, ,the/en, ,ops/en, ,do/en, ,not/en, ,have/en, ,gpu/en, ,#, ,implementations/en,./w, ,sess/en, ,=/w, ,tf/en,./w,session/en,(/w,config/en,=/w,tf/en,./w,configproto/en,(/w, ,allow/en,_,soft/en,_,placement/en,=/w,true/en,,/w, ,log/en,_,device/en,_,placement/en,=/w,flags/en,./w,log/en,_,device/en,_,placement/en,)/w,)/w, ,sess/en,./w,run/en,(/w,init/en,)/w, ,#, ,start/en, ,the/en, ,queue/en, ,runners/en,./w, ,tf/en,./w,train/en,./w,start/en,_,queue/en,_,runners/en,(/w,sess/en,=/w,sess/en,)/w, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,summary/en,./w,filewriter/en,(/w,flags/en,./w,train/en,_,dir/en,,/w, ,graph/en,=/w,sess/en,./w,graph/en,)/w, ,for/en, ,step/en, ,in/en, ,xrange/en,(/w,flags/en,./w,max/en,_,steps/en,)/w,:/w, ,start/en,_,time/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,_,,/w, ,loss/en,_,value/en, ,=/w, ,sess/en,./w,run/en,(/w,[/w,train/en,_,op/en,,/w, ,loss/en,]/w,)/w, ,duration/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,-/w, ,start/en,_,time/en, ,assert/en, ,not/en, ,np/en,./w,isnan/en,(/w,loss/en,_,value/en,)/w,,/w, ,'/w,model/en, ,diverged/en, ,with/en, ,loss/en, ,=/w, ,nan/en,'/w, ,if/en, ,step/en, ,%/w, ,10/m, ,=/w,=/w, ,0/m,:/w, ,num/en,_,examples/en,_,per/en,_,step/en, ,=/w, ,flags/en,./w,batch/en,_,size/en, ,*/w, ,flags/en,./w,num/en,_,gpus/en, ,examples/en,_,per/en,_,sec/en, ,=/w, ,num/en,_,examples/en,_,per/en,_,step/en, ,//w, ,duration/en, ,sec/en,_,per/en,_,batch/en, ,=/w, ,duration/en, ,//w, ,flags/en,./w,num/en,_,gpus/en, ,format/en,_,str/en, ,=/w, ,(/w,'/w,%/w,s/en,:/w, ,step/en, ,%/w,d/en,,/w, ,loss/en, ,=/w, ,%/w,./w,2/m,f/en, ,(/w,%/w,./w,1/m,f/en, ,examples/en,//w,sec/en,;/w, ,%/w,./w,3/m,f/en, ,'/w, ,'/w,sec/en,//w,batch/en,)/w,'/w,)/w, ,print/en, ,(/w,format/en,_,str/en, ,%/w, ,(/w,datetime/en,./w,now/en,(/w,)/w,,/w, ,step/en,,/w, ,loss/en,_,value/en,,/w, ,examples/en,_,per/en,_,sec/en,,/w, ,sec/en,_,per/en,_,batch/en,)/w,)/w, ,if/en, ,step/en, ,%/w, ,100/m, ,=/w,=/w, ,0/m,:/w, ,summary/en,_,str/en, ,=/w, ,sess/en,./w,run/en,(/w,summary/en,_,op/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,step/en,)/w, ,#, ,save/en, ,the/en, ,model/en, ,checkpoint/en, ,periodically/en,./w, ,if/en, ,step/en, ,%/w, ,1000/m, ,=/w,=/w, ,0/m, ,or/en, ,(/w,step/en, ,+/w, ,1/m,)/w, ,=/w,=/w, ,flags/en,./w,max/en,_,steps/en,:/w, ,checkpoint/en,_,path/en, ,=/w, ,os/en,./w,path/en,./w,join/en,(/w,flags/en,./w,train/en,_,dir/en,,/w, ,'/w,model/en,./w,ckpt/en,'/w,)/w, ,saver/en,./w,save/en,(/w,sess/en,,/w, ,checkpoint/en,_,path/en,,/w, ,global/en,_,step/en,=/w,step/en,)/w, ,def/en, ,main/en,(/w,argv/en,=/w,none/en,)/w,:/w, ,#, ,pylint/en,:/w, ,disable/en,=/w,unused/en,-/w,argument/en, ,cifar/en,10/m,./w,maybe/en,_,download/en,_,and/en,_,extract/en,(/w,)/w, ,if/en, ,tf/en,./w,gfile/en,./w,exists/en,(/w,flags/en,./w,train/en,_,dir/en,)/w,:/w, ,tf/en,./w,gfile/en,./w,deleterecursively/en,(/w,flags/en,./w,train/en,_,dir/en,)/w, ,tf/en,./w,gfile/en,./w,makedirs/en,(/w,flags/en,./w,train/en,_,dir/en,)/w, ,train/en,(/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,'/w,_,_,main/en,_,_,'/w,:/w, ,tf/en,./w,app/en,./w,run/en,(/w,)/w,export/en, ,ld/en,_,library/en,_,path/en,=/w,$/w,ld/en,_,library/en,_,path/en,:/w,//w,usr/en,//w,local/en,//w,cuda/en,-/w,8.0/m,//w,lib/en,64/m, ,export/en, ,cuda/en,_,home/en,=/w,//w,usr/en,//w,local/en,//w,cuda/en, ,export/en, ,path/en,=/w,//w,usr/en,//w,local/en,//w,cuda/en,-/w,8.0/m,//w,//w,bin/en,:/w,$/w,path/en, ,screen/en, ,python/en, ,cifar/en,10/m,_,multi/en,_,gpu/en,_,train/en,./w,py/en, ,--/nrf,num/en,_,gpus/en,=/w,1/m, ,python/en, ,cifar/en,10/m,_,eval/en,./w,pyrelevant/en, ,link/en,:/w,https/en,:/w,//w,//w,www/en,./w,tensorflow/en,./w,org/en,//w,api/en,_,docs/en,//w,python/en,//w,tf/en,//w,random/en,_,crop/en, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,tensorflow/en,//w,models/en,//w,commit/en,//w,e/en,5079/m,c/en,839058/m,ff/en,40/m,dcbd/en,15515/m,a/en,9/m,cfb/en,462/m,fabbc/en,2/m,a/en,#,diff/en,-/w,5/m,ae/en,64/m,cf/en,077/m,db/en,8/m,f/en,00686/m,ff/en,8/m,b/en,5/m,d/en,7748604/m, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,tensorflow/en,//w,tensorflow/en,//w,tree/en,//w,r/en,0.7/m,//w,tensorflow/en,//w,models/en,//w,image/en,//w,cifar/en,10/m, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,tensorflow/en,//w,models/en,//w,pull/en,//w,864/m,//w,commits/en,//w,e/en,93/m,ec/en,37201/m,f/en,5/m,f/en,2116933/m,ae/en,96/m,e/en,505/m,f/en,409/m,ddbf/en,344/m,d/en, ,http/en,:/w,//w,//w,qiita/en,./w,com/en,//w,shu/en,223/m,//w,items/en,//w,ef/en,160/m,cbe/en,1/m,e/en,9/m,d/en,9/m,f/en,57/m,c/en,2485/m,./w, ,单词/n,的/u,向量/n,表示/v,(/w,vector/en, ,representations/en, ,of/en, ,words/en,)/w,0/m,x/en,1/m,:/w, ,word/en, ,embeddings/en,通常/d,图像/n,或/c,音频/n,系统/n,处理/v,的/u,是/v,由/p,图片/n,中/f,所有/b,单个/b,原始/a,像/v,素点/nr,强度/n,值/n,(/w,pix/en, ,chanel/en,)/w,或者/c,音频/n,中/f,功率/n,谱/ng,密度/n,的/u,强度/n,值/n,，/w,把/p,它们/r,编码/n,成/v,丰富/a,、/w,高/a,纬度/n,的/u,向量/n,数据集/nw,(/w,卷积/nw,)/w,。/w,对于/p,物体/n,或/c,语音/n,识别/v,这/r,一类/mq,的/u,任务/n,，/w,我们/r,所/u,需/v,的/u,全部/m,信息/n,已经/d,都/d,存储/vn,在/p,原始/a,数据/n,中/f,(/w,显然/ad,人类/n,本身/r,就/d,是/v,依赖/v,原始/a,数据/n,进行/v,日常/b,的/u,物体/n,或/c,语音/n,识别/v,的/u,)/w,然后/c,，/w,自然/d,语言/n,处理/v,系统/n,通常/d,将/d,词汇/n,作为/v,离散/vn,的/u,单一/a,符号/n,，/w,例如/v, ,"/w,cat/en,"/w, ,一/m,词/n,或/c,可/v,表示/v,为/p, ,id/en,537/m, ,，/w,而/c, ,"/w,dog/en,"/w, ,一/m,词/n,或/c,可/v,表示/v,为/p, ,id/en,143/m,。/w,这些/r,符号/n,编码/n,毫无/v,规律/n,，/w,无法/v,提供/v,不同/a,词汇/n,之间/f,可能/v,存在/v,的/u,关联/vn,信息/n,。/w,换句话说/c,，/w,在/p,处理/v,关于/p, ,"/w,dogs/en,"/w, ,一/m,词/n,的/u,信息/n,时/ng,，/w,模型/n,将/d,无法/v,利用/v,已知/nz,的/u,关于/p, ,"/w,cats/en,"/w, ,的/u,信息/n,(/w,例如/v,，/w,它们/r,都/d,是/v,动物/n,，/w,有/v,四条/mq,腿/n,，/w,可/v,作为/v,宠物/n,等等/u,)/w,。/w,可见/v,，/w,将/d,词汇/n,表达/v,为/p,上述/b,的/u,独立/v,离散/vn,符号/n,将/d,进一步/d,导致/v,数据/n,稀疏/a,，/w,使/v,我们/r,在/p,训练/vn,统计/v,模型/n,时/ng,不得不/d,寻求/v,更/d,多/a,的/u,数据/n,。/w,而/c,词汇/n,的/u,向量/n,表示/v,将/d,克服/v,上述/b,的/u,难题/n,向/p,量/n,空间/n,模型/n, ,(/w,vsms/en,)/w,将/d,词汇/n,表达/v,（/w,嵌套/v,）/w,于/p,一个/m,连续/a,的/u,向量/n,空间/n,中/f,，/w,语义/n,近似/a,的/u,词汇/n,被/p,映射/v,为/p,相邻/v,的/u,数据点/nw,。/w,向量/n,空间/n,模型/n,在/p,自然/d,语言/n,处理/v,领域/n,中/f,有/v,着/u,漫长/a,且/c,丰富/a,的/u,历史/n,，/w,不过/c,几乎/d,所有/b,利用/v,这/r,一/m,模型/n,的/u,方法/n,都/d,依赖/v,于/p, ,分布式/b,假设/v,，/w,其/r,核心/n,思想/n,为/p,出现/v,于/p,上下文/n,情景/n,中/f,的/u,词汇/n,都/d,有/v,相/d,类似/v,的/u,语义/n,。/w,采用/v,这/r,一/m,假设/v,的/u,研究/vn,方法/n,大致/d,分为/v,以下/f,两类/mq,基于/p,计数/v,的/u,方法/n, ,(/w,e/en,./w,g/en,./w, ,潜在/b,语义/n,分析/vn,)/w,:/w, ,基于/p,计数/v,的/u,方法/n,计算/v,某/r,词汇/n,与/p,其/r,邻近/v,词汇/n,在/p,一个/m,大型/b,语料库/n,中/f,共同/d,出现/v,的/u,频率/n,及/c,其他/r,统计量/nw,，/w,然后/c,将/d,这些/r,统计量/nw,映射/v,到/v,一个/m,小型/b,且/c,稠密/a,的/u,向量/n,中/f, ,预测/v,方法/n, ,(/w,e/en,./w,g/en,./w, ,神经概率化/nw,语言/n,模型/n,)/w,:/w, ,预测/v,方法/n,则/d,试图/v,直接/ad,从/p,某/r,词汇/n,的/u,邻近/v,词汇/n,对/p,其/r,进行/v,预测/v,，/w,在/p,此/r,过程/n,中/f,利用/v,已经/d,学习/v,到/v,的/u,小型/b,且/c,稠密/a,的/u,嵌套/v,向量/n,word/en,2/m,vec/en,是/v,一种/mq,可以/v,进行/v,高/a,效率/n,词嵌/nw,套/q,学习/v,的/u,预测/v,模型/n,。/w,其/r,两种/mq,变体/nw,分别/d,为/p,连续/a,词袋/nw,模型/n,(/w,cbow/en,)/w,:/w, ,从/p,算法/n,角度/n,看/v,，/w,这/r,两种/mq,方法/n,非常/d,相似/a,，/w,其/r,区别/n,为/p,cbow/en,根据/p,源词/nw,上下文/n,词汇/n,(/w,'/w,the/en, ,cat/en, ,sits/en, ,on/en, ,the/en,'/w,)/w,来/v,预测/v,目标/n,词汇/n,(/w,例如/v,，/w,'/w,mat/en,'/w,)/w, ,skip/en,-/w,gram/en,模型/n,:/w, ,skip/en,-/w,gram/en,模型/n,做法/n,相反/v,，/w,它/r,通过/p,目标/n,词汇/n,来/v,预测/v,源词/nw,汇/v, ,skip/en,-/w,gram/en,模型/n,采取/v,cbow/en,的/u,逆/vg,过程/n,的/u,动机/n,在于/v, ,1/m,)/w, ,cbow/en,算法/n,对于/p,很多/m,分布式/b,信息/n,进行/v,了/u,平滑/an,处理/v,(/w,例如/v,将/d,一/m,整/m,段/q,上下文/n,信息/n,视为/v,一个/m,单一/a,观察量/nw,)/w,。/w,很多/m,情况/n,下/f,，/w,对于/p,小型/b,的/u,数据集/nw,，/w,这/r,一/m,处理/v,是/v,有/v,帮助/v,的/u, ,2/m,)/w, ,相形之下/l,，/w,skip/en,-/w,gram/en,模型/n,将/d,每个/r,"/w,上下文/n,-/w,目标/n,词汇/n,"/w,的/u,组合/v,视为/v,一个/m,新/a,观察量/nw,，/w,这种/r,做法/n,在/p,大型/b,数据/n,集中/v,会/v,更为/d,有效/a,0/m,x/en,2/m,:/w, ,处理/v,噪声/n,对比/v,训练/vn,神经概率化/nw,语言/n,模型/n,通常/d,使用/v,极/d,大/a,似然/nw,法/j, ,(/w,ml/en,)/w, ,进行/v,训练/vn,，/w,其中/r,通过/p, ,softmax/en, ,function/en, ,来/v,最大化/v,当/p,提供/v,前/f,一个/m,单词/n, ,h/en, ,(/w,代表/n, ,"/w,history/en,"/w,)/w,，/w,后/f,一个/m,单词/n,的/u,概率/n, , ,(/w,代表/n, ,"/w,target/en,"/w,)/w,当/p, ,score/en,(/w,w/en,_,t/en,,/w,h/en,)/w, ,计算/v,了/u,文字/n, ,w/en,_,t/en, ,和/c, ,上下文/n, ,h/en, ,的/u,相容性/nz,（/w,通常/d,使用/v,向/p,量积/nw,）/w,。/w,我们/r,使用/v,对数/n,似然/nw,函数/n,来/v,训练/vn,训练/vn,集/vg,的/u,最大值/nz,，/w,比如/v,通过/p,：/w,这里/r,提出/v,了/u,一个/m,解决/v,语言/n,概率/n,模型/n,的/u,合适/a,的/u,通用/vn,方法/n,。/w,然而/c,这个/r,方法/n,实际/n,执行/v,起来/v,开销/v,非常/d,大/a,，/w,因为/c,我们/r,需要/v,去/v,计算/v,并/c,正则化/nw,当前/t,上下文/n,环境/n, ,h/en, ,中/f,所有/b,其他/r, ,v/en, ,单词/n, ,w/en,'/w, ,的/u,概率/n,得分/n,，/w,在/p,每/r,一步/mq,训练/vn,迭代/vn,中/f,即/v,每/r,一个/m,单词/n,我们/r,都/d,要/v,进行/v,一次/mq,预测/v,，/w,在/p,所有/b,语料/n,组合/v,中/f,，/w,最/d,优/ag,可能/v,紧跟/v,着/u,地/u,单词/n,是/v,什么/r,从/p,另/r,一个/m,角度/n,来说/u,，/w,当/p,使用/v,word/en,2/m,vec/en,模型/n,时/ng,，/w,我们/r,并/c,不/d,需要/v,对/p,概率/n,模型/n,中/f,的/u,所有/b,特征/n,进行/v,学习/v,。/w,而/c,cbow/en,模型/n,和/c,skip/en,-/w,gram/en,模型/n,为了/p,避免/v,这种/r,情况/n,发生/v,，/w,使用/v,一个/m,二/m,分类器/nw,（/w,逻辑/n,回归/v,）/w,在/p,同一个/r,上下/f,文/ng,环境/n,里/f,从/p, ,k/en, ,虚构/v,的/u, ,(/w,噪声/n,)/w, ,单词/n, , ,区分/v,出/v,真正/d,的/u,目标/n,单词/n, ,。/w,我们/r,下面/f,详细/ad,阐述/v,一下/m,cbow/en,模型/n,，/w,对于/p,skip/en,-/w,gram/en,模型/n,只要/c,简单/a,地/u,做/v,相反/v,的/u,操作/v,即可/v,。/w,噪声/n,对比/v,训练/vn,的/u,意义/n,在于/v,，/w,我们/r,假设/v,随机/d,产生/v,的/u,目标/n,单词/n,上下文/n,都/d,是/v,噪声/n,，/w,它们/r,不/d,可能/v,也/d,不/d,应该/v,和/c,我们/r,的/u,目标/n,单词/n,有/v,语境/n,关联/vn,，/w,训练/vn,的/u,目标/n,就/d,在于/v,找到/v,一组/mq,参数/n,，/w,使得/v,尽可能/d,大/a,的/u,区分/v,目标/n,单词/n,的/u,目标/n,上/f,下文/v,和/c,噪音/n,上下文/n,从/p,数学/n,角度/n,来说/u,，/w,我们/r,的/u,目标/n,是/v,对/p,每个/r,样本/n,最大化/v,：/w,其中/r,代表/n,的/u,是/v,数据集/nw,在/p,当前/t,上下文/n, ,h/en, ,，/w,根据/p,所/u,学习/v,的/u,嵌套/v,向量/n, , ,，/w,目标/n,单词/n, ,w/en, ,使用/v,二/m,分类/vn,逻辑/n,回归/v,计算/v,得出/v,的/u,概率/n,。/w,在/p,实践/v,中/f,，/w,我们/r,通过/p,在/p,噪声/n,分布/v,中/f,绘制/v,比/p,对/p,文字/n,来/v,获得/v,近似/a,的/u,期望值/n,（/w,通过/p,计算/v,蒙特卡洛/ns,平均值/n,）/w,。/w,当/p,真实/a,地/u,目标/n,单词/n,被/p,分配/vn,到/v,较/d,高/a,的/u,概率/n,，/w,同时/c,噪声/n,单词/n,的/u,概率/n,很/d,低/a,时/ng,，/w,目标/n,函数/n,也/d,就/d,达到/v,最/d,大/a,值/n,了/u,。/w,从/p,技术/n,层面/n,来说/u,，/w,这种/r,方法/n,叫做/v,"/w,负/v,抽样/vn,"/w,，/w,而且/c,使用/v,这个/r,损失/n,函数/n,在/p,数学/n,层面/n,上/f,也/d,有/v,很/d,好/a,的/u,解释/v,：/w,这个/r,更新/v,过程/n,也/d,近似/a,于/p,softmax/en,函数/n,的/u,更新/v,。/w,这/r,在/p,计算/v,上将/n,会/v,有/v,很/d,大/a,的/u,优势/n,，/w,因为/c,当/p,计算/v,这个/r,损失/n,函数/n,时/ng,，/w,只是/d,有/v,我们/r,挑选/v,出来/v,的/u, ,k/en, ,个/q, ,噪声/n,单词/n,，/w,而/c,没有/v,使用/v,整个/b,语料库/n, ,v/en,。/w,这/r,使得/v,训练/vn,变/v,得/u,非常/d,快/a,。/w,我们/r,实际上/d,使用/v,了/u,与/p,noise/en,-/w,contrastive/en, ,estimation/en, ,(/w,nce/en,)/w,介绍/v,的/u,非常/d,相似/a,的/u,方法/n,，/w,这/r,在/p,tensorflow/en,中/f,已经/d,封装/vn,了/u,一个/m,很/d,便捷/a,的/u,函数/n,tf/en,./w,nn/en,./w,nce/en,_,loss/en,(/w,)/w,0/m,x/en,3/m,:/w, ,skip/en,-/w,gram/en, ,模型/n,下面/f,来看/v,一下/m,这个/r,数据集/nw,the/en, ,quick/en, ,brown/en, ,fox/en, ,jumped/en, ,over/en, ,the/en, ,lazy/en, ,dog/en,我们/r,首先/d,对/p,一些/m,单词/n,以及/c,它们/r,的/u,上下文/n,环境/n,建立/v,一个/m,数据集/nw,。/w,我们/r,可以/v,以/p,任何/r,合理/a,的/u,方式/n,定义/n,'/w,上下文/n,'/w,，/w,而/c,通常/d,上/f,这个/r,方式/n,是/v,根据/p,文字/n,的/u,句法/n,语境/n,的/u,(/w,使用/v,语法/n,原理/n,的/u,方式/n,处理/v,当前/t,目标/n,单词/n,可/v,，/w,比如说/l,把/p,目标/n,单词/n,左边/f,的/u,内容/n,当做/v,一个/m,'/w,上下文/n,'/w,，/w,或者/c,以/p,目标/n,单词/n,右边/f,的/u,内容/n,，/w,等等/u,。/w,现在/t,我们/r,把/p,目标/n,单词/n,的/u,左右/m,单词/n,视作/v,一个/m,上下文/n,，/w, ,使用/v,大小/n,为/p,1/m,的/u,窗口/s,，/w,这样/r,就/d,得到/v,这样/r,一个/m,由/p,(/w,上下文/n,,/w, ,目标/n,单词/n,)/w, ,组成/v,的/u,数据集/nw,(/w,[/w,the/en,,/w, ,brown/en,]/w,,/w, ,quick/en,)/w,,/w, ,(/w,[/w,quick/en,,/w, ,fox/en,]/w,,/w, ,brown/en,)/w,,/w, ,(/w,[/w,brown/en,,/w, ,jumped/en,]/w,,/w, ,fox/en,)/w,,/w, ,./w,./w,./w,文/ng,提到/v,skip/en,-/w,gram/en,模型/n,是/v,把/p,目标/n,单词/n,和/c,上下文/n,颠倒/vn,过来/v,，/w,所以/c,在/p,这个/r,问题/n,中/f,，/w,举/v,个/q,例子/n,，/w,就是/d,用/p,'/w,quick/en,'/w,来/v,预测/v, ,'/w,the/en,'/w, ,和/c, ,'/w,brown/en,'/w, ,，/w,用/p, ,'/w,brown/en,'/w, ,预测/v, ,'/w,quick/en,'/w, ,和/c, ,'/w,brown/en,'/w, ,。/w,因此/c,这个/r,数据集/nw,就/d,变成/v,由/p,(/w,输入/v,,/w, ,输出/v,)/w,组成/v,的/u,：/w,(/w,quick/en,,/w, ,the/en,)/w,,/w, ,(/w,quick/en,,/w, ,brown/en,)/w,,/w, ,(/w,brown/en,,/w, ,quick/en,)/w,,/w, ,(/w,brown/en,,/w, ,fox/en,)/w,,/w, ,./w,./w,./w,目标/n,函数/n,通常/d,是/v,对/p,整个/b,数据集/nw,建立/v,的/u,，/w,但是/c,本/r,问题/n,中/f,要/v,对/p,每/r,一个/m,样本/n,（/w,或者/c,是/v,一个/m,batch/en,_,size/en, ,很/d,小/a,的/u,样本/n,集/vg,，/w,通常/d,设置/v,为/p,16/m, ,</w,=/w, ,batch/en,_,size/en, ,</w,=/w, ,512/m,）/w,在/p,同一/b,时间/n,执行/v,特别/d,的/u,操作/v,，/w,称之为/v,随机/d,梯度/n,下降/v, ,(/w,sgd/en,)/w,。/w,我们/r,来看/v,一下/m,训练/vn,过程/n,中/f,每/r,一步/mq,的/u,执行/v,。/w,假设/v,用/p, ,t/en, ,表示/v,上面/f,这个/r,例子/n,中/f,quick/en, ,来/v,预测/v, ,the/en, ,的/u,训练/vn,的/u,单个/b,循环/vn,。/w,用/p, ,num/en,_,noise/en, ,定义/n,从/p,噪声/n,分布/v,中/f,挑选/v,出来/v,的/u,噪声/n,（/w,相反/v,的/u,）/w,单词/n,的/u,个数/n,，/w,通常/d,使用/v,一元/mq,分布/v,，/w,p/en,(/w,w/en,)/w,。/w,为了/p,简单/a,起见/u,，/w,我们/r,就/d,定/v,num/en,_,noise/en,=/w,1/m,，/w,用/p, ,sheep/en, ,选/v,作/v,噪声/n,词/n,。/w,接下来/l,就/d,可以/v,计算/v,每/r,一对/mq,观察值/nw,和/c,噪声/n,值/n,的/u,损失/n,函数/n,了/u,，/w,每/r,一个/m,执行/v,步骤/n,就/d,可/v,表示/v,为/p,：/w,整个/b,计算/v,过程/n,的/u,目标/n,是/v,通过/p,更新/v,嵌套/v,参数/n, , ,来/v,逼近/v,目标/n,函数/n,(/w,这个/r,这个/r,例子/n,中/f,就/d,是/v,使/v,目标/n,函数/n,最大化/v,)/w,(/w,即/v,让/v,模型/n,向/p,对/p,目标值/n,预测/v,概率/n,最/d,高/a,，/w,而/c,对/p,噪音/n,值/n,预测/v,概率/n,最/d,低/a,)/w,。/w,为此/l,我们/r,要/v,计算/v,损失/n,函数/n,中/f,嵌套/v,参数/n,的/u,梯度/n,。/w,对于/p,整个/b,数据集/nw,，/w,当/p,梯度/n,下降/v,的/u,过程/n,中/f,不断/d,地/u,更新/v,参数/n,，/w,对应/v,产生/v,的/u,效果/n,就/d,是/v,不断/d,地/u,移动/vn,每个/r,单词/n,的/u,嵌套/v,向量/n,，/w,直到/v,可以/v,把/p,真实/a,单词/n,和/c,噪声/n,单词/n,很/d,好/a,得/u,区分/v,开/v,。/w,我们/r,可以/v,把/p,学习/v,向/p,量/n,映射/v,到/v,2/m,维中/nrf,以便/d,我们/r,观察/v,，/w,其中/r,用/p,到/v,的/u,技术/n,可以/v,参考/v, ,t/en,-/w,sne/en, ,降纬/nw,技术/n,。/w,当/p,我们/r,用/p,可视化/nz,的/u,方式/n,来/v,观察/v,这些/r,向量/n,，/w,就/d,可以/v,很/d,明显/a,的/u,获取/v,单词/n,之间/f,语义/n,信息/n,的/u,关系/n,，/w,这/r,实际上/d,是/v,非常/d,有用/a,的/u,。/w,当/p,我们/r,第一/m,次/q,发现/v,这样/r,的/u,诱导/vn,向量/n,空间/n,中/f,，/w,展示/v,了/u,一些/m,特定/b,的/u,语义/n,关系/n,，/w,这/r,是/v,非常/d,有趣/a,的/u,，/w,比如/v,文字/n,中/f, ,male/en,-/w,female/en,，/w,gender/en, ,甚至/d,还有/v, ,country/en,-/w,capital/en, ,的/u,关系/n,这/r,也/d,解释/v,了/u,为什么/r,这些/r,向/p,量/n,在/p,传统/n,的/u,nlp/en,问题/n,中/f,可/v,作为/v,特性/n,使用/v,，/w,比如/v,用/p,在/p,对/p,一个/m,演讲/v,章节/n,打/v,个/q,标签/n,，/w,或者/c,对/p,一个/m,专有名词/nw,的/u,识别/v,0/m,x/en,4/m,:/w, ,建立/v,图形/n,先/d,来/v,定义/n,一个/m,嵌套/v,参数/n,矩阵/n,。/w,我们/r,用/p,唯一/b,的/u,随机值/nw,来/v,初始化/v,这个/r,大/a,矩阵/n,embeddings/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,random/en,_,uniform/en,(/w,[/w,vocabulary/en,_,size/en,,/w, ,embedding/en,_,size/en,]/w,,/w, ,-/w,1.0/m,,/w, ,1.0/m,)/w,)/w,对/p,噪声/n,-/w,比对/d,的/u,损失/n,计算/v,就/d,使用/v,一个/m,逻辑/n,回归/v,模型/n,。/w,对此/d,，/w,我们/r,需要/v,对/p,语料库/n,中/f,的/u,每个/r,单词/n,定义/n,一个/m,权重/nz,值/n,和/c,偏差值/nw,。/w,(/w,也/d,可/v,称之为/v,输出/v,权重/nz, ,与/p,之/u,对应/v,的/u, ,输入/v,嵌/v,套/q,值/n,)/w,。/w,定义/n,如下/v,nce/en,_,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,vocabulary/en,_,size/en,,/w, ,embedding/en,_,size/en,]/w,,/w, ,stddev/en,=/w,1.0/m, ,//w, ,math/en,./w,sqrt/en,(/w,embedding/en,_,size/en,)/w,)/w,)/w, ,nce/en,_,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,vocabulary/en,_,size/en,]/w,)/w,)/w,我们/r,有/v,了/u,这些/r,参数/n,之后/f,，/w,就/d,可以/v,定义/n,skip/en,-/w,gram/en,模型/n,了/u,。/w,简单/a,起见/u,，/w,假设/v,我们/r,已经/d,把/p,语料库/n,中/f,的/u,文字/n,整型化/nw,了/u,，/w,这样/r,每个/r,整型/nw,代表/n,一个/m,单词/n,。/w,skip/en,-/w,gram/en,模型/n,有/v,两个/m,输入/v,。/w,一个/m,是/v,一组/mq,用/p,整型/nw,表示/v,的/u,上下文/n,单词/n,，/w,另/r,一个/m,是/v,目标/n,单词/n,。/w,给/p,这些/r,输入/v,建立/v,占位/v,符节点/nr,，/w,之后/f,就/d,可以/v,填/v,入/v,数据/n,了/u,#, ,建立/v,输入/v,占位/v,符/vg, ,train/en,_,inputs/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,shape/en,=/w,[/w,batch/en,_,size/en,]/w,)/w, ,train/en,_,labels/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,shape/en,=/w,[/w,batch/en,_,size/en,,/w, ,1/m,]/w,)/w,然后/c,我们/r,需要/v,对/p,批/q,数据/n,中/f,的/u,单词/n,建立/v,嵌套/v,向量/n,embed/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,embeddings/en,,/w, ,train/en,_,inputs/en,)/w,现在/t,我们/r,有/v,了/u,每个/r,单词/n,的/u,嵌套/v,向量/n,，/w,接下来/l,就/d,是/v,使用/v,噪声/n,-/w,比对/d,的/u,训练/vn,方式/n,来/v,预测/v,目标/n,单词/n,(/w,找到/v,最/d,有/v,可能/v,是/v,和/c,目标/n,单词/n,对应/v,的/u,上下文/n,)/w,#, ,计算/v, ,nce/en, ,损失/n,函数/n,,/w, ,每次/r,使用/v,负/v,标签/n,的/u,样本/n,./w, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w, ,tf/en,./w,nn/en,./w,nce/en,_,loss/en,(/w,nce/en,_,weights/en,,/w, ,nce/en,_,biases/en,,/w, ,embed/en,,/w, ,train/en,_,labels/en,,/w, ,num/en,_,sampled/en,,/w, ,vocabulary/en,_,size/en,)/w,)/w,我们/r,对/p,损失/n,函数/n,建立/v,了/u,图形/n,节点/n,，/w,然后/c,我们/r,需要/v,计算/v,相应/v,梯度/n,和/c,更新/v,参数/n,的/u,节点/n,，/w,比如说/l,在/p,这里/r,我们/r,会/v,使用/v,随机/d,梯度/n,下降/v,法/j,，/w,tensorflow/en,也/d,已经/d,封/q,装/v,好/a,了/u,该/r,过程/n,#, ,使用/v, ,sgd/en, ,控制器/n,./w, ,optimizer/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,learning/en,_,rate/en,=/w,1.0/m,)/w,./w,minimize/en,(/w,loss/en,)/w,0/m,x/en,5/m,:/w, ,训练/vn,模型/n,训练/vn,的/u,过程/n,很/d,简单/a,，/w,只要/c,在/p,循环/vn,中/f,使用/v,feed/en,_,dict/en,不断/d,给/p,占/v,位符/nw,填充/v,数据/n,，/w,同时/c,调用/v, ,session/en,./w,run/en,即可/v,for/en, ,inputs/en,,/w, ,labels/en, ,in/en, ,generate/en,_,batch/en,(/w,./w,./w,./w,)/w,:/w, ,feed/en,_,dict/en, ,=/w, ,{/w,training/en,_,inputs/en,:/w, ,inputs/en,,/w, ,training/en,_,labels/en,:/w, ,labels/en,}/w, ,_,,/w, ,cur/en,_,loss/en, ,=/w, ,session/en,./w,run/en,(/w,[/w,optimizer/en,,/w, ,loss/en,]/w,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w,0/m,x/en,6/m,:/w, ,嵌/v,套/q,学习/v,结果/n,可视化/nz,#, ,copyright/en, ,2015/m, ,the/en, ,tensorflow/en, ,authors/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,collections/en, ,import/en, ,math/en, ,import/en, ,os/en, ,import/en, ,random/en, ,import/en, ,zipfile/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,urllib/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,#, ,step/en, ,1/m,:/w, ,download/en, ,the/en, ,data/en,./w, ,url/en, ,=/w, ,'/w,http/en,:/w,//w,//w,mattmahoney/en,./w,net/en,//w,dc/en,//w,'/w, ,def/en, ,maybe/en,_,download/en,(/w,filename/en,,/w, ,expected/en,_,bytes/en,)/w,:/w, ,"/w,"/w,"/w,download/en, ,a/en, ,file/en, ,if/en, ,not/en, ,present/en,,/w, ,and/en, ,make/en, ,sure/en, ,it/en,'/w,s/en, ,the/en, ,right/en, ,size/en,./w,"/w,"/w,"/w, ,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,filename/en,)/w,:/w, ,filename/en,,/w, ,_, ,=/w, ,urllib/en,./w,request/en,./w,urlretrieve/en,(/w,url/en, ,+/w, ,filename/en,,/w, ,filename/en,)/w, ,statinfo/en, ,=/w, ,os/en,./w,stat/en,(/w,filename/en,)/w, ,if/en, ,statinfo/en,./w,st/en,_,size/en, ,=/w,=/w, ,expected/en,_,bytes/en,:/w, ,print/en,(/w,'/w,found/en, ,and/en, ,verified/en,'/w,,/w, ,filename/en,)/w, ,else/en,:/w, ,print/en,(/w,statinfo/en,./w,st/en,_,size/en,)/w, ,raise/en, ,exception/en,(/w, ,'/w,failed/en, ,to/en, ,verify/en, ,'/w, ,+/w, ,filename/en, ,+/w, ,'/w,./w, ,can/en, ,you/en, ,get/en, ,to/en, ,it/en, ,with/en, ,a/en, ,browser/en,?/w,'/w,)/w, ,return/en, ,filename/en, ,filename/en, ,=/w, ,maybe/en,_,download/en,(/w,'/w,text/en,8/m,./w,zip/en,'/w,,/w, ,31344016/m,)/w, ,#, ,read/en, ,the/en, ,data/en, ,into/en, ,a/en, ,list/en, ,of/en, ,strings/en,./w, ,def/en, ,read/en,_,data/en,(/w,filename/en,)/w,:/w, ,"/w,"/w,"/w,extract/en, ,the/en, ,first/en, ,file/en, ,enclosed/en, ,in/en, ,a/en, ,zip/en, ,file/en, ,as/en, ,a/en, ,list/en, ,of/en, ,words/en,"/w,"/w,"/w, ,with/en, ,zipfile/en,./w,zipfile/en,(/w,filename/en,)/w, ,as/en, ,f/en,:/w, ,data/en, ,=/w, ,tf/en,./w,compat/en,./w,as/en,_,str/en,(/w,f/en,./w,read/en,(/w,f/en,./w,namelist/en,(/w,)/w,[/w,0/m,]/w,)/w,)/w,./w,split/en,(/w,)/w, ,return/en, ,data/en, ,words/en, ,=/w, ,read/en,_,data/en,(/w,filename/en,)/w, ,print/en,(/w,'/w,data/en, ,size/en,'/w,,/w, ,len/en,(/w,words/en,)/w,)/w, ,#, ,step/en, ,2/m,:/w, ,build/en, ,the/en, ,dictionary/en, ,and/en, ,replace/en, ,rare/en, ,words/en, ,with/en, ,unk/en, ,token/en,./w, ,vocabulary/en,_,size/en, ,=/w, ,50000/m, ,def/en, ,build/en,_,dataset/en,(/w,words/en,)/w,:/w, ,count/en, ,=/w, ,[/w,[/w,'/w,unk/en,'/w,,/w, ,-/w,1/m,]/w,]/w, ,count/en,./w,extend/en,(/w,collections/en,./w,counter/en,(/w,words/en,)/w,./w,most/en,_,common/en,(/w,vocabulary/en,_,size/en, ,-/w, ,1/m,)/w,)/w, ,dictionary/en, ,=/w, ,dict/en,(/w,)/w, ,for/en, ,word/en,,/w, ,_, ,in/en, ,count/en,:/w, ,dictionary/en,[/w,word/en,]/w, ,=/w, ,len/en,(/w,dictionary/en,)/w, ,data/en, ,=/w, ,list/en,(/w,)/w, ,unk/en,_,count/en, ,=/w, ,0/m, ,for/en, ,word/en, ,in/en, ,words/en,:/w, ,if/en, ,word/en, ,in/en, ,dictionary/en,:/w, ,index/en, ,=/w, ,dictionary/en,[/w,word/en,]/w, ,else/en,:/w, ,index/en, ,=/w, ,0/m, ,#, ,dictionary/en,[/w,'/w,unk/en,'/w,]/w, ,unk/en,_,count/en, ,+/w,=/w, ,1/m, ,data/en,./w,append/en,(/w,index/en,)/w, ,count/en,[/w,0/m,]/w,[/w,1/m,]/w, ,=/w, ,unk/en,_,count/en, ,reverse/en,_,dictionary/en, ,=/w, ,dict/en,(/w,zip/en,(/w,dictionary/en,./w,values/en,(/w,)/w,,/w, ,dictionary/en,./w,keys/en,(/w,)/w,)/w,)/w, ,return/en, ,data/en,,/w, ,count/en,,/w, ,dictionary/en,,/w, ,reverse/en,_,dictionary/en, ,data/en,,/w, ,count/en,,/w, ,dictionary/en,,/w, ,reverse/en,_,dictionary/en, ,=/w, ,build/en,_,dataset/en,(/w,words/en,)/w, ,del/en, ,words/en, ,#, ,hint/en, ,to/en, ,reduce/en, ,memory/en,./w, ,print/en,(/w,'/w,most/en, ,common/en, ,words/en, ,(/w,+/w,unk/en,)/w,'/w,,/w, ,count/en,[/w,:/w,5/m,]/w,)/w, ,print/en,(/w,'/w,sample/en, ,data/en,'/w,,/w, ,data/en,[/w,:/w,10/m,]/w,,/w, ,[/w,reverse/en,_,dictionary/en,[/w,i/en,]/w, ,for/en, ,i/en, ,in/en, ,data/en,[/w,:/w,10/m,]/w,]/w,)/w, ,data/en,_,index/en, ,=/w, ,0/m, ,#, ,step/en, ,3/m,:/w, ,function/en, ,to/en, ,generate/en, ,a/en, ,training/en, ,batch/en, ,for/en, ,the/en, ,skip/en,-/w,gram/en, ,model/en,./w, ,def/en, ,generate/en,_,batch/en,(/w,batch/en,_,size/en,,/w, ,num/en,_,skips/en,,/w, ,skip/en,_,window/en,)/w,:/w, ,global/en, ,data/en,_,index/en, ,assert/en, ,batch/en,_,size/en, ,%/w, ,num/en,_,skips/en, ,=/w,=/w, ,0/m, ,assert/en, ,num/en,_,skips/en, ,</w,=/w, ,2/m, ,*/w, ,skip/en,_,window/en, ,batch/en, ,=/w, ,np/en,./w,ndarray/en,(/w,shape/en,=/w,(/w,batch/en,_,size/en,)/w,,/w, ,dtype/en,=/w,np/en,./w,int/en,32/m,)/w, ,labels/en, ,=/w, ,np/en,./w,ndarray/en,(/w,shape/en,=/w,(/w,batch/en,_,size/en,,/w, ,1/m,)/w,,/w, ,dtype/en,=/w,np/en,./w,int/en,32/m,)/w, ,span/en, ,=/w, ,2/m, ,*/w, ,skip/en,_,window/en, ,+/w, ,1/m, ,#, ,[/w, ,skip/en,_,window/en, ,target/en, ,skip/en,_,window/en, ,]/w, ,buffer/en, ,=/w, ,collections/en,./w,deque/en,(/w,maxlen/en,=/w,span/en,)/w, ,for/en, ,_, ,in/en, ,range/en,(/w,span/en,)/w,:/w, ,buffer/en,./w,append/en,(/w,data/en,[/w,data/en,_,index/en,]/w,)/w, ,data/en,_,index/en, ,=/w, ,(/w,data/en,_,index/en, ,+/w, ,1/m,)/w, ,%/w, ,len/en,(/w,data/en,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,batch/en,_,size/en, ,//w,//w, ,num/en,_,skips/en,)/w,:/w, ,target/en, ,=/w, ,skip/en,_,window/en, ,#, ,target/en, ,label/en, ,at/en, ,the/en, ,center/en, ,of/en, ,the/en, ,buffer/en, ,targets/en,_,to/en,_,avoid/en, ,=/w, ,[/w,skip/en,_,window/en,]/w, ,for/en, ,j/en, ,in/en, ,range/en,(/w,num/en,_,skips/en,)/w,:/w, ,while/en, ,target/en, ,in/en, ,targets/en,_,to/en,_,avoid/en,:/w, ,target/en, ,=/w, ,random/en,./w,randint/en,(/w,0/m,,/w, ,span/en, ,-/w, ,1/m,)/w, ,targets/en,_,to/en,_,avoid/en,./w,append/en,(/w,target/en,)/w, ,batch/en,[/w,i/en, ,*/w, ,num/en,_,skips/en, ,+/w, ,j/en,]/w, ,=/w, ,buffer/en,[/w,skip/en,_,window/en,]/w, ,labels/en,[/w,i/en, ,*/w, ,num/en,_,skips/en, ,+/w, ,j/en,,/w, ,0/m,]/w, ,=/w, ,buffer/en,[/w,target/en,]/w, ,buffer/en,./w,append/en,(/w,data/en,[/w,data/en,_,index/en,]/w,)/w, ,data/en,_,index/en, ,=/w, ,(/w,data/en,_,index/en, ,+/w, ,1/m,)/w, ,%/w, ,len/en,(/w,data/en,)/w, ,#, ,backtrack/en, ,a/en, ,little/en, ,bit/en, ,to/en, ,avoid/en, ,skipping/en, ,words/en, ,in/en, ,the/en, ,end/en, ,of/en, ,a/en, ,batch/en, ,data/en,_,index/en, ,=/w, ,(/w,data/en,_,index/en, ,+/w, ,len/en,(/w,data/en,)/w, ,-/w, ,span/en,)/w, ,%/w, ,len/en,(/w,data/en,)/w, ,return/en, ,batch/en,,/w, ,labels/en, ,batch/en,,/w, ,labels/en, ,=/w, ,generate/en,_,batch/en,(/w,batch/en,_,size/en,=/w,8/m,,/w, ,num/en,_,skips/en,=/w,2/m,,/w, ,skip/en,_,window/en,=/w,1/m,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,8/m,)/w,:/w, ,print/en,(/w,batch/en,[/w,i/en,]/w,,/w, ,reverse/en,_,dictionary/en,[/w,batch/en,[/w,i/en,]/w,]/w,,/w, ,'/w,-/w,>,'/w,,/w, ,labels/en,[/w,i/en,,/w, ,0/m,]/w,,/w, ,reverse/en,_,dictionary/en,[/w,labels/en,[/w,i/en,,/w, ,0/m,]/w,]/w,)/w, ,#, ,step/en, ,4/m,:/w, ,build/en, ,and/en, ,train/en, ,a/en, ,skip/en,-/w,gram/en, ,model/en,./w, ,batch/en,_,size/en, ,=/w, ,128/m, ,embedding/en,_,size/en, ,=/w, ,128/m, ,#, ,dimension/en, ,of/en, ,the/en, ,embedding/en, ,vector/en,./w, ,skip/en,_,window/en, ,=/w, ,1/m, ,#, ,how/en, ,many/en, ,words/en, ,to/en, ,consider/en, ,left/en, ,and/en, ,right/en,./w, ,num/en,_,skips/en, ,=/w, ,2/m, ,#, ,how/en, ,many/en, ,times/en, ,to/en, ,reuse/en, ,an/en, ,input/en, ,to/en, ,generate/en, ,a/en, ,label/en,./w, ,#, ,we/en, ,pick/en, ,a/en, ,random/en, ,validation/en, ,set/en, ,to/en, ,sample/en, ,nearest/en, ,neighbors/en,./w, ,here/en, ,we/en, ,limit/en, ,the/en, ,#, ,validation/en, ,samples/en, ,to/en, ,the/en, ,words/en, ,that/en, ,have/en, ,a/en, ,low/en, ,numeric/en, ,id/en,,/w, ,which/en, ,by/en, ,#, ,construction/en, ,are/en, ,also/en, ,the/en, ,most/en, ,frequent/en,./w, ,valid/en,_,size/en, ,=/w, ,16/m, ,#, ,random/en, ,set/en, ,of/en, ,words/en, ,to/en, ,evaluate/en, ,similarity/en, ,on/en,./w, ,valid/en,_,window/en, ,=/w, ,100/m, ,#, ,only/en, ,pick/en, ,dev/en, ,samples/en, ,in/en, ,the/en, ,head/en, ,of/en, ,the/en, ,distribution/en,./w, ,valid/en,_,examples/en, ,=/w, ,np/en,./w,random/en,./w,choice/en,(/w,valid/en,_,window/en,,/w, ,valid/en,_,size/en,,/w, ,replace/en,=/w,false/en,)/w, ,num/en,_,sampled/en, ,=/w, ,64/m, ,#, ,number/en, ,of/en, ,negative/en, ,examples/en, ,to/en, ,sample/en,./w, ,graph/en, ,=/w, ,tf/en,./w,graph/en,(/w,)/w, ,with/en, ,graph/en,./w,as/en,_,default/en,(/w,)/w,:/w, ,#, ,input/en, ,data/en,./w, ,train/en,_,inputs/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,shape/en,=/w,[/w,batch/en,_,size/en,]/w,)/w, ,train/en,_,labels/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,shape/en,=/w,[/w,batch/en,_,size/en,,/w, ,1/m,]/w,)/w, ,valid/en,_,dataset/en, ,=/w, ,tf/en,./w,constant/en,(/w,valid/en,_,examples/en,,/w, ,dtype/en,=/w,tf/en,./w,int/en,32/m,)/w, ,#, ,ops/en, ,and/en, ,variables/en, ,pinned/en, ,to/en, ,the/en, ,cpu/en, ,because/en, ,of/en, ,missing/en, ,gpu/en, ,implementation/en, ,with/en, ,tf/en,./w,device/en,(/w,'/w,//w,cpu/en,:/w,0/m,'/w,)/w,:/w, ,#, ,look/en, ,up/en, ,embeddings/en, ,for/en, ,inputs/en,./w, ,embeddings/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,random/en,_,uniform/en,(/w,[/w,vocabulary/en,_,size/en,,/w, ,embedding/en,_,size/en,]/w,,/w, ,-/w,1.0/m,,/w, ,1.0/m,)/w,)/w, ,embed/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,embeddings/en,,/w, ,train/en,_,inputs/en,)/w, ,#, ,construct/en, ,the/en, ,variables/en, ,for/en, ,the/en, ,nce/en, ,loss/en, ,nce/en,_,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,vocabulary/en,_,size/en,,/w, ,embedding/en,_,size/en,]/w,,/w, ,stddev/en,=/w,1.0/m, ,//w, ,math/en,./w,sqrt/en,(/w,embedding/en,_,size/en,)/w,)/w,)/w, ,nce/en,_,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,vocabulary/en,_,size/en,]/w,)/w,)/w, ,#, ,compute/en, ,the/en, ,average/en, ,nce/en, ,loss/en, ,for/en, ,the/en, ,batch/en,./w, ,#, ,tf/en,./w,nce/en,_,loss/en, ,automatically/en, ,draws/en, ,a/en, ,new/en, ,sample/en, ,of/en, ,the/en, ,negative/en, ,labels/en, ,each/en, ,#, ,time/en, ,we/en, ,evaluate/en, ,the/en, ,loss/en,./w, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w, ,tf/en,./w,nn/en,./w,nce/en,_,loss/en,(/w,weights/en,=/w,nce/en,_,weights/en,,/w, ,biases/en,=/w,nce/en,_,biases/en,,/w, ,labels/en,=/w,train/en,_,labels/en,,/w, ,inputs/en,=/w,embed/en,,/w, ,num/en,_,sampled/en,=/w,num/en,_,sampled/en,,/w, ,num/en,_,classes/en,=/w,vocabulary/en,_,size/en,)/w,)/w, ,#, ,construct/en, ,the/en, ,sgd/en, ,optimizer/en, ,using/en, ,a/en, ,learning/en, ,rate/en, ,of/en, ,1/m,./w,0/m,./w, ,optimizer/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,1.0/m,)/w,./w,minimize/en,(/w,loss/en,)/w, ,#, ,compute/en, ,the/en, ,cosine/en, ,similarity/en, ,between/en, ,minibatch/en, ,examples/en, ,and/en, ,all/en, ,embeddings/en,./w, ,norm/en, ,=/w, ,tf/en,./w,sqrt/en,(/w,tf/en,./w,reduce/en,_,sum/en,(/w,tf/en,./w,square/en,(/w,embeddings/en,)/w,,/w, ,1/m,,/w, ,keep/en,_,dims/en,=/w,true/en,)/w,)/w, ,normalized/en,_,embeddings/en, ,=/w, ,embeddings/en, ,//w, ,norm/en, ,valid/en,_,embeddings/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w, ,normalized/en,_,embeddings/en,,/w, ,valid/en,_,dataset/en,)/w, ,similarity/en, ,=/w, ,tf/en,./w,matmul/en,(/w, ,valid/en,_,embeddings/en,,/w, ,normalized/en,_,embeddings/en,,/w, ,transpose/en,_,b/en,=/w,true/en,)/w, ,#, ,add/en, ,variable/en, ,initializer/en,./w, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,#, ,step/en, ,5/m,:/w, ,begin/en, ,training/en,./w, ,num/en,_,steps/en, ,=/w, ,100001/m, ,with/en, ,tf/en,./w,session/en,(/w,graph/en,=/w,graph/en,)/w, ,as/en, ,session/en,:/w, ,#, ,we/en, ,must/en, ,initialize/en, ,all/en, ,variables/en, ,before/en, ,we/en, ,use/en, ,them/en,./w, ,init/en,./w,run/en,(/w,)/w, ,print/en,(/w,"/w,initialized/en,"/w,)/w, ,average/en,_,loss/en, ,=/w, ,0/m, ,for/en, ,step/en, ,in/en, ,xrange/en,(/w,num/en,_,steps/en,)/w,:/w, ,batch/en,_,inputs/en,,/w, ,batch/en,_,labels/en, ,=/w, ,generate/en,_,batch/en,(/w, ,batch/en,_,size/en,,/w, ,num/en,_,skips/en,,/w, ,skip/en,_,window/en,)/w, ,feed/en,_,dict/en, ,=/w, ,{/w,train/en,_,inputs/en,:/w, ,batch/en,_,inputs/en,,/w, ,train/en,_,labels/en,:/w, ,batch/en,_,labels/en,}/w, ,#, ,we/en, ,perform/en, ,one/en, ,update/en, ,step/en, ,by/en, ,evaluating/en, ,the/en, ,optimizer/en, ,op/en, ,(/w,including/en, ,it/en, ,#, ,in/en, ,the/en, ,list/en, ,of/en, ,returned/en, ,values/en, ,for/en, ,session/en,./w,run/en,(/w,)/w, ,_,,/w, ,loss/en,_,val/en, ,=/w, ,session/en,./w,run/en,(/w,[/w,optimizer/en,,/w, ,loss/en,]/w,,/w, ,feed/en,_,dict/en,=/w,feed/en,_,dict/en,)/w, ,average/en,_,loss/en, ,+/w,=/w, ,loss/en,_,val/en, ,if/en, ,step/en, ,%/w, ,2000/m, ,=/w,=/w, ,0/m,:/w, ,if/en, ,step/en, ,>, ,0/m,:/w, ,average/en,_,loss/en, ,//w,=/w, ,2000/m, ,#, ,the/en, ,average/en, ,loss/en, ,is/en, ,an/en, ,estimate/en, ,of/en, ,the/en, ,loss/en, ,over/en, ,the/en, ,last/en, ,2000/m, ,batches/en,./w, ,print/en,(/w,"/w,average/en, ,loss/en, ,at/en, ,step/en, ,"/w,,/w, ,step/en,,/w, ,"/w,:/w, ,"/w,,/w, ,average/en,_,loss/en,)/w, ,average/en,_,loss/en, ,=/w, ,0/m, ,#, ,note/en, ,that/en, ,this/en, ,is/en, ,expensive/en, ,(/w,~/w,20%/mq, ,slowdown/en, ,if/en, ,computed/en, ,every/en, ,500/m, ,steps/en,)/w, ,if/en, ,step/en, ,%/w, ,10000/m, ,=/w,=/w, ,0/m,:/w, ,sim/en, ,=/w, ,similarity/en,./w,eval/en,(/w,)/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,valid/en,_,size/en,)/w,:/w, ,valid/en,_,word/en, ,=/w, ,reverse/en,_,dictionary/en,[/w,valid/en,_,examples/en,[/w,i/en,]/w,]/w, ,top/en,_,k/en, ,=/w, ,8/m, ,#, ,number/en, ,of/en, ,nearest/en, ,neighbors/en, ,nearest/en, ,=/w, ,(/w,-/w,sim/en,[/w,i/en,,/w, ,:/w,]/w,)/w,./w,argsort/en,(/w,)/w,[/w,1/m,:/w,top/en,_,k/en, ,+/w, ,1/m,]/w, ,log/en,_,str/en, ,=/w, ,"/w,nearest/en, ,to/en, ,%/w,s/en,:/w,"/w, ,%/w, ,valid/en,_,word/en, ,for/en, ,k/en, ,in/en, ,xrange/en,(/w,top/en,_,k/en,)/w,:/w, ,close/en,_,word/en, ,=/w, ,reverse/en,_,dictionary/en,[/w,nearest/en,[/w,k/en,]/w,]/w, ,log/en,_,str/en, ,=/w, ,"/w,%/w,s/en, ,%/w,s/en,,/w,"/w, ,%/w, ,(/w,log/en,_,str/en,,/w, ,close/en,_,word/en,)/w, ,print/en,(/w,log/en,_,str/en,)/w, ,final/en,_,embeddings/en, ,=/w, ,normalized/en,_,embeddings/en,./w,eval/en,(/w,)/w, ,#, ,step/en, ,6/m,:/w, ,visualize/en, ,the/en, ,embeddings/en,./w, ,def/en, ,plot/en,_,with/en,_,labels/en,(/w,low/en,_,dim/en,_,embs/en,,/w, ,labels/en,,/w, ,filename/en,=/w,'/w,tsne/en,./w,png/en,'/w,)/w,:/w, ,assert/en, ,low/en,_,dim/en,_,embs/en,./w,shape/en,[/w,0/m,]/w, ,>,=/w, ,len/en,(/w,labels/en,)/w,,/w, ,"/w,more/en, ,labels/en, ,than/en, ,embeddings/en,"/w, ,plt/en,./w,figure/en,(/w,figsize/en,=/w,(/w,18/m,,/w, ,18/m,)/w,)/w, ,#, ,in/en, ,inches/en, ,for/en, ,i/en,,/w, ,label/en, ,in/en, ,enumerate/en,(/w,labels/en,)/w,:/w, ,x/en,,/w, ,y/en, ,=/w, ,low/en,_,dim/en,_,embs/en,[/w,i/en,,/w, ,:/w,]/w, ,plt/en,./w,scatter/en,(/w,x/en,,/w, ,y/en,)/w, ,plt/en,./w,annotate/en,(/w,label/en,,/w, ,xy/en,=/w,(/w,x/en,,/w, ,y/en,)/w,,/w, ,xytext/en,=/w,(/w,5/m,,/w, ,2/m,)/w,,/w, ,textcoords/en,=/w,'/w,offset/en, ,points/en,'/w,,/w, ,ha/en,=/w,'/w,right/en,'/w,,/w, ,va/en,=/w,'/w,bottom/en,'/w,)/w, ,plt/en,./w,savefig/en,(/w,filename/en,)/w, ,try/en,:/w, ,from/en, ,sklearn/en,./w,manifold/en, ,import/en, ,tsne/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,tsne/en, ,=/w, ,tsne/en,(/w,perplexity/en,=/w,30/m,,/w, ,n/en,_,components/en,=/w,2/m,,/w, ,init/en,=/w,'/w,pca/en,'/w,,/w, ,n/en,_,iter/en,=/w,5000/m,)/w, ,plot/en,_,only/en, ,=/w, ,500/m, ,low/en,_,dim/en,_,embs/en, ,=/w, ,tsne/en,./w,fit/en,_,transform/en,(/w,final/en,_,embeddings/en,[/w,:/w,plot/en,_,only/en,,/w, ,:/w,]/w,)/w, ,labels/en, ,=/w, ,[/w,reverse/en,_,dictionary/en,[/w,i/en,]/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,plot/en,_,only/en,)/w,]/w, ,plot/en,_,with/en,_,labels/en,(/w,low/en,_,dim/en,_,embs/en,,/w, ,labels/en,)/w, ,except/en, ,importerror/en,:/w, ,print/en,(/w,"/w,please/en, ,install/en, ,sklearn/en,,/w, ,matplotlib/en,,/w, ,and/en, ,scipy/en, ,to/en, ,visualize/en, ,embeddings/en,./w,"/w,)/w,0/m,x/en,7/m,:/w, ,嵌/v,套/q,学习/v,的/u,评估/vn,:/w, ,类比/v,推理/vn,词嵌/nw,套/q,在/p,nlp/en,的/u,预测/v,问题/n,中/f,是/v,非常/d,有用/a,且/c,使用/v,广泛/a,地/u,。/w,如果/c,要/v,检测/vn,一个/m,模型/n,是否/v,是/v,可以/v,成熟/a,地区/n,分词性/nw,或者/c,区分/v,专有名词/nw,的/u,模型/n,，/w,最/d,简单/a,的/u,办法/n,就/d,是/v,直接/ad,检验/v,它/r,的/u,预测/v,词性/n,、/w,语义/n,关系/n,的/u,能力/n,，/w,比如/v,让/v,它/r,解决/v,形/ng,如/v,king/en, ,is/en, ,to/en, ,queen/en, ,as/en, ,father/en, ,is/en, ,to/en, ,?/w,这样/r,的/u,问题/n,。/w,这种/r,方法/n,叫做/v,类比/v,推理/vn,#, ,copyright/en, ,2015/m, ,google/en, ,inc/en,./w, ,all/en, ,rights/en, ,reserved/en,./w, ,#, ,#, ,licensed/en, ,under/en, ,the/en, ,apache/en, ,license/en,,/w, ,version/en, ,2.0/m, ,(/w,the/en, ,"/w,license/en,"/w,)/w,;/w, ,#, ,you/en, ,may/en, ,not/en, ,use/en, ,this/en, ,file/en, ,except/en, ,in/en, ,compliance/en, ,with/en, ,the/en, ,license/en,./w, ,#, ,you/en, ,may/en, ,obtain/en, ,a/en, ,copy/en, ,of/en, ,the/en, ,license/en, ,at/en, ,#, ,#, ,http/en,:/w,//w,//w,www/en,./w,apache/en,./w,org/en,//w,licenses/en,//w,license/en,-/w,2.0/m, ,#, ,#, ,unless/en, ,required/en, ,by/en, ,applicable/en, ,law/en, ,or/en, ,agreed/en, ,to/en, ,in/en, ,writing/en,,/w, ,software/en, ,#, ,distributed/en, ,under/en, ,the/en, ,license/en, ,is/en, ,distributed/en, ,on/en, ,an/en, ,"/w,as/en, ,is/en,"/w, ,basis/en,,/w, ,#, ,without/en, ,warranties/en, ,or/en, ,conditions/en, ,of/en, ,any/en, ,kind/en,,/w, ,either/en, ,express/en, ,or/en, ,implied/en,./w, ,#, ,see/en, ,the/en, ,license/en, ,for/en, ,the/en, ,specific/en, ,language/en, ,governing/en, ,permissions/en, ,and/en, ,#, ,limitations/en, ,under/en, ,the/en, ,license/en,./w, ,#, ,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w, ,"/w,"/w,"/w,multi/en,-/w,threaded/en, ,word/en,2/m,vec/en, ,mini/en,-/w,batched/en, ,skip/en,-/w,gram/en, ,model/en,./w, ,trains/en, ,the/en, ,model/en, ,described/en, ,in/en,:/w, ,(/w,mikolov/en,,/w, ,et/en,./w, ,al/en,./w,)/w, ,efficient/en, ,estimation/en, ,of/en, ,word/en, ,representations/en, ,in/en, ,vector/en, ,space/en, ,iclr/en, ,2013/m,./w, ,http/en,:/w,//w,//w,arxiv/en,./w,org/en,//w,abs/en,//w,1301.3781/m, ,this/en, ,model/en, ,does/en, ,traditional/en, ,minibatching/en,./w, ,the/en, ,key/en, ,ops/en, ,used/en, ,are/en,:/w, ,*/w, ,placeholder/en, ,for/en, ,feeding/en, ,in/en, ,tensors/en, ,for/en, ,each/en, ,example/en,./w, ,*/w, ,embedding/en,_,lookup/en, ,for/en, ,fetching/en, ,rows/en, ,from/en, ,the/en, ,embedding/en, ,matrix/en,./w, ,*/w, ,sigmoid/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en, ,to/en, ,calculate/en, ,the/en, ,loss/en,./w, ,*/w, ,gradientdescentoptimizer/en, ,for/en, ,optimizing/en, ,the/en, ,loss/en,./w, ,*/w, ,skipgram/en, ,custom/en, ,op/en, ,that/en, ,does/en, ,input/en, ,processing/en,./w, ,"/w,"/w,"/w, ,from/en, ,_,_,future/en,_,_, ,import/en, ,absolute/en,_,import/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,division/en, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,os/en, ,import/en, ,sys/en, ,import/en, ,threading/en, ,import/en, ,time/en, ,import/en, ,tensorflow/en,./w,python/en,./w,platform/en, ,from/en, ,six/en,./w,moves/en, ,import/en, ,xrange/en, ,#, ,pylint/en,:/w, ,disable/en,=/w,redefined/en,-/w,builtin/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,from/en, ,tensorflow/en,./w,models/en,./w,embedding/en, ,import/en, ,gen/en,_,word/en,2/m,vec/en, ,as/en, ,word/en,2/m,vec/en, ,flags/en, ,=/w, ,tf/en,./w,app/en,./w,flags/en, ,flags/en,./w,define/en,_,string/en,(/w,"/w,save/en,_,path/en,"/w,,/w, ,none/en,,/w, ,"/w,directory/en, ,to/en, ,write/en, ,the/en, ,model/en, ,and/en, ,"/w, ,"/w,training/en, ,summaries/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,string/en,(/w,"/w,train/en,_,data/en,"/w,,/w, ,none/en,,/w, ,"/w,training/en, ,text/en, ,file/en,./w, ,"/w, ,"/w,e/en,./w,g/en,./w,,/w, ,unzipped/en, ,file/en, ,http/en,:/w,//w,//w,mattmahoney/en,./w,net/en,//w,dc/en,//w,text/en,8/m,./w,zip/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,string/en,(/w, ,"/w,eval/en,_,data/en,"/w,,/w, ,none/en,,/w, ,"/w,file/en, ,consisting/en, ,of/en, ,analogies/en, ,of/en, ,four/en, ,tokens/en,./w,"/w, ,"/w,embedding/en, ,2/m, ,-/w, ,embedding/en, ,1/m, ,+/w, ,embedding/en, ,3/m, ,should/en, ,be/en, ,close/en, ,"/w, ,"/w,to/en, ,embedding/en, ,4/m,./w,"/w, ,"/w,e/en,./w,g/en,./w, ,https/en,:/w,//w,//w,word/en,2/m,vec/en,./w,googlecode/en,./w,com/en,//w,svn/en,//w,trunk/en,//w,questions/en,-/w,words/en,./w,txt/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,embedding/en,_,size/en,"/w,,/w, ,200/m,,/w, ,"/w,the/en, ,embedding/en, ,dimension/en, ,size/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w, ,"/w,epochs/en,_,to/en,_,train/en,"/w,,/w, ,15/m,,/w, ,"/w,number/en, ,of/en, ,epochs/en, ,to/en, ,train/en,./w, ,each/en, ,epoch/en, ,processes/en, ,the/en, ,training/en, ,data/en, ,once/en, ,"/w, ,"/w,completely/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,float/en,(/w,"/w,learning/en,_,rate/en,"/w,,/w, ,0.2/m,,/w, ,"/w,initial/en, ,learning/en, ,rate/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,num/en,_,neg/en,_,samples/en,"/w,,/w, ,100/m,,/w, ,"/w,negative/en, ,samples/en, ,per/en, ,training/en, ,example/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,batch/en,_,size/en,"/w,,/w, ,16/m,,/w, ,"/w,number/en, ,of/en, ,training/en, ,examples/en, ,processed/en, ,per/en, ,step/en, ,"/w, ,"/w,(/w,size/en, ,of/en, ,a/en, ,minibatch/en,)/w,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,concurrent/en,_,steps/en,"/w,,/w, ,12/m,,/w, ,"/w,the/en, ,number/en, ,of/en, ,concurrent/en, ,training/en, ,steps/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,window/en,_,size/en,"/w,,/w, ,5/m,,/w, ,"/w,the/en, ,number/en, ,of/en, ,words/en, ,to/en, ,predict/en, ,to/en, ,the/en, ,left/en, ,and/en, ,right/en, ,"/w, ,"/w,of/en, ,the/en, ,target/en, ,word/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,min/en,_,count/en,"/w,,/w, ,5/m,,/w, ,"/w,the/en, ,minimum/en, ,number/en, ,of/en, ,word/en, ,occurrences/en, ,for/en, ,it/en, ,to/en, ,be/en, ,"/w, ,"/w,included/en, ,in/en, ,the/en, ,vocabulary/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,float/en,(/w,"/w,subsample/en,"/w,,/w, ,1/m,e/en,-/w,3/m,,/w, ,"/w,subsample/en, ,threshold/en, ,for/en, ,word/en, ,occurrence/en,./w, ,words/en, ,that/en, ,appear/en, ,"/w, ,"/w,with/en, ,higher/en, ,frequency/en, ,will/en, ,be/en, ,randomly/en, ,down/en,-/w,sampled/en,./w, ,set/en, ,"/w, ,"/w,to/en, ,0/m, ,to/en, ,disable/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,boolean/en,(/w, ,"/w,interactive/en,"/w,,/w, ,false/en,,/w, ,"/w,if/en, ,true/en,,/w, ,enters/en, ,an/en, ,ipython/en, ,interactive/en, ,session/en, ,to/en, ,play/en, ,with/en, ,the/en, ,trained/en, ,"/w, ,"/w,model/en,./w, ,e/en,./w,g/en,./w,,/w, ,try/en, ,model/en,./w,analogy/en,(/w,'/w,france/en,'/w,,/w, ,'/w,paris/en,'/w,,/w, ,'/w,russia/en,'/w,)/w, ,and/en, ,"/w, ,"/w,model/en,./w,nearby/en,(/w,[/w,'/w,proton/en,'/w,,/w, ,'/w,elephant/en,'/w,,/w, ,'/w,maxwell/en,'/w,]/w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,statistics/en,_,interval/en,"/w,,/w, ,5/m,,/w, ,"/w,print/en, ,statistics/en, ,every/en, ,n/en, ,seconds/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,summary/en,_,interval/en,"/w,,/w, ,5/m,,/w, ,"/w,save/en, ,training/en, ,summary/en, ,to/en, ,file/en, ,every/en, ,n/en, ,seconds/en, ,(/w,rounded/en, ,"/w, ,"/w,up/en, ,to/en, ,statistics/en, ,interval/en,./w,"/w,)/w, ,flags/en,./w,define/en,_,integer/en,(/w,"/w,checkpoint/en,_,interval/en,"/w,,/w, ,600/m,,/w, ,"/w,checkpoint/en, ,the/en, ,model/en, ,(/w,i/en,./w,e/en,./w, ,save/en, ,the/en, ,parameters/en,)/w, ,every/en, ,n/en, ,"/w, ,"/w,seconds/en, ,(/w,rounded/en, ,up/en, ,to/en, ,statistics/en, ,interval/en,./w,"/w,)/w, ,flags/en, ,=/w, ,flags/en,./w,flags/en, ,class/en, ,options/en,(/w,object/en,)/w,:/w, ,"/w,"/w,"/w,options/en, ,used/en, ,by/en, ,our/en, ,word/en,2/m,vec/en, ,model/en,./w,"/w,"/w,"/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,)/w,:/w, ,#, ,model/en, ,options/en,./w, ,#, ,embedding/en, ,dimension/en,./w, ,self/en,./w,emb/en,_,dim/en, ,=/w, ,flags/en,./w,embedding/en,_,size/en, ,#, ,training/en, ,options/en,./w, ,#, ,the/en, ,training/en, ,text/en, ,file/en,./w, ,self/en,./w,train/en,_,data/en, ,=/w, ,flags/en,./w,train/en,_,data/en, ,#, ,number/en, ,of/en, ,negative/en, ,samples/en, ,per/en, ,example/en,./w, ,self/en,./w,num/en,_,samples/en, ,=/w, ,flags/en,./w,num/en,_,neg/en,_,samples/en, ,#, ,the/en, ,initial/en, ,learning/en, ,rate/en,./w, ,self/en,./w,learning/en,_,rate/en, ,=/w, ,flags/en,./w,learning/en,_,rate/en, ,#, ,number/en, ,of/en, ,epochs/en, ,to/en, ,train/en,./w, ,after/en, ,these/en, ,many/en, ,epochs/en,,/w, ,the/en, ,learning/en, ,#, ,rate/en, ,decays/en, ,linearly/en, ,to/en, ,zero/en, ,and/en, ,the/en, ,training/en, ,stops/en,./w, ,self/en,./w,epochs/en,_,to/en,_,train/en, ,=/w, ,flags/en,./w,epochs/en,_,to/en,_,train/en, ,#, ,concurrent/en, ,training/en, ,steps/en,./w, ,self/en,./w,concurrent/en,_,steps/en, ,=/w, ,flags/en,./w,concurrent/en,_,steps/en, ,#, ,number/en, ,of/en, ,examples/en, ,for/en, ,one/en, ,training/en, ,step/en,./w, ,self/en,./w,batch/en,_,size/en, ,=/w, ,flags/en,./w,batch/en,_,size/en, ,#, ,the/en, ,number/en, ,of/en, ,words/en, ,to/en, ,predict/en, ,to/en, ,the/en, ,left/en, ,and/en, ,right/en, ,of/en, ,the/en, ,target/en, ,word/en,./w, ,self/en,./w,window/en,_,size/en, ,=/w, ,flags/en,./w,window/en,_,size/en, ,#, ,the/en, ,minimum/en, ,number/en, ,of/en, ,word/en, ,occurrences/en, ,for/en, ,it/en, ,to/en, ,be/en, ,included/en, ,in/en, ,the/en, ,#, ,vocabulary/en,./w, ,self/en,./w,min/en,_,count/en, ,=/w, ,flags/en,./w,min/en,_,count/en, ,#, ,subsampling/en, ,threshold/en, ,for/en, ,word/en, ,occurrence/en,./w, ,self/en,./w,subsample/en, ,=/w, ,flags/en,./w,subsample/en, ,#, ,how/en, ,often/en, ,to/en, ,print/en, ,statistics/en,./w, ,self/en,./w,statistics/en,_,interval/en, ,=/w, ,flags/en,./w,statistics/en,_,interval/en, ,#, ,how/en, ,often/en, ,to/en, ,write/en, ,to/en, ,the/en, ,summary/en, ,file/en, ,(/w,rounds/en, ,up/en, ,to/en, ,the/en, ,nearest/en, ,#, ,statistics/en,_,interval/en,)/w,./w, ,self/en,./w,summary/en,_,interval/en, ,=/w, ,flags/en,./w,summary/en,_,interval/en, ,#, ,how/en, ,often/en, ,to/en, ,write/en, ,checkpoints/en, ,(/w,rounds/en, ,up/en, ,to/en, ,the/en, ,nearest/en, ,statistics/en, ,#, ,interval/en,)/w,./w, ,self/en,./w,checkpoint/en,_,interval/en, ,=/w, ,flags/en,./w,checkpoint/en,_,interval/en, ,#, ,where/en, ,to/en, ,write/en, ,out/en, ,summaries/en,./w, ,self/en,./w,save/en,_,path/en, ,=/w, ,flags/en,./w,save/en,_,path/en, ,#, ,eval/en, ,options/en,./w, ,#, ,the/en, ,text/en, ,file/en, ,for/en, ,eval/en,./w, ,self/en,./w,eval/en,_,data/en, ,=/w, ,flags/en,./w,eval/en,_,data/en, ,class/en, ,word/en,2/m,vec/en,(/w,object/en,)/w,:/w, ,"/w,"/w,"/w,word/en,2/m,vec/en, ,model/en, ,(/w,skipgram/en,)/w,./w,"/w,"/w,"/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,options/en,,/w, ,session/en,)/w,:/w, ,self/en,./w,_,options/en, ,=/w, ,options/en, ,self/en,./w,_,session/en, ,=/w, ,session/en, ,self/en,./w,_,word/en,2/m,id/en, ,=/w, ,{/w,}/w, ,self/en,./w,_,id/en,2/m,word/en, ,=/w, ,[/w,]/w, ,self/en,./w,build/en,_,graph/en,(/w,)/w, ,self/en,./w,build/en,_,eval/en,_,graph/en,(/w,)/w, ,self/en,./w,save/en,_,vocab/en,(/w,)/w, ,self/en,./w,_,read/en,_,analogies/en,(/w,)/w, ,def/en, ,_,read/en,_,analogies/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,reads/en, ,through/en, ,the/en, ,analogy/en, ,question/en, ,file/en,./w, ,returns/en,:/w, ,questions/en,:/w, ,a/en, ,[/w,n/en,,/w, ,4/m,]/w, ,numpy/en, ,array/en, ,containing/en, ,the/en, ,analogy/en, ,question/en,'/w,s/en, ,word/en, ,ids/en,./w, ,questions/en,_,skipped/en,:/w, ,questions/en, ,skipped/en, ,due/en, ,to/en, ,unknown/en, ,words/en,./w, ,"/w,"/w,"/w, ,questions/en, ,=/w, ,[/w,]/w, ,questions/en,_,skipped/en, ,=/w, ,0/m, ,with/en, ,open/en,(/w,self/en,./w,_,options/en,./w,eval/en,_,data/en,,/w, ,"/w,rb/en,"/w,)/w, ,as/en, ,analogy/en,_,f/en,:/w, ,for/en, ,line/en, ,in/en, ,analogy/en,_,f/en,:/w, ,if/en, ,line/en,./w,startswith/en,(/w,b/en,"/w,:/w,"/w,)/w,:/w, ,#, ,skip/en, ,comments/en,./w, ,continue/en, ,words/en, ,=/w, ,line/en,./w,strip/en,(/w,)/w,./w,lower/en,(/w,)/w,./w,split/en,(/w,b/en,"/w, ,"/w,)/w, ,ids/en, ,=/w, ,[/w,self/en,./w,_,word/en,2/m,id/en,./w,get/en,(/w,w/en,./w,strip/en,(/w,)/w,)/w, ,for/en, ,w/en, ,in/en, ,words/en,]/w, ,if/en, ,none/en, ,in/en, ,ids/en, ,or/en, ,len/en,(/w,ids/en,)/w, ,!/w,=/w, ,4/m,:/w, ,questions/en,_,skipped/en, ,+/w,=/w, ,1/m, ,else/en,:/w, ,questions/en,./w,append/en,(/w,np/en,./w,array/en,(/w,ids/en,)/w,)/w, ,print/en,(/w,"/w,eval/en, ,analogy/en, ,file/en,:/w, ,"/w,,/w, ,self/en,./w,_,options/en,./w,eval/en,_,data/en,)/w, ,print/en,(/w,"/w,questions/en,:/w, ,"/w,,/w, ,len/en,(/w,questions/en,)/w,)/w, ,print/en,(/w,"/w,skipped/en,:/w, ,"/w,,/w, ,questions/en,_,skipped/en,)/w, ,self/en,./w,_,analogy/en,_,questions/en, ,=/w, ,np/en,./w,array/en,(/w,questions/en,,/w, ,dtype/en,=/w,np/en,./w,int/en,32/m,)/w, ,def/en, ,forward/en,(/w,self/en,,/w, ,examples/en,,/w, ,labels/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,graph/en, ,for/en, ,the/en, ,forward/en, ,pass/en,./w,"/w,"/w,"/w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,#, ,declare/en, ,all/en, ,variables/en, ,we/en, ,need/en,./w, ,#, ,embedding/en,:/w, ,[/w,vocab/en,_,size/en,,/w, ,emb/en,_,dim/en,]/w, ,init/en,_,width/en, ,=/w, ,0.5/m, ,//w, ,opts/en,./w,emb/en,_,dim/en, ,emb/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,random/en,_,uniform/en,(/w, ,[/w,opts/en,./w,vocab/en,_,size/en,,/w, ,opts/en,./w,emb/en,_,dim/en,]/w,,/w, ,-/w,init/en,_,width/en,,/w, ,init/en,_,width/en,)/w,,/w, ,name/en,=/w,"/w,emb/en,"/w,)/w, ,self/en,./w,_,emb/en, ,=/w, ,emb/en, ,#, ,softmax/en, ,weight/en,:/w, ,[/w,vocab/en,_,size/en,,/w, ,emb/en,_,dim/en,]/w,./w, ,transposed/en,./w, ,sm/en,_,w/en,_,t/en, ,=/w, ,tf/en,./w,variable/en,(/w, ,tf/en,./w,zeros/en,(/w,[/w,opts/en,./w,vocab/en,_,size/en,,/w, ,opts/en,./w,emb/en,_,dim/en,]/w,)/w,,/w, ,name/en,=/w,"/w,sm/en,_,w/en,_,t/en,"/w,)/w, ,#, ,softmax/en, ,bias/en,:/w, ,[/w,emb/en,_,dim/en,]/w,./w, ,sm/en,_,b/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,opts/en,./w,vocab/en,_,size/en,]/w,)/w,,/w, ,name/en,=/w,"/w,sm/en,_,b/en,"/w,)/w, ,#, ,global/en, ,step/en,:/w, ,scalar/en,,/w, ,i/en,./w,e/en,./w,,/w, ,shape/en, ,[/w,]/w,./w, ,self/en,./w,global/en,_,step/en, ,=/w, ,tf/en,./w,variable/en,(/w,0/m,,/w, ,name/en,=/w,"/w,global/en,_,step/en,"/w,)/w, ,#, ,nodes/en, ,to/en, ,compute/en, ,the/en, ,nce/en, ,loss/en, ,w/en,//w, ,candidate/en, ,sampling/en,./w, ,labels/en,_,matrix/en, ,=/w, ,tf/en,./w,reshape/en,(/w, ,tf/en,./w,cast/en,(/w,labels/en,,/w, ,dtype/en,=/w,tf/en,./w,int/en,64/m,)/w,,/w, ,[/w,opts/en,./w,batch/en,_,size/en,,/w, ,1/m,]/w,)/w, ,#, ,negative/en, ,sampling/en,./w, ,sampled/en,_,ids/en,,/w, ,_,,/w, ,_, ,=/w, ,(/w,tf/en,./w,nn/en,./w,fixed/en,_,unigram/en,_,candidate/en,_,sampler/en,(/w, ,true/en,_,classes/en,=/w,labels/en,_,matrix/en,,/w, ,num/en,_,true/en,=/w,1/m,,/w, ,num/en,_,sampled/en,=/w,opts/en,./w,num/en,_,samples/en,,/w, ,unique/en,=/w,true/en,,/w, ,range/en,_,max/en,=/w,opts/en,./w,vocab/en,_,size/en,,/w, ,distortion/en,=/w,0.75/m,,/w, ,unigrams/en,=/w,opts/en,./w,vocab/en,_,counts/en,./w,tolist/en,(/w,)/w,)/w,)/w, ,#, ,embeddings/en, ,for/en, ,examples/en,:/w, ,[/w,batch/en,_,size/en,,/w, ,emb/en,_,dim/en,]/w, ,example/en,_,emb/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,emb/en,,/w, ,examples/en,)/w, ,#, ,weights/en, ,for/en, ,labels/en,:/w, ,[/w,batch/en,_,size/en,,/w, ,emb/en,_,dim/en,]/w, ,true/en,_,w/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,sm/en,_,w/en,_,t/en,,/w, ,labels/en,)/w, ,#, ,biases/en, ,for/en, ,labels/en,:/w, ,[/w,batch/en,_,size/en,,/w, ,1/m,]/w, ,true/en,_,b/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,sm/en,_,b/en,,/w, ,labels/en,)/w, ,#, ,weights/en, ,for/en, ,sampled/en, ,ids/en,:/w, ,[/w,num/en,_,sampled/en,,/w, ,emb/en,_,dim/en,]/w, ,sampled/en,_,w/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,sm/en,_,w/en,_,t/en,,/w, ,sampled/en,_,ids/en,)/w, ,#, ,biases/en, ,for/en, ,sampled/en, ,ids/en,:/w, ,[/w,num/en,_,sampled/en,,/w, ,1/m,]/w, ,sampled/en,_,b/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,sm/en,_,b/en,,/w, ,sampled/en,_,ids/en,)/w, ,#, ,true/en, ,logits/en,:/w, ,[/w,batch/en,_,size/en,,/w, ,1/m,]/w, ,true/en,_,logits/en, ,=/w, ,tf/en,./w,reduce/en,_,sum/en,(/w,tf/en,./w,mul/en,(/w,example/en,_,emb/en,,/w, ,true/en,_,w/en,)/w,,/w, ,1/m,)/w, ,+/w, ,true/en,_,b/en, ,#, ,sampled/en, ,logits/en,:/w, ,[/w,batch/en,_,size/en,,/w, ,num/en,_,sampled/en,]/w, ,#, ,we/en, ,replicate/en, ,sampled/en, ,noise/en, ,lables/en, ,for/en, ,all/en, ,examples/en, ,in/en, ,the/en, ,batch/en, ,#, ,using/en, ,the/en, ,matmul/en,./w, ,sampled/en,_,b/en,_,vec/en, ,=/w, ,tf/en,./w,reshape/en,(/w,sampled/en,_,b/en,,/w, ,[/w,opts/en,./w,num/en,_,samples/en,]/w,)/w, ,sampled/en,_,logits/en, ,=/w, ,tf/en,./w,matmul/en,(/w,example/en,_,emb/en,,/w, ,sampled/en,_,w/en,,/w, ,transpose/en,_,b/en,=/w,true/en,)/w, ,+/w, ,sampled/en,_,b/en,_,vec/en, ,return/en, ,true/en,_,logits/en,,/w, ,sampled/en,_,logits/en, ,def/en, ,nce/en,_,loss/en,(/w,self/en,,/w, ,true/en,_,logits/en,,/w, ,sampled/en,_,logits/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,graph/en, ,for/en, ,the/en, ,nce/en, ,loss/en,./w,"/w,"/w,"/w, ,#, ,cross/en,-/w,entropy/en,(/w,logits/en,,/w, ,labels/en,)/w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,true/en,_,xent/en, ,=/w, ,tf/en,./w,nn/en,./w,sigmoid/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w, ,true/en,_,logits/en,,/w, ,tf/en,./w,ones/en,_,like/en,(/w,true/en,_,logits/en,)/w,)/w, ,sampled/en,_,xent/en, ,=/w, ,tf/en,./w,nn/en,./w,sigmoid/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w, ,sampled/en,_,logits/en,,/w, ,tf/en,./w,zeros/en,_,like/en,(/w,sampled/en,_,logits/en,)/w,)/w, ,#, ,nce/en,-/w,loss/en, ,is/en, ,the/en, ,sum/en, ,of/en, ,the/en, ,true/en, ,and/en, ,noise/en, ,(/w,sampled/en, ,words/en,)/w, ,#, ,contributions/en,,/w, ,averaged/en, ,over/en, ,the/en, ,batch/en,./w, ,nce/en,_,loss/en,_,tensor/en, ,=/w, ,(/w,tf/en,./w,reduce/en,_,sum/en,(/w,true/en,_,xent/en,)/w, ,+/w, ,tf/en,./w,reduce/en,_,sum/en,(/w,sampled/en,_,xent/en,)/w,)/w, ,//w, ,opts/en,./w,batch/en,_,size/en, ,return/en, ,nce/en,_,loss/en,_,tensor/en, ,def/en, ,optimize/en,(/w,self/en,,/w, ,loss/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,graph/en, ,to/en, ,optimize/en, ,the/en, ,loss/en, ,function/en,./w,"/w,"/w,"/w, ,#, ,optimizer/en, ,nodes/en,./w, ,#, ,linear/en, ,learning/en, ,rate/en, ,decay/en,./w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,words/en,_,to/en,_,train/en, ,=/w, ,float/en,(/w,opts/en,./w,words/en,_,per/en,_,epoch/en, ,*/w, ,opts/en,./w,epochs/en,_,to/en,_,train/en,)/w, ,lr/en, ,=/w, ,opts/en,./w,learning/en,_,rate/en, ,*/w, ,tf/en,./w,maximum/en,(/w, ,0.0001/m,,/w, ,1.0/m, ,-/w, ,tf/en,./w,cast/en,(/w,self/en,./w,_,words/en,,/w, ,tf/en,./w,float/en,32/m,)/w, ,//w, ,words/en,_,to/en,_,train/en,)/w, ,self/en,./w,_,lr/en, ,=/w, ,lr/en, ,optimizer/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,lr/en,)/w, ,train/en, ,=/w, ,optimizer/en,./w,minimize/en,(/w,loss/en,,/w, ,global/en,_,step/en,=/w,self/en,./w,global/en,_,step/en,,/w, ,gate/en,_,gradients/en,=/w,optimizer/en,./w,gate/en,_,none/en,)/w, ,self/en,./w,_,train/en, ,=/w, ,train/en, ,def/en, ,build/en,_,eval/en,_,graph/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,eval/en, ,graph/en,./w,"/w,"/w,"/w, ,#, ,eval/en, ,graph/en, ,#, ,each/en, ,analogy/en, ,task/en, ,is/en, ,to/en, ,predict/en, ,the/en, ,4/m,th/en, ,word/en, ,(/w,d/en,)/w, ,given/en, ,three/en, ,#, ,words/en,:/w, ,a/en,,/w, ,b/en,,/w, ,c/en,./w, ,e/en,./w,g/en,./w,,/w, ,a/en,=/w,italy/en,,/w, ,b/en,=/w,rome/en,,/w, ,c/en,=/w,france/en,,/w, ,we/en, ,should/en, ,#, ,predict/en, ,d/en,=/w,paris/en,./w, ,#, ,the/en, ,eval/en, ,feeds/en, ,three/en, ,vectors/en, ,of/en, ,word/en, ,ids/en, ,for/en, ,a/en,,/w, ,b/en,,/w, ,c/en,,/w, ,each/en, ,of/en, ,#, ,which/en, ,is/en, ,of/en, ,size/en, ,n/en,,/w, ,where/en, ,n/en, ,is/en, ,the/en, ,number/en, ,of/en, ,analogies/en, ,we/en, ,want/en, ,to/en, ,#, ,evaluate/en, ,in/en, ,one/en, ,batch/en,./w, ,analogy/en,_,a/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,dtype/en,=/w,tf/en,./w,int/en,32/m,)/w, ,#, ,[/w,n/en,]/w, ,analogy/en,_,b/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,dtype/en,=/w,tf/en,./w,int/en,32/m,)/w, ,#, ,[/w,n/en,]/w, ,analogy/en,_,c/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,dtype/en,=/w,tf/en,./w,int/en,32/m,)/w, ,#, ,[/w,n/en,]/w, ,#, ,normalized/en, ,word/en, ,embeddings/en, ,of/en, ,shape/en, ,[/w,vocab/en,_,size/en,,/w, ,emb/en,_,dim/en,]/w,./w, ,nemb/en, ,=/w, ,tf/en,./w,nn/en,./w,l/en,2/m,_,normalize/en,(/w,self/en,./w,_,emb/en,,/w, ,1/m,)/w, ,#, ,each/en, ,row/en, ,of/en, ,a/en,_,emb/en,,/w, ,b/en,_,emb/en,,/w, ,c/en,_,emb/en, ,is/en, ,a/en, ,word/en,'/w,s/en, ,embedding/en, ,vector/en,./w, ,#, ,they/en, ,all/en, ,have/en, ,the/en, ,shape/en, ,[/w,n/en,,/w, ,emb/en,_,dim/en,]/w, ,a/en,_,emb/en, ,=/w, ,tf/en,./w,gather/en,(/w,nemb/en,,/w, ,analogy/en,_,a/en,)/w, ,#, ,a/en,'/w,s/en, ,embs/en, ,b/en,_,emb/en, ,=/w, ,tf/en,./w,gather/en,(/w,nemb/en,,/w, ,analogy/en,_,b/en,)/w, ,#, ,b/en,'/w,s/en, ,embs/en, ,c/en,_,emb/en, ,=/w, ,tf/en,./w,gather/en,(/w,nemb/en,,/w, ,analogy/en,_,c/en,)/w, ,#, ,c/en,'/w,s/en, ,embs/en, ,#, ,we/en, ,expect/en, ,that/en, ,d/en,'/w,s/en, ,embedding/en, ,vectors/en, ,on/en, ,the/en, ,unit/en, ,hyper/en,-/w,sphere/en, ,is/en, ,#, ,near/en,:/w, ,c/en,_,emb/en, ,+/w, ,(/w,b/en,_,emb/en, ,-/w, ,a/en,_,emb/en,)/w,,/w, ,which/en, ,has/en, ,the/en, ,shape/en, ,[/w,n/en,,/w, ,emb/en,_,dim/en,]/w,./w, ,target/en, ,=/w, ,c/en,_,emb/en, ,+/w, ,(/w,b/en,_,emb/en, ,-/w, ,a/en,_,emb/en,)/w, ,#, ,compute/en, ,cosine/en, ,distance/en, ,between/en, ,each/en, ,pair/en, ,of/en, ,target/en, ,and/en, ,vocab/en,./w, ,#, ,dist/en, ,has/en, ,shape/en, ,[/w,n/en,,/w, ,vocab/en,_,size/en,]/w,./w, ,dist/en, ,=/w, ,tf/en,./w,matmul/en,(/w,target/en,,/w, ,nemb/en,,/w, ,transpose/en,_,b/en,=/w,true/en,)/w, ,#, ,for/en, ,each/en, ,question/en, ,(/w,row/en, ,in/en, ,dist/en,)/w,,/w, ,find/en, ,the/en, ,top/en, ,4/m, ,words/en,./w, ,_,,/w, ,pred/en,_,idx/en, ,=/w, ,tf/en,./w,nn/en,./w,top/en,_,k/en,(/w,dist/en,,/w, ,4/m,)/w, ,#, ,nodes/en, ,for/en, ,computing/en, ,neighbors/en, ,for/en, ,a/en, ,given/en, ,word/en, ,according/en, ,to/en, ,#, ,their/en, ,cosine/en, ,distance/en,./w, ,nearby/en,_,word/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,dtype/en,=/w,tf/en,./w,int/en,32/m,)/w, ,#, ,word/en, ,id/en, ,nearby/en,_,emb/en, ,=/w, ,tf/en,./w,gather/en,(/w,nemb/en,,/w, ,nearby/en,_,word/en,)/w, ,nearby/en,_,dist/en, ,=/w, ,tf/en,./w,matmul/en,(/w,nearby/en,_,emb/en,,/w, ,nemb/en,,/w, ,transpose/en,_,b/en,=/w,true/en,)/w, ,nearby/en,_,val/en,,/w, ,nearby/en,_,idx/en, ,=/w, ,tf/en,./w,nn/en,./w,top/en,_,k/en,(/w,nearby/en,_,dist/en,,/w, ,min/en,(/w,1000/m,,/w, ,self/en,./w,_,options/en,./w,vocab/en,_,size/en,)/w,)/w, ,#, ,nodes/en, ,in/en, ,the/en, ,construct/en, ,graph/en, ,which/en, ,are/en, ,used/en, ,by/en, ,training/en, ,and/en, ,#, ,evaluation/en, ,to/en, ,run/en,//w,feed/en,//w,fetch/en,./w, ,self/en,./w,_,analogy/en,_,a/en, ,=/w, ,analogy/en,_,a/en, ,self/en,./w,_,analogy/en,_,b/en, ,=/w, ,analogy/en,_,b/en, ,self/en,./w,_,analogy/en,_,c/en, ,=/w, ,analogy/en,_,c/en, ,self/en,./w,_,analogy/en,_,pred/en,_,idx/en, ,=/w, ,pred/en,_,idx/en, ,self/en,./w,_,nearby/en,_,word/en, ,=/w, ,nearby/en,_,word/en, ,self/en,./w,_,nearby/en,_,val/en, ,=/w, ,nearby/en,_,val/en, ,self/en,./w,_,nearby/en,_,idx/en, ,=/w, ,nearby/en,_,idx/en, ,def/en, ,build/en,_,graph/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,build/en, ,the/en, ,graph/en, ,for/en, ,the/en, ,full/en, ,model/en,./w,"/w,"/w,"/w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,#, ,the/en, ,training/en, ,data/en,./w, ,a/en, ,text/en, ,file/en,./w, ,(/w,words/en,,/w, ,counts/en,,/w, ,words/en,_,per/en,_,epoch/en,,/w, ,self/en,./w,_,epoch/en,,/w, ,self/en,./w,_,words/en,,/w, ,examples/en,,/w, ,labels/en,)/w, ,=/w, ,word/en,2/m,vec/en,./w,skipgram/en,(/w,filename/en,=/w,opts/en,./w,train/en,_,data/en,,/w, ,batch/en,_,size/en,=/w,opts/en,./w,batch/en,_,size/en,,/w, ,window/en,_,size/en,=/w,opts/en,./w,window/en,_,size/en,,/w, ,min/en,_,count/en,=/w,opts/en,./w,min/en,_,count/en,,/w, ,subsample/en,=/w,opts/en,./w,subsample/en,)/w, ,(/w,opts/en,./w,vocab/en,_,words/en,,/w, ,opts/en,./w,vocab/en,_,counts/en,,/w, ,opts/en,./w,words/en,_,per/en,_,epoch/en,)/w, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,[/w,words/en,,/w, ,counts/en,,/w, ,words/en,_,per/en,_,epoch/en,]/w,)/w, ,opts/en,./w,vocab/en,_,size/en, ,=/w, ,len/en,(/w,opts/en,./w,vocab/en,_,words/en,)/w, ,print/en,(/w,"/w,data/en, ,file/en,:/w, ,"/w,,/w, ,opts/en,./w,train/en,_,data/en,)/w, ,print/en,(/w,"/w,vocab/en, ,size/en,:/w, ,"/w,,/w, ,opts/en,./w,vocab/en,_,size/en, ,-/w, ,1/m,,/w, ,"/w, ,+/w, ,unk/en,"/w,)/w, ,print/en,(/w,"/w,words/en, ,per/en, ,epoch/en,:/w, ,"/w,,/w, ,opts/en,./w,words/en,_,per/en,_,epoch/en,)/w, ,self/en,./w,_,examples/en, ,=/w, ,examples/en, ,self/en,./w,_,labels/en, ,=/w, ,labels/en, ,self/en,./w,_,id/en,2/m,word/en, ,=/w, ,opts/en,./w,vocab/en,_,words/en, ,for/en, ,i/en,,/w, ,w/en, ,in/en, ,enumerate/en,(/w,self/en,./w,_,id/en,2/m,word/en,)/w,:/w, ,self/en,./w,_,word/en,2/m,id/en,[/w,w/en,]/w, ,=/w, ,i/en, ,true/en,_,logits/en,,/w, ,sampled/en,_,logits/en, ,=/w, ,self/en,./w,forward/en,(/w,examples/en,,/w, ,labels/en,)/w, ,loss/en, ,=/w, ,self/en,./w,nce/en,_,loss/en,(/w,true/en,_,logits/en,,/w, ,sampled/en,_,logits/en,)/w, ,tf/en,./w,scalar/en,_,summary/en,(/w,"/w,nce/en, ,loss/en,"/w,,/w, ,loss/en,)/w, ,self/en,./w,_,loss/en, ,=/w, ,loss/en, ,self/en,./w,optimize/en,(/w,loss/en,)/w, ,#, ,properly/en, ,initialize/en, ,all/en, ,variables/en,./w, ,tf/en,./w,initialize/en,_,all/en,_,variables/en,(/w,)/w,./w,run/en,(/w,)/w, ,self/en,./w,saver/en, ,=/w, ,tf/en,./w,train/en,./w,saver/en,(/w,)/w, ,def/en, ,save/en,_,vocab/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,save/en, ,the/en, ,vocabulary/en, ,to/en, ,a/en, ,file/en, ,so/en, ,the/en, ,model/en, ,can/en, ,be/en, ,reloaded/en,./w,"/w,"/w,"/w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,with/en, ,open/en,(/w,os/en,./w,path/en,./w,join/en,(/w,opts/en,./w,save/en,_,path/en,,/w, ,"/w,vocab/en,./w,txt/en,"/w,)/w,,/w, ,"/w,w/en,"/w,)/w, ,as/en, ,f/en,:/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,opts/en,./w,vocab/en,_,size/en,)/w,:/w, ,f/en,./w,write/en,(/w,"/w,%/w,s/en, ,%/w,d/en,\/w,n/en,"/w, ,%/w, ,(/w,tf/en,./w,compat/en,./w,as/en,_,text/en,(/w,opts/en,./w,vocab/en,_,words/en,[/w,i/en,]/w,)/w,,/w, ,opts/en,./w,vocab/en,_,counts/en,[/w,i/en,]/w,)/w,)/w, ,def/en, ,_,train/en,_,thread/en,_,body/en,(/w,self/en,)/w,:/w, ,initial/en,_,epoch/en,,/w, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,[/w,self/en,./w,_,epoch/en,]/w,)/w, ,while/en, ,true/en,:/w, ,_,,/w, ,epoch/en, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,[/w,self/en,./w,_,train/en,,/w, ,self/en,./w,_,epoch/en,]/w,)/w, ,if/en, ,epoch/en, ,!/w,=/w, ,initial/en,_,epoch/en,:/w, ,break/en, ,def/en, ,train/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,train/en, ,the/en, ,model/en,./w,"/w,"/w,"/w, ,opts/en, ,=/w, ,self/en,./w,_,options/en, ,initial/en,_,epoch/en,,/w, ,initial/en,_,words/en, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,[/w,self/en,./w,_,epoch/en,,/w, ,self/en,./w,_,words/en,]/w,)/w, ,summary/en,_,op/en, ,=/w, ,tf/en,./w,merge/en,_,all/en,_,summaries/en,(/w,)/w, ,summary/en,_,writer/en, ,=/w, ,tf/en,./w,train/en,./w,summarywriter/en,(/w,opts/en,./w,save/en,_,path/en,,/w, ,graph/en,_,def/en,=/w,self/en,./w,_,session/en,./w,graph/en,_,def/en,)/w, ,workers/en, ,=/w, ,[/w,]/w, ,for/en, ,_, ,in/en, ,xrange/en,(/w,opts/en,./w,concurrent/en,_,steps/en,)/w,:/w, ,t/en, ,=/w, ,threading/en,./w,thread/en,(/w,target/en,=/w,self/en,./w,_,train/en,_,thread/en,_,body/en,)/w, ,t/en,./w,start/en,(/w,)/w, ,workers/en,./w,append/en,(/w,t/en,)/w, ,last/en,_,words/en,,/w, ,last/en,_,time/en,,/w, ,last/en,_,summary/en,_,time/en, ,=/w, ,initial/en,_,words/en,,/w, ,time/en,./w,time/en,(/w,)/w,,/w, ,0/m, ,last/en,_,checkpoint/en,_,time/en, ,=/w, ,0/m, ,while/en, ,true/en,:/w, ,time/en,./w,sleep/en,(/w,opts/en,./w,statistics/en,_,interval/en,)/w, ,#, ,reports/en, ,our/en, ,progress/en, ,once/en, ,a/en, ,while/en,./w, ,(/w,epoch/en,,/w, ,step/en,,/w, ,loss/en,,/w, ,words/en,,/w, ,lr/en,)/w, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w, ,[/w,self/en,./w,_,epoch/en,,/w, ,self/en,./w,global/en,_,step/en,,/w, ,self/en,./w,_,loss/en,,/w, ,self/en,./w,_,words/en,,/w, ,self/en,./w,_,lr/en,]/w,)/w, ,now/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,last/en,_,words/en,,/w, ,last/en,_,time/en,,/w, ,rate/en, ,=/w, ,words/en,,/w, ,now/en,,/w, ,(/w,words/en, ,-/w, ,last/en,_,words/en,)/w, ,//w, ,(/w, ,now/en, ,-/w, ,last/en,_,time/en,)/w, ,print/en,(/w,"/w,epoch/en, ,%/w,4/m,d/en, ,step/en, ,%/w,8/m,d/en,:/w, ,lr/en, ,=/w, ,%/w,5.3/m,f/en, ,loss/en, ,=/w, ,%/w,6.2/m,f/en, ,words/en,//w,sec/en, ,=/w, ,%/w,8.0/m,f/en,\/w,r/en,"/w, ,%/w, ,(/w,epoch/en,,/w, ,step/en,,/w, ,lr/en,,/w, ,loss/en,,/w, ,rate/en,)/w,,/w, ,end/en,=/w,"/w,"/w,)/w, ,sys/en,./w,stdout/en,./w,flush/en,(/w,)/w, ,if/en, ,now/en, ,-/w, ,last/en,_,summary/en,_,time/en, ,>, ,opts/en,./w,summary/en,_,interval/en,:/w, ,summary/en,_,str/en, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,summary/en,_,op/en,)/w, ,summary/en,_,writer/en,./w,add/en,_,summary/en,(/w,summary/en,_,str/en,,/w, ,step/en,)/w, ,last/en,_,summary/en,_,time/en, ,=/w, ,now/en, ,if/en, ,now/en, ,-/w, ,last/en,_,checkpoint/en,_,time/en, ,>, ,opts/en,./w,checkpoint/en,_,interval/en,:/w, ,self/en,./w,saver/en,./w,save/en,(/w,self/en,./w,_,session/en,,/w, ,opts/en,./w,save/en,_,path/en, ,+/w, ,"/w,model/en,"/w,,/w, ,global/en,_,step/en,=/w,step/en,./w,astype/en,(/w,int/en,)/w,)/w, ,last/en,_,checkpoint/en,_,time/en, ,=/w, ,now/en, ,if/en, ,epoch/en, ,!/w,=/w, ,initial/en,_,epoch/en,:/w, ,break/en, ,for/en, ,t/en, ,in/en, ,workers/en,:/w, ,t/en,./w,join/en,(/w,)/w, ,return/en, ,epoch/en, ,def/en, ,_,predict/en,(/w,self/en,,/w, ,analogy/en,)/w,:/w, ,"/w,"/w,"/w,predict/en, ,the/en, ,top/en, ,4/m, ,answers/en, ,for/en, ,analogy/en, ,questions/en,./w,"/w,"/w,"/w, ,idx/en,,/w, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w,[/w,self/en,./w,_,analogy/en,_,pred/en,_,idx/en,]/w,,/w, ,{/w, ,self/en,./w,_,analogy/en,_,a/en,:/w, ,analogy/en,[/w,:/w,,/w, ,0/m,]/w,,/w, ,self/en,./w,_,analogy/en,_,b/en,:/w, ,analogy/en,[/w,:/w,,/w, ,1/m,]/w,,/w, ,self/en,./w,_,analogy/en,_,c/en,:/w, ,analogy/en,[/w,:/w,,/w, ,2/m,]/w, ,}/w,)/w, ,return/en, ,idx/en, ,def/en, ,eval/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w,evaluate/en, ,analogy/en, ,questions/en, ,and/en, ,reports/en, ,accuracy/en,./w,"/w,"/w,"/w, ,#, ,how/en, ,many/en, ,questions/en, ,we/en, ,get/en, ,right/en, ,at/en, ,precision/en,@/w,1/m,./w, ,correct/en, ,=/w, ,0/m, ,total/en, ,=/w, ,self/en,./w,_,analogy/en,_,questions/en,./w,shape/en,[/w,0/m,]/w, ,start/en, ,=/w, ,0/m, ,while/en, ,start/en, ,</w, ,total/en,:/w, ,limit/en, ,=/w, ,start/en, ,+/w, ,2500/m, ,sub/en, ,=/w, ,self/en,./w,_,analogy/en,_,questions/en,[/w,start/en,:/w,limit/en,,/w, ,:/w,]/w, ,idx/en, ,=/w, ,self/en,./w,_,predict/en,(/w,sub/en,)/w, ,start/en, ,=/w, ,limit/en, ,for/en, ,question/en, ,in/en, ,xrange/en,(/w,sub/en,./w,shape/en,[/w,0/m,]/w,)/w,:/w, ,for/en, ,j/en, ,in/en, ,xrange/en,(/w,4/m,)/w,:/w, ,if/en, ,idx/en,[/w,question/en,,/w, ,j/en,]/w, ,=/w,=/w, ,sub/en,[/w,question/en,,/w, ,3/m,]/w,:/w, ,#, ,bingo/en,!/w, ,we/en, ,predicted/en, ,correctly/en,./w, ,e/en,./w,g/en,./w,,/w, ,[/w,italy/en,,/w, ,rome/en,,/w, ,france/en,,/w, ,paris/en,]/w,./w, ,correct/en, ,+/w,=/w, ,1/m, ,break/en, ,elif/en, ,idx/en,[/w,question/en,,/w, ,j/en,]/w, ,in/en, ,sub/en,[/w,question/en,,/w, ,:/w,3/m,]/w,:/w, ,#, ,we/en, ,need/en, ,to/en, ,skip/en, ,words/en, ,already/en, ,in/en, ,the/en, ,question/en,./w, ,continue/en, ,else/en,:/w, ,#, ,the/en, ,correct/en, ,label/en, ,is/en, ,not/en, ,the/en, ,precision/en,@/w,1/m, ,break/en, ,print/en,(/w,)/w, ,print/en,(/w,"/w,eval/en, ,%/w,4/m,d/en,//w,%/w,d/en, ,accuracy/en, ,=/w, ,%/w,4.1/m,f/en,%/w,%/w,"/w, ,%/w, ,(/w,correct/en,,/w, ,total/en,,/w, ,correct/en, ,*/w, ,100.0/m, ,//w, ,total/en,)/w,)/w, ,def/en, ,analogy/en,(/w,self/en,,/w, ,w/en,0/m,,/w, ,w/en,1/m,,/w, ,w/en,2/m,)/w,:/w, ,"/w,"/w,"/w,predict/en, ,word/en, ,w/en,3/m, ,as/en, ,in/en, ,w/en,0/m,:/w,w/en,1/m, ,vs/en, ,w/en,2/m,:/w,w/en,3/m,./w,"/w,"/w,"/w, ,wid/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,self/en,./w,_,word/en,2/m,id/en,./w,get/en,(/w,w/en,,/w, ,0/m,)/w, ,for/en, ,w/en, ,in/en, ,[/w,w/en,0/m,,/w, ,w/en,1/m,,/w, ,w/en,2/m,]/w,]/w,]/w,)/w, ,idx/en, ,=/w, ,self/en,./w,_,predict/en,(/w,wid/en,)/w, ,for/en, ,c/en, ,in/en, ,[/w,self/en,./w,_,id/en,2/m,word/en,[/w,i/en,]/w, ,for/en, ,i/en, ,in/en, ,idx/en,[/w,0/m,,/w, ,:/w,]/w,]/w,:/w, ,if/en, ,c/en, ,not/en, ,in/en, ,[/w,w/en,0/m,,/w, ,w/en,1/m,,/w, ,w/en,2/m,]/w,:/w, ,return/en, ,c/en, ,return/en, ,"/w,unknown/en,"/w, ,def/en, ,nearby/en,(/w,self/en,,/w, ,words/en,,/w, ,num/en,=/w,20/m,)/w,:/w, ,"/w,"/w,"/w,prints/en, ,out/en, ,nearby/en, ,words/en, ,given/en, ,a/en, ,list/en, ,of/en, ,words/en,./w,"/w,"/w,"/w, ,ids/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,self/en,./w,_,word/en,2/m,id/en,./w,get/en,(/w,x/en,,/w, ,0/m,)/w, ,for/en, ,x/en, ,in/en, ,words/en,]/w,)/w, ,vals/en,,/w, ,idx/en, ,=/w, ,self/en,./w,_,session/en,./w,run/en,(/w, ,[/w,self/en,./w,_,nearby/en,_,val/en,,/w, ,self/en,./w,_,nearby/en,_,idx/en,]/w,,/w, ,{/w,self/en,./w,_,nearby/en,_,word/en,:/w, ,ids/en,}/w,)/w, ,for/en, ,i/en, ,in/en, ,xrange/en,(/w,len/en,(/w,words/en,)/w,)/w,:/w, ,print/en,(/w,"/w,\/w,n/en,%/w,s/en,\/w,n/en,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,=/w,"/w, ,%/w, ,(/w,words/en,[/w,i/en,]/w,)/w,)/w, ,for/en, ,(/w,neighbor/en,,/w, ,distance/en,)/w, ,in/en, ,zip/en,(/w,idx/en,[/w,i/en,,/w, ,:/w,num/en,]/w,,/w, ,vals/en,[/w,i/en,,/w, ,:/w,num/en,]/w,)/w,:/w, ,print/en,(/w,"/w,%/w,-/w,20/m,s/en, ,%/w,6.4/m,f/en,"/w, ,%/w, ,(/w,self/en,./w,_,id/en,2/m,word/en,[/w,neighbor/en,]/w,,/w, ,distance/en,)/w,)/w, ,def/en, ,_,start/en,_,shell/en,(/w,local/en,_,ns/en,=/w,none/en,)/w,:/w, ,#, ,an/en, ,interactive/en, ,shell/en, ,is/en, ,useful/en, ,for/en, ,debugging/en,//w,development/en,./w, ,import/en, ,ipython/en, ,user/en,_,ns/en, ,=/w, ,{/w,}/w, ,if/en, ,local/en,_,ns/en,:/w, ,user/en,_,ns/en,./w,update/en,(/w,local/en,_,ns/en,)/w, ,user/en,_,ns/en,./w,update/en,(/w,globals/en,(/w,)/w,)/w, ,ipython/en,./w,start/en,_,ipython/en,(/w,argv/en,=/w,[/w,]/w,,/w, ,user/en,_,ns/en,=/w,user/en,_,ns/en,)/w, ,def/en, ,main/en,(/w,_,)/w,:/w, ,"/w,"/w,"/w,train/en, ,a/en, ,word/en,2/m,vec/en, ,model/en,./w,"/w,"/w,"/w, ,if/en, ,not/en, ,flags/en,./w,train/en,_,data/en, ,or/en, ,not/en, ,flags/en,./w,eval/en,_,data/en, ,or/en, ,not/en, ,flags/en,./w,save/en,_,path/en,:/w, ,print/en,(/w,"/w,--/nrf,train/en,_,data/en, ,--/nrf,eval/en,_,data/en, ,and/en, ,--/nrf,save/en,_,path/en, ,must/en, ,be/en, ,specified/en,./w,"/w,)/w, ,sys/en,./w,exit/en,(/w,1/m,)/w, ,opts/en, ,=/w, ,options/en,(/w,)/w, ,with/en, ,tf/en,./w,graph/en,(/w,)/w,./w,as/en,_,default/en,(/w,)/w,,/w, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,session/en,:/w, ,model/en, ,=/w, ,word/en,2/m,vec/en,(/w,opts/en,,/w, ,session/en,)/w, ,for/en, ,_, ,in/en, ,xrange/en,(/w,opts/en,./w,epochs/en,_,to/en,_,train/en,)/w,:/w, ,model/en,./w,train/en,(/w,)/w, ,#, ,process/en, ,one/en, ,epoch/en, ,model/en,./w,eval/en,(/w,)/w, ,#, ,eval/en, ,analogies/en,./w, ,#, ,perform/en, ,a/en, ,final/en, ,save/en,./w, ,model/en,./w,saver/en,./w,save/en,(/w,session/en,,/w, ,os/en,./w,path/en,./w,join/en,(/w,opts/en,./w,save/en,_,path/en,,/w, ,"/w,model/en,./w,ckpt/en,"/w,)/w,,/w, ,global/en,_,step/en,=/w,model/en,./w,global/en,_,step/en,)/w, ,if/en, ,flags/en,./w,interactive/en,:/w, ,#, ,e/en,./w,g/en,./w,,/w, ,#, ,[/w,0/m,]/w,:/w, ,model/en,./w,analogy/en,(/w,'/w,france/en,'/w,,/w, ,'/w,paris/en,'/w,,/w, ,'/w,russia/en,'/w,)/w, ,#, ,[/w,1/m,]/w,:/w, ,model/en,./w,nearby/en,(/w,[/w,'/w,proton/en,'/w,,/w, ,'/w,elephant/en,'/w,,/w, ,'/w,maxwell/en,'/w,]/w,)/w, ,_,start/en,_,shell/en,(/w,locals/en,(/w,)/w,)/w, ,if/en, ,_,_,name/en,_,_, ,=/w,=/w, ,"/w,_,_,main/en,_,_,"/w,:/w, ,tf/en,./w,app/en,./w,run/en,(/w,)/w,curl/en, ,http/en,:/w,//w,//w,mattmahoney/en,./w,net/en,//w,dc/en,//w,text/en,8/m,./w,zip/en, ,>, ,text/en,8/m,./w,zip/en, ,unzip/en, ,text/en,8/m,./w,zip/en, ,curl/en, ,https/en,:/w,//w,//w,storage/en,./w,googleapis/en,./w,com/en,//w,google/en,-/w,code/en,-/w,archive/en,-/w,source/en,//w,v/en,2/m,//w,code/en,./w,google/en,./w,com/en,//w,word/en,2/m,vec/en,//w,source/en,-/w,archive/en,./w,zip/en, ,>, ,source/en,-/w,archive/en,./w,zip/en, ,unzip/en, ,-/w,p/en, ,source/en,-/w,archive/en,./w,zip/en, ,word/en,2/m,vec/en,//w,trunk/en,//w,questions/en,-/w,words/en,./w,txt/en, ,>, ,questions/en,-/w,words/en,./w,txt/en, ,rm/en, ,text/en,8/m,./w,zip/en, ,source/en,-/w,archive/en,./w,zip/en, ,tf/en,_,inc/en,=/w,$/w,(/w,python/en, ,-/w,c/en, ,'/w,import/en, ,tensorflow/en, ,as/en, ,tf/en,;/w, ,print/en,(/w,tf/en,./w,sysconfig/en,./w,get/en,_,include/en,(/w,)/w,)/w,'/w,)/w, ,g/en,+/w,+/w, ,-/w,std/en,=/w,c/en,+/w,+/w,11/m, ,-/w,shared/en, ,word/en,2/m,vec/en,_,ops/en,./w,cc/en, ,word/en,2/m,vec/en,_,kernels/en,./w,cc/en, ,-/w,o/en, ,word/en,2/m,vec/en,_,ops/en,./w,so/en, ,-/w,fpic/en, ,-/w,i/en, ,$/w,tf/en,_,inc/en, ,-/w,o/en,2/m, ,-/w,d/en,_,glibcxx/en,_,use/en,_,cxx/en,11/m,_,abi/en,=/w,0/m, ,python/en, ,word/en,2/m,vec/en,_,optimized/en,./w,py/en, ,\/w, ,--/nrf,train/en,_,data/en,=/w,text/en,8/m, ,\/w, ,--/nrf,eval/en,_,data/en,=/w,questions/en,-/w,words/en,./w,txt/en, ,\/w, ,--/nrf,save/en,_,path/en,=/w,./w,//w,relevant/en, ,link/en,:/w,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,rocketfan/en,//w,p/en,//w,4976806/m,./w,html/en, ,https/en,:/w,//w,//w,raw/en,./w,githubusercontent/en,./w,com/en,//w,tensorflow/en,//w,tensorflow/en,//w,master/en,//w,tensorflow/en,//w,examples/en,//w,tutorials/en,//w,word/en,2/m,vec/en,//w,word/en,2/m,vec/en,_,basic/en,./w,py/en, ,http/en,:/w,//w,//w,www/en,./w,aclweb/en,./w,org/en,//w,anthology/en,//w,n/en,1/m, ,http/en,:/w,//w,//w,msr/en,-/w,waypoint/en,./w,com/en,//w,en/en,-/w,us/en,//w,um/en,//w,people/en,//w,gzweig/en,//w,pubs/en,//w,naacl/en,2013/m,regularities/en,./w,pdf/en,3/m,-/w,1090/m, ,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,tutorials/en,//w,word/en,2/m,vec/en,./w,html/en, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,tensorflow/en,//w,models/en,//w,tree/en,//w,master/en,//w,tutorials/en,//w,embedding/en, ,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,tutorials/en,//w,word/en,2/m,vec/en,./w,html/en,6/m,./w, ,循环/vn,神经/n,网络/n,(/w,rnn/en,)/w,、/w,lstm/en,(/w,long/en,-/w,short/en, ,term/en, ,memory/en,,/w, ,lstm/en,)/w,0/m,x/en,1/m,:/w, ,语言/n,模型/n,此/r,教程/n,将/d,展示/v,如何/r,在/p,高难度/n,的/u,语言/n,模型/n,中/f,训练/vn,循环/vn,神经/n,网络/n,。/w,该/r,问题/n,的/u,目标/n,是/v,获得/v,一个/m,能/v,确定/v,语句/n,概率/n,的/u,概率/n,模型/n,。/w,为了/p,做到/v,这/r,一点/m,，/w,通过/p,之前/f,已经/d,给/p,出/v,的/u,词语/n,来/v,预测/v,后面/f,的/u,词语/n,。/w,我们/r,将/d,使用/v, ,ptb/en,(/w,penn/en, ,tree/en, ,bank/en,)/w, ,数据集/nw,，/w,这/r,是/v,一种/mq,常用/a,来/v,衡量/v,模型/n,的/u,基准/n,，/w,同时/c,它/r,比较/d,小/a,而且/c,训练/vn,起来/v,相对/d,快速/d,。/w,0/m,x/en,2/m,:/w, ,lstm/en,模型/n,的/u,核心/n,由/p,一个/m, ,lstm/en, ,单元/n,组成/v,，/w,其/r,可以/v,在/p,某/r,时刻/n,处理/v,一个/m,词语/n,，/w,以及/c,计算/v,语句/n,可能/v,的/u,延续性/n,的/u,概率/n,。/w,网络/n,的/u,存储/vn,状态/n,由/p,一个/m,零矢量/nw,初始化/v,并/c,在/p,读/v,取/v,每/r,一个/m,词语/n,后/f,更新/v,。/w,而且/c,，/w,由于/c,计算/v,上/f,的/u,原因/n,，/w,我们/r,将/d,以/p, ,batch/en,_,size/en, ,为/p,最小/a,批量/d,来/v,处理/v,数据/n,。/w,基础/n,的/u,伪代码/nw,就/d,像/v,下面/f,这样/r,：/w,lstm/en, ,=/w, ,rnn/en,_,cell/en,./w,basiclstmcell/en,(/w,lstm/en,_,size/en,)/w, ,#, ,初始化/v, ,lstm/en, ,存储/vn,状态/n,./w, ,state/en, ,=/w, ,tf/en,./w,zeros/en,(/w,[/w,batch/en,_,size/en,,/w, ,lstm/en,./w,state/en,_,size/en,]/w,)/w, ,loss/en, ,=/w, ,0.0/m, ,for/en, ,current/en,_,batch/en,_,of/en,_,words/en, ,in/en, ,words/en,_,in/en,_,dataset/en,:/w, ,#, ,每次/r,处理/v,一批/mq,词语/n,后/f,更新/v,状态/n,值/n,./w, ,output/en,,/w, ,state/en, ,=/w, ,lstm/en,(/w,current/en,_,batch/en,_,of/en,_,words/en,,/w, ,state/en,)/w, ,#, ,lstm/en, ,输出/v,可/v,用于/v,产生/v,下/f,一个/m,词语/n,的/u,预测/v, ,logits/en, ,=/w, ,tf/en,./w,matmul/en,(/w,output/en,,/w, ,softmax/en,_,w/en,)/w, ,+/w, ,softmax/en,_,b/en, ,probabilities/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,logits/en,)/w, ,loss/en, ,+/w,=/w, ,loss/en,_,function/en,(/w,probabilities/en,,/w, ,target/en,_,words/en,)/w,0/m,x/en,3/m,:/w, ,截断/v,反向/f,传播/vn,为/p,使/v,学习/v,过程/n,易于/v,处理/v,，/w,通常/d,的/u,做法/n,是/v,将/d,反向/f,传播/vn,的/u,梯度/n,在/p,（/w,按/p,时间/n,）/w,展开/v,的/u,步骤/n,上/f,照/v,一个/m,固定/a,长度/n,(/w,num/en,_,steps/en,)/w,截断/v,。/w, ,通过/p,在/p,一次/mq,迭代/vn,中/f,的/u,每个/r,时刻/n,上/f,提供/v,长度/n,为/p, ,num/en,_,steps/en, ,的/u,输入/v,和/c,每次/r,迭代/vn,完成/v,之后/f,反向/f,传导/v,，/w,这/r,会/v,很/d,容易/a,实现/v,。/w,一个/m,简化/v,版/n,的/u,用于/v,计算图/nw,创建/v,的/u,截断/v,反向/f,传播/vn,代码/n,：/w,#, ,一次/mq,给/p,定/v,的/u,迭代/vn,中/f,的/u,输入/v,占位/v,符/vg,./w, ,words/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,int/en,32/m,,/w, ,[/w,batch/en,_,size/en,,/w, ,num/en,_,steps/en,]/w,)/w, ,lstm/en, ,=/w, ,rnn/en,_,cell/en,./w,basiclstmcell/en,(/w,lstm/en,_,size/en,)/w, ,#, ,初始化/v, ,lstm/en, ,存储/vn,状态/n,./w, ,initial/en,_,state/en, ,=/w, ,state/en, ,=/w, ,tf/en,./w,zeros/en,(/w,[/w,batch/en,_,size/en,,/w, ,lstm/en,./w,state/en,_,size/en,]/w,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,len/en,(/w,num/en,_,steps/en,)/w,)/w,:/w, ,#, ,每/r,处理/v,一批/mq,词语/n,后/f,更新/v,状态/n,值/n,./w, ,output/en,,/w, ,state/en, ,=/w, ,lstm/en,(/w,words/en,[/w,:/w,,/w, ,i/en,]/w,,/w, ,state/en,)/w, ,#, ,其余/r,的/u,代码/n,./w, ,#, ,./w,./w,./w, ,final/en,_,state/en, ,=/w, ,state/en,迭代/vn,整个/b,数据集/nw,#, ,一个/m, ,numpy/en, ,数组/n,，/w,保存/v,每/r,一批/mq,词语/n,之后/f,的/u, ,lstm/en, ,状态/n,./w, ,numpy/en,_,state/en, ,=/w, ,initial/en,_,state/en,./w,eval/en,(/w,)/w, ,total/en,_,loss/en, ,=/w, ,0.0/m, ,for/en, ,current/en,_,batch/en,_,of/en,_,words/en, ,in/en, ,words/en,_,in/en,_,dataset/en,:/w, ,numpy/en,_,state/en,,/w, ,current/en,_,loss/en, ,=/w, ,session/en,./w,run/en,(/w,[/w,final/en,_,state/en,,/w, ,loss/en,]/w,,/w, ,#, ,通过/p,上/f,一次/mq,迭代/vn,结果/n,初始化/v, ,lstm/en, ,状态/n,./w, ,feed/en,_,dict/en,=/w,{/w,initial/en,_,state/en,:/w, ,numpy/en,_,state/en,,/w, ,words/en,:/w, ,current/en,_,batch/en,_,of/en,_,words/en,}/w,)/w, ,total/en,_,loss/en, ,+/w,=/w, ,current/en,_,loss/en,0/m,x/en,4/m,:/w, ,输入/v,在/p,输入/v, ,lstm/en, ,前/f,，/w,词语/n, ,id/en, ,被/p,嵌入/v,到/v,了/u,一个/m,密集/a,的/u,表示/v,中/f,(/w,单词/n,矢量/n,表示/v,可以/v,在/p,不同/a,的/u,单词/n,之间/f,建立/v,关联性/nw,的/u,依据/n,)/w,。/w,这种/r,方式/n,允许/v,模型/n,高效/b,地/u,表示/v,词语/n,，/w,也/d,便于/v,写/v,代码/n,#, ,embedding/en,_,matrix/en, ,张量/nr,的/u,形状/n,是/v,：/w, ,[/w,vocabulary/en,_,size/en,,/w, ,embedding/en,_,size/en,]/w, ,word/en,_,embeddings/en, ,=/w, ,tf/en,./w,nn/en,./w,embedding/en,_,lookup/en,(/w,embedding/en,_,matrix/en,,/w, ,word/en,_,ids/en,)/w,嵌入/v,的/u,矩阵/n,会/v,被/p,随机/d,地/u,初始化/v,，/w,模型/n,会学会/nt,通过/p,数据/n,分辨/v,不同/a,词语/n,的/u,意思/n,0/m,x/en,5/m,:/w, ,损失/n,函数/n,我们/r,想/v,使/v,目标/n,词语/n,的/u,平均/a,负/v,对/p,数/m,概率/n,最/d,小/a,论文/n,中/f,的/u,典型/n,衡量/v,标准/n,是/v,每个/r,词语/n,的/u,平均/a,困惑/a,度/q,（/w,perplexity/en,）/w,，/w,计算式/nw,为/p,同时/c,我们/r,会/v,观察/v,训练/vn,过程/n,中/f,的/u,困惑/a,度值/nw,（/w,perplexity/en,）/w,0/m,x/en,6/m,:/w, ,多/a,个/q, ,lstm/en, ,层/q,堆/q,叠/v,要/v,想/v,给/p,模型/n,更/d,强/a,的/u,表达/v,能力/n,，/w,可以/v,添加/vn,多/a,层/q, ,lstm/en, ,来/v,处理/v,数据/n,。/w,第一/m,层/q,的/u,输出/v,作为/v,第二/m,层/q,的/u,输入/v,，/w,以此类推/l,。/w,类/q, ,multirnncell/en, ,可以/v,无缝/b,的/u,将/d,其/r,实现/v,lstm/en, ,=/w, ,rnn/en,_,cell/en,./w,basiclstmcell/en,(/w,lstm/en,_,size/en,)/w, ,stacked/en,_,lstm/en, ,=/w, ,rnn/en,_,cell/en,./w,multirnncell/en,(/w,[/w,lstm/en,]/w, ,*/w, ,number/en,_,of/en,_,layers/en,)/w, ,initial/en,_,state/en, ,=/w, ,state/en, ,=/w, ,stacked/en,_,lstm/en,./w,zero/en,_,state/en,(/w,batch/en,_,size/en,,/w, ,tf/en,./w,float/en,32/m,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,len/en,(/w,num/en,_,steps/en,)/w,)/w,:/w, ,#, ,每次/r,处理/v,一批/mq,词语/n,后/f,更新/v,状态/n,值/n,./w, ,output/en,,/w, ,state/en, ,=/w, ,stacked/en,_,lstm/en,(/w,words/en,[/w,:/w,,/w, ,i/en,]/w,,/w, ,state/en,)/w, ,#, ,其余/r,的/u,代码/n,./w, ,#, ,./w,./w,./w, ,final/en,_,state/en, ,=/w, ,state/en,0/m,x/en,7/m,:/w, ,在/p,gpu/en,上/f,编译/vn,并/c,运行/vn,wget/en, ,http/en,:/w,//w,//w,www/en,./w,fit/en,./w,vutbr/en,./w,cz/en,//w,~/w,imikolov/en,//w,rnnlm/en,//w,simple/en,-/w,examples/en,./w,tgz/en, ,python/en, ,ptb/en,_,word/en,_,lm/en,./w,py/en, ,--/nrf,data/en,_,path/en,=/w,./w,//w,simple/en,-/w,examples/en,//w,data/en,//w, ,--/nrf,alsologtostderr/en, ,--/nrf,model/en, ,largerelevant/en, ,link/en,:/w,http/en,:/w,//w,//w,colah/en,./w,github/en,./w,io/en,//w,posts/en,//w,2015/m,-/w,08/m,-/w,understanding/en,-/w,lstms/en,//w, ,http/en,:/w,//w,//w,lib/en,./w,csdn/en,./w,net/en,//w,article/en,//w,deeplearning/en,//w,59839/m, ,http/en,:/w,//w,//w,www/en,./w,tensorfly/en,./w,cn/en,//w,tfdoc/en,//w,tutorials/en,//w,