上/f,一篇/mq,文章/n,主要/b,介绍/v,了/u,查询/v,与/p,文档/n,内容/n,相似性/n,的/u,打分/v,以及/c,基于/p,概率/n,模型/n,的/u,bm/en,25/m,模型/n,和/c,如何/r,修改/v,lucene/en,的/u,排序/vn,源代码/n,。/w,这/r,篇/q,文章/n,将/d,重点/n,讲述/v,机器/n,学习/v,排序/vn,，/w,其中/r,的/u,重头戏/n,是/v,关于/p,listnet/en,算法/n,的/u,英文/nz,原版/n,学术/n,论文/n,的/u,解读/v,以及/c,ranklib/en,源/ng,码/v,包/v,的/u,学习/v,。/w,机器/n,学习/v,排序/vn,:/w,从/p, ,pairwise/en,方法/n,到/v,listwise/en,方法/n,zhe/en, ,cao/en,*/w,tao/en, ,qin/en,*/w,清华大学/nt,，/w,北京/ns,，/w,10084/m,，/w,中国/ns,tie/en,-/w,yan/en, ,liu/en,微软/nt,亚洲研究院/nt,，/w,海淀区知春路/ns,49号/mq,，/w,10080/m,，/w,中国/ns,北京/ns,ming/en,-/w,feng/en, ,tsai/en,*/w,国立/b,台湾/ns,大学/n,，/w,中华/nz,台北/ns, ,106/m,hang/en, ,li/en,微软/nt,亚洲研究院/nt,，/w,海淀区知春路/ns,49号/mq,，/w,10080/m,，/w,中国/ns,北京/ns,翻译/v,：/w,xueqiang/en, , ,tong/en, , , ,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,txq/en,157/m, , , ,txq/en,157/m,@/w,163/m,./w,com/en,说明/v,：/w,在/p,翻译/v,过程/n,中/f,，/w,我/r,会/v,尽量/d,尊重/v,原著/n,，/w,力求/v,做到/v,简洁/a,易懂/a,，/w,后面/f,会/v,加入/v,自己/r,的/u,一些/m,理解/v,。/w,摘要/n,本文/r,主要/b,阐述/v,对/p,排序/vn,对象/n,构建/v,机器/n,学习/v,模型/n,(/w,评分/vn,函数/n,)/w,。/w,机器/n,学习/v,排序/vn,在/p,文档/n,检索/v,、/w,协同/v,过滤/v,以及/c,其他/r,许多/m,领域/n,都/d,有/v,广泛/a,且/c,重要/a,的/u,应用/vn,。/w,目前/t,一种/mq,基于/p,把/p,”/w,文档/n,对/p,”/w,作为/v,排序/vn,对象/n,的/u,机器/n,学习/v,排序/vn,方法/n,已经/d,被/p,提/v,出来/v,，/w,在/p,学术界/n,我们/r,把/p,它/r,称为/v,pairwise/en,方法/n,。/w,尽管/c,pairwise/en,有所/v,改进/v,，/w,然而/c,它/r,忽略/v,了/u,一个/m,非常/d,重要/a,的/u,事实/n,：/w,我们/r,的/u,排序/vn,预测/v,任务/n,是/v,基于/p,所有/b,的/u,排序/vn,对象/n,，/w,这些/r,对象/n,的/u,排列/v,顺序/n,要/v,远远/d,多于/v,两个/m,对象/n,的/u,排列/v,。/w,本文/r,论述/vn,的/u,机器/n,学习/v,排序/vn,方法/n,，/w,是/v,把/p,对象/n,列表/v,(/w,检索/v,出/v,的/u,全部/m,文档/n,)/w,作为/v,排序/vn,对象/n,，/w,并且/c,为/p,这个/r,方法/n,提/v,出/v,了/u,一种/mq,概率/n,模型/n,。/w,具体来说/nw,，/w,我们/r,引入/v,了/u,两个/m,概率/n,模型/n,作为/v,listwise/en,方法/n,的/u,损失/n,函数/n,，/w,分别/d,是/v,全/a,排列/v,概率/n,模型/n,和/c,top/en,-/w,one/en,概率/n,模型/n,。/w,我们/r,会/v,使用/v,神经/n,网络/n,构建/v,评分/vn,函数/n,和/c,梯度/n,下降/v,作为/v,损失/n,函数/n,的/u,优化/v,手段/n,。/w,在/p,信息/n,检索/v,中/f,的/u,经验/n,显示/v,，/w,listwise/en,比/p,pairwise/en,表现/v,得/u,更加/d,出色/a,。/w,1/m,./w,引言/n,很多/m,应用/vn,的/u,核心/n,事务/n,都/d,离/v,不/d,开/v,排序/vn,，/w,比如/v,全文/n,检索/v,，/w,协同/v,过滤/v,，/w,专家/n,搜索/vn,，/w,反/v,网络/n,垃圾/n,邮件/n,，/w,情感/n,分析/vn,，/w,产品/n,评级/vn,等等/u,。/w,不/d,失/v,一般性/n,，/w,本文/r,主要/b,以/p,文档/n,检索/v,为/p,例/n,讨论/v,机器/n,学习/v,排序/vn,。/w,当/p,应用/vn,于/p,全文/n,检索/v,时/ng,，/w,机器/n,学习/v,排序/vn,按照/p,如下/v,方式/n,工作/vn,：/w,假设/v,现在/t,有/v,一些/m,文档/n,集合/v,，/w,在/p,检索/v,的/u,时候/n,，/w,给/p,定/v,一个/m,查询/v,，/w,然后/c,评分/vn,函数/n,给/p,每/r,一个/m,返回/v,的/u,文档/n,打分/v,，/w,按/p,降序/nw,排列/v,。/w,每个/r,文档/n,的/u,得分/n,代表/n,了/u,与/p,这个/r,查询/v,的/u,相对/d,相关/v,程度/n,。/w,在/p,机器/n,学习/v,排序/vn,的/u,训练/vn,中/f,，/w,往往/d,先/d,提供/v,多/a,个/q,查询/v,，/w,其中/r,每个/r,查询/v,都/d,和/c,由/p,这个/r,查询/v,得到/v,的/u,评分/vn,文档/n,集合/v,相/d,关联/vn,，/w,得到/v,文档/n,后/f,用/p,这些/r,训练/vn,数据/n,创建/v,出/v,评分/vn,函数/n,，/w,用以/d,精确/a,地/u,预测/v,文档/n,集/vg,的/u,得分/n,。/w,由于/c,它/r,的/u,重要性/n,，/w,近年来/l,机器/n,学习/v,排序/vn,在/p,机器/n,学习/v,社区/n,中/f,引起/v,了/u,广泛/a,的/u,关注/v,。/w,在/p,业内/d,被/p,称之为/v,pairwise/en,的/u,若干/m,方法/n,已经/d,成功/a,用于/v,全文/n,检索/v,。/w,这个/r,方法/n,把/p,一对儿/nw,有/v,排列/v,顺序/n,的/u,文档/n,作为/v,训练/vn,学习/v,的/u,实例/n,，/w,并且/c,用/p,分类/vn,算法/n,来/v,处理/v,。/w,特别/d,地/u,，/w,在/p,训练/vn,中/f,，/w,在/p,我们/r,收集/v,到/v,所有/b,文档/n,对儿/nw,的/u,全/a,排列/v,之后/f,，/w,对/p,每个/r,文档/n,对儿/nw,标识/n,一个/m,代表/n,这/r,两个/m,文档/n,相关/v,程度/n,的/u,标签/n,(/w,-/w,1/m, ,or/en, ,1/m,)/w,，/w,然后/c,我们/r,用/p,这些/r,数据/n,训练/vn,出/v,分类/vn,模型/n,，/w,再/d,用/p,这个/r,分类/vn,模型/n,排序/vn,。/w,svm/en,、/w,boosting/en,还有/v,神经/n,网络/n,这些/r,分类/vn,模型/n,的/u,应用/vn,直接/ad,导致/v,rankingsvm/en,(/w,herbrich/en, ,et/en, ,al/en,./w,,/w,1999/m,)/w,，/w,rankboost/en,(/w,freund/en, ,et/en, ,al/en,./w,,/w,1998/m,)/w,，/w,ranknet/en,(/w,burges/en, ,et/en, ,al/en,./w,,/w,2005/m,)/w,算法/n,的/u,产生/v,。/w,使用/v,pairwise/en,方法/n,有/v,很多/m,优势/n,。/w,首先/d,，/w,在/p,分类/vn,算法/n,中/f,很多/m,成型/v,的/u,方法/n,可以/v,直接/ad,应用/vn,于/p,排序/vn,中/f,。/w,其次/c,，/w,在/p,特定/b,情况/n,下/f,可以/v,非常/d,容易/a,地/u,获取/v,到/v,文档/n,对儿/nw,(/w,joachims/en,,/w,2002/m,)/w,。/w,然而/c,，/w,这个/r,方法/n,存在/v,很多/m,缺点/n,。/w,首先/d,，/w,作为/v,训练/vn,对象/n,的/u,文档/n,对儿/nw,，/w,他/r,所/u,训练/vn,出来/v,的/u,模型/n,的/u,最小化/nw,损失/n,函数/n,，/w,是/v,用/p,在/p,分类/vn,中/f,而/c,非/h,排序/vn,中/f,。/w,其次/c,，/w,文档/n,对儿/nw,数量/n,庞大/a,导致/v,计算/v,复杂/a,度/q,太/d,高/a,。/w,第三/nw,，/w,文档/n,对儿/nw,属于/v,独立/v,同/p,分布/v,(/w,iid/en,)/w,的/u,假设/v,过于/d,(/w,严格/ad,)/w,strong/en,，/w,与/p,实际/n,情况/n,相差/v,甚/dg,远/a,。/w,最后/f,，/w,不同/a,的/u,查询/v,产生/v,的/u,文档/n,对儿/nw,数量/n,变化/vn,太/d,大/a,，/w,换句话说/c,文档/n,对儿/nw,的/u,数量/n,对/p,查询/v,比较/d,敏感/a,，/w,由于/c,这个/r,差异/n,，/w,将/d,直接/ad,导致/v,训练/vn,模型/n,更加/d,偏向/v,于/p,拥有/v,更/d,多/a,文档/n,对儿/nw,的/u,查询/v,(/w,拥有/v,多/a,数量/n,文档/n,对儿/nw,的/u,查询/v,对/p,建模/vn,贡献/n,更/d,大/a,)/w,。/w,在/p,本文/r,中/f,，/w,我们/r,提出/v,listwise/en,的/u,方法/n,，/w,在/p,这个/r,方法/n,中/f,，/w,我们/r,把/p,文档/n,集/vg,作为/v,训练/vn,对象/n,。/w,接下来/l,的/u,主要/b,问题/n,是/v,如何/r,定义/n,listwise/en,的/u,损失/n,函数/n,。/w,我们/r,提出/v,一个/m,概率/n,模型/n,用于/v,listwise/en,损失/n,函数/n,的/u,参数/n,估计/v,。/w,我们/r,会/v,同时/c,把/p,排序/vn,函数/n,对/p,文档/n,的/u,打分/v,(/w,此时/r,参数/n,是/v,未知/vn,的/u,)/w,和/c,人工/n,对/p,文档/n,显示/v,的/u,或者/c,隐士/n,的/u,打分/v,变换/v,成/v,概率/n,分布/v,，/w,这样/r,我们/r,就/d,可以/v,把/p,两者/r,(/w,特指/v,概率/n,分布/v,)/w,间/f,的/u,距离/n,(/w,差异/n,)/w,作为/v,损失/n,函数/n,。/w,我们/r,定义/n,了/u,两个/m,概率/n,模型/n,，/w,分别/d,是/v,组合/v,(/w,全/a,排列/v,)/w,概率/n,模型/n,和/c,top/en, ,one/en,概率/n,。/w,listnet/en,算法/n,是/v,这样/r,一种/mq,算法/n,，/w,它/r,使用/v,listwise/en,的/u,损失/n,函数/n,，/w,优化/v,损失/n,函数/n,前/f,先/d,构建/v,神经/n,网络/n,模型/n,，/w,然后/c,用/p,梯度/n,下降/v,估计/v,参数/n,。/w,事实/n,表明/v,，/w,listnet/en,算法/n,明显/a,好/a,于/p,ranking/en, ,svm/en,,/w, ,rankboost/en,还有/v, ,ranknet/en,。/w,本文/r,主要/b,包括/v,以下/f,4/m,部分/n,：/w,①,listwise/en,算法/n,的/u,概述/v,；/w,②,基于/p,概率/n,模型/n,的/u,损失/n,函数/n,的/u,转换/v,；/w,③,listwise/en,算法/n,的/u,发展/vn,；/w,④,关于/p,这个/r,算法/n,的/u,实验/vn,验证/vn,。/w,2/m,./w,related/en, ,work/en,2.1/m,机器/n,学习/v,排序/vn,ranknet/en,算法/n,在/p,对/p,损失/n,函数/n,进行/v,参数/n,估计/v,时/ng,，/w,使用/v,交叉熵/nw,作为/v,参数/n,搜索/vn,方向/n,(/w,构建/v,损失/n,函数/n,)/w,使用/v,梯度/n,下降/v,法/j,优化/v,损失/n,函数/n,，/w,在/p,这个/r,过程/n,中/f,会/v,构建线性/nw,神经/n,网络/n,作为/v,评分/vn,函数/n,。/w,pairwise/en,算法/n,被/p,先后/d,应用/vn,于/p,信息/n,检索/v,。/w,比如/v,，/w,joachims/en,(/w,2002/m,)/w,把/p,rankingsvm/en,算法/n,应用/vn,于/p,全文/n,检索/v,，/w,他/r,从/p,用户/n,的/u,点击/v,数据/n,(/w,一般/a,从/p,点击/v,图/n,中/f,获取/v,)/w,中/f,获取/v,训练/vn,时/ng,要/v,用/p,到/v,的/u,文档/n,对儿/nw,。/w,2.2/m,排序/vn,中/f,的/u,概率/n,模型/n,luce/en, ,定义/n,了/u,概率/n,分布/v,模型/n,，/w,他/r,进一步/d,引入/v,参数/n,来/v,表征/v,概率/n,分布/v,并且/c,发明/v,了/u,估计/v,参数/n,的/u,方法/n,。/w,plackett/en,在/p,投票/v,结果/n,系统/n,上/f,应用/vn,了/u,这个/r,模型/n,和/c,方法/n,。/w,本文/r,应用/vn,相似/a,的/u,概率/n,分布/v,模型/n,。/w,然而/c,，/w,本文/r,提到/v,的/u,底层/n,结构/n,(/w,parameters/en,)/w,和/c,基本/a,用法/n,(/w,文档/n,分数/n,转换/v,为/p,概率/n,分布/v,)/w, ,与/p,plackett/en,的/u,会/v,有/v,些/q,差异/n,。/w,3/m,./w,listwise/en,方法/n,这/r,部分/n,，/w,我们/r,将/d,会/v,以/p,全文/n,检索/v,为/p,例/n,，/w,给/p,出/v,关于/p,机器/n,学习/v,排序/vn,的/u,一般性/n,的/u,描述/v,，/w,并且/c,在/p,细节/n,上/f,加以/v,详细/ad,说明/v,。/w,在/p,以下/f,描述/v,中/f,，/w,我们/r,使用/v,上标/nw,表示/v,查询/v,的/u,索引/n,，/w,使用/v,下标/n,表示/v,文档/n,的/u,索引/n,。/w,在/p,训练/vn,中/f,，/w,通常/d,给/p,定/v,这样/r,一组/mq,查询/v,q/en,=/w,{/w,q/en,(/w,1/m,)/w,,/w,q/en,(/w,2/m,)/w,,/w,…/w,q/en,(/w,m/en,)/w,}/w,。/w,每个/r,查询/v,都/d,和/c,文档/n,集合/v,d/en,(/w,i/en,)/w,=/w,(/w,d/en,(/w,i/en,)/w,1/m,,/w,d/en,(/w,i/en,)/w,2/m,,/w,…/w,d/en,(/w,i/en,)/w,n/en,(/w,i/en,)/w,)/w,相/d,关联/vn,,/w,其中/r,d/en,(/w,i/en,)/w,j/en,表示/v,第/m,j/en,个/q,文档/n,，/w,n/en,(/w,i/en,)/w,表示/v,第/m,i/en,个/q,查询/v,的/u,文档/n,数目/n,(/w,d/en,(/w,i/en,)/w,)/w,。/w,此外/c,，/w,每/r,一组/mq,文档/n,d/en,(/w,i/en,)/w,都/d,和/c,文档/n,的/u,人工/n,打分/v,y/en,(/w,i/en,)/w,=/w,(/w,y/en,(/w,i/en,)/w,1/m,,/w,y/en,(/w,i/en,)/w,2/m,,/w,…/w,y/en,(/w,i/en,)/w,n/en,(/w,i/en,)/w,)/w,相/d,关联/vn,。/w,y/en,(/w,i/en,)/w,代表/n,了/u,文档/n,和/c,查询/v,的/u,相关/v,程度/n,，/w,这个/r,分数/n,是/v,人为/d,指定/v,的/u,。/w,比如/v,，/w,这个/r,分数/n,可以/v,由/p,文档/n,d/en,(/w,i/en,)/w,j/en,的/u,点击率/nw,转化/v,而/c,来/v,(/w,joachims/en,,/w, ,2002/m,)/w,。/w,这种/r,假设/v,认为/v,具有/v,较/d,高/a,点击率/nw,的/u,文档/n,和/c,查询/v,的/u,相关性/n,更/d,强/a,。/w,一个/m,特征/n,向量/n, ,x/en,(/w,i/en,)/w,j/en, ,=/w, ,Ψ,(/w,q/en,(/w,i/en,)/w,,/w, ,d/en,(/w,i/en,)/w,j/en,)/w, ,是/v,由/p,每个/r,查询/v,-/w,文档/n,(/w,q/en,(/w,i/en,)/w,,/w, ,d/en,(/w,i/en,)/w,j/en,)/w,创建/v,而/c,来/v,，/w,i/en, ,=/w, ,1/m,,/w, ,2/m,,/w, ,·/w, ,·/w, ,·/w, ,m/en,，/w,j/en, ,=/w,1/m,,/w,2/m,,/w, ,·/w, ,·/w, ,·/w, ,n/en,(/w,i/en,)/w,。/w,每个/r,特征/n,向/p,量/n,构成/v,x/en,(/w,i/en,)/w, ,=/w, ,(/w,x/en,(/w,i/en,)/w,1/m,,/w,x/en,(/w,i/en,)/w,2/m,,/w,…/w,x/en,(/w,i/en,)/w,n/en,(/w,i/en,)/w,)/w,，/w,这/r,是/v,每个/r,查询/v,构成/v,的/u,特征/n,矩阵/n,。/w,对应/v,分数/n,集合/v,y/en,(/w,i/en,)/w, ,=/w, ,(/w,y/en,(/w,i/en,)/w,1/m,,/w,y/en,(/w,i/en,)/w,2/m,,/w,…/w,y/en,(/w,i/en,)/w,n/en,(/w,i/en,)/w,)/w,,/w,最后/f,训练/vn,集/vg,可以/v,表示/v,成/v,t/en, ,=/w,｛,x/en,(/w,i/en,)/w,,/w, ,y/en,(/w,i/en,)/w,｝,mi/en,=/w,1/m,。/w,然后/c,我们/r,定义/n,一个/m,评分/vn,函数/n,f/en,,/w,对/p,每个/r,特征/n,向量/n,x/en,(/w,i/en,)/w,j/en, ,输出/v,一个/m,评分/vn,f/en,(/w,x/en,(/w,i/en,)/w,j/en,)/w,，/w,对于/p,特征/n,矩阵/n,我们/r,得到/v,一组/mq,评分/vn,z/en,(/w,i/en,)/w, ,=/w, ,(/w,f/en,(/w,x/en,(/w,i/en,)/w,1/m,)/w,,/w,f/en,(/w,x/en,(/w,i/en,)/w,2/m,)/w,,/w,…/w,f/en,(/w,x/en,(/w,i/en,)/w,n/en,(/w,i/en,)/w,)/w,)/w,。/w,学习/v,的/u,目标/n,是/v,在/p,整个/b,数据集/nw,上/f,取得/v,总/b,损失/n,函数/n,最小化/nw,。/w,∑/w,mi/en,=/w,1/m,l/en,(/w,y/en,(/w,i/en,)/w,,/w,z/en,(/w,i/en,)/w,)/w, , , , , , , ,---------------------/nrf, ,(/w,1/m,)/w,l/en,为/p,listwise/en,的/u,损失/n,函数/n,。/w,在/p,训练/vn,过/u,中/f,，/w,给/p,定/v,一个/m,查询/v,和/c,相/d,关联/vn,的/u,文档/n,集/vg,，/w,我们/r,把/p,整个/b,文档/n,集/vg,的/u,函数/n,打分/v,和/c,人工/n,打分/v,转换/v,成/v,概率/n,分布/v,然后/c,计算/v,差值/n,，/w,利用/v,梯度/n,下降/v,估计/v,出/v,打分/v,函数/n,的/u,最/d,优/ag,参数/n,(/w,优化/v,的/u,过程/n,)/w,，/w,然后/c,用/p,测试/vn,集/vg,提高/v,泛化/nw,能力/n,。/w,相比之下/l,，/w,pairwise/en,方法/n,训练/vn,时/ng,在/p,文档/n,集中/v,找/v,出/v,所有/b,的/u,文档/n,对儿/nw,排列/v,，/w,如果/c,前/f,一个/m,文档/n,的/u,人工/n,打分/v,高于/v,后/f,一个/m,，/w,就/d,标识/n,为/p,1/m,否则/c,为/p,-/w,1/m,，/w,最后/f,用/p,这些/r,训练/vn,数据/n,训练/vn,出/v,一个/m,分类/vn,模型/n,，/w,比如/v,svm/en,。/w,比如/v,有/v,三个/m,文档/n,，/w,我们/r,暂/d,且/c,命名/v,为/p,a/en,,/w,b/en,,/w,c/en,，/w,全/a,排列/v,为/p,ab/en,(/w,1/m,)/w,,/w,ba/en,(/w,-/w,1/m,)/w,,/w,ac/en,(/w,1/m,)/w,,/w,ca/en,(/w,-/w,1/m,)/w,,/w,cb/en,(/w,1/m,)/w,,/w,bc/en,(/w,-/w,1/m,)/w,，/w,括号/n,里/f,为/p,预测/v,后/f,的/u,分类/vn,。/w,我们/r,可以/v,从/p,所有/b,分类/vn,为/p,1/m,的/u,组合/v,中/f,找/v,出/v,文档/n,排列/v,顺序/n,：/w,acb/en,。/w,pairwise/en,算法/n,将/d,更/d,多/a,的/u,精力/n,放/v,在/p,寻找/v,全/a,排列/v,的/u,文档/n,对儿/nw,以及/c,训练/vn,分类/vn,模型/n,上/f,，/w,复杂/a,度/q,非常/d,高/a,，/w,listwise/en,解决/v,了/u,这个/r,问题/n,。/w,4/m,./w,概率/n,模型/n,前面/f,我们/r,提出/v,使用/v,两个/m,概率/n,模型/n,中/f,的/u,任意/d,一个/m,计算/v,损失/n,函数/n,，/w,这/r,两个/m,概率/n,模型/n,分别/d,是/v,组合/v,概率/n,和/c,top/en, ,one/en, ,概率/n,。/w,4/m,./w,1/m,./w,permutation/en, ,probability/en,我们/r,确定/v,了/u,排序/vn,对象/n,集合/v,1/m,,/w,2/m,,/w,…/w,n/en,。/w,其中/r,一种/mq,排列/v,为/p,{/w,1/m,,/w,2/m,,/w,…/w,,/w,n/en,}/w,。/w,我们/r,写/v,为/p,π/w, ,。/w,其中/r,π/w,(/w,j/en,)/w,表示/v,对象/n,在/p,排列/v,中/f,的/u,位置/n,。/w,文档/n,集合/v,的/u,所有/b,可能/v,的/u,排列/v,为/p,Ω,n/en,。/w,以后/f,我们/r,有时/d,会/v,互换/v,排名/v,函数/n,和/c,排名/v,函数/n,给/p,出/v,的/u,分数/n,列表/v,。/w,我们/r,假设/v,，/w,在/p,使用/v,排序/vn,函数/n,的/u,排序/vn,列表/v,中/f,进行/v,预测/v,时/ng,具有/v,不确定性/nw,。/w,换句话说/c,，/w,任何/r,排列/v,都/d,是/v,可能/v,的/u,，/w,但是/c,不同/a,的/u,排列/v,可能/v,有/v,不同/a,的/u,似然/nw,函数/n,估计/v,。/w,我们/r,定义/n,的/u,组合/v,概率/n,，/w,在/p,给定/vn,评分/vn,函数/n,前提/n,下/f,，/w,应该/v,在/p,组合/v,概率/n,的/u,似然/nw,估计/v,上/f,取得/v,比较/d,理想/n,的/u,效果/n,。/w,因此/c,，/w,我们/r,有/v,如下/v,定义/n,：/w,定理/n,1/m, ,假设/v,π/w,是/v,排序/vn,列表/v,中/f,其中/r,一种/mq,排列/v,，/w,Φ,(/w,./w,)/w,是/v,一个/m,递增/v,并且/c,恒/ag,大于/v,零/m,的/u,函数/n,。/w,那么/r,，/w,排列/v,组合/v,的/u,概率/n,为/p,：/w,于/p,任意/d,的/u,排序/vn,列表/v,，/w,在/p,前/f,一个/m,文档/n,得分/n,高于/v,后面/f,一个/m,文档/n,得分/n,的/u,情况/n,下/f,，/w,如果/c,两者/r,交换/v,位置/n,，/w,我们/r,将/d,会/v,得到/v,一个/m,更加/d,低值/nz,的/u,概率/n,分布/v,。/w,定理/n,4/m,更加/d,简单/a,，/w,如果/c,一个/m,概率/n,分布/v,是/v,按照/p,文档/n,的/u,分数/n,降序/nw,排列/v,的/u,，/w,那么/r,他/r,具有/v,最高值/nw,的/u,概率/n,分布/v,，/w,反之/c,如果/c,按照/p,升序/n,排列/v,的话/u,，/w,概率/n,分布/v,的/u,值/n,是/v,最低/a,的/u,。/w,给/p,定/v,两个/m,scores/en,集合/v,，/w,我们/r,根据/p,他们/r,计算/v,出/v,两个/m,组合/v,概率/n,分布/v,模型/n,，/w,然后/c,把/p,这/r,两个/m,模型/n,之间/f,的/u,差值/n,作为/v,listwise/en,的/u,损失/n,函数/n,。/w,然而/c,，/w,对于/p,容量/n,为/p,n/en,的/u,文档/n,集合/v,来说/u,，/w,组合/v,情况/n,是/v,n/en,!/w,,/w,计算/v,起来/v,比较/d,棘手/a,，/w,所有/b,我们/r,考虑/v,使用/v,top/en,-/w,one/en,概率/n,模型/n,。/w,4.2/m, ,top/en, ,one/en, ,probability/en,一个/m,对象/n,的/u,top/en, ,one/en,概率/n,表示/v,这个/r,对象/n,在/p,所有/b,的/u,文档/n,集中/v,排/v,在/p,最/d,前面/f,的/u,概率/n,。/w,需要/v,注意/v,的/u,是/v,listnet/en,和/c,ranknet/en,很/d,相似/a,。/w,他们/r,的/u,主要/b,区别/n,在于/v,前者/r,把/p,document/en, ,list/en, ,作为/v,训练/vn,和/c,预测/v,的/u,对象/n,，/w,后者/r,把/p, ,document/en, ,pair/en,作为/v,实例/n,。/w,比较/d,有趣/a,的/u,是/v,，/w,当/p,有/v,一组/mq,查询/v,，/w,每个/r,查询/v,得到/v,的/u,文档/n,数目/n,为/p,2时/t,，/w,listwise/en,的/u,损失/n,函数/n,变/v,得/u,和/c,pairwise/en,几乎/d,相等/v,。/w,ranknet/en,的/u,时间/n,复杂/a,度/q,为/p,o/en,(/w,m/en, ,./w,n/en,2/m,max/en,)/w,(/w,burges/en, ,et/en, ,al/en,./w,,/w,2005/m,)/w,,/w,m/en,代表/n,查询/v,的/u,数目/n,,/w,n/en,代表/n,每个/r,查询/v,对应/v,的/u,最大/a,文档/n,数目/n,。/w,listnet/en,的/u,时间/n,复杂/a,度/q,为/p,o/en,(/w,m/en, ,./w,nmax/en,)/w,。/w,6/m,./w,实验/vn,我们/r,将/d,使用/v,三个/m,数据集/nw,分别/d,与/p,ranknet/en,(/w,burges/en, ,et/en, ,al/en,./w,,/w,2005/m,)/w,、/w,ranking/en, ,svm/en, ,(/w,herbrich/en, ,et/en, ,al/en,./w,,/w, ,1999/m,)/w,和/c, ,rankboost/en, ,(/w,freund/en, ,et/en, ,al/en,./w,,/w, ,1998/m,)/w,进行/v,精度/n,对比/v,。/w,这里/r,的/u,listnet/en,使用/v,top/en, ,one/en,概率/n,模型/n,。/w,为了/p,简单/a,起见/u,，/w,在/p,本次/r,实验/vn,中/f,，/w,我们/r,使用/v,线性/n,神经/n,网络/n,模型/n,并且/c,省略/v,常量/n,b/en,:/w,，/w,尖括号/n,里面/f,代表/n,向/p,量/n,内积/n,。/w,6.1/m,数据集/nw,我们/r,使用/v,3个/m,数据集/nw,：/w,trec/en,，/w,ohsumed/en,，/w,csearch/en,。/w,trec/en,数据集/nw,包括/v,了/u,1053110个/m,pages/en,,/w,11164829个/m,超/v,链接/n,，/w,这些/r,数据/n,是/v,查询/v,50次/mq,得到/v,的/u,。/w,在/p,构造/v,特征/n,向/p,量/n,时/ng,，/w,考虑/v,了/u,内容/n,特征/n,和/c,超/v,链接/n,特征/n,，/w,总共/d,有/v,20个/m,。/w,ohsumed/en,数据集/nw,包括/v,了/u,348556个/m,documents/en,，/w,106个/m,queries/en,，/w,16140个/m,文档/n,对儿/nw,，/w,总共/d,构建/v,了/u,30个/m,特征/n,。/w,csearch/en,大约/d,包含/v,了/u,25000/m, ,queries/en,，/w,每个/r,query/en,有/v,1000多/mq,个/q,关联/vn,文档/n,，/w,构建/v,了/u,600个/m,features/en,，/w,包括/v,query/en, ,dependent/en, ,features/en, ,and/en, ,independent/en, ,features/en,./w,这个/r,数据集/nw,提供/v,了/u,5个/m,等级/n,的/u,评分/vn,：/w,4/m, ,(/w,”/w,perfect/en, ,match/en,”/w,)/w, ,to/en, ,0/m, ,(/w,”/w,bad/en, ,match/en,”/w,)/w,。/w,为了/p,使/v,排序/vn,更加/d,接近/v,真实/a,情况/n,，/w,我们/r,创建/v,训练/vn,数据集/nw,的/u,时候/n,将/d,使用/v,”/w,评分/vn,等级/n,”/w,来/v,表示/v,关联/vn,程度/n,的/u,高低/n,(/w,离散/vn,关联/vn,判断/v,)/w,。/w,在/p,排名/v,性能/n,评估/vn,上/f,，/w,我们/r,采用/v,两个/m,常用/a,的/u,ir/en,评价/v,措/vg,：/w,ndcg/en,和/c,map/en,。/w,ndcg/en, ,is/en, ,designed/en, ,to/en, ,measure/en, ,ranking/en, ,accuracy/en, ,when/en, ,there/en, ,are/en, ,more/en, ,than/en, ,two/en, ,levels/en, ,of/en, ,relevance/en,　,judgments/en,./w, ,for/en, ,map/en, ,it/en, ,is/en, ,assumed/en, ,that/en, ,there/en, ,are/en, ,two/en, ,levels/en,:/w, ,relevant/en, ,and/en, ,irrelevant/en,./w,关于/p,这/r,两/m,部分/n,的/u,理解/v,，/w,可以/v,参看/v,http/en,:/w,//w,//w,www/en,./w,cnblogs/en,./w,com/en,//w,happyangel/en,//w,p/en,//w,3535919/m,./w,html/en,。/w,ndcg/en,主要/b,用于/v,评分/vn,等级/n,大于/v,2个/m,的/u,场景/n,，/w,而/c,map/en,主要/b,用于/v,评分/vn,等级/n,为/p,相关/v,和/c,不/d,相关/v,的/u,场景/n,。/w,6.2/m,排序/vn,精度/n,对于/p,trec/en,和/c,ohsumed/en,我们/r,把/p,每个/r,数据集/nw,分成/v,5个/m,部分/n,,/w,实施/v,”/w,五折/mq,交叉/vn,验证/vn,”/w,。/w, ,在/p,每次/r,实验/vn,中/f,，/w,3/m,//w,5/m,用于/v,训练/vn,，/w,1/m,//w,5/m,用于/v,验证/vn,，/w,剩下/v,的/u,1/m,//w,5/m,用于/v,测试/vn,。/w,对于/p,ranknet/en,和/c,listnet/en,算法/n,，/w,在/p,每次/r,实验/vn,中/f,验证/vn,集/vg,主要/b,用于/v,确定/v,最/d,优化/v,的/u,迭代/vn,次数/n,以便/d,训练/vn,出/v,最/d,优/ag,的/u,模型/n,。/w,对于/p,rankingsvm/en,算法/n,主要/b,是/v,调整/vn,系数/n,c/en,而/c,rankboost/en,算法/n,主要/b,寻找/v,出/v,最佳/z,的/u,weak/en, ,learns/en,的/u,数量/n,。/w,在/p,第/m,6/m,部分/n,我们/r,输出/v,的/u,报告/n,(/w,精度/n,)/w,为/p,五次/mq,实验/vn,的/u,平均值/n,。/w,figure/en, ,1/m,和/c,table/en, ,1/m,给/p,出/v,了/u,trec/en, ,的/u,报告/n,结果/n,。/w,结果/n,显示/v,，/w,listnet/en,算法/n,的/u,表现/v,要/v,优于/v,其他/r,三种/mq,方法/n,。/w,尤其/d,在/p,table/en,1/m,的/u,报告/n,中/f,，/w,我们/r,看到/v,在/p,第一/m,次/q,和/c,第二/m,次/q,试验/vn,中/f,listnet/en,的/u,ndcg/en,值/n,超越/v,ranknet/en,大约/d,4个/m,point/en, ,gain/en,，/w,带来/v,大约/d,10%/mq,的/u,搜索/vn,结果/n,相关性/n,的/u,改进/v,。/w,figure/en, ,2/m,和/c,table/en, ,2/m,显示/v,了/u,ohsumed/en,数据集/nw,的/u,试验/vn,结果/n,。/w,再/d,一次/mq,，/w,在/p,所有/b,的/u,评估/vn,中/f,，/w,listnet/en,仍然/d,优于/v,ranknet/en,和/c,rankboost/en,。/w,此外/c,，/w,除了/p,第/m,3次/mq,和/c,第/m,5次/mq,试验/vn,外/f,，/w,listnet/en,算法/n,均/d,优于/v,ranksvm/en,(/w,用/p,ndcg/en,评估/vn,)/w,。/w,csearch/en,的/u,数据量/n,非常/d,庞大/a,，/w,我们/r,没有/v,采用/v,交叉/vn,验证/vn,的/u,方式/n,。/w,我们/r,从中/d,随机/d,选取/v,1/m,//w,3/m,作为/v,训练/vn,，/w,1/m,//w,3/m,用于/v,验证/vn,，/w,剩下/v,的/u,1/m,//w,3/m,用于/v,测试/vn,。/w,figure/en,3/m,显示/v,了/u,listnet/en,，/w,ranknet/en,和/c,rankboost/en,的/u,试验/vn,结果/n,。/w,listnet/en,算法/n,再/d,一次/mq,不负众望/l,。/w,由于/c,数据量/n,的/u,原因/n,，/w,我们/r,不能/v,实施/v,rankingsvm/en,。/w,6.3/m,讨论/v,我们/r,来/v,讨论/v,一下/m,为什么/r,基于/p,listwise/en,的/u,方法/n,listnet/en,优于/v,基于/p,pairwise/en,的/u,方法/n,ranknet/en,,/w,rankingsvm/en,还有/v,rankboost/en,。/w,就/d,像/v,在/p,第一/m,部分/n,解释/v,过/u,的/u,那样/r,，/w,在/p,pairwise/en,方法/n,中文档/nw,对儿/nw,的/u,数量/n,受/v,查询/