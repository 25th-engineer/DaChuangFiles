摘要/n,：/w,本文/r,对/p,apriori/en,算法/n,进行/v,了/u,简单/a,介绍/v,，/w,并/c,通过/p,python/en,进行/v,实现/v,，/w,进而/c,结合/v,uci/en,数据库/n,中/f,的/u,肋形/nw,蘑菇/n,数据集/nw,对/p,算法/n,进行/v,验证/vn,。/w,“/w,啤酒/n,与/p,尿布/n,”/w,的/u,例子/n,相信/v,很多/m,人/n,都/d,听说/v,过/u,吧/y,，/w,故事/n,是/v,这样/r,的/u,：/w,在/p,一家/mq,超市/n,中/f,，/w,人们/n,发现/v,了/u,一个/m,特别/d,有趣/a,的/u,现象/n,，/w,尿布/n,与/p,啤酒/n,这/r,两种/mq,风马牛不相及/i,的/u,商品/n,居然/d,摆/v,在/p,一起/s,。/w,但/c,这/r,一/m,奇怪/v,的/u,举措/n,居然/d,使/v,尿布/n,和/c,啤酒/n,的/u,销量/n,大幅/d,增加/v,了/u,。/w,这/r,可不/l,是/v,一个/m,笑话/n,，/w,而是/c,一直/d,被/p,商家/n,所/u,津津乐道/i,的/u,发生/v,在/p,美国/ns,沃尔玛连锁/nt,超市/n,的/u,真实/a,案例/n,。/w,原来/d,，/w,美国/ns,的/u,妇女/n,通常/d,在家/v,照顾/v,孩子/n,，/w,所以/c,她们/r,经常/d,会/v,嘱咐/v,丈夫/n,在/p,下班/v,回家/v,的/u,路上/s,为/p,孩子/n,买/v,尿布/n,，/w,而/c,丈夫/n,在/p,买/v,尿布/n,的/u,同时/c,又/d,会/v,顺手/d,购买/v,自己/r,爱/v,喝/vg,的/u,啤酒/n,。/w,这个/r,发现/v,为/p,商家/n,带来/v,了/u,大量/m,的/u,利润/n,，/w,但是/c,如何/r,从/p,浩如烟海/i,却/d,又/d,杂乱无章/i,的/u,数据/n,中/f,，/w,发现/v,啤酒/n,和/c,尿布/n,销售/vn,之间/f,的/u,联系/v,呢/y,?/w,这种/r,从/p,大规模/b,的/u,数据/n,中/f,发现/v,物品/n,间/f,隐含/v,关系/n,的/u,方法/n,被/p,称为/v,关联/vn,分析/vn,，/w,也/d,就/d,是/v,本文/r,要/v,主要/b,研究/vn,的/u,一种/mq,常用/a,的/u,分析/vn,方法/n,，/w,apriori/en,算法/n,是/v,最/d,著名/a,的/u,关联/vn,规则/n,挖掘/v,算法/n,之一/r,。/w,下面/f,就/d,围绕/v,该/r,算法/n,展开/v,学习/v,。/w,一/m, ,关联/vn,分析/vn,关联/vn,分析/vn,是/v,一种/mq,在/p,大规模/b,数据/n,集中/v,寻找/v,有趣/a,关系/n,的/u,任务/n,。/w,这些/r,任务/n,有/v,两种/mq,形式/n,：/w,频繁/a,项集/nr,和/c,关联/vn,规则/n,。/w,频繁/a,项集/nr,是/v,经常/d,出现/v,在/p,一块/mq,的/u,物品/n,的/u,集合/v,；/w,关联/vn,规则/n,暗示/vn,的/u,是/v,两种/mq,物品/n,之间/f,可能/v,存在/v,很/d,强/a,的/u,关系/n,。/w,可以/v,结合/v,某/r,家/q,店/n,的/u,交易/n,清单/n,来/v,说明/v,这/r,两个/m,概念/n,：/w,交易/n,号码/n,商品/n,0/m,豆奶/n,，/w,草莓/n,1/m,草莓/n,，/w,尿布/n,，/w,啤酒/n,，/w,辣椒酱/n,2/m,豆奶/n,，/w,尿布/n,，/w,黄瓜/n,，/w,饼干/n,3/m,黄瓜/n,，/w,饼干/n,，/w,尿布/n,，/w,啤酒/n,4/m,黄瓜/n,，/w,啤酒/n,，/w,尿布/n,，/w,黄瓜/n,频繁/a,项集/nr,指/v,的/u,就/d,是/v,那些/r,经常/d,一起/s,出现/v,的/u,物品/n,集合/v,，/w,比如/v,{/w,啤酒/n,，/w,尿布/n,，/w,饼干/n,}/w,就/d,是/v,频繁/a,项/q,集中/v,的/u,一个/m,例子/n,，/w,而/c,根据/p,上/f,表/n,也/d,可以/v,找到/v,尿布/n,-/w,>,啤酒/n,这样/r,的/u,关联/vn,规则/n,。/w,而/c,我们/r,是/v,要/v,通过/p,关联/vn,分析/vn,大规模/b,数据/n,从而/c,发现/v,数据/n,之间/f,存在/v,的/u,有趣/a,关系/n,，/w,那么/r,问题/n,来/v,了/u,，/w,什么样/r,的/u,关系/n,是/v,有趣/a,的/u,呢/y,？/w,而/c,这个/r,有趣/a,又/d,是/v,怎么/r,定义/n,的/u,呢/y,？/w,我们/r,可以/v,通过/p,支持/v,度/q,（/w,support/en,）/w,和/c,可信度/n,（/w,置信/v,度/q,confidence/en,）/w,来/v,定义/n,。/w,一个/m,项集/nr,的/u,支持/v,度/q,指/v,的/u,是/v,数据/n,集中/v,包含/v,该项/r,集/vg,记录/v,所/u,占/v,的/u,比例/n,，/w,上例/nw,中/f,{/w,豆奶/n,}/w,的/u,支持/v,度/q,是/v,2/m,//w,5/m,,/w,{/w,啤酒/n,，/w,尿布/n,}/w,的/u,支持/v,度/q,是/v,3/m,//w,5/m,；/w,可信度/n,是/v,针对/p,于像/nw,{/w,尿布/n,}/w,-/w,>,{/w,啤酒/n,}/w,这样/r,的/u,关联/vn,规则/n,来/v,定义/n,的/u,，/w,定义/n,为/p,：/w,支持/v,度/q,(/w,{/w,尿布/n,，/w,葡萄酒/n,}/w,)/w,//w,支持/v,度/q,（/w,尿布/n,）/w,。/w,二/m, ,apriori/en,原理/n,上述/b,我们/r,通过/p,支持/v,度/q,和/c,可信度/n,来/v,定义/n,发现/v,数据/n,之间/f,存在/v,的/u,关系/n,。/w,我们/r,知道/v,，/w,在/p,商品/n,列表/v,中/f,，/w,可能/v,存在/v,单一/a,商品/n,组成/v,的/u,频繁/a,项集/nr,，/w,当然/d,也/d,存在/v,两个/m,以及/c,两个/m,以上/f,的/u,商品/n,组成/v,的/u,频繁/a,项集/nr,。/w,而/c,在/p,计算/v,一个/m,频繁/a,项集/nr,的/u,支持/v,度/q,时/ng,，/w,通常/d,需要/v,遍历/nw,所有/b,的/u,商品/n,列表/v,求得/v,，/w,对于/p,列表/v,数目/n,较/d,少/a,的/u,情况/n,该/r,方法/n,无疑/d,是/v,没/d,问题/n,的/u,，/w,但/c,当/p,列表/v,数目/n,成千上万/i,时/ng,，/w,计算量/nw,过/u,大/a,，/w,这种/r,方法/n,势必/d,是/v,不/d,适用/v,的/u,。/w,那么/r,如何/r,解决/v,上述/b,问题/n,呢/y,，/w,apriori/en,原理/n,可以/v,解决/v,！/w,apriori/en,原理/n,是/v,说/v,如果/c,某个/r,项集/nr,是/v,频繁/a,的/u,，/w,那么/r,它/r,的/u,所有/b,子集/n,势必/d,也/d,是/v,频繁/a,的/u,。/w,这个/r,原理/n,从/p,表面/n,上/f,看/v,没/d,什么/r,大/a,用/p,，/w,但是/c,反过来/d,，/w,如果/c,一个/m,项集/nr,是非/n,频繁/a,项集/nr,，/w,那么/r,它/r,所/u,对应/v,的/u,超集/nw,就/d,全都/d,是/v,非/h,频繁/a,项集/nr,。/w,这样/r,在/p,确定/v,了/u,一个/m,项集/nr,是非/n,频繁/a,项集/nr,了/u,之后/f,，/w,它/r,所/u,对应/v,的/u,超集/nw,的/u,支持/v,度/q,我们/r,就/d,可以/v,不/d,去/v,计算/v,了/u,，/w,这/r,在/p,很/d,大/a,程度/n,上/f,避免/v,了/u,项集/nr,数目/n,的/u,指数/n,增长/v,，/w,可以/v,更加/d,合理/a,的/u,计算/v,频繁/a,项集/nr,。/w,三/m, ,apriori/en,算法/n,(/w,1/m,)/w,使用/v,apriori/en,算法/n,来/v,发现/v,频繁/a,项集/nr,apriori/en,算法/n,是/v,用/p,来/v,发现/v,频繁/a,项集/nr,的/u,一种/mq,方法/n,。/w,apriori/en,算法/n,的/u,两个/m,输入/v,参数/n,分别/d,是/v,最小/a,支持/v,度/q,和/c,数据集/nw,。/w,该/r,算法/n,首先/d,生成/vn,所有/b,单个/b,物品/n,的/u,项集/nr,列表/v,，/w,遍历/nw,之后/f,去掉/v,不/d,满足/v,最小/a,支持/v,度/q,要求/v,的/u,项集/nr,；/w,接下来/l,对/p,剩下/v,的/u,集合/v,进行/v,组合/v,生成/vn,包含/v,两个/m,元素/n,的/u,项集/nr,，/w,去掉/v,不/d,满足/v,最小/a,支持/v,度/q,的/u,项集/nr,；/w,重复/v,该/r,过程/n,直到/v,去掉/v,所有/b,不/d,满足/v,最小/a,支持/v,度/q,的/u,项集/nr,。/w,首先/d,采用/v,python/en,生成/vn,所有/b,的/u,单个/b,物品/n,所/u,对应/v,的/u,项集/nr,，/w,并/c,构建/v,一个/m,得到/v,频繁/a,项集/nr,的/u,函数/n,，/w,代码/n,如下/v,：/w,#, ,-/w,*/w,-/w, ,coding/en,:/w, ,cp/en,936/m, ,-/w,*/w,-/w, ,'/w,'/w,'/w, ,apriori/en,算法/n, ,ben/en, ,2015/m,./w,09/m,./w,28/m, ,'/w,'/w,'/w, ,#,coding/en,:/w,utf/en,-/w,8/m, ,from/en, ,numpy/en, ,import/en, ,*/w, ,def/en, ,loaddata/en,(/w,)/w,:/w, ,return/en,[/w,[/w,1/m,,/w,3/m,,/w,4/m,]/w,,/w,[/w,2/m,,/w,3/m,,/w,5/m,]/w,,/w,[/w,1/m,,/w,2/m,,/w,3/m,,/w,5/m,]/w,,/w,[/w,2/m,,/w,5/m,]/w,]/w, ,def/en, ,createc/en,1/m,(/w,dataset/en,)/w,:/w, ,c/en,1/m, ,=/w, ,[/w,]/w, ,for/en, ,transaction/en, ,in/en, ,dataset/en,:/w, ,for/en, ,item/en, ,in/en, ,transaction/en,:/w, ,if/en, ,not/en, ,[/w,item/en,]/w, ,in/en, ,c/en,1/m,:/w, ,c/en,1/m,./w,append/en,(/w,[/w,item/en,]/w,)/w, ,c/en,1/m,./w,sort/en,(/w,)/w, ,return/en, ,map/en,(/w,frozenset/en,,/w,c/en,1/m,)/w, ,def/en, ,scand/en,(/w,d/en,,/w,ck/en,,/w,minsupport/en,)/w,:/w, ,sscnt/en, ,=/w, ,{/w,}/w, ,for/en, ,tid/en, ,in/en, ,d/en,:/w, ,for/en, ,can/en, ,in/en, ,ck/en,:/w, ,if/en, ,can/en,./w,issubset/en,(/w,tid/en,)/w,:/w,#,判断/v,tid/en,是否/v,在/p,can/en,中/f, ,if/en, ,not/en, ,sscnt/en,./w,has/en,_,key/en,(/w,can/en,)/w,:/w, ,sscnt/en,[/w,can/en,]/w, ,=/w, ,1/m, ,else/en,:/w, ,sscnt/en,[/w,can/en,]/w, ,+/w,=/w, ,1/m, ,numitems/en, ,=/w, ,float/en,(/w,len/en,(/w,d/en,)/w,)/w, ,retlist/en, ,=/w, ,[/w,]/w, ,supportdata/en, ,=/w, ,{/w,}/w, ,for/en, ,key/en, ,in/en, ,sscnt/en,:/w, ,support/en, ,=/w, ,sscnt/en,[/w,key/en,]/w, ,//w, ,numitems/en, ,if/en, ,support/en, ,>,=/w, ,minsupport/en,:/w, ,retlist/en,./w,insert/en,(/w,0/m,,/w,key/en,)/w, ,supportdata/en,[/w,key/en,]/w, ,=/w, ,support/en, ,return/en, ,retlist/en,,/w,supportdata/en,对/p,上述/b,代码/n,进行/v,测试/vn,：/w,#,test/en, ,dataset/en, ,=/w, ,loaddata/en,(/w,)/w, ,c/en,1/m, ,=/w, ,createc/en,1/m,(/w,dataset/en,)/w, ,d/en, ,=/w, ,map/en,(/w,set/en,,/w,dataset/en,)/w, ,l/en,1/m,,/w,supportdata/en, ,=/w, ,scand/en,(/w,d/en,,/w,c/en,1/m,,/w,0.5/m,)/w, ,print/en, ,l/en,1/m, ,print/en, ,supportdata/en,结合/v,构建/v,的/u,单个/b,商品/n,项集/nr,判断/v,上述/b,代码/n,是/v,可用/v,的/u,。/w,据此/d,结合/v,之前/f,的/u,分析/vn,构建/v,完整/a,的/u,算法/n,，/w,代码/n,如下/v,：/w,#,构建/v,多/a,个/q,商品/n,对应/v,的/u,项集/nr, ,def/en, ,apriorigen/en,(/w,lk/en,,/w,k/en,)/w,:/w, ,retlist/en, ,=/w, ,[/w,]/w, ,lenlk/en, ,=/w, ,len/en,(/w,lk/en,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,lenlk/en,)/w,:/w, ,for/en, ,j/en, ,in/en, ,range/en,(/w,i/en,+/w,1/m,,/w,lenlk/en,)/w,:/w, ,l/en,1/m, ,=/w, ,list/en,(/w,lk/en,[/w,i/en,]/w,)/w,[/w,:/w,k/en,-/w,2/m,]/w, ,l/en,2/m, ,=/w, ,list/en,(/w,lk/en,[/w,j/en,]/w,)/w,[/w,:/w,k/en,-/w,2/m,]/w, ,l/en,1/m,./w,sort/en,(/w,)/w, ,l/en,2/m,./w,sort/en,(/w,)/w, ,if/en, ,l/en,1/m, ,=/w,=/w, ,l/en,2/m,:/w, ,retlist/en,./w,append/en,(/w,lk/en,[/w,i/en,]/w,|/w,lk/en,[/w,j/en,]/w,)/w, ,return/en, ,retlist/en, ,def/en, ,apriori/en,(/w,dataset/en,,/w,minsupport/en, ,=/w, ,0.5/m,)/w,:/w, ,c/en,1/m, ,=/w, ,createc/en,1/m,(/w,dataset/en,)/w, ,d/en, ,=/w, ,map/en,(/w,set/en,,/w,dataset/en,)/w, ,l/en,1/m,,/w,supportdata/en, ,=/w, ,scand/en,(/w,d/en,,/w,c/en,1/m,,/w,minsupport/en,)/w, ,l/en, ,=/w, ,[/w,l/en,1/m,]/w, ,k/en, ,=/w, ,2/m, ,while/en, ,(/w,len/en,(/w,l/en,[/w,k/en,-/w,2/m,]/w,)/w, ,>, ,0/m,)/w,:/w, ,ck/en, ,=/w, ,apriorigen/en,(/w,l/en,[/w,k/en,-/w,2/m,]/w,,/w,k/en,)/w, ,lk/en,,/w,supk/en, ,=/w, ,scand/en,(/w,d/en,,/w,ck/en,,/w,minsupport/en,)/w, ,supportdata/en,./w,update/en,(/w,supk/en,)/w, ,l/en,./w,append/en,(/w,lk/en,)/w, ,k/en, ,+/w,=/w, ,1/m, ,return/en, ,l/en,,/w,supportdata/en,这样/r,就/d,对/p,得到/v,频繁/a,项集/nr,的/u,思想/n,进行/v,了/u,实现/v,，/w,下面/f,验证/vn,：/w,dataset/en, ,=/w, ,loaddata/en,(/w,)/w, ,minsupport/en, ,=/w, ,0.5/m, ,a/en,,/w,b/en, ,=/w, ,apriori/en,(/w,dataset/en,,/w,minsupport/en,)/w, ,print/en, ,a/en, ,print/en, ,b/en,结果/n,为/p,所有/b,频繁/a,项集/nr,以及/c,其/r,所/u,对应/v,的/u,支持/v,度/q,，/w,符合/v,预期/vn,。/w,（/w,2/m,）/w,从/p,频繁/a,项/q,集中/v,挖掘/v,关联/vn,规则/n,频繁/a,项集/nr,可以/v,使用/v,apriori/en,算法/n,寻找/v,，/w,当然/d,下来/v,就/d,是/v,要/v,找/v,出/v,关联/vn,规则/n,了/u,。/w,我们/r,知道/v,，/w,假设/v,有/v,一个/m,频繁/a,项集/nr,，/w,它们/r,之间/f,就/d,有/v,可能/v,有/v,一条/mq,关联/vn,规则/n,，/w,即/v,可以/v,表示/v,为/p,：/w,"/w,.