本文/r,转/v,自/p,：/w,lytforgood/en,机器/n,学习/v,总结/v,-/w,sklearn/en,参数/n,解释/v,实验/vn,数据集/nw,选取/v,：/w,1/m,分类/vn,数据/n,选取/v, ,load/en,_,iris/en, ,鸢/ng,尾花/n,数据集/nw,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,load/en,_,iris/en, ,data/en, ,=/w, ,load/en,_,iris/en,(/w,)/w, ,data/en,./w,data/en,[/w,[/w,10/m,,/w, ,25/m,,/w, ,50/m,]/w,]/w, ,data/en,./w,target/en,[/w,[/w,10/m,,/w, ,25/m,,/w, ,50/m,]/w,]/w, ,list/en,(/w,data/en,./w,target/en,_,names/en,)/w, ,list/en,(/w,data/en,./w,feature/en,_,names/en,)/w,2/m,回归/v,数据/n,选取/v,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,load/en,_,boston/en, ,boston/en, ,=/w, ,load/en,_,boston/en,(/w,)/w, ,print/en,(/w,boston/en,./w,data/en,./w,shape/en,)/w, ,boston/en,./w,feature/en,_,names/en,数据集/nw,-/w,切分/v,为/p, ,训练/vn,集/vg,-/w,验证/vn,集/vg,gbdt/en,系数/n,说明/v,参考/v,gradientboostingclassifier/en,支持/v,二进制/n,和/c,多/a,类/q,分类/vn,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,make/en,_,hastie/en,_,10/m,_,2/m, ,from/en, ,sklearn/en,./w,ensemble/en, ,import/en, ,gradientboostingclassifier/en, ,x/en,,/w, ,y/en, ,=/w, ,make/en,_,hastie/en,_,10/m,_,2/m,(/w,random/en,_,state/en,=/w,0/m,)/w, ,x/en,_,train/en,,/w, ,x/en,_,test/en, ,=/w, ,x/en,[/w,:/w,2000/m,]/w,,/w, ,x/en,[/w,2000/m,:/w,]/w, ,y/en,_,train/en,,/w, ,y/en,_,test/en, ,=/w, ,y/en,[/w,:/w,2000/m,]/w,,/w, ,y/en,[/w,2000/m,:/w,]/w, ,clf/en, ,=/w, ,gradientboostingclassifier/en,(/w, ,loss/en,=/w,'/w,deviance/en,'/w,,/w, ,#,#,损失/n,函数/n,默认/v,deviance/en, ,deviance/en,具有/v,概率/n,输出/v,的/u,分类/vn,的/u,偏差/n, ,n/en,_,estimators/en,=/w,100/m,,/w, ,#,#,默认/v,100/m, ,回归/v,树/v,个/q,数/m, ,弱/a,学习器/nw,个数/n, ,learning/en,_,rate/en,=/w,0.1/m,,/w, ,#,#,默认/v,0.1/m,学习/v,速率/n,//w,步长/nz,0.0/m,-/w,1.0/m,的/u,超/v,参数/n, ,每个/r,树/v,学习/v,前/f,一个/m,树/v,的/u,残差/nw,的/u,步长/nz, ,max/en,_,depth/en,=/w,3/m,,/w, ,#,#, ,默认/v,值/n,为/p,3/m,每个/r,回归/v,树/v,的/u,深度/n, ,控制/v,树/v,的/u,大小/n, ,也/d,可/v,用/p,叶节点/nr,的/u,数量/n,max/en, ,leaf/en, ,nodes/en,控制/v, ,subsample/en,=/w,1/m,,/w, ,#,#,树/v,生成/vn,时/ng,对/p,样本/n,采样/v, ,选择/v,子/ng,样本/n,</w,1.0/m,导致/v,方差/nr,的/u,减少/v,和/c,偏差/n,的/u,增加/v, ,min/en,_,samples/en,_,split/en,=/w,2/m,,/w, ,#,#,生成/vn,子/ng,节点/n,所/u,需/v,的/u,最/d,小/a,样本/n,数/m, ,如果/c,是/v,浮/v,点数/n,代表/n,是/v,百分比/n, ,min/en,_,samples/en,_,leaf/en,=/w,1/m,,/w, ,#,#,叶节点/nr,所/u,需/v,的/u,最/d,小/a,样本/n,数/m, ,如果/c,是/v,浮/v,点数/n,代表/n,是/v,百分比/n, ,max/en,_,features/en,=/w,none/en,,/w, ,#,#,在/p,寻找/v,最佳/z,分割/v,点/q,要/v,考虑/v,的/u,特征/n,数量/n,auto/en,全/a,选/v,//w,sqrt/en,开方/v,//w,log/en,2/m,对数/n,//w,none/en,全/a,选/v,//w,int/en,自/p,定义/n,几/m,个/q,//w,float/en,百分比/n, ,max/en,_,leaf/en,_,nodes/en,=/w,none/en,,/w, ,#,#,叶节点/nr,的/u,数量/n, ,none/en,不/d,限/v,数量/n, ,min/en,_,impurity/en,_,split/en,=/w,1/m,e/en,-/w,7/m,,/w, ,#,#,停止/v,分裂/v,叶子/n,节点/n,的/u,阈值/n, ,verbose/en,=/w,0/m,,/w, ,#,#,打印/v,输出/v, ,大于/v,1/m,打印/v,每/r,棵/q,树/v,的/u,进度/n,和/c,性能/n, ,warm/en,_,start/en,=/w,false/en,,/w, ,#,#,true/en,在/p,前面/f,基础/n,上/f,增量/n,训练/vn,(/w,重/a,设/v,参数/n,减少/v,训练/vn,次数/n,)/w, ,false/en,默认/v,擦/v,除/p,重新/d,训练/vn, ,random/en,_,state/en,=/w,0/m, ,#,#,随机/d,种子/n,-/w,方便/a,重现/v, ,)/w,./w,fit/en,(/w,x/en,_,train/en,,/w, ,y/en,_,train/en,)/w, ,#,#,多/a,类别/n,回归/v,建议/n,使用/v,随机/d,森林/n, ,print/en, ,clf/en,./w,score/en,(/w,x/en,_,test/en,,/w, ,y/en,_,test/en,)/w, ,#,#,tp/en, ,//w, ,(/w,tp/en, ,+/w, ,fp/en,)/w,正/d,实例/n,占/v,所有/b,正/d,实例/n,的/u,比例/n, ,test/en,_,y/en,=/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w, ,test/en,_,y/en,=/w, ,clf/en,./w,predict/en,_,proba/en,(/w,x/en,_,test/en,)/w,[/w,:/w,,/w,1/m,]/w, ,#,#,预测/v,概率/n, ,print/en, ,clf/en,./w,feature/en,_,importances/en,_, ,#,#,输出/v,特征/n,重要性/n, ,print/en, ,clf/en,./w,train/en,_,score/en,_, ,#,#,每次/r,迭代/vn,后/f,分数/n, ,#,#,test/en,_,y/en,=/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w, ,#,#,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,precision/en,_,score/en, ,#,#,precision/en,_,score/en,(/w,test/en,_,y/en,,/w, ,y/en,_,test/en,,/w,average/en,=/w,'/w,micro/en,'/w,)/w, ,#,#,tp/en, ,//w, ,(/w,tp/en, ,+/w, ,fp/en,)/w, ,#,#,from/en, ,sklearn/en, ,import/en, ,metrics/en, ,#,#,fpr/en,,/w, ,tpr/en,,/w, ,thresholds/en, ,=/w, ,metrics/en,./w,roc/en,_,curve/en,(/w,y/en,_,test/en,,/w, ,test/en,_,y/en,)/w, ,#,#,print/en,(/w,"/w,auc/en, ,:/w, ,%/w,./w,4/m,g/en,"/w, ,%/w, ,metrics/en,./w,auc/en,(/w,fpr/en,,/w, ,tpr/en,)/w, ,y/en,_,pre/en,=/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w, ,y/en,_,pro/en,=/w, ,clf/en,./w,predict/en,_,proba/en,(/w,x/en,_,test/en,)/w,[/w,:/w,,/w,1/m,]/w, ,#,#,预测/v,概率/n, ,from/en, ,sklearn/en, ,import/en, ,metrics/en, ,fpr/en,,/w, ,tpr/en,,/w, ,thresholds/en, ,=/w, ,metrics/en,./w,roc/en,_,curve/en,(/w,y/en,_,test/en,,/w, ,y/en,_,pro/en,)/w, ,print/en,(/w,"/w,auc/en, ,:/w, ,%/w,./w,4/m,g/en,"/w, ,%/w, ,metrics/en,./w,auc/en,(/w,fpr/en,,/w, ,tpr/en,)/w,,/w,x/en,%/w,10000/m,//w,100/m,,/w,x/en,%/w,100/m,)/w, ,#,auc/en,表示/v,一/m, ,print/en, ,"/w,auc/en, ,score/en, ,(/w,train/en,)/w,:/w, ,%/w,f/en,"/w, ,%/w, ,metrics/en,./w,roc/en,_,auc/en,_,score/en,(/w,y/en,_,test/en,,/w, ,y/en,_,pro/en,)/w, ,#,auc/en,表示/v,二/m, ,两种/mq,方式/n,等价/vn, ,print/en,"/w,accuracy/en, ,:/w, ,%/w,./w,4/m,g/en,"/w, ,%/w, ,metrics/en,./w,accuracy/en,_,score/en,(/w,y/en,_,test/en,,/w, ,y/en,_,pre/en,)/w, ,#,#,等价/vn,于/p,clf/en,./w,score/en,(/w,x/en,_,test/en,,/w, ,y/en,_,test/en,)/w,sklearn/en,./w,ensemble/en,./w,gradientboostingregressorimport/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,mean/en,_,squared/en,_,error/en, ,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,make/en,_,friedman/en,1/m, ,from/en, ,sklearn/en,./w,ensemble/en, ,import/en, ,gradientboostingregressor/en, ,x/en,,/w, ,y/en, ,=/w, ,make/en,_,friedman/en,1/m,(/w,n/en,_,samples/en,=/w,1200/m,,/w, ,random/en,_,state/en,=/w,0/m,,/w, ,noise/en,=/w,1.0/m,)/w, ,x/en,_,train/en,,/w, ,x/en,_,test/en, ,=/w, ,x/en,[/w,:/w,200/m,]/w,,/w, ,x/en,[/w,200/m,:/w,]/w, ,y/en,_,train/en,,/w, ,y/en,_,test/en, ,=/w, ,y/en,[/w,:/w,200/m,]/w,,/w, ,y/en,[/w,200/m,:/w,]/w, ,est/en, ,=/w, ,gradientboostingregressor/en,(/w, ,loss/en,=/w,'/w,ls/en,'/w,,/w, ,#,#,默认/v,ls/en,损失/n,函数/n,'/w,ls/en,'/w,是/v,指/v,最/d,小/a,二/m,乘/v,回归/v,lad/en,'/w,（/w,最小/a,绝对/d,偏差/n,）/w,'/w,huber/en,'/w,是/v,两者/r,的/u,组合/v, ,n/en,_,estimators/en,=/w,100/m,,/w, ,#,#,默认/v,100/m, ,回归/v,树/v,个/q,数/m, ,弱/a,学习器/nw,个数/n, ,learning/en,_,rate/en,=/w,0.1/m,,/w, ,#,#,默认/v,0.1/m,学习/v,速率/n,//w,步长/nz,0.0/m,-/w,1.0/m,的/u,超/v,参数/n, ,每个/r,树/v,学习/v,前/f,一个/m,树/v,的/u,残差/nw,的/u,步长/nz, ,max/en,_,depth/en,=/w,3/m,,/w, ,#,#, ,默认/v,值/n,为/p,3/m,每个/r,回归/v,树/v,的/u,深度/n, ,控制/v,树/v,的/u,大小/n, ,也/d,可/v,用/p,叶节点/nr,的/u,数量/n,max/en, ,leaf/en, ,nodes/en,控制/v, ,subsample/en,=/w,1/m,,/w, ,#,#,用于/v,拟合/nz,个别/a,基础/n,学习器/nw,的/u,样本/n,分数/n, ,选择/v,子/ng,样本/n,</w,1.0/m,导致/v,方差/nr,的/u,减少/v,和/c,偏差/n,的/u,增加/v, ,min/en,_,samples/en,_,split/en,=/w,2/m,,/w, ,#,#,生成/vn,子/ng,节点/n,所/u,需/v,的/u,最/d,小/a,样本/n,数/m, ,如果/c,是/v,浮/v,点数/n,代表/n,是/v,百分比/n, ,min/en,_,samples/en,_,leaf/en,=/w,1/m,,/w, ,#,#,叶节点/nr,所/u,需/v,的/u,最/d,小/a,样本/n,数/m, ,如果/c,是/v,浮/v,点数/n,代表/n,是/v,百分比/n, ,max/en,_,features/en,=/w,none/en,,/w, ,#,#,在/p,寻找/v,最佳/z,分割/v,点/q,要/v,考虑/v,的/u,特征/n,数量/n,auto/en,全/a,选/v,//w,sqrt/en,开方/v,//w,log/en,2/m,对数/n,//w,none/en,全/a,选/v,//w,int/en,自/p,定义/n,几/m,个/q,//w,float/en,百分比/n, ,max/en,_,leaf/en,_,nodes/en,=/w,none/en,,/w, ,#,#,叶节点/nr,的/u,数量/n, ,none/en,不/d,限/v,数量/n, ,min/en,_,impurity/en,_,split/en,=/w,1/m,e/en,-/w,7/m,,/w, ,#,#,停止/v,分裂/v,叶子/n,节点/n,的/u,阈值/n, ,verbose/en,=/w,0/m,,/w, ,#,#,打印/v,输出/v, ,大于/v,1/m,打印/v,每/r,棵/q,树/v,的/u,进度/n,和/c,性能/n, ,warm/en,_,start/en,=/w,false/en,,/w, ,#,#,true/en,在/p,前面/f,基础/n,上/f,增量/n,训练/vn, ,false/en,默认/v,擦/v,除/p,重新/d,训练/vn, ,增加/v,树/v, ,random/en,_,state/en,=/w,0/m, ,#,#,随机/d,种子/n,-/w,方便/a,重现/v, ,)/w,./w,fit/en,(/w,x/en,_,train/en,,/w, ,y/en,_,train/en,)/w, ,mean/en,_,squared/en,_,error/en,(/w,y/en,_,test/en,,/w, ,est/en,./w,predict/en,(/w,x/en,_,test/en,)/w,)/w,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,sklearn/en, ,import/en, ,ensemble/en, ,from/en, ,sklearn/en, ,import/en, ,datasets/en, ,from/en, ,sklearn/en,./w,utils/en, ,import/en, ,shuffle/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,mean/en,_,squared/en,_,error/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,r/en,2/m,_,score/en, ,boston/en, ,=/w, ,datasets/en,./w,load/en,_,boston/en,(/w,)/w, ,x/en,,/w, ,y/en, ,=/w, ,shuffle/en,(/w,boston/en,./w,data/en,,/w, ,boston/en,./w,target/en,,/w, ,random/en,_,state/en,=/w,13/m,)/w, ,#,抽取/vn, ,x/en, ,=/w, ,x/en,./w,astype/en,(/w,np/en,./w,float/en,32/m,)/w, ,offset/en, ,=/w, ,int/en,(/w,x/en,./w,shape/en,[/w,0/m,]/w, ,*/w, ,0.9/m,)/w, ,#,设置/v,取/v,0.9/m,做/v,样本/n, ,x/en,_,train/en,,/w, ,y/en,_,train/en, ,=/w, ,x/en,[/w,:/w,offset/en,]/w,,/w, ,y/en,[/w,:/w,offset/en,]/w, ,x/en,_,test/en,,/w, ,y/en,_,test/en, ,=/w, ,x/en,[/w,offset/en,:/w,]/w,,/w, ,y/en,[/w,offset/en,:/w,]/w, ,#,#,参数/n,可以/v,放/v,入/v,一个/m,字典/n,当中/f, ,params/en, ,=/w, ,{/w,'/w,n/en,_,estimators/en,'/w,:/w, ,500/m,,/w, ,'/w,max/en,_,depth/en,'/w,:/w, ,4/m,,/w, ,'/w,min/en,_,samples/en,_,split/en,'/w,:/w, ,2/m,,/w, ,'/w,learning/en,_,rate/en,'/w,:/w, ,0.01/m,,/w, ,'/w,loss/en,'/w,:/w, ,'/w,ls/en,'/w,}/w, ,clf/en, ,=/w, ,ensemble/en,./w,gradientboostingregressor/en,(/w,*/w,*/w,params/en,)/w, ,clf/en,./w,fit/en,(/w,x/en,_,train/en,,/w, ,y/en,_,train/en,)/w, ,mse/en, ,=/w, ,mean/en,_,squared/en,_,error/en,(/w,y/en,_,test/en,,/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w,)/w, ,r/en,2/m, ,=/w, ,r/en,2/m,_,score/en,(/w,y/en,_,test/en,,/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w,)/w, ,print/en,(/w,"/w,mse/en,:/w, ,%/w,./w,4/m,f/en,"/w, ,%/w, ,mse/en,)/w, ,#,#,输出/v,均方/nw,误差/n, ,print/en,(/w,"/w,r/en,^,2/m, ,on/en, ,test/en, ,data/en, ,:/w, ,%/w,f/en,"/w, ,%/w, ,r/en,2/m,)/w, ,#,#,r/en,^,2/m, ,拟合/nz,优度/nw,=/w,(/w,预测值/n,-/w,均值/n,)/w,^,2/m,之/u,和/c,//w,(/w,真实/a,值/n,-/w,均值/n,)/w,^,2/m,之/u,和/c, ,#,#,绘图/vn,查看/v, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,test/en,_,score/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,params/en,[/w,'/w,n/en,_,estimators/en,'/w,]/w,,/w,)/w,,/w, ,dtype/en,=/w,np/en,./w,float/en,64/m,)/w, ,#,#,计算/v,每次/r,迭代/vn,分数/n,变化/vn, ,for/en, ,i/en,,/w, ,y/en,_,pred/en, ,in/en, ,enumerate/en,(/w,clf/en,./w,staged/en,_,predict/en,(/w,x/en,_,test/en,)/w,)/w,:/w, ,test/en,_,score/en,[/w,i/en,]/w, ,=/w, ,clf/en,./w,loss/en,_,(/w,y/en,_,test/en,,/w, ,y/en,_,pred/en,)/w, ,plt/en,./w,figure/en,(/w,figsize/en,=/w,(/w,12/m,,/w, ,6/m,)/w,)/w, ,plt/en,./w,subplot/en,(/w,1/m,,/w, ,2/m,,/w, ,1/m,)/w, ,plt/en,./w,title/en,(/w,'/w,deviance/en,'/w,)/w, ,plt/en,./w,plot/en,(/w,np/en,./w,arange/en,(/w,params/en,[/w,'/w,n/en,_,estimators/en,'/w,]/w,)/w, ,+/w, ,1/m,,/w, ,clf/en,./w,train/en,_,score/en,_,,/w, ,'/w,b/en,-/w,'/w,,/w, ,label/en,=/w,'/w,training/en, ,set/en, ,deviance/en,'/w,)/w, ,plt/en,./w,plot/en,(/w,np/en,./w,arange/en,(/w,params/en,[/w,'/w,n/en,_,estimators/en,'/w,]/w,)/w, ,+/w, ,1/m,,/w, ,test/en,_,score/en,,/w, ,'/w,r/en,-/w,'/w,,/w, ,label/en,=/w,'/w,test/en, ,set/en, ,deviance/en,'/w,)/w, ,plt/en,./w,legend/en,(/w,loc/en,=/w,'/w,upper/en, ,right/en,'/w,)/w, ,plt/en,./w,xlabel/en,(/w,'/w,boosting/en, ,iterations/en,'/w,)/w, ,plt/en,./w,ylabel/en,(/w,'/w,deviance/en,'/w,)/w, ,#,#,输出/v,特征/n,重要性/n, ,feature/en,_,importance/en, ,=/w, ,clf/en,./w,feature/en,_,importances/en,_, ,#, ,make/en, ,importances/en, ,relative/en, ,to/en, ,max/en, ,importance/en, ,feature/en,_,importance/en, ,=/w, ,100.0/m, ,*/w, ,(/w,feature/en,_,importance/en, ,//w, ,feature/en,_,importance/en,./w,max/en,(/w,)/w,)/w, ,sorted/en,_,idx/en, ,=/w, ,np/en,./w,argsort/en,(/w,feature/en,_,importance/en,)/w, ,#,#,返回/v,的/u,是/v,数/m,组值/nw,从小到大/l,的/u,索引/n,值/n, ,pos/en, ,=/w, ,np/en,./w,arange/en,(/w,sorted/en,_,idx/en,./w,shape/en,[/w,0/m,]/w,)/w, ,+/w, ,./w,5/m, ,plt/en,./w,subplot/en,(/w,1/m,,/w, ,2/m,,/w, ,2/m,)/w, ,plt/en,./w,barh/en,(/w,pos/en,,/w, ,feature/en,_,importance/en,[/w,sorted/en,_,idx/en,]/w,,/w, ,align/en,=/w,'/w,center/en,'/w,)/w, ,plt/en,./w,yticks/en,(/w,pos/en,,/w, ,boston/en,./w,feature/en,_,names/en,[/w,sorted/en,_,idx/en,]/w,)/w, ,plt/en,./w,xlabel/en,(/w,'/w,relative/en, ,importance/en,'/w,)/w, ,plt/en,./w,title/en,(/w,'/w,variable/en, ,importance/en,'/w,)/w, ,plt/en,./w,show/en,(/w,)/w,网格/n,搜索/vn,调整/vn,超/v,参数/n,from/en, ,sklearn/en,./w,model/en,_,selection/en, ,import/en, ,gridsearchcv/en, ,clf/en,=/w,gridsearchcv/en,(/w, ,estimator/en,,/w, ,#,#,模型/n, ,param/en,_,grid/en,,/w, ,#,#,参数/n,字典/n,或者/c,字典/n,列表/v, ,scoring/en,=/w,none/en,,/w, ,#,#,评价/v,分数/n,的/u,方法/n, ,fit/en,_,params/en,=/w,none/en,,/w, ,#,#,fit/en,的/u,参数/n, ,字典/n, ,n/en,_,jobs/en,=/w,1/m,,/w, ,#,#,并/c,行数/n, ,-/w,1/m,全部/m,启动/v, ,iid/en,=/w,true/en,,/w, ,#,#,每个/r,cv/en,集/vg,上/f,等价/vn, ,refit/en,=/w,true/en,,/w, ,#,#,使用/v,整个/b,数据集/nw,重新/d,编制/n,最佳/z,估计量/nz, ,cv/en,=/w,none/en,,/w, ,#,#,几/m,折/v,交叉/vn,验证/vn,none/en,默认/v,3/m, ,verbose/en,=/w,0/m,,/w, ,#,#,控制/v,详细/ad,程度/n,：/w,越高/nt,，/w,消息/n,越/d,多/a, ,pre/en,_,dispatch/en,=/w,'/w,2/m,*/w,n/en,_,jobs/en,'/w,,/w, ,#,#,总/b,作业/vn,的/u,确切/a,数量/n, ,error/en,_,score/en,=/w,'/w,raise/en,'/w,,/w, ,#,#,错误/n,时/ng,选择/v,的/u,分数/n, ,return/en,_,train/en,_,score/en,=/w,true/en, ,#,#,如果/c,'/w,false/en,'/w,，/w,该/r,cv/en,_,results/en,_,属性/n,将/d,不/d,包括/v,训练/vn,得分/n, ,)/w, ,clf/en,./w,cv/en,_,results/en,_, ,#,#,结果/n,表/n, ,常/d,看/v,mean/en,_,test/en,_,score/en, ,std/en,_,test/en,_,score/en, ,clf/en,./w,cv/en,_,results/en,_,./w,keys/en,(/w,)/w, ,#,#,clf/en,./w,cv/en,_,results/en,_,[/w,'/w,mean/en,_,test/en,_,score/en,'/w,]/w, ,clf/en,./w,best/en,_,estimator/en,_, ,#,#,最/d,优/ag,模型/n, ,clf/en,./w,best/en,_,score/en,_, ,#,#,最/d,优/ag,分数/n, ,clf/en,./w,best/en,_,params/en,_, ,#,#,最/d,优/ag,参数/n,from/en, ,sklearn/en,./w,model/en,_,selection/en, ,import/en, ,train/en,_,test/en,_,split/en, ,from/en, ,sklearn/en,./w,model/en,_,selection/en, ,import/en, ,gridsearchcv/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,classification/en,_,report/en, ,from/en, ,sklearn/en, ,import/en, ,metrics/en, ,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,make/en,_,hastie/en,_,10/m,_,2/m, ,from/en, ,sklearn/en,./w,ensemble/en, ,import/en, ,gradientboostingclassifier/en, ,x/en,,/w, ,y/en, ,=/w, ,make/en,_,hastie/en,_,10/m,_,2/m,(/w,random/en,_,state/en,=/w,0/m,)/w, ,x/en,_,train/en,,/w, ,x/en,_,test/en,,/w, ,y/en,_,train/en,,/w, ,y/en,_,test/en, ,=/w, ,train/en,_,test/en,_,split/en,(/w,x/en,,/w, ,y/en,,/w, ,test/en,_,size/en,=/w,0.5/m,,/w, ,random/en,_,state/en,=/w,0/m,)/w,#,#,test/en,_,size/en,测试/vn,集合/v,所/u,占/v,比例/n, ,#,#,设置/v,参数/n, ,tuned/en,_,parameters/en,=/w, ,[/w,{/w,'/w,n/en,_,estimators/en,'/w,:/w,range/en,(/w,20/m,,/w,81/m,,/w,10/m,)/w,,/w, ,'/w,max/en,_,depth/en,'/w,:/w,range/en,(/w,3/m,,/w,14/m,,/w,2/m,)/w,,/w, ,'/w,learning/en,_,rate/en,'/w,:/w,[/w,0.1/m,,/w, ,0.5/m,,/w, ,1.0/m,]/w,,/w, ,'/w,subsample/en,'/w,:/w,[/w,0.6/m,,/w,0.7/m,,/w,0.75/m,,/w,0.8/m,,/w,0.85/m,,/w,0.9/m,]/w, ,}/w,]/w, ,#,#,设置/v,分数/n,计算/v,方法/n,精度/n,//w,召回/v, ,scores/en, ,=/w, ,[/w,'/w,precision/en,'/w,,/w, ,'/w,recall/en,'/w,]/w, ,#,#, ,roc/en,_,auc/en, ,for/en, ,score/en, ,in/en, ,scores/en,:/w, ,print/en,(/w,"/w,评测/vn,选择/v, ,%/w,s/en,"/w, ,%/w, ,score/en,)/w, ,clf/en, ,=/w, ,gridsearchcv/en,(/w,gradientboostingclassifier/en,(/w,)/w,,/w, ,tuned/en,_,parameters/en,,/w, ,cv/en,=/w,5/m,,/w, ,scoring/en,=/w,'/w,%/w,s/en,_,macro/en,'/w, ,%/w, ,score/en,)/w, ,clf/en,./w,fit/en,(/w,x/en,_,train/en,,/w, ,y/en,_,train/en,)/w, ,print/en,(/w,clf/en,./w,best/en,_,params/en,_,)/w, ,means/en, ,=/w, ,clf/en,./w,cv/en,_,results/en,_,[/w,'/w,mean/en,_,test/en,_,score/en,'/w,]/w, ,#,#,tp/en, ,//w, ,(/w,tp/en, ,+/w, ,fp/en,)/w, ,stds/en, ,=/w, ,clf/en,./w,cv/en,_,results/en,_,[/w,'/w,std/en,_,test/en,_,score/en,'/w,]/w, ,for/en, ,mean/en,,/w, ,std/en,,/w, ,params/en, ,in/en, ,zip/en,(/w,means/en,,/w, ,stds/en,,/w, ,clf/en,./w,cv/en,_,results/en,_,[/w,'/w,params/en,'/w,]/w,)/w,:/w, ,print/en,(/w,"/w,%/w,0.3/m,f/en, ,(/w,+/w,//w,-/w,%/w,0.03/m,f/en,)/w, ,for/en, ,%/w,r/en,"/w, ,%/w, ,(/w,mean/en,,/w, ,std/en, ,*/w, ,2/m,,/w, ,params/en,)/w,)/w, ,#,#,预测/v, ,y/en,_,true/en,,/w, ,y/en,_,pred/en, ,=/w, ,y/en,_,test/en,,/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w, ,#,#,y/en,_,true/en,,/w, ,y/en,_,pred/en, ,=/w, ,y/en,_,test/en,,/w, ,clf/en,./w,predict/en,_,proba/en,(/w,x/en,_,test/en,)/w, ,print/en,(/w,classification/en,_,report/en,(/w,y/en,_,true/en,,/w, ,y/en,_,pred/en,)/w,)/w, ,#,#,print/en,"/w,accuracy/en, ,:/w, ,%/w,./w,4/m,g/en,"/w, ,%/w, ,metrics/en,./w,accuracy/en,_,score/en,(/w,y/en,_,true/en,,/w, ,y/en,_,pred/en,)/w,xgboostxgb/en,原始/a,from/en, ,sklearn/en,./w,model/en,_,selection/en, ,import/en, ,train/en,_,test/en,_,split/en, ,from/en, ,sklearn/en, ,import/en, ,metrics/en, ,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,make/en,_,hastie/en,_,10/m,_,2/m, ,import/en, ,xgboost/en, ,as/en, ,xgb/en, ,#,记录/v,程序/n,运行/vn,时间/n, ,import/en, ,time/en, ,start/en,_,time/en, ,=/w, ,time/en,./w,time/en,(/w,)/w, ,x/en,,/w, ,y/en, ,=/w, ,make/en,_,hastie/en,_,10/m,_,2/m,(/w,random/en,_,state/en,=/w,0/m,)/w, ,x/en,_,train/en,,/w, ,x/en,_,test/en,,/w, ,y/en,_,train/en,,/w, ,y/en,_,test/en, ,=/w, ,train/en,_,test/en,_,split/en,(/w,x/en,,/w, ,y/en,,/w, ,test/en,_,size/en,=/w,0.5/m,,/w, ,random/en,_,state/en,=/w,0/m,)/w,#,#,test/en,_,size/en,测试/vn,集合/v,所/u,占/v,比例/n, ,#,xgb/en,矩阵/n,赋值/v, ,xgb/en,_,train/en, ,=/w, ,xgb/en,./w,dmatrix/en,(/w,x/en,_,train/en,,/w, ,label/en,=/w,y/en,_,train/en,)/w, ,xgb/en,_,test/en, ,=/w, ,xgb/en,./w,dmatrix/en,(/w,x/en,_,test/en,,/w,label/en,=/w,y/en,_,test/en,)/w, ,#,#,参数/n, ,params/en,=/w,{/w, ,'/w,booster/en,'/w,:/w,'/w,gbtree/en,'/w,,/w, ,'/w,silent/en,'/w,:/w,1/m, ,,/w,#,设置成/n,1则/mq,没有/v,运行/vn,信息/n,输出/v,，/w,最好/d,是/v,设置/v,为/p,0/m,./w, ,#,'/w,nthread/en,'/w,:/w,7/m,,/w,#, ,cpu/en, ,线程/n,数/m, ,默认/v,最大/a, ,'/w,eta/en,'/w,:/w, ,0.007/m,,/w, ,#, ,如同/v,学习/v,率/v, ,'/w,min/en,_,child/en,_,weight/en,'/w,:/w,3/m,,/w, ,#, ,这个/r,参数/n,默认/v,是/v, ,1/m,，/w,是/v,每个/r,叶子/n,里面/f, ,h/en, ,的/u,和/c,至少/d,是/v,多少/r,，/w,对/p,正负/n,样本/n,不/d,均衡/a,时/ng,的/u, ,0/m,-/w,1/m, ,分类/vn,而言/u, ,#,，/w,假设/v, ,h/en, ,在/p, ,0.01/m, ,附近/f,，/w,min/en,_,child/en,_,weight/en, ,为/p, ,1/m, ,意味/n,着/u,叶子/n,节点/n,中/f,最少/d,需要/v,包含/v, ,100/m, ,个/q,样本/n,。/w, ,#,这个/r,参数/n,非常/d,影响/vn,结果/n,，/w,控制/v,叶子/n,节点/n,中二/nz,阶导/nw,的/u,和/c,的/u,最小值/nz,，/w,该/r,参数/n,值/n,越/d,小/a,，/w,越/d,容易/a, ,overfitting/en,。/w, ,'/w,max/en,_,depth/en,'/w,:/w,6/m,,/w, ,#, ,构/vg,建树/n,的/u,深度/n,，/w,越/d,大/a,越/d,容易/a,过/u,拟合/nz, ,'/w,gamma/en,'/w,:/w,0.1/m,,/w, ,#, ,树/v,的/u,叶子/n,节点/n,上/f,作/v,进一步/d,分区/vn,所/u,需/v,的/u,最/d,小/a,损失/n,减少/v,,/w,越/d,大/a,越/d,保守/a,，/w,一般/a,0.1/m,、/w,0.2/m,这/r,样子/n,。/w, ,'/w,subsample/en,'/w,:/w,0.7/m,,/w, ,#, ,随机/d,采样/v,训练/vn,样本/n, ,'/w,colsample/en,_,bytree/en,'/w,:/w,0.7/m,,/w, ,#, ,生成/vn,树/v,时/ng,进行/v,的/u,列/v,采样/v, ,'/w,lambda/en,'/w,:/w,2/m,,/w, ,#, ,控制/v,模型/n,复杂/a,度/q,的/u,权重值/nw,的/u,l/en,2/m,正/d,则/d,化项/nw,参数/n,，/w,参数/n,越/d,大/a,，/w,模型/n,越/d,不/d,容易/a,过/u,拟合/nz,。/w, ,#,'/w,alpha/en,'/w,:/w,0/m,,/w, ,#, ,l/en,1/m, ,正/d,则/d,项/q,参数/n, ,#,'/w,scale/en,_,pos/en,_,weight/en,'/w,:/w,1/m,,/w, ,#,如果/c,取值/v,大于/v,0/m,的话/u,，/w,在/p,类别/n,样本/n,不/d,平衡/a,的/u,情况/n,下/f,有助于/v,快速/d,收敛/vn,。/w, ,#,'/w,objective/en,'/w,:/w, ,'/w,multi/en,:/w,softmax/en,'/w,,/w, ,#,多/a,分类/vn,的/u,问题/n, ,#,'/w,num/en,_,class/en,'/w,:/w,10/m,,/w, ,#, ,类别/n,数/m,，/w,多/a,分类/vn,与/p, ,multisoftmax/en, ,并用/v, ,'/w,seed/en,'/w,:/w,1000/m,,/w, ,#,随机/d,种子/n, ,#,'/w,eval/en,_,metric/en,'/w,:/w, ,'/w,auc/en,'/w, ,}/w, ,plst/en, ,=/w, ,list/en,(/w,params/en,./w,items/en,(/w,)/w,)/w, ,num/en,_,rounds/en, ,=/w, ,100/m, ,#, ,迭代/vn,次数/n, ,watchlist/en, ,=/w, ,[/w,(/w,xgb/en,_,train/en,,/w, ,'/w,train/en,'/w,)/w,,/w,(/w,xgb/en,_,test/en,,/w, ,'/w,val/en,'/w,)/w,]/w, ,#,训练/vn,模型/n,并/c,保存/v, ,#, ,early/en,_,stopping/en,_,rounds/en, ,当/p,设置/v,的/u,迭代/vn,次数/n,较/d,大/a,时/ng,，/w,early/en,_,stopping/en,_,rounds/en, ,可/v,在/p,一定/d,的/u,迭代/vn,次数/n,内/f,准确率/n,没有/v,提升/v,就/d,停止/v,训练/vn, ,model/en, ,=/w, ,xgb/en,./w,train/en,(/w,plst/en,,/w, ,xgb/en,_,train/en,,/w, ,num/en,_,rounds/en,,/w, ,watchlist/en,,/w,early/en,_,stopping/en,_,rounds/en,=/w,100/m,,/w,pred/en,_,margin/en,=/w,1/m,)/w, ,#,model/en,./w,save/en,_,model/en,(/w,'/w,./w,//w,model/en,//w,xgb/en,./w,model/en,'/w,)/w, ,#, ,用于/v,存储/vn,训练/vn,出/v,的/u,模型/n, ,print/en, ,"/w,best/en, ,best/en,_,ntree/en,_,limit/en,"/w,,/w,model/en,./w,best/en,_,ntree/en,_,limit/en, ,y/en,_,pred/en, ,=/w, ,model/en,./w,predict/en,(/w,xgb/en,_,test/en,,/w,ntree/en,_,limit/en,=/w,model/en,./w,best/en,_,ntree/en,_,limit/en,)/w, ,print/en, ,(/w,'/w,error/en,=/w,%/w,f/en,'/w, ,%/w, ,(/w, ,sum/en,(/w,1/m, ,for/en, ,i/en, ,in/en, ,range/en,(/w,len/en,(/w,y/en,_,pred/en,)/w,)/w, ,if/en, ,int/en,(/w,y/en,_,pred/en,[/w,i/en,]/w,>,0.5/m,)/w,!/w,=/w,y/en,_,test/en,[/w,i/en,]/w,)/w, ,//w,float/en,(/w,len/en,(/w,y/en,_,pred/en,)/w,)/w,)/w,)/w, ,#,输出/v,运行/vn,时/ng,长/a, ,cost/en,_,time/en, ,=/w, ,time/en,./w,time/en,(/w,)/w,-/w,start/en,_,time/en, ,print/en, ,"/w,xgboost/en, ,success/en,!/w,"/w,,/w,'/w,\/w,n/en,'/w,,/w,"/w,cost/en, ,time/en,:/w,"/w,,/w,cost/en,_,time/en,,/w,"/w,(/w,s/en,)/w,./w,./w,./w,./w,./w,./w,"/w,xgb/en,使用/v,sklearn/en,接口/n,(/w,推荐/v,)/w,官方/n,会/v,改变/v,的/u,函数/n,名/q,是/v,：/w,eta/en, ,-/w,>, ,learning/en,_,ratelambda/en, ,-/w,>, ,reg/en,_,lambdaalpha/en, ,-/w,>, ,reg/en,_,alphafrom/en, ,sklearn/en,./w,model/en,_,selection/en, ,import/en, ,train/en,_,test/en,_,split/en, ,from/en, ,sklearn/en, ,import/en, ,metrics/en, ,from/en, ,sklearn/en,./w,datasets/en, ,import/en, ,make/en,_,hastie/en,_,10/m,_,2/m, ,from/en, ,xgboost/en,./w,sklearn/en, ,import/en, ,xgbclassifier/en, ,x/en,,/w, ,y/en, ,=/w, ,make/en,_,hastie/en,_,10/m,_,2/m,(/w,random/en,_,state/en,=/w,0/m,)/w, ,x/en,_,train/en,,/w, ,x/en,_,test/en,,/w, ,y/en,_,train/en,,/w, ,y/en,_,test/en, ,=/w, ,train/en,_,test/en,_,split/en,(/w,x/en,,/w, ,y/en,,/w, ,test/en,_,size/en,=/w,0.5/m,,/w, ,random/en,_,state/en,=/w,0/m,)/w,#,#,test/en,_,size/en,测试/vn,集合/v,所/u,占/v,比例/n, ,clf/en, ,=/w, ,xgbclassifier/en,(/w, ,silent/en,=/w,0/m, ,,/w,#,设置成/n,1则/mq,没有/v,运行/vn,信息/n,输出/v,，/w,最好/d,是/v,设置/v,为/p,0/m,./w,是否/v,在/p,运行/vn,升级/vn,时/ng,打印/v,消息/n,。/w, ,#,nthread/en,=/w,4/m,,/w,#, ,cpu/en, ,线程/n,数/m, ,默认/v,最大/a, ,learning/en,_,rate/en,=/w, ,0.3/m,,/w, ,#, ,如同/v,学习/v,率/v, ,min/en,_,child/en,_,weight/en,=/w,1/m,,/w, ,#, ,这个/r,参数/n,默认/v,是/v, ,1/m,，/w,是/v,每个/r,叶子/n,里面/f, ,h/en, ,的/u,和/c,至少/d,是/v,多少/r,，/w,对/p,正负/n,样本/n,不/d,均衡/a,时/ng,的/u, ,0/m,-/w,1/m, ,分类/vn,而言/u, ,#,，/w,假设/v, ,h/en, ,在/p, ,0.01/m, ,附近/f,，/w,min/en,_,child/en,_,weight/en, ,为/p, ,1/m, ,意味/n,着/u,叶子/n,节点/n,中/f,最少/d,需要/v,包含/v, ,100/m, ,个/q,样本/n,。/w, ,#,这个/r,参数/n,非常/d,影响/vn,结果/n,，/w,控制/v,叶子/n,节点/n,中二/nz,阶导/nw,的/u,和/c,的/u,最小值/nz,，/w,该/r,参数/n,值/n,越/d,小/a,，/w,越/d,容易/a, ,overfitting/en,。/w, ,max/en,_,depth/en,=/w,6/m,,/w, ,#, ,构/vg,建树/n,的/u,深度/n,，/w,越/d,大/a,越/d,容易/a,过/u,拟合/nz, ,gamma/en,=/w,0/m,,/w, ,#, ,树/v,的/u,叶子/n,节点/n,上/f,作/v,进一步/d,分区/vn,所/u,需/v,的/u,最/d,小/a,损失/n,减少/v,,/w,越/d,大/a,越/d,保守/a,，/w,一般/a,0.1/m,、/w,0.2/m,这/r,样子/n,。/w, ,subsample/en,=/w,1/m,,/w, ,#, ,随机/d,采样/v,训练/vn,样本/n, ,训练/vn,实例/n,的/u,子/ng,采样/v,比/p, ,max/en,_,delta/en,_,step/en,=/w,0/m,,/w,#,最/d,大/a,增量/n,步长/nz,，/w,我们/r,允许/v,每个/r,树/v,的/u,权重/nz,估计/v,。/w, ,colsample/en,_,bytree/en,=/w,1/m,,/w, ,#, ,生成/vn,树/v,时/ng,进行/v,的/u,列/v,采样/v, ,reg/en,_,lambda/en,=/w,1/m,,/w, ,#, ,控制/v,模型/n,复杂/a,度/q,的/u,权重值/nw,的/u,l/en,2/m,正/d,则/d,化项/nw,参数/n,，/w,参数/n,越/d,大/a,，/w,模型/n,越/d,不/d,容易/a,过/u,拟合/nz,。/w, ,#,reg/en,_,alpha/en,=/w,0/m,,/w, ,#, ,l/en,1/m, ,正/d,则/d,项/q,参数/n, ,#,scale/en,_,pos/en,_,weight/en,=/w,1/m,,/w, ,#,如果/c,取值/v,大于/v,0/m,的话/u,，/w,在/p,类别/n,样本/n,不/d,平衡/a,的/u,情况/n,下/f,有助于/v,快速/d,收敛/vn,。/w,平衡/a,正负/n,权重/nz, ,#,objective/en,=/w, ,'/w,multi/en,:/w,softmax/en,'/w,,/w, ,#,多/a,分类/vn,的/u,问题/n, ,指定/v,学习/v,任务/n,和/c,相应/v,的/u,学习/v,目标/n, ,#,num/en,_,class/en,=/w,10/m,,/w, ,#, ,类别/n,数/m,，/w,多/a,分类/vn,与/p, ,multisoftmax/en, ,并用/v, ,n/en,_,estimators/en,=/w,100/m,,/w, ,#,树/v,的/u,个数/n, ,seed/en,=/w,1000/m, ,#,随机/d,种子/n, ,#,eval/en,_,metric/en,=/w, ,'/w,auc/en,'/w, ,)/w, ,clf/en,./w,fit/en,(/w,x/en,_,train/en,,/w,y/en,_,train/en,,/w,eval/en,_,metric/en,=/w,'/w,auc/en,'/w,)/w, ,y/en,_,true/en,,/w, ,y/en,_,pred/en, ,=/w, ,y/en,_,test/en,,/w, ,clf/en,./w,predict/en,(/w,x/en,_,test/en,)/w, ,print/en,"/w,accuracy/en, ,:/w, ,%/w,./w,4/m,g/en,"/w, ,%/w, ,metrics/en,./w,accuracy/en,_,score/en,(/w,y/en,_,true/en,,/w, ,y/en,_,pred/en,)/w, ,#,回归/v, ,#,m/en,_,regress/en, ,=/w, ,xgb/en,./w,xgbregressor/en,(/w,n/en,_,estimators/en,=/w,1000/m,,/w,seed/en,=/w,0/m,)/w,网格/n,搜索/vn,可以/v,先/d,固定/a,一个/m,参数/n, ,最/d,优化/v,后/f,继续/v,调整/vn,第一/m,步/q,：/w,确定/v,学习/v,速率/n,和/c,tree/en,_,based/en, ,给/p,个/q,常见/a,初始/b,值/n, ,根据/p,是否/v,类别/n,不/d,平衡/a,调节/vn,max/en,_,depth/en,,/w,min/en,_,child/en,_,weight/en,,/w,gamma/en,,/w,subsample/en,,/w,scale/en,_,pos/en,_,weightmax/en,_,depth/en,=/w,3/m, ,起/v,始值/nw,在/p,4/m,-/w,6/m,之间/f,都/d,是/v,不错/a,的/u,选择/v,。/w,min/en,_,child/en,_,weight/en,比较/d,小/a,的/u,值/n,解决/v,极/d,不/d,平衡/a,的/u,分类/vn,问题/n,eg/en,:/w,1/m,subsample/en,,/w, ,colsample/en,_,bytree/en, ,=/w, ,0.8/m,:/w, ,这个/r,是/v,最