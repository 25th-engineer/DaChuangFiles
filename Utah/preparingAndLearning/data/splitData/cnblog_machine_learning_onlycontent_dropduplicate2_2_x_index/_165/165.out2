【/w,机器/n,学习/v,】/w,确定/v,最佳/z,聚类/nw,数目/n,的/u,10种/mq,方法/n,在/p,聚类/nw,分析/vn,的/u,时候/n,确定/v,最佳/z,聚类/nw,数目/n,是/v,一个/m,很/d,重要/a,的/u,问题/n,，/w,比如/v,kmeans/en,函数/n,就要/d,你/r,提供/v,聚类/nw,数目/n,这个/r,参数/n,，/w,总/b,不/d,能/v,两眼/mq,一/m,抹黑/v,乱/d,填/v,一个/m,吧/y,。/w,之前/f,也/d,被/p,这个/r,问题/n,困扰/v,过/u,，/w,看/v,了/u,很多/m,博客/n,，/w,大多/d,泛/v,泛/v,带/v,过/u,。/w,今天/t,把/p,看到/v,的/u,这么/r,多/a,方法/n,进行/v,汇总/v,以及/c,代码/n,实现/v,并/c,尽量/d,弄清/v,每个/r,方法/n,的/u,原理/n,。/w,数据集/nw,选用/v,比较/d,出名/a,的/u,wine/en,数据集/nw,进行/v,分析/vn,library/en,(/w,gclus/en,)/w, ,data/en,(/w,wine/en,)/w, ,head/en,(/w,wine/en,)/w,loading/en, ,required/en, ,package/en,:/w, ,cluster/en,因为/c,我们/r,要/v,找/v,一个/m,数据集/nw,进行/v,聚类/nw,分析/vn,，/w,所以/c,不/d,需要/v,第一/m,列/v,的/u,种类/n,标签/n,信息/n,，/w,因此/c,去掉/v,第一/m,列/v,。/w,同时/c,注意/v,到/v,每/r,一列/mq,的/u,值/n,差别/n,很/d,大/a,，/w,从/p,1/m,到/v,100多/mq,都/d,有/v,，/w,这样/r,会/v,造成/v,误差/n,，/w,所以/c,需要/v,归/v,一化/nw,，/w,用/p,scale/en,函数/n,dataset/en, ,</w,-/w, ,wine/en,[/w,,/w,-/w,1/m,]/w, ,#,去除/v,分类/vn,标签/n, ,dataset/en, ,</w,-/w, ,scale/en,(/w,dataset/en,)/w,去掉/v,标签/n,之后/f,就/d,可以/v,开始/v,对/p,数据集/nw,进行/v,聚类/nw,分析/vn,了/u,，/w,下面/f,就/d,一一/d,介绍/v,各种/r,确定/v,最佳/z,聚类/nw,数目/n,的/u,方法/n,判定/v,方法/n,1/m,./w,mclust/en,包/v,mclust/en,包/v,是/v,聚类/nw,分析/vn,非常/d,强大/a,的/u,一个/m,包/v,，/w,也/d,是/v,上课/v,时/ng,老师/n,给/p,我们/r,介绍/v,的/u,一个/m,包/v,，/w,每次/r,导入/v,时/ng,有/v,一种/mq,科技/n,感/vg, ,:/w,)/w, ,帮助/v,文档/n,非常/d,详尽/a,，/w,可以/v,进行/v,聚类/nw,、/w,分类/vn,、/w,密度/n,分析/vn,mclust/en,包/v,方法/n,有点/d,“/w,暴力/n,”/w,，/w,聚类/nw,数目/n,自/p,定义/n,，/w,比如/v,我/r,选取/v,的/u,从/p,1/m,到/v,20/m,，/w,然后/c,一共/d,14种/mq,模型/n,，/w,每/r,一种/mq,模型/n,都/d,计算/v,聚类/nw,数目/n,从/p,1/m,到/v,20/m,的/u,bic/en,值/n,，/w,最终/d,确定/v,最佳/z,聚类/nw,数目/n,，/w,这种/r,方法/n,的/u,思想/n,很/d,直接/ad,了/u,当/p,，/w,但是/c,弊端/n,也/d,就/d,显然/ad,易见/nz,了/u,——/w,时间/n,复杂/a,度/q,太/d,高/a,，/w,效率/n,低/a,。/w,library/en,(/w,mclust/en,)/w, ,m/en,_,clust/en, ,</w,-/w, ,mclust/en,(/w,as/en,./w,matrix/en,(/w,dataset/en,)/w,,/w, ,g/en,=/w,1/m,:/w,20/m,)/w, ,#,聚类/nw,数目/n,从/p,1/m,一直/d,试/v,到/v,20/m, ,summary/en,(/w,m/en,_,clust/en,)/w,gaussian/en, ,finite/en, ,mixture/en, ,model/en, ,fitted/en, ,by/en, ,em/en, ,algorithm/en, ,mclust/en, ,eve/en, ,(/w,ellipsoidal/en,,/w, ,equal/en, ,volume/en, ,and/en, ,orientation/en,)/w, ,model/en, ,with/en, ,3/m, ,components/en,:/w, ,log/en,./w,likelihood/en, ,n/en, ,df/en, ,bic/en, ,icl/en, ,-/w,3032.45/m, ,178/m, ,156/m, ,-/w,6873.257/m, ,-/w,6873.549/m, ,clustering/en, ,table/en,:/w, ,1/m, ,2/m, ,363/m, ,51/m, ,64/m,可/v,见/v,该/r,函数/n,已经/d,把/p,数据/n,集聚/vn,类/q,为/p,3种/mq,类型/n,了/u,。/w,数目/n,分别/d,为/p,63/m,、/w,51/m,、/w,64/m,。/w,再/d,画/v,出/v,14个/m,指标/n,随着/p,聚类/nw,数目/n,变化/vn,的/u,走势/n,图/n,plot/en,(/w,m/en,_,clust/en,,/w, ,"/w,bic/en,"/w,)/w,下/f,表/n,是/v,这些/r,模型/n,的/u,意义/n,它们/r,应该/v,分别/d,代表/n,着/u,相关性/n,(/w,完全/ad,正负/n,相关/v,——/w,对角线/n,、/w,稍强/nw,正负/n,相关/v,——/w,椭圆/n,、/w,无关/v,——/w,圆/vg,)/w,等/u,参数/n,的/u,改变/v,对应/v,的/u,模型/n,，/w,研究/vn,清楚/a,这些/r,又/d,是/v,非常/d,复杂/a,的/u,问题/n,了/u,，/w,先/d,按/p,下/f,不/d,表/n,，/w,知道/v,bic/en,值/n,越/d,大/a,则/d,说明/v,所/u,选取/v,的/u,变量/n,集合/v,拟合/nz,效果/n,越/d,好/a, ,上/f,图/n,中/f,除了/p,两个/m,模型/n,一直/d,递增/v,，/w,其他/r,的/u,12/m,模型/n,数/m,基本上/d,都/d,是/v,在/p,聚类/nw,数目/n,为/p,3/m,的/u,时候/n,达到/v,峰值/n,，/w,所以/c,该/r,算法/n,由此/d,得出/v,最佳/z,聚类/nw,数目/n,为/p,3/m,的/u,结论/n,。/w,mclust/en,包/v,还/d,可以/v,用于/v,分类/vn,、/w,密度/n,估计/v,等/u,，/w,这个/r,包/v,值得/v,好好/d,把/p,玩/v,。/w,注意/v,：/w,此/r,bic/en,并/c,不/d,是/v,贝叶斯信息/nt,准则/n,！/w,！/w,！/w,最近/t,上课/v,老师/n,讲/v,金融/n,模型/n,时/ng,提到/v,了/u,bic/en,值/n,，/w,说/v,bic/en,值/n,越/d,小/a,模型/n,效果/n,越/d,好/a,，/w,顿时/d,想起/v,这里/r,是/v,在/p,图/n,中/f,bic/en,极/d,大/a,值/n,为/p,最佳/z,聚类/nw,数目/n,，/w,然后/c,和/c,老师/n,探讨/v,了/u,这个/r,问题/n,，/w,之前/f,这里/r,误导/vn,大家/r,了/u,，/w,mclust/en,包/v,里面/f,的/u,bic/en,并/c,不/d,是/v,贝叶斯信息/nt,准则/n,。/w,1/m,./w,维基/nrf,上/f,的/u,贝叶斯信息/nt,准则/n,定义/n,与/p,log/en,(/w,likelihood/en,)/w,成/v,反比/n,，/w,极/d,大/a,似然/nw,估计/v,是/v,值/n,越/d,大/a,越/d,好/a,，/w,那么/r,bic/en,值/n,确实/ad,是/v,越/d,小/a,模型/n,效果/n,越/d,好/a,2/m,./w,mclust/en,包/v,中/f,的/u,bic/en,定义/n,[/w,3/m,]/w,这/r,是/v,mclust/en,包/v,里面/f,作者/n,定义/n,的/u,“/w,bic/en,值/n,”/w,，/w,此/r,bic/en,非/h,彼/r,bic/en,，/w,这里/r,是/v,作者/n,自己/r,定义/n,的/u,bic/en,，/w,可以/v,看到/v,，/w,这里/r,的/u,bic/en,与/p,极大/a,似然/nw,估计/v,是/v,成/v,正比/n,的/u,，/w,所以/c,这里/r,是/v,bic/en,值/n,越/d,大/a,越/d,好/a,，/w,与/p,贝叶斯信息/nt,准则/n,值/n,越/d,小/a,模型/n,越/d,好/a,的/u,结论/n,并/c,不/d,冲突/vn,2/m,./w,nbclust/en,包/v,nbclust/en,包/v,是/v,我/r,在/p,《/w,r/en,语言/n,实战/n,》/w,上/f,看到/v,的/u,一个/m,包/v,，/w,思想/n,和/c,mclust/en,包/v,比较/d,相近/a,，/w,也/d,是/v,定义/n,了/u,几/m,十个/m,评估/vn,指标/n,，/w,然后/c,聚类/nw,数目/n,从/p,2遍/mq,历/vg,到/v,15/m,（/w,自己/r,设定/v,）/w,，/w,然后/c,通过/p,这些/r,指标/n,看/v,分别/d,在/p,聚类/nw,数/m,为/p,多少/r,时/ng,达到/v,最/d,优/ag,，/w,最后/f,选择/v,指标/n,支持/v,数/m,最/d,多/a,的/u,聚类/nw,数目/n,就/d,是/v,最佳/z,聚类/nw,数目/n,。/w,library/en,(/w,nbclust/en,)/w, ,set/en,./w,seed/en,(/w,1234/m,)/w, ,#,因为/c,method/en,选择/v,的/u,是/v,kmeans/en,，/w,所以/c,如果/c,不/d,设定/v,种子/n,，/w,每次/r,跑/v,得/u,结果/n,可能/v,不同/a, ,nb/en,_,clust/en, ,</w,-/w, ,nbclust/en,(/w,dataset/en,,/w, ,distance/en, ,=/w, ,"/w,euclidean/en,"/w,,/w, ,min/en,./w,nc/en,=/w,2/m,,/w, ,max/en,./w,nc/en,=/w,15/m,,/w, ,method/en, ,=/w, ,"/w,kmeans/en,"/w,,/w, ,index/en, ,=/w, ,"/w,alllong/en,"/w,,/w, ,alphabeale/en, ,=/w, ,0.1/m,)/w,*/w,*/w,*/w, ,:/w, ,the/en, ,hubert/en, ,index/en, ,is/en, ,a/en, ,graphical/en, ,method/en, ,of/en, ,determining/en, ,the/en, ,number/en, ,of/en, ,clusters/en,./w, ,in/en, ,the/en, ,plot/en, ,of/en, ,hubert/en, ,index/en,,/w, ,we/en, ,seek/en, ,a/en, ,significant/en, ,knee/en, ,that/en, ,corresponds/en, ,to/en, ,a/en, ,significant/en, ,increase/en, ,of/en, ,the/en, ,value/en, ,of/en, ,the/en, ,measure/en, ,i/en,./w,e/en, ,the/en, ,significant/en, ,peak/en, ,in/en, ,hubert/en, ,index/en, ,second/en, ,differences/en, ,plot/en,./w,*/w,*/w,*/w, ,:/w, ,the/en, ,d/en, ,index/en, ,is/en, ,a/en, ,graphical/en, ,method/en, ,of/en, ,determining/en, ,the/en, ,number/en, ,of/en, ,clusters/en,./w, ,in/en, ,the/en, ,plot/en, ,of/en, ,d/en, ,index/en,,/w, ,we/en, ,seek/en, ,a/en, ,significant/en, ,knee/en, ,(/w,the/en, ,significant/en, ,peak/en, ,in/en, ,dindex/en, ,second/en, ,differences/en, ,plot/en,)/w, ,that/en, ,corresponds/en, ,to/en, ,a/en, ,significant/en, ,increase/en, ,of/en, ,the/en, ,value/en, ,of/en, ,the/en, ,measure/en,./w, ,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w, ,*/w, ,among/en, ,all/en, ,indices/en,:/w, ,*/w, ,5/m, ,proposed/en, ,2/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w, ,16/m, ,proposed/en, ,3/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w, ,1/m, ,proposed/en, ,10/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w, ,1/m, ,proposed/en, ,12/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w, ,1/m, ,proposed/en, ,14/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w, ,3/m, ,proposed/en, ,15/m, ,as/en, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,*/w,*/w,*/w,*/w,*/w, ,conclusion/en, ,*/w,*/w,*/w,*/w,*/w, ,*/w, ,according/en, ,to/en, ,the/en, ,majority/en, ,rule/en,,/w, ,the/en, ,best/en, ,number/en, ,of/en, ,clusters/en, ,is/en, ,3/m, ,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,*/w,barplot/en,(/w,table/en,(/w,nb/en,_,clust/en,$/w,best/en,./w,nc/en,[/w,1/m,,/w,]/w,)/w,,/w,xlab/en, ,=/w, ,"/w,聚类/nw,数/m,"/w,,/w,ylab/en, ,=/w, ,"/w,支持/v,指标/n,数/m,"/w,)/w,可以/v,看到/v,有/v,16个/m,指标/n,支持/v,最佳/z,聚类/nw,数目/n,为/p,3/m,，/w,5个/m,指标/n,支持/v,聚类/nw,数/m,为/p,2/m,，/w,所以/c,该/r,方法/n,推荐/v,的/u,最佳/z,聚类/nw,数目/n,为/p,3/m,./w,3/m,./w, ,组/q,内/f,平方/q,误差/n,和/c,——/w,拐点/n,图/n,想必/d,之前/f,动辄/d,几/m,十个/m,指标/n,，/w,这里/r,就/d,用/p,一个/m,最/d,简单/a,的/u,指标/n,——/w,sum/en, ,of/en, ,squared/en, ,error/en, ,(/w,sse/en,)/w,组/q,内/f,平方/q,误差/n,和/c,来/v,确定/v,最佳/z,聚类/nw,数目/n,。/w,这个/r,方法/n,也/d,是/v,出于/v,《/w,r/en,语言/n,实战/n,》/w,，/w,自/p,定义/n,的/u,一个/m,求/v,组/q,内/f,误差/n,平方和/n,的/u,函数/n,。/w,wssplot/en, ,</w,-/w, ,function/en,(/w,data/en,,/w, ,nc/en,=/w,15/m,,/w, ,seed/en,=/w,1234/m,)/w,{/w, ,wss/en, ,</w,-/w, ,(/w,nrow/en,(/w,data/en,)/w,-/w,1/m,)/w,*/w,sum/en,(/w,apply/en,(/w,data/en,,/w,2/m,,/w,var/en,)/w,)/w, ,for/en, ,(/w,i/en, ,in/en, ,2/m,:/w,nc/en,)/w,{/w, ,set/en,./w,seed/en,(/w,seed/en,)/w, ,wss/en,[/w,i/en,]/w, ,</w,-/w, ,sum/en,(/w,kmeans/en,(/w,data/en,,/w, ,centers/en,=/w,i/en,)/w,$/w,withinss/en,)/w, ,}/w, ,plot/en,(/w,1/m,:/w,nc/en,,/w, ,wss/en,,/w, ,type/en,=/w,"/w,b/en,"/w,,/w, ,xlab/en,=/w,"/w,number/en, ,of/en, ,clusters/en,"/w,,/w, ,ylab/en,=/w,"/w,within/en, ,groups/en, ,sum/en, ,of/en, ,squares/en,"/w,)/w,}/w,wssplot/en,(/w,dataset/en,)/w,随着/p,聚类/nw,数目/n,增多/v,，/w,每/r,一个/m,类别/n,中/f,数量/n,越来越/d,少/a,，/w,距离/n,越来越/d,近/a,，/w,因此/c,wss/en,值/n,肯定/v,是/v,随着/p,聚类/nw,数目/n,增多/v,而/c,减少/v,的/u,，/w,所以/c,关注/v,的/u,是/v,斜率/n,的/u,变化/vn,，/w,但/c,wws/en,减少/v,得/u,很/d,缓慢/a,时/ng,，/w,就/d,认为/v,进一步/d,增大/v,聚类/nw,数/m,效果/n,也/d,并/c,不/d,能/v,增强/v,，/w,存在/v,得/u,这个/r,“/w,肘点/nw,”/w,就/d,是/v,最佳/z,聚类/nw,数目/n,，/w,从/p,一类/b,到/v,三类/b,下降/v,得/u,很快/d,，/w,之后/f,下降/v,得/u,很/d,慢/a,，/w,所以/c,最佳/z,聚类/nw,个/q,数/m,选/v,为/p,三/m,另外/c,也/d,有/v,现成/b,的/u,包/v,(/w,factoextra/en,)/w,可以/v,调用/v,library/en,(/w,factoextra/en,)/w, ,library/en,(/w,ggplot/en,2/m,)/w, ,set/en,./w,seed/en,(/w,1234/m,)/w, ,fviz/en,_,nbclust/en,(/w,dataset/en,,/w, ,kmeans/en,,/w, ,method/en, ,=/w, ,"/w,wss/en,"/w,)/w, ,+/w, ,geom/en,_,vline/en,(/w,xintercept/en, ,=/w, ,3/m,,/w, ,linetype/en, ,=/w, ,2/m,)/w,loading/en, ,required/en, ,package/en,:/w, ,ggplot/en,2/m,选定/v,为/p,3类/mq,为/p,最佳/z,聚类/nw,数目/n,用/p,该/r,包/v,下/f,的/u,fviz/en,_,cluster/en,函数/n,可视化/nz,一下/m,聚类/nw,结果/n,km/en,./w,res/en, ,</w,-/w, ,kmeans/en,(/w,dataset/en,,/w,3/m,)/w, ,fviz/en,_,cluster/en,(/w,km/en,./w,res/en,,/w, ,data/en, ,=/w, ,dataset/en,)/w,4/m,./w, ,pam/en,(/w,partitioning/en, ,around/en, ,medoids/en,)/w, ,围绕/v,中心点/nz,的/u,分割/v,算法/n,k/en,-/w,means/en,算法/n,取得/v,是/v,均值/n,，/w,那么/r,对于/p,异常/a,点/q,其实/d,对/p,其/r,的/u,影响/vn,非常/d,大/a,，/w,很/d,可能/v,这种/r,孤立/v,的/u,点/q,就/d,聚/v,为/p,一类/b,，/w,一个/m,改进/v,的/u,方法/n,就/d,是/v,pam/en,算法/n,，/w,也/d,叫/v,k/en,-/w,medoids/en, ,clustering/en,首先/d,通过/p,fpc/en,包/v,中/f,的/u,pamk/en,函数/n,得到/v,最佳/z,聚类/nw,数目/n,library/en,(/w,fpc/en,)/w, ,pamk/en,./w,best/en, ,</w,-/w, ,pamk/en,(/w,dataset/en,)/w, ,pamk/en,./w,best/en,$/w,nc/en,3/m,pamk/en,函数/n,不/d,需要/v,提供/v,聚类/nw,数目/n,，/w,也/d,会/v,直接/ad,自动/d,计算/v,出/v,最佳/z,聚类数/nw,，/w,这里/r,也/d,得到/v,为/p,3/m,得到/v,聚类/nw,数/m,提供/v,给/p,cluster/en,包/v,下/f,的/u,pam/en,函数/n,并/c,进行/v,可视化/nz,library/en,(/w,cluster/en,)/w, ,clusplot/en,(/w,pam/en,(/w,dataset/en,,/w, ,pamk/en,./w,best/en,$/w,nc/en,)/w,)/w,5/m,./w,calinsky/en, ,criterion/en,这个/r,评估/vn,标准/n,定义/n,[/w,5/m,]/w,如下/v,：/w,其中/r,，/w,k/en,是/v,聚类数/nw,，/w,n/en,是/v,样本数/n,，/w,ssw/en,是/v,我们/r,之前/f,提到/v,过/u,的/u,组/q,内/f,平方/q,和/c,误差/n,，/w, ,ssb/en,是/v,组/q,与/p,组/q,之间/f,的/u,平方/q,和/c,误差/n,，/w,ssw/en,越/d,小/a,，/w,ssb/en,越/d,大/a,聚类/nw,效果/n,越/d,好/a,，/w,所以/c,calinsky/en, ,criterion/en,值/n,一般来说/l,是/v,越/d,大/a,，/w,聚类/nw,效果/n,越/d,好/a,library/en,(/w,vegan/en,)/w, ,ca/en,_,clust/en, ,</w,-/w, ,cascadekm/en,(/w,dataset/en,,/w, ,1/m,,/w, ,10/m,,/w, ,iter/en, ,=/w, ,1000/m,)/w, ,ca/en,_,clust/en,$/w,results/en,可以/v,看到/v,该/r,函数/n,把/p,组/q,内/f,平方/q,和/c,误差/n,和/c,calinsky/en,都/d,计算/v,出来/v,了/u,，/w,可以/v,看到/v,calinski/en,在/p,聚类/nw,数/m,为/p,3时/t,达到/v,最大值/nz,。/w,calinski/en,./w,best/en, ,</w,-/w, ,as/en,./w,numeric/en,(/w,which/en,./w,max/en,(/w,ca/en,_,clust/en,$/w,results/en,[/w,2/m,,/w,]/w,)/w,)/w, ,calinski/en,./w,best/en,3画/mq,图/n,出来/v,观察/v,一下/m,plot/en,(/w,fit/en,,/w, ,sortg/en, ,=/w, ,true/en,,/w, ,grpmts/en,./w,plot/en, ,=/w, ,true/en,)/w,注意/v,到/v,那个/r,红点/nz,就/d,是/v,对应/v,的/u,最大值/nz,，/w,自/p,带/v,的/u,绘图/vn,横轴/nw,纵轴/n,取/v,的/u,可能/v,不/d,符合/v,我们/r,的/u,直觉/n,，/w,把/p,数据/n,取/v,出来/v,自己/r,单独/d,画/v,一下/m,calinski/en,</w,-/w,as/en,./w,data/en,./w,frame/en,(/w,ca/en,_,clust/en,$/w,results/en,[/w,2/m,,/w,]/w,)/w, ,calinski/en,$/w,cluster/en, ,</w,-/w, ,c/en,(/w,1/m,:/w,10/m,)/w, ,library/en,(/w,ggplot/en,2/m,)/w, ,ggplot/en,(/w,calinski/en,,/w,aes/en,(/w,x/en, ,=/w, ,calinski/en,[/w,,/w,2/m,]/w,,/w, ,y/en, ,=/w, ,calinski/en,[/w,,/w,1/m,]/w,)/w,)/w,+/w,geom/en,_,line/en,(/w,)/w,warning/en, ,message/en,:/w, ,"/w,removed/en, ,1/m, ,rows/en, ,containing/en, ,missing/en, ,values/en, ,(/w,geom/en,_,path/en,)/w,./w,"/w,这个/r,看/v,上去/v,直观/a,多/a,了/u,。/w,这/r,就/d,很/d,清晰/a,的/u,可以/v,看到/v,在/p,聚类/nw,数目/n,为/p,3时/t,，/w,calinski/en,指标/n,达到/v,了/u,最大值/nz,，/w,所以/c,最佳/z,数目/n,为/p,36/m,./w,affinity/en, ,propagation/en, ,(/w,ap/en,)/w, ,clustering/en,这个/r,本质/n,上/f,是/v,类似/v,kmeans/en,或者/c,层次/n,聚类/nw,一样/u,，/w,是/v,一种/mq,聚类/nw,方法/n,，/w,因为/c,不/d,需要/v,像/v,kmeans/en,一样/u,提供/v,聚类数/nw,，/w,会/v,自动/d,算/v,出/v,最佳/z,聚类数/nw,，/w,因此/c,也/d,放到/v,这里/r,作为/v,一种/mq,计算/v,最佳/z,聚类/nw,数目/n,的/u,方法/n,。/w,ap/en,算法/n,的/u,基本/a,思想/n,是/v,将/d,全部/m,样本/n,看作/v,网络/n,的/u,节点/n,，/w,然后/c,通过/p,网络/n,中/f,各条/r,边/d,的/u,消息/n,传递/v,计算/v,出/v,各/r,样本/n,的/u,聚类/nw,中心/n,。/w,聚类/nw,过程/n,中/f,，/w,共有/v,两种/mq,消息/n,在/p,各/r,节点/n,间/f,传递/v,，/w,分别/d,是/v,吸引/v,度/q,(/w, ,responsibility/en,)/w,和/c,归属/vn,度/q,(/w,availability/en,)/w, ,。/w,ap/en,算法/n,通过/p,迭代/vn,过程/n,不断/d,更新/v,每/r,一个/m,点/q,的/u,吸引/v,度/q,和/c,归属/vn,度值/nw,，/w,直到/v,产生/v,m/en,个/q,高/a,质量/n,的/u,exemplar/en,（/w,类似/v,于/p,质心/nw,）/w,，/w,同时/c,将/d,其余/r,的/u,数据点/nw,分配/vn,到/v,相应/v,的/u,聚类/nw,中/f,[/w,7/m,]/w,library/en,(/w,apcluster/en,)/w, ,ap/en,_,clust/en, ,</w,-/w, ,apcluster/en,(/w,negdistmat/en,(/w,r/en,=/w,2/m,)/w,,/w, ,dataset/en,)/w, ,length/en,(/w,ap/en,_,clust/en,@/w,clusters/en,)/w,15/m,该/r,聚类/nw,方法/n,推荐/v,的/u,最佳/z,聚类/nw,数目/n,为/p,15/m,，/w,再/d,用/p,热力/n,图可视化/nw,一下/m,heatmap/en,(/w,ap/en,_,clust/en,)/w,选/v,x/en,或者/c,y/en,方向/n,看/v,(/w,对称/ad,)/w,，/w,可以/v,数/m,出来/v,“/w,叶子/n,节点/n,”/w,一共/d,15个/m,7/m,./w, ,轮廓/n,系数/n,average/en, ,silhouette/en, ,method/en,轮廓/n,系数/n,是/v,类/q,的/u,密集/a,与/p,分散/v,程度/n,的/u,评价/v,指标/n,。/w,a/en,(/w,i/en,)/w,是/v,测量/vn,组/q,内/f,的/u,相似/a,度/q,,/w,b/en,(/w,i/en,)/w,是/v,测量/vn,组间/nw,的/u,相似/a,度/q,，/w,s/en,(/w,i/en,)/w,范围/n,从/p,-/w,1/m,到/v,1/m,，/w,值/n,越/d,大/a,说明/v,组/q,内/f,吻合/v,越/d,高/a,，/w,组间/nw,距离/n,越/d,远/a,——/w,也就是说/l,，/w,轮廓/n,系数/n,值/n,越/d,大/a,，/w,聚类/nw,效果/n,越/d,好/a,[/w,9/m,]/w,require/en,(/w,cluster/en,)/w, ,library/en,(/w,factoextra/en,)/w, ,fviz/en,_,nbclust/en,(/w,dataset/en,,/w, ,kmeans/en,,/w, ,method/en, ,=/w, ,"/w,silhouette/en,"/w,)/w,可以/v,看到/v,也/d,是/v,在/p,聚类/nw,数/m,为/p,3时/t,轮廓/n,系数/n,达到/v,了/u,峰值/n,，/w,所以/c,最佳/z,聚类/nw,数/m,为/p,38/m,./w, ,gap/en, ,statistic/en,之前/f,我们/r,提到/v,了/u,wsse/en,组/q,内/f,平方/q,和/c,误差/n,，/w,该/r,种/q,方法/n,是/v,通过/p,找/v,“/w,肘点/nw,”/w,来/v,找到/v,最佳/z,聚类数/nw,，/w,肘点/nw,的/u,选择/v,并/c,不/d,是/v,那么/r,清晰/a,，/w,因此/c,斯坦福大学/nt,的/u,robert/en,等/u,教授/n,提/v,出/v,了/u,gap/en, ,statistic/en,方法/n,，/w,定义/n,的/u,gap/en,值/n,为/p,[/w,9/m,]/w,取/v,对数/n,的/u,原因/n,是/v,因为/c,wk/en,的/u,值/n,可能/v,很/d,大/a,通过/p,这个/r,式子/n,来/v,找/v,出/v,wk/en,跌落/v,最/d,快/a,的/u,点/q,，/w,gap/en,最/d,大/a,值/n,对应/v,的/u,k/en,值/n,就/d,是/v,最佳/z,聚类/nw,数/m,library/en,(/w,cluster/en,)/w, ,set/en,./w,seed/en,(/w,123/m,)/w, ,gap/en,_,clust/en, ,</w,-/w, ,clusgap/en,(/w,dataset/en,,/w, ,kmeans/en,,/w, ,10/m,,/w, ,b/en, ,=/w, ,500/m,,/w, ,verbose/en, ,=/w, ,interactive/en,(/w,)/w,)/w, ,gap/en,_,clustclustering/en, ,gap/en, ,statistic/en, ,[/w,"/w,clusgap/en,"/w,]/w, ,from/en, ,call/en,:/w, ,clusgap/en,(/w,x/en, ,=/w, ,dataset/en,,/w, ,funcluster/en, ,=/w, ,kmeans/en,,/w, ,k/en,./w,max/en, ,=/w, ,10/m,,/w, ,b/en, ,=/w, ,500/m,,/w, ,verbose/en, ,=/w, ,interactive/en,(/w,)/w,)/w, ,b/en,=/w,500/m, ,simulated/en, ,reference/en, ,sets/en,,/w, ,k/en, ,=/w, ,1/m,./w,./w,10/m,;/w, ,spaceh/en,0/m,=/w,"/w,scaledpca/en,"/w, ,--/nrf,>, ,number/en, ,of/en, ,clusters/en, ,(/w,method/en, ,'/w,firstsemax/en,'/w,,/w, ,se/en,./w,factor/en,=/w,1/m,)/w,:/w, ,3/m, ,logw/en, ,e/en,./w,logw/en, ,gap/en, ,se/en,./w,sim/en, ,[/w,1/m,,/w,]/w, ,5.377557/m, ,5.863690/m, ,0.4861333/m, ,0.01273873/m, ,[/w,2/m,,/w,]/w, ,5.203502/m, ,5.758276/m, ,0.5547745/m, ,0.01420766/m, ,[/w,3/m,,/w,]/w, ,5.066921/m, ,5.697322/m, ,0.6304006/m, ,0.01278909/m, ,[/w,4/m,,/w,]/w, ,5.023936/m, ,5.651618/m, ,0.6276814/m, ,0.01243239/m, ,[/w,5/m,,/w,]/w, ,4.993720/m, ,5.615174/m, ,0.6214536/m, ,0.01251765/m, ,[/w,6/m,,/w,]/w, ,4.962933/m, ,5.584564/m, ,0.6216311/m, ,0.01165595/m, ,[/w,7/m,,/w,]/w, ,4.943241/m, ,5.556310/m, ,0.6130690/m, ,0.01181831/m, ,[/w,8/m,,/w,]/w, ,4.915582/m, ,5.531834/m, ,0.6162518/m, ,0.01139207/m, ,[/w,9/m,,/w,]/w, ,4.881449/m, ,5.508514/m, ,0.6270646/m, ,0.01169532/m, ,[/w,10/m,,/w,]/w, ,4.855837/m, ,5.487005/m, ,0.6311683/m, ,0.01198264/m,library/en,(/w,factoextra/en,)/w, ,fviz/en,_,gap/en,_,stat/en,(/w,gap/en,_,clust/en