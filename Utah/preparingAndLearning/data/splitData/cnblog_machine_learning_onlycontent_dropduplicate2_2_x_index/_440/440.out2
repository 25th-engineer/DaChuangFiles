在/p,现今/t,的/u,推荐/v,技术/n,和/c,算法/n,中/f,，/w,最/d,被/p,大家/r,广泛/a,认可/vn,和/c,采用/v,的/u,就/d,是/v,基于/p,协同/v,过滤/v,的/u,推荐/v,方法/n,。/w,本文/r,将/d,带/v,你/r,深入/v,了解/v,协同/v,过滤/v,的/u,秘密/n,。/w,下面/f,直接/ad,进入/v,正题/n,./w,1/m,./w, ,什么/r,是/v,推荐/v,算法/n,推荐/v,算法/n,最/d,早/a,在/p,1992年/t,就/d,提/v,出来/v,了/u,，/w,但是/c,火/n,起来/v,实际上/d,是/v,最近/t,这些/r,年/q,的/u,事情/n,，/w,因为/c,互联网/n,的/u,爆发/v,，/w,有/v,了/u,更/d,大/a,的/u,数据量/n,可以/v,供/v,我们/r,使用/v,，/w,推荐/v,算法/n,才/d,有/v,了/u,很/d,大/a,的/u,用武之地/i,。/w,最/d,开始/v,，/w,所以/c,我们/r,在/p,网上/s,找/v,资料/n,，/w,都/d,是/v,进/v,yahoo/en,，/w,然后/c,分门别类/i,的/u,点/q,进去/v,，/w,找到/v,你/r,想/v,要/v,的/u,东西/n,，/w,这/r,是/v,一个/m,人工/n,过程/n,，/w,到/v,后来/t,，/w,我们/r,用/p,google/en,，/w,直接/ad,搜索/vn,自己/r,需要/v,的/u,内容/n,，/w,这些/r,都/d,可以/v,比较/d,精/a,准/a,的/u,找到/v,你/r,想/v,要/v,的/u,东西/n,，/w,但是/c,，/w,如果/c,我/r,自己/r,都/d,不/d,知道/v,自己/r,要/v,找/v,什么/r,肿么办/nw,？/w,最/d,典型/n,的/u,例子/n,就/d,是/v,，/w,如果/c,我/r,打开/v,豆瓣/n,找/v,电影/n,，/w,或者/c,我/r,去/v,买/v,说/v,，/w,我/r,实际上/d,不/d,知道/v,我/r,想/v,要/v,买/v,什么/r,或者/c,看/v,什么/r,，/w,这时候/r,推荐/v,系统/n,就/d,可以/v,派/v,上/f,用场/n,了/u,。/w,2/m,./w, ,推荐/v,算法/n,的/u,条件/n,现在/t,的/u,各种各样/l,的/u,推荐/v,算法/n,，/w,但是/c,不管/c,怎么样/r,，/w,都/d,绕/v,不/d,开/v,几/m,个/q,条件/n,，/w,这/r,是/v,推荐/v,的/u,基本/a,条件/n,1/m,./w,根据/p,和/c,你/r,共同/d,喜好/v,的/u,人/n,来/v,给/p,你/r,推荐/v,2/m,./w,根据/p,你/r,喜欢/v,的/u,物品/n,找/v,出/v,和/c,它/r,相似/a,的/u,来/v,给/p,你/r,推荐/v,3/m,./w,根据/p,你/r,给/p,出/v,的/u,关键/n,字/n,来/v,给/p,你/r,推荐/v,，/w,这/r,实际上/d,就/d,退化/v,成/v,搜索/vn,算法/n,了/u,4/m,./w,根据/p,上面/f,的/u,几/m,种/q,条件/n,组合/v,起来/v,给/p,你/r,推荐/v,3/m,./w, ,推荐/v,算法/n,分类/vn,推荐/v,算法/n,大致/d,可以/v,分为/v,三类/mq,：/w,3.1/m, ,基于/p,内容/n,的/u,推荐/v,算法/n,基于/p,内容/n,的/u,推荐/v,算法/n,，/w,原理/n,是/v,用户/n,喜欢/v,和/c,自己/r,关注/v,过/u,的/u,item/en,在/p,内容/n,上/f,类似/v,的/u,item/en,，/w,比如/v,你/r,看/v,了/u,哈利波特/nrf,i/en,，/w,基于/p,内容/n,的/u,推荐/v,算法/n,发现/v,哈利波特/nrf,ii/en,-/w,vi/en,，/w,与/p,你/r,以前/f,观看/v,的/u,在/p,内容/n,上面/f,（/w,共有/v,很多/m,关键词/n,）/w,有/v,很/d,大/a,关联性/nw,，/w,就/d,把/p,后者/r,推荐/v,给/p,你/r,，/w,这种/r,方法/n,可以/v,避免/v,item/en,的/u,冷/a,启动/v,问题/n,（/w,冷启动/nz,：/w,如果/c,一个/m,item/en,从/p,没有/v,被/p,关注/v,过/u,，/w,其他/r,推荐/v,算/v,法则/n,很少/ad,会/v,去/v,推荐/v,，/w,但是/c,基于/p,内容/n,的/u,推荐/v,算法/n,可以/v,分析/vn,item/en,之间/f,的/u,关系/n,，/w,实现/v,推荐/v,）/w,，/w,弊端/n,在于/v,推荐/v,的/u,item/en,可能/v,会/v,重复/v,，/w,典型/n,的/u,就/d,是/v,新闻/n,推荐/v,，/w,如果/c,你/r,看/v,了/u,一则/mq,关于/p,mh/en,370/m,的/u,新闻/n,，/w,很/d,可能/v,推荐/v,的/u,新闻/n,和/c,你/r,浏览/vn,过/u,的/u,，/w,内容/n,一致/a,；/w,另外/c,一个/m,弊端/n,则/d,是/v,对于/p,一些/m,多媒体/n,的/u,推荐/v,（/w,比如/v,音乐/n,、/w,电影/n,、/w,图片/n,等/u,)/w,由于/c,很/d,难/a,提/v,内容/n,特征/n,，/w,则/d,很/d,难/a,进行/v,推荐/v,，/w,一种/mq,解决/v,方式/n,则/d,是/v,人工/n,给/p,这些/r,item/en,打/v,标签/n,。/w,3.2/m, ,协同/v,过滤/v,推荐/v,算法/n,协同/v,过滤算法/nw,，/w,原理/n,是/v,用户/n,喜欢/v,那些/r,具有/v,相似/a,兴趣/n,的/u,用户/n,喜欢/v,过/u,的/u,商品/n,，/w,比如/v,你/r,的/u,朋友/n,喜欢/v,电影/n,哈利波特/nrf,i/en,，/w,那么/r,就/d,会/v,推荐/v,给/p,你/r,，/w,这/r,是/v,最/d,简单/a,的/u,基于/p,用户/n,的/u,协同/v,过滤算法/nw,（/w,user/en,-/w,based/en, ,collaborative/en, ,filtering/en,）/w,，/w,还有/v,一种/mq,是/v,基于/p,item/en,的/u,协同/v,过滤算法/nw,（/w,item/en,-/w,based/en, ,collaborative/en, ,filtering/en,）/w,，/w,这/r,两种/mq,方法/n,都/d,是/v,将/d,用户/n,的/u,所有/b,数据/n,读/v,入/v,到/v,内存/n,中/f,进行/v,运算/vn,的/u,，/w,因此/c,成为/v,memory/en,-/w,based/en, ,collaborative/en, ,filtering/en,，/w,另/r,一种/mq,则/d,是/v,model/en,-/w,based/en, ,collaborative/en, ,filtering/en,，/w,包括/v,aspect/en, ,model/en,，/w,plsa/en,，/w,lda/en,，/w,聚/v,类/q,，/w,svd/en,，/w,matrix/en, ,factorization/en,等/u,，/w,这种/r,方法/n,训练/vn,过程/n,比较/d,长/a,，/w,但是/c,训练/vn,完成/v,后/f,，/w,推荐/v,过程/n,比较/d,快/a,。/w,3.3/m,基于/p,知识/n,的/u,推荐/v,算法/n,。/w,最后/f,一种/mq,方法/n,是/v,基于/p,知识/n,的/u,推荐/v,算法/n,，/w,也/d,有人/r,将/d,这种/r,方法/n,归/v,为/p,基于/p,内容/n,的/u,推荐/v,，/w,这种/r,方法/n,比较/d,典型/n,的/u,是/v,构建/v,领域/n,本体/n,，/w,或者/c,是/v,建立/v,一定/d,的/u,规则/n,，/w,进行/v,推荐/v,。/w, ,混合/vn,推荐/v,算法/n,，/w,则/d,会/v,融合/v,以上/f,方法/n,，/w,以/p,加权/v,或者/c,串联/v,、/w,并联/vn,等/u,方式/n,尽心/v,融合/v,。/w, ,当然/d,，/w,推荐/v,系统/n,还/d,包括/v,很/d,多/a,方法/n,，/w,其实/d,机器/n,学习/v,或者/c,数据/n,挖掘/v,里面/f,的/u,方法/n,，/w,很多/m,都/d,可以/v,应用/vn,在/p,推荐/v,系统/n,中/f,，/w,比如说/l,lr/en,、/w,gbdt/en,、/w,rf/en,（/w,这/r,三种/mq,方法/n,在/p,一些/m,电商/nz,推荐/v,里面/f,经常/d,用/p,到/v,）/w,，/w,社交/n,网络/n,里面/f,的/u,图结构/nw,等/u,，/w,都/d,可以/v,说是/v,推荐/v,方法/n,。/w,今天/t,这/r,篇/q,文章/n,要/v,讲/v,的/u,基于/p,用户/n,的/u,协同/v,过滤算法/nw,./w,3/m, ,什么/r,是/v,协同/v,过滤/v,协同/v,过滤/v,是/v,利用/v,集体/n,智慧/n,的/u,一个/m,典型/n,方法/n,。/w,要/v,理解/v,什么/r,是/v,协同/v,过滤/v, ,(/w,collaborative/en, ,filtering/en,,/w, ,简称/v, ,cf/en,)/w,，/w,首先/d,想/v,一个/m,简单/a,的/u,问题/n,，/w,如果/c,你/r,现在/t,想/v,看/v,个/q,电影/n,，/w,但/c,你/r,不/d,知道/v,具体/a,看/v,哪/r,部/q,，/w,你/r,会/v,怎么/r,做/v,？/w,大部分/m,的/u,人/n,会/v,问问/v,周围/f,的/u,朋友/n,，/w,看看/v,最近/t,有/v,什么/r,好看/a,的/u,电影/n,推荐/v,，/w,而/c,我们/r,一般/a,更/d,倾向/n,于/p,从/p,口味/n,比较/d,类似/v,的/u,朋友/n,那里/r,得到/v,推荐/v,。/w,这/r,就/d,是/v,协同/v,过滤/v,的/u,核心/n,思想/n,。/w,换句话说/c,，/w,就/d,是/v,借鉴/v,和/c,你/r,相关/v,人群/n,的/u,观点/n,来/v,进行/v,推荐/v,，/w,很/d,好/a,理解/v,。/w,4/m, ,协同/v,过滤/v,的/u,实现/v,要/v,实现/v,协同/v,过滤/v,的/u,推荐/v,算法/n,，/w,要/v,进行/v,以下/f,三个/m,步骤/n,：/w,4.1/m,)/w,收集/v,数据/n,4.2/m,)/w,找到/v,相似/a,用户/n,和/c,物品/n,4.3/m,进行/v,推荐/v,4.1/m, ,收集/v,数据/n,这里/r,的/u,数据/n,指/v,的/u,都/d,是/v,用户/n,的/u,历史/n,行为/n,数据/n,，/w,比如/v,用户/n,的/u,购买/v,历史/n,，/w,关注/v,，/w,收藏/v,行为/n,，/w,或者/c,发表/v,了/u,某些/r,评论/n,，/w,给/p,某个/r,物品/n,打/v,了/u,多少/r,分/q,等等/u,，/w,这些/r,都/d,可以/v,用/p,来/v,作为/v,数据/n,供/v,推荐/v,算法/n,使用/v,，/w,服务/vn,于/p,推荐/v,算法/n,。/w,需要/v,特别/d,指出/v,的/u,在于/v,，/w,不同/a,的/u,数据/n,准确性/n,不同/a,，/w,粒度/n,也/d,不同/a,，/w,在/p,使用/v,时/ng,需要/v,考虑/v,到/v,噪音/n,所/u,带来/v,的/u,影响/vn,。/w,4.2/m,找到/v,相似/a,用户/n,和/c,物品/n,这/r,一步/mq,也/d,很/d,简单/a,，/w,其实/d,就/d,是/v,计算/v,用户/n,间/f,以及/c,物品/n,间/f,的/u,相似/a,度/q,。/w,以下/f,是/v,几/m,种/q,计算/v,相似/a,度/q,的/u,方法/n,：/w,4.3/m, ,进行/v,推荐/v,在/p,知道/v,了/u,如何/r,计算/v,相似/a,度/q,后/f,，/w,就/d,可以/v,进行/v,推荐/v,了/u,。/w,在/p,协同/v,过滤/v,中/f,，/w,有/v,两种/mq,主流/n,方法/n,：/w,1/m,)/w,基于/p,用户/n,的/u,协同/v,过滤/v,2/m,)/w,基于/p,物品/n,的/u,协同/v,过滤/v,具体/a,怎么/r,来/v,阐述/v,他们/r,的/u,原理/n,呢/y,，/w,看/v,个/q,图/n,大家/r,就/d,明白/v,了/u,基于/p,用户/n,的/u, ,cf/en, ,的/u,基本/a,思想/n,相当/d,简单/a,，/w,基于/p,用户/n,对/p,物品/n,的/u,偏/d,好/a,找到/v,相邻/v,邻居/n,用户/n,，/w,然后/c,将/d,邻居/n,用户/n,喜欢/v,的/u,推荐/v,给/p,当前/t,用户/n,。/w,计算/v,上/f,，/w,就是/d,将/d,一个/m,用户/n,对/p,所有/b,物品/n,的/u,偏/d,好/a,作为/v,一个/m,向/p,量/n,来/v,计算/v,用户/n,之间/f,的/u,相似/a,度/q,，/w,找到/v, ,k/en, ,邻居/n,后/f,，/w,根据/p,邻居/n,的/u,相似/a,度/q,权/n,重/a,以及/c,他们/r,对/p,物品/n,的/u,偏/d,好/a,，/w,预测/v,当前/t,用户/n,没有/v,偏/d,好/a,的/u,未/d,涉及/v,物品/n,，/w,计算/v,得到/v,一个/m,排序/vn,的/u,物品/n,列表/v,作为/v,推荐/v,。/w, ,下/f,图/n,给/p,出/v,了/u,一个/m,例子/n,，/w,对于/p,用户/n, ,a/en,，/w,根据/p,用户/n,的/u,历史/n,偏/d,好/a,，/w,这里/r,只/d,计算/v,得到/v,一个/m,邻居/n, ,-/w, ,用户/n, ,c/en,，/w,然后/c,将/d,用户/n, ,c/en, ,喜欢/v,的/u,物品/n, ,d/en, ,推荐/v,给/p,用户/n, ,a/en,。/w,基于/p,物品/n,的/u, ,cf/en, ,的/u,原理/n,和/c,基于/p,用户/n,的/u, ,cf/en, ,类似/v,，/w,只是/d,在/p,计算/v,邻居/n,时/ng,采用/v,物品/n,本身/r,，/w,而/c,不/d,是/v,从/p,用户/n,的/u,角度/n,，/w,即/v,基于/p,用户/n,对/p,物品/n,的/u,偏/d,好/a,找到/v,相似/a,的/u,物品/n,，/w,然后/c,根据/p,用户/n,的/u,历史/n,偏/d,好/a,，/w,推荐/v,相似/a,的/u,物品/n,给/p,他/r,。/w,从/p,计算/v,的/u,角度/n,看/v,，/w,就是/d,将/d,所有/b,用户/n,对/p,某个/r,物品/n,的/u,偏/d,好/a,作为/v,一个/m,向/p,量/n,来/v,计算/v,物品/n,之间/f,的/u,相似/a,度/q,，/w,得到/v,物品/n,的/u,相似/a,物品/n,后/f,，/w,根据/p,用户/n,历史/n,的/u,偏/d,好/a,预测/v,当前/t,用户/n,还/d,没有/v,表示/v,偏/d,好/a,的/u,物品/n,，/w,计算/v,得到/v,一个/m,排序/vn,的/u,物品/n,列表/v,作为/v,推荐/v,。/w,下/f,图/n,给/p,出/v,了/u,一个/m,例子/n,，/w,对于/p,物品/n, ,a/en,，/w,根据/p,所有/b,用户/n,的/u,历史/n,偏/d,好/a,，/w,喜欢/v,物品/n, ,a/en, ,的/u,用户/n,都/d,喜欢/v,物品/n, ,c/en,，/w,得出/v,物品/n, ,a/en, ,和/c,物品/n, ,c/en, ,比较/d,相似/a,，/w,而/c,用户/n, ,c/en, ,喜欢/v,物品/n, ,a/en,，/w,那么/r,可以/v,推断/vn,出/v,用户/n, ,c/en, ,可能/v,也/d,喜欢/v,物品/n, ,c/en,。/w,算法/n,存在/v,的/u,问题/n,这个/r,算法/n,实现/v,起来/v,也/d,比较/d,简单/a,，/w,但是/c,在/p,实际/n,应用/vn,中/f,有时候/d,也/d,会/v,有/v,问题/n,的/u,。/w,比如/v,一些/m,非常/d,流行/v,的/u,商品/n,可能/v,很多/m,人/n,都/d,喜欢/v,，/w,这种/r,商品/n,推荐/v,给/p,你/r,就/d,没/d,什么/r,意义/n,了/u,，/w,所以/c,计算/v,的/u,时候/n,需要/v,对/p,这种/r,商品/n,加/v,一个/m,权重/nz,或者/c,把/p,这种/r,商品/n,完全/ad,去掉/v,也/d,行/v,。/w,再有/c,，/w,对于/p,一些/m,通用/vn,的/u,东西/n,，/w,比如/v,买/v,书/n,的/u,时候/n,的/u,工具书/n,，/w,如/v,现代/t,汉语/nz,词典/n,，/w,新华/nz,字典/n,神马/nz,的/u,，/w,通用性/n,太/d,强/a,了/u,，/w,推荐/v,也/d,没/d,什么/r,必要/a,了/u,。/w,适用/v,场景/n,在/p,非/h,社交/n,网络/n,的/u,网站/n,中/f,，/w,内容/n,内在/b,的/u,联系/v,是/v,很/d,重要/a,的/u,推荐/v,原则/n,，/w,它/r,比/p,基于/p,相似/a,用户/n,的/u,推荐/v,原则/n,更加/d,有效/a,。/w,比如/v,在/p,购书/v,网站/n,上/f,，/w,当/p,你/r,看/v,一/m,本书/r,的/u,时候/n,，/w,推荐/v,引擎/n,会/v,给/p,你/r,推荐/v,相关/v,的/u,书籍/n,，/w,这个/r,推荐/v,的/u,重要性/n,远远/d,超过/v,了/u,网站/n,首页/nw,对/p,该/r,用户/n,的/u,综合/vn,推荐/v,。/w,可以/v,看到/v,，/w,在/p,这种/r,情况/n,下/f,，/w,item/en, ,cf/en, ,的/u,推荐/v,成为/v,了/u,引导/v,用户/n,浏览/vn,的/u,重要/a,手段/n,。/w,同时/c, ,item/en, ,cf/en, ,便于/v,为/p,推荐/v,做出/v,解释/v,，/w,在/p,一个/m,非/h,社交/n,网络/n,的/u,网站/n,中/f,，/w,给/p,某个/r,用户/n,推荐/v,一/m,本书/r,，/w,同时/c,给/p,出/v,的/u,解释/v,是/v,某某/r,和/c,你/r,有/v,相似/a,兴趣/n,的/u,人/n,也/d,看/v,了/u,这/r,本/r,书/n,，/w,这/r,很/d,难/a,让/v,用户/n,信服/v,，/w,因为/c,用户/n,可能/v,根本/a,不/d,认识/v,那/r,个人/n,；/w,但/c,如果/c,解释/v,说是/v,因为/c,这/r,本/r,书/n,和/c,你/r,以前/f,看/v,的/u,某/r,本书/r,相似/a,，/w,用户/n,可能/v,就/d,觉得/v,合理/a,而/c,采纳/v,了/u,此/r,推荐/v,。/w,具体/a,实现/v,#, ,-/w,*/w,-/w, ,coding/en,=/w,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,import/en, ,math/en, ,import/en, ,sys/en, ,from/en, ,texttable/en, ,import/en, ,texttable/en, ,#, ,#, ,使用/v, ,|/w,a/en,&/w,b/en,|/w,//w,sqrt/en,(/w,|/w,a/en, ,|/w,|/w, ,b/en, ,|/w,)/w,计算/v,余弦/n,距离/n, ,#, ,#, ,#, ,def/en, ,calccosdistspe/en,(/w,user/en,1/m,,/w,user/en,2/m,)/w,:/w, ,avg/en,_,x/en,=/w,0.0/m, ,avg/en,_,y/en,=/w,0.0/m, ,for/en, ,key/en, ,in/en, ,user/en,1/m,:/w, ,avg/en,_,x/en,+/w,=/w,key/en,[/w,1/m,]/w, ,avg/en,_,x/en,=/w,avg/en,_,x/en,//w,len/en,(/w,user/en,1/m,)/w, ,for/en, ,key/en, ,in/en, ,user/en,2/m,:/w, ,avg/en,_,y/en,+/w,=/w,key/en,[/w,1/m,]/w, ,avg/en,_,y/en,=/w,avg/en,_,y/en,//w,len/en,(/w,user/en,2/m,)/w, ,u/en,1/m,_,u/en,2/m,=/w,0.0/m, ,for/en, ,key/en,1/m, ,in/en, ,user/en,1/m,:/w, ,for/en, ,key/en,2/m, ,in/en, ,user/en,2/m,:/w, ,if/en, ,key/en,1/m,[/w,1/m,]/w, ,>, ,avg/en,_,x/en, ,and/en, ,key/en,2/m,[/w,1/m,]/w,>,avg/en,_,y/en, ,and/en, ,key/en,1/m,[/w,0/m,]/w,=/w,=/w,key/en,2/m,[/w,0/m,]/w,:/w, ,u/en,1/m,_,u/en,2/m,+/w,=/w,1/m, ,u/en,1/m,u/en,2/m,=/w,len/en,(/w,user/en,1/m,)/w,*/w,len/en,(/w,user/en,2/m,)/w,*/w,1.0/m, ,sx/en,_,sy/en,=/w,u/en,1/m,_,u/en,2/m,//w,math/en,./w,sqrt/en,(/w,u/en,1/m,u/en,2/m,)/w, ,return/en, ,sx/en,_,sy/en, ,#, ,#, ,计算/v,余弦/n,距离/n, ,#, ,#, ,def/en, ,calccosdist/en,(/w,user/en,1/m,,/w,user/en,2/m,)/w,:/w, ,sum/en,_,x/en,=/w,0.0/m, ,sum/en,_,y/en,=/w,0.0/m, ,sum/en,_,xy/en,=/w,0.0/m, ,for/en, ,key/en,1/m, ,in/en, ,user/en,1/m,:/w, ,for/en, ,key/en,2/m, ,in/en, ,user/en,2/m,:/w, ,if/en, ,key/en,1/m,[/w,0/m,]/w,=/w,=/w,key/en,2/m,[/w,0/m,]/w, ,:/w, ,sum/en,_,xy/en,+/w,=/w,key/en,1/m,[/w,1/m,]/w,*/w,key/en,2/m,[/w,1/m,]/w, ,sum/en,_,y/en,+/w,=/w,key/en,2/m,[/w,1/m,]/w,*/w,key/en,2/m,[/w,1/m,]/w, ,sum/en,_,x/en,+/w,=/w,key/en,1/m,[/w,1/m,]/w,*/w,key/en,1/m,[/w,1/m,]/w, ,if/en, ,sum/en,_,xy/en, ,=/w,=/w, ,0.0/m, ,:/w, ,return/en, ,0/m, ,sx/en,_,sy/en,=/w,math/en,./w,sqrt/en,(/w,sum/en,_,x/en,*/w,sum/en,_,y/en,)/w, ,return/en, ,sum/en,_,xy/en,//w,sx/en,_,sy/en, ,#, ,#, ,#, ,相似/a,余弦/n,距离/n, ,#, ,#, ,#, ,def/en, ,calcsimlarycosdist/en,(/w,user/en,1/m,,/w,user/en,2/m,)/w,:/w, ,sum/en,_,x/en,=/w,0.0/m, ,sum/en,_,y/en,=/w,0.0/m, ,sum/en,_,xy/en,=/w,0.0/m, ,avg/en,_,x/en,=/w,0.0/m, ,avg/en,_,y/en,=/w,0.0/m, ,for/en, ,key/en, ,in/en, ,user/en,1/m,:/w, ,avg/en,_,x/en,+/w,=/w,key/en,[/w,1/m,]/w, ,avg/en,_,x/en,=/w,avg/en,_,x/en,//w,len/en,(/w,user/en,1/m,)/w, ,for/en, ,key/en, ,in/en, ,user/en,2/m,:/w, ,avg/en,_,y/en,+/w,=/w,key/en,[/w,1/m,]/w, ,avg/en,_,y/en,=/w,avg/en,_,y/en,//w,len/en,(/w,user/en,2/m,)/w, ,for/en, ,key/en,1/m, ,in/en, ,user/en,1/m,:/w, ,for/en, ,key/en,2/m, ,in/en, ,user/en,2/m,:/w, ,if/en, ,key/en,1/m,[/w,0/m,]/w,=/w,=/w,key/en,2/m,[/w,0/m,]/w, ,:/w, ,sum/en,_,xy/en,+/w,=/w,(/w,key/en,1/m,[/w,1/m,]/w,-/w,avg/en,_,x/en,)/w,*/w,(/w,key/en,2/m,[/w,1/m,]/w,-/w,avg/en,_,y/en,)/w, ,sum/en,_,y/en,+/w,=/w,(/w,key/en,2/m,[/w,1/m,]/w,-/w,avg/en,_,y/en,)/w,*/w,(/w,key/en,2/m,[/w,1/m,]/w,-/w,avg/en,_,y/en,)/w, ,sum/en,_,x/en,+/w,=/w,(/w,key/en,1/m,[/w,1/m,]/w,-/w,avg/en,_,x/en,)/w,*/w,(/w,key/en,1/m,[/w,1/m,]/w,-/w,avg/en,_,x/en,)/w, ,if/en, ,sum/en,_,xy/en, ,=/w,=/w, ,0.0/m, ,:/w, ,return/en, ,0/m, ,sx/en,_,sy/en,=/w,math/en,./w,sqrt/en,(/w,sum/en,_,x/en,*/w,sum/en,_,y/en,)/w, ,return/en, ,sum/en,_,xy/en,//w,sx/en,_,sy/en, ,#, ,#, ,读/v,取/v,文件/n, ,#, ,#, ,def/en, ,readfile/en,(/w,file/en,_,name/en,)/w,:/w, ,contents/en,_,lines/en,=/w,[/w,]/w, ,f/en,=/w,open/en,(/w,file/en,_,name/en,,/w,"/w,r/en,"/w,)/w, ,contents/en,_,lines/en,=/w,f/en,./w,readlines/en,(/w,)/w, ,f/en,./w,close/en,(/w,)/w, ,return/en, ,contents/en,_,lines/en, ,#, ,#, ,解压/v,rating/en,信息/n,，/w,格式/n,：/w,用户/n,id/en,\/w,t/en,硬盘/n,id/en,\/w,t/en,用户/n,rating/en,\/w,t/en,时间/n, ,#, ,输入/v,：/w,数据/n,集合/v, ,#, ,输出/v,:/w,已经/d,解压/v,的/u,排名/v,信息/n, ,#, ,def/en, ,getratinginformation/en,(/w,ratings/en,)/w,:/w, ,rates/en,=/w,[/w,]/w, ,for/en, ,line/en, ,in/en, ,ratings/en,:/w, ,rate/en,=/w,line/en,./w,split/en,(/w,"/w,\/w,t/en,"/w,)/w, ,rates/en,./w,append/en,(/w,[/w,int/en,(/w,rate/en,[/w,0/m,]/w,)/w,,/w,int/en,(/w,rate/en,[/w,1/m,]/w,)/w,,/w,int/en,(/w,rate/en,[/w,2/m,]/w,)/w,]/w,)/w, ,return/en, ,rates/en, ,#, ,#, ,生成/vn,用户/n,评分/vn,的/u,数据/n,结构/n, ,#, ,#, ,输入/v,:/w,所以/c,数据/n, ,[/w,[/w,2/m,,/w,1/m,,/w,5/m,]/w,,/w,[/w,2/m,,/w,4/m,,/w,2/m,]/w,./w,./w,./w,]/w, ,#, ,输出/v,:/w,1/m,./w,用户/n,打分/v,字典/n, ,2/m,./w,电影/n,字典/n, ,#, ,使用/v,字典/n,，/w,key/en,是/v,用户/n,id/en,，/w,value/en,是/v,用户/n,对/p,电影/n,的/u,评价/v,，/w, ,#, ,rate/en,_,dic/en,[/w,2/m,]/w,=/w,[/w,(/w,1/m,,/w,5/m,)/w,,/w,(/w,4/m,,/w,2/m,)/w,]/w,./w,./w,./w,./w, ,表示/v,用户/n,2对/mq,电影/n,1/m,的/u,评分/vn,是/v,5/m,，/w,对/p,电影/n,4/m,的/u,评分/vn,是/v,2/m, ,#, ,def/en, ,createuserrankdic/en,(/w,rates/en,)/w,:/w, ,user/en,_,rate/en,_,dic/en,=/w,{/w,}/w, ,item/en,_,to/en,_,user/en,=/w,{/w,}/w, ,for/en, ,i/en, ,in/en, ,rates/en,:/w, ,user/en,_,rank/en,=/w,(/w,i/en,[/w,1/m,]/w,,/w,i/en,[/w,2/m,]/w,)/w, ,if/en, ,i/en,[/w,0/m,]/w, ,in/en, ,user/en,_,rate/en,_,dic/en,:/w, ,user/en,_,rate/en,_,dic/en,[/w,i/en,[/w,0/m,]/w,]/w,./w,append/en,(/w,user/en,_,rank/en,)/w, ,else/en,:/w, ,user/en,_,rate/en,_,dic/en,[/w,i/en,[/w,0/m,]/w,]/w,=/w,[/w,user/en,_,rank/en,]/w, ,if/en, ,i/en,[/w,1/m,]/w, ,in/en, ,item/en,_,to/en,_,user/en,:/w, ,item/en,_,to/en,_,user/en,[/w,i/en,[/w,1/m,]/w,]/w,./w,append/en,(/w,i/en,[/w,0/m,]/w,)/w, ,else/en,:/w, ,item/en,_,to/en,_,user/en,[/w,i/en,[/w,1/m,]/w,]/w,=/w,[/w,i/en,[/w,0/m,]/w,]/w, ,return/en, ,user/en,_,rate/en,_,dic/en,,/w,item/en,_,to/en,_,user/en, ,#, ,#, ,计算/v,与/p,指定/v,用户/n,最/d,相近/a,的/u,邻居/n, ,#, ,输入/v,:/w,指定/v,用户/n,id/en,，/w,所以/c,用户/n,数据/n,，/w,所以/c,物品/n,数据/n, ,#, ,输出/v,:/w,与/p,指定/v,用户/n,最/d,相邻/v,的/u,邻居/n,列表/v, ,#, ,def/en, ,calcnearestneighbor/en,(/w,userid/en,,/w,users/en,_,dic/en,,/w,item/en,_,dic/en,)/w,:/w, ,neighbors/en,=/w,[/w,]/w, ,#,neighbors/en,./w,append/en,(/w,userid/en,)/w, ,for/en, ,item/en, ,in/en, ,users/en,_,dic/en,[/w,userid/en,]/w,:/w, ,for/en, ,neighbor/en, ,in/en, ,item/en,_,dic/en,[/w,item/en,[/w,0/m,]/w,]/w,:/w, ,if/en, ,neighbor/en, ,!/w,=/w, ,userid/en, ,and/en, ,neighbor/en, ,not/en, ,in/en, ,neighbors/en,:/w, ,neighbors/en,./w,append/en,(/w,neighbor/en,)/w, ,neighbors/en,_,dist/en,=/w,[/w,]/w, ,for/en, ,neighbor/en, ,in/en, ,neighbors/en,:/w, ,dist/en,=/w,calcsimlarycosdist/en,(/w,users/en,_,dic/en,[/w,userid/en,]/w,,/w,users/en,_,dic/en,[/w,neighbor/en,]/w,)/w, ,#,calcsimlarycosdist/en, ,calccosdist/en, ,calccosdistspe/en, ,neighbors/en,_,dist/en,./w,append/en,(/w,[/w,dist/en,,/w,neighbor/en,]/w,)/w, ,neighbors/en,_,dist/en,./w,sort/en,(/w,reverse/en,=/w,true/en,)/w, ,#,print/en, ,neighbors/en,_,dist/en, ,return/en, ,neighbors/en,_,dist/en, ,#, ,#, ,使用/v,userfc/en,进行/v,推荐/v, ,#, ,输入/v,：/w,文件名/n,,/w,用户/n,id/en,,/w,邻居/n,数量/n, ,#, ,输出/v,：/w,推荐/v,的/u,电影/n,id/en,,/w,输入/v,用户/n,的/u,电影/n,列表/v,,/w,电影/n,对应/v,用户/n,的/u,反/v,序表/nw,，/w,邻居/n,列表/v, ,#, ,def/en, ,recommendbyuserfc/en,(/w,file/en,_,name/en,,/w,userid/en,,/w,k/en,=/w,5/m,)/w,:/w, ,#,读/v,取/v,文件/n,数据/n, ,test/en,_,contents/en,=/w,readfile/en,(/w,file/en,_,name/en,)/w, ,#,文件/n,数据/n,格式化/v,成/v,二/m,维数/nr,组/q, ,list/en,[/w,[/w,用户/n,id/en,,/w,电影/n,id/en,,/w,电影/n,评分/vn,]/w,./w,./w,./w,]/w, ,test/en,_,rates/en,=/w,getratinginformation/en,(/w,test/en,_,contents/en,)/w, ,#,格式化/v,成/v,字典/n,数据/n, ,#, ,1/m,./w,用户/n,字典/n,：/w,dic/en,[/w,用户/n,id/en,]/w,=/w,[/w,(/w,电影/n,id/en,,/w,电影/n,评分/vn,)/w,./w,./w,./w,]/w, ,#, ,2/m,./w,电影/n,字典/n,：/w,dic/en,[/w,电影/n,id/en,]/w,=/w,[/w,用户/n,id/en,1/m,,/w,用户/n,id/en,2/m,./w,./w,./w,]/w, ,test/en,_,dic/en,,/w,test/en,_,item/en,_,to/en,_,user/en,=/w,createuserrankdic/en,(/w,test/en,_,rates/en,)/w, ,#,寻找/v,邻居/n, ,neighbors/en,=/w,calcnearestneighbor/en,(/w,userid/en,,/w,test/en,_,dic/en,,/w,test/en,_,item/en,_,to/en,_,user/en,)/w,[/w,:/w,k/en,]/w, ,recommend/en,_,dic/en,=/w,{/w,}/w, ,for/en, ,neighbor/en, ,in/en, ,neighbors/en,:/w, ,neighbor/en,_,user/en,_,id/en,=/w,neighbor/en,[/w,1/m,]/w, ,movies/en,=/w,test/en,_,dic/en,[/w,neighbor/en,_,user/en,_,id/en,]/w, ,for/en, ,movie/en, ,in/en, ,movies/en,:/w, ,#,print