原/b,创/vg,文章/n,，/w,同步/vd,首发/v,自作者/nw,个人/n,博客/n, ,。/w,转载/v,请/v,务必/d,在/p,文章/n,开头/n,显眼/a,处/n,注明/v,出处/n,摘要/n,本文/r,详述/v,了/u,如何/r,通过/p,数据/n,预览/nz,，/w,探索/v,式/k,数据/n,分析/vn,，/w,缺失/n,数据/n,填补/v,，/w,删除/v,关联/vn,特征/n,以及/c,派生/v,新/a,特征/n,等/u,方法/n,，/w,在/p,kaggle/en,的/u,titanic/en,幸存/v,预测/v,这/r,一/m,分类/vn,问题/n,竞赛/vn,中/f,获得/v,前/f,2%/mq,排名/v,的/u,具体/a,方法/n,。/w,竞赛/vn,内容/n,介绍/v,titanic/en,幸存/v,预测/v,是/v,kaggle/en,上/f,参赛/v,人数/n,最/d,多/a,的/u,竞赛/vn,之一/r,。/w,它/r,要求/v,参赛/v,选手/n,通过/p,训练/vn,数据集/nw,分析/vn,出/v,什么/r,类型/n,的/u,人/n,更/d,可能/v,幸存/v,，/w,并/c,预测/v,出/v,测试/vn,数据/n,集中/v,的/u,所有/b,乘客/n,是否/v,生还/vn,。/w,该/r,项目/n,是/v,一个/m,二元/b,分类/vn,问题/n,如何/r,取得/v,排名/v,前/f,2%/mq,的/u,成绩/n,加载/v,数据/n,在/p,加载/v,数据/n,之前/f,，/w,先/d,通过/p,如下/v,代码/n,加载/v,之后/f,会/v,用/p,到/v,的/u,所有/b,r/en,库/n,library/en,(/w,readr/en,)/w, ,#, ,file/en, ,read/en, ,//w, ,write/en, ,library/en,(/w,ggplot/en,2/m,)/w, ,#, ,data/en, ,visualization/en, ,library/en,(/w,ggthemes/en,)/w, ,#, ,data/en, ,visualization/en, ,library/en,(/w,scales/en,)/w, ,#, ,data/en, ,visualization/en, ,library/en,(/w,plyr/en,)/w, ,library/en,(/w,stringr/en,)/w, ,#, ,string/en, ,manipulation/en, ,library/en,(/w,informationvalue/en,)/w, ,#, ,iv/en, ,//w, ,woe/en, ,calculation/en, ,library/en,(/w,mlmetrics/en,)/w, ,#, ,mache/en, ,learning/en, ,metrics/en,./w,e/en,./w,g/en,./w, ,recall/en,,/w, ,precision/en,,/w, ,accuracy/en,,/w, ,auc/en, ,library/en,(/w,rpart/en,)/w, ,#, ,decision/en, ,tree/en, ,utils/en, ,library/en,(/w,randomforest/en,)/w, ,#, ,random/en, ,forest/en, ,library/en,(/w,dplyr/en,)/w, ,#, ,data/en, ,manipulation/en, ,library/en,(/w,e/en,1071/m,)/w, ,#, ,svm/en, ,library/en,(/w,amelia/en,)/w, ,#, ,missing/en, ,value/en, ,utils/en, ,library/en,(/w,party/en,)/w, ,#, ,conditional/en, ,inference/en, ,trees/en, ,library/en,(/w,gbm/en,)/w, ,#, ,adaboost/en, ,library/en,(/w,class/en,)/w, ,#, ,knn/en, ,library/en,(/w,scales/en,)/w,通过/p,如下/v,代码/n,将/d,训练/vn,数据/n,和/c,测试/vn,数据/n,分别/d,加载/v,到/v,名/q,为/p,train/en,和/c,test/en,的/u,data/en,./w,frame/en,中/f,train/en, ,</w,-/w, ,read/en,_,csv/en,(/w,"/w,train/en,./w,csv/en,"/w,)/w, ,test/en, ,</w,-/w, ,read/en,_,csv/en,(/w,"/w,test/en,./w,csv/en,"/w,)/w,由于/c,之后/f,需要/v,对/p,训练/vn,数据/n,和/c,测试/vn,数据/n,做/v,相同/a,的/u,转换/v,，/w,为/p,避免/v,重复/v,操作/v,和/c,出现/v,不/d,一/m,至/p,的/u,情况/n,，/w,更/d,为了/p,避免/v,可能/v,碰到/v,的/u,categorical/en,类型/n,新/a,level/en,的/u,问题/n,，/w,这里/r,建议/n,将/d,训练/vn,数据/n,和/c,测试/vn,数据/n,合并/v,，/w,统一/vn,操作/v,。/w,data/en, ,</w,-/w, ,bind/en,_,rows/en,(/w,train/en,,/w, ,test/en,)/w, ,train/en,./w,row/en, ,</w,-/w, ,1/m,:/w,nrow/en,(/w,train/en,)/w, ,test/en,./w,row/en, ,</w,-/w, ,(/w,1/m, ,+/w, ,nrow/en,(/w,train/en,)/w,)/w,:/w,(/w,nrow/en,(/w,train/en,)/w, ,+/w, ,nrow/en,(/w,test/en,)/w,)/w,数据/n,预览/nz,先/d,观察/v,数据/n,str/en,(/w,data/en,)/w,#,#, ,classes/en, ,'/w,tbl/en,_,df/en,'/w,,/w, ,'/w,tbl/en,'/w, ,and/en, ,'/w,data/en,./w,frame/en,'/w,:/w, ,1309/m, ,obs/en,./w, ,of/en, ,12/m, ,variables/en,:/w, ,#,#, ,$/w, ,passengerid/en,:/w, ,int/en, ,1/m, ,2/m, ,3/m, ,4/m, ,5/m, ,6/m, ,7/m, ,8/m, ,9/m, ,10/m, ,./w,./w,./w, ,#,#, ,$/w, ,survived/en, ,:/w, ,int/en, ,0/m, ,1/m, ,1/m, ,1/m, ,0/m, ,0/m, ,0/m, ,0/m, ,1/m, ,1/m, ,./w,./w,./w, ,#,#, ,$/w, ,pclass/en, ,:/w, ,int/en, ,3/m, ,1/m, ,3/m, ,1/m, ,3/m, ,3/m, ,1/m, ,3/m, ,3/m, ,2/m, ,./w,./w,./w, ,#,#, ,$/w, ,name/en, ,:/w, ,chr/en, ,"/w,braund/en,,/w, ,mr/en,./w, ,owen/en, ,harris/en,"/w, ,"/w,cumings/en,,/w, ,mrs/en,./w, ,john/en, ,bradley/en, ,(/w,florence/en, ,briggs/en, ,thayer/en,)/w,"/w, ,"/w,heikkinen/en,,/w, ,miss/en,./w, ,laina/en,"/w, ,"/w,futrelle/en,,/w, ,mrs/en,./w, ,jacques/en, ,heath/en, ,(/w,lily/en, ,may/en, ,peel/en,)/w,"/w, ,./w,./w,./w, ,#,#, ,$/w, ,sex/en, ,:/w, ,chr/en, ,"/w,male/en,"/w, ,"/w,female/en,"/w, ,"/w,female/en,"/w, ,"/w,female/en,"/w, ,./w,./w,./w, ,#,#, ,$/w, ,age/en, ,:/w, ,num/en, ,22/m, ,38/m, ,26/m, ,35/m, ,35/m, ,na/en, ,54/m, ,2/m, ,27/m, ,14/m, ,./w,./w,./w, ,#,#, ,$/w, ,sibsp/en, ,:/w, ,int/en, ,1/m, ,1/m, ,0/m, ,1/m, ,0/m, ,0/m, ,0/m, ,3/m, ,0/m, ,1/m, ,./w,./w,./w, ,#,#, ,$/w, ,parch/en, ,:/w, ,int/en, ,0/m, ,0/m, ,0/m, ,0/m, ,0/m, ,0/m, ,0/m, ,1/m, ,2/m, ,0/m, ,./w,./w,./w, ,#,#, ,$/w, ,ticket/en, ,:/w, ,chr/en, ,"/w,a/en,//w,5/m, ,21171/m,"/w, ,"/w,pc/en, ,17599/m,"/w, ,"/w,ston/en,//w,o/en,2/m,./w, ,3101282/m,"/w, ,"/w,113803/m,"/w, ,./w,./w,./w, ,#,#, ,$/w, ,fare/en, ,:/w, ,num/en, ,7.25/m, ,71.28/m, ,7.92/m, ,53.1/m, ,8.05/m, ,./w,./w,./w, ,#,#, ,$/w, ,cabin/en, ,:/w, ,chr/en, ,na/en, ,"/w,c/en,85/m,"/w, ,na/en, ,"/w,c/en,123/m,"/w, ,./w,./w,./w, ,#,#, ,$/w, ,embarked/en, ,:/w, ,chr/en, ,"/w,s/en,"/w, ,"/w,c/en,"/w, ,"/w,s/en,"/w, ,"/w,s/en,"/w, ,./w,./w,./w,从/p,上/f,可见/v,，/w,数据集/nw,包含/v,12个/m,变量/n,，/w,1309条/mq,数据/n,，/w,其中/r,891条/mq,为/p,训练/vn,数据/n,，/w,418条/mq,为/p,测试/vn,数据/n,passengerid/en, ,整型/nw,变量/n,，/w,标识/n,乘客/n,的/u,id/en,，/w,递增/v,变量/n,，/w,对/p,预测/v,无/v,帮助/v,survived/en, ,整型/nw,变量/n,，/w,标识/n,该/r,乘客/n,是否/v,幸存/v,。/w,0/m,表示/v,遇难/v,，/w,1/m,表示/v,幸存/v,。/w,将/d,其/r,转换/v,为/p,factor/en,变量/n,比较/d,方便/a,处理/v,pclass/en, ,整型/nw,变量/n,，/w,标识/n,乘客/n,的/u,社会/n,-/w,经济/n,状态/n,，/w,1/m,代表/n,upper/en,，/w,2/m,代表/n,middle/en,，/w,3/m,代表/n,lowername/en, ,字符/n,型/k,变量/n,，/w,除/p,包含/v,姓/v,和/c,名/q,以外/f,，/w,还/d,包含/v,mr/en,./w, ,mrs/en,./w, ,dr/en,./w,这样/r,的/u,具有/v,西方/s,文化/n,特点/n,的/u,信息/n,sex/en, ,字符/n,型/k,变量/n,，/w,标识/n,乘客/n,性别/n,，/w,适合/v,转换/v,为/p,factor/en,类型/n,变量/n,age/en, ,整型/nw,变量/n,，/w,标识/n,乘客/n,年龄/n,，/w,有/v,缺/v,失值/nw,sibsp/en, ,整型/nw,变量/n,，/w,代表/n,兄弟/n,姐妹/n,及/c,配偶/n,的/u,个数/n,。/w,其中/r,sib/en,代表/n,sibling/en,也/d,即/v,兄弟/n,姐妹/n,，/w,sp/en,代表/n,spouse/en,也/d,即/v,配偶/n,parch/en, ,整型/nw,变量/n,，/w,代表/n,父母/n,或/c,子女/n,的/u,个数/n,。/w,其中/r,par/en,代表/n,parent/en,也/d,即/v,父母/n,，/w,ch/en,代表/n,child/en,也/d,即/v,子女/n,ticket/en, ,字符/n,型/k,变量/n,，/w,代表/n,乘客/n,的/u,船/n,票号/n,fare/en, ,数值/n,型/k,，/w,代表/n,乘客/n,的/u,船/n,票价/n,cabin/en, ,字符/n,型/k,，/w,代表/n,乘客/n,所/u,在/p,的/u,舱位/n,，/w,有/v,缺/v,失值/nw,embarked/en, ,字符/n,型/k,，/w,代表/n,乘客/n,登船/nz,口岸/n,，/w,适合/v,转换/v,为/p,factor/en,型/k,变量/n,探索/v,式/k,数据/n,分析/vn,乘客/n,社会/n,等级/n,越/d,高/a,，/w,幸存率/nw,越/d,高/a,对于/p,第一/m,个/q,变量/n,pclass/en,，/w,先/d,将/d,其/r,转换/v,为/p,factor/en,类型/n,变量/n,。/w,data/en,$/w,survived/en, ,</w,-/w, ,factor/en,(/w,data/en,$/w,survived/en,)/w,可/v,通过/p,如下/v,方式/n,统计/v,出/v,每个/r,pclass/en,幸存/v,和/c,遇难/v,人数/n,，/w,如下/v,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,pclass/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,pclass/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,pclass/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,scale/en,_,fill/en,_,manual/en,(/w,values/en,=/w,c/en,(/w,"/w,#,ff/en,0000/m,"/w,,/w, ,"/w,#,00/m,ff/en,00/m,"/w,)/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,从/p,上图/n,可见/v,，/w,pclass/en,=/w,1/m,的/u,乘客/n,大部分/m,幸存/v,，/w,pclass/en,=/w,2/m,的/u,乘客/n,接近/v,一半/m,幸存/v,，/w,而/c,pclass/en,=/w,3/m,的/u,乘客/n,只有/c,不/d,到/v,25%/mq,幸存/v,。/w,为了/p,更为/d,定量/v,的/u,计算/v,pclass/en,的/u,预测/v,价值/n,，/w,可以/v,算/v,出/v,pclass/en,的/u,woe/en,和/c,iv/en,如下/v,。/w,从/p,结果/n,可以/v,看出/v,，/w,pclass/en,的/u,iv/en,为/p,0.5/m,，/w,且/c,“/w,highly/en, ,predictive/en,”/w,。/w,由此/d,可以/v,暂时/d,将/d,pclass/en,作为/v,预测/v,模型/n,的/u,特征/n,变量/n,之一/r,。/w,woetable/en,(/w,x/en,=/w,factor/en,(/w,data/en,$/w,pclass/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,1/m, ,136/m, ,80/m, ,216/m, ,0.3976608/m, ,0.1457195/m, ,1.0039160/m, ,0.25292792/m, ,#,#, ,2/m, ,2/m, ,87/m, ,97/m, ,184/m, ,0.2543860/m, ,0.1766849/m, ,0.3644848/m, ,0.02832087/m, ,#,#, ,3/m, ,3/m, ,119/m, ,372/m, ,491/m, ,0.3479532/m, ,0.6775956/m, ,-/w,0.6664827/m, ,0.21970095/m,iv/en,(/w,x/en,=/w,factor/en,(/w,data/en,$/w,pclass/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.5009497/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,不同/a,title/en,的/u,乘客/n,幸存率/nw,不同/a,乘客/n,姓名/n,重复/v,度/q,太/d,低/a,，/w,不/d,适合/v,直接/ad,使用/v,。/w,而/c,姓名/n,中/f,包含/v,mr/en,./w, ,mrs/en,./w, ,dr/en,./w,等/u,具有/v,文化/n,特征/n,的/u,信息/n,，/w,可/v,将/d,之/u,抽取/vn,出来/v,。/w,本文/r,使用/v,如下/v,方式/n,从/p,姓名/n,中/f,抽取/vn,乘客/n,的/u,titledata/en,$/w,title/en, ,</w,-/w, ,sapply/en,(/w,data/en,$/w,name/en,,/w, ,fun/en,=/w,function/en,(/w,x/en,)/w, ,{/w,strsplit/en,(/w,x/en,,/w, ,split/en,=/w,'/w,[/w,,/w,./w,]/w,'/w,)/w,[/w,[/w,1/m,]/w,]/w,[/w,2/m,]/w,}/w,)/w, ,data/en,$/w,title/en, ,</w,-/w, ,sub/en,(/w,'/w, ,'/w,,/w, ,'/w,'/w,,/w, ,data/en,$/w,title/en,)/w, ,data/en,$/w,title/en,[/w,data/en,$/w,title/en, ,%/w,in/en,%/w, ,c/en,(/w,'/w,mme/en,'/w,,/w, ,'/w,mlle/en,'/w,)/w,]/w, ,</w,-/w, ,'/w,mlle/en,'/w, ,data/en,$/w,title/en,[/w,data/en,$/w,title/en, ,%/w,in/en,%/w, ,c/en,(/w,'/w,capt/en,'/w,,/w, ,'/w,don/en,'/w,,/w, ,'/w,major/en,'/w,,/w, ,'/w,sir/en,'/w,)/w,]/w, ,</w,-/w, ,'/w,sir/en,'/w, ,data/en,$/w,title/en,[/w,data/en,$/w,title/en, ,%/w,in/en,%/w, ,c/en,(/w,'/w,dona/en,'/w,,/w, ,'/w,lady/en,'/w,,/w, ,'/w,the/en, ,countess/en,'/w,,/w, ,'/w,jonkheer/en,'/w,)/w,]/w, ,</w,-/w, ,'/w,lady/en,'/w, ,data/en,$/w,title/en, ,</w,-/w, ,factor/en,(/w,data/en,$/w,title/en,)/w,抽取/vn,完/v,乘客/n,的/u,title/en,后/f,，/w,统计/v,出/v,不同/a,title/en,的/u,乘客/n,的/u,幸存/v,与/p,遇难/v,人数/n,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,title/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,position/en,=/w,'/w,stack/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,title/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,title/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,scale/en,_,fill/en,_,discrete/en,(/w,name/en,=/w,"/w,survived/en,"/w,,/w, ,breaks/en,=/w,c/en,(/w,0/m,,/w, ,1/m,)/w,,/w, ,labels/en,=/w,c/en,(/w,"/w,perish/en,"/w,,/w, ,"/w,survived/en,"/w,)/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,stack/en,(/w,vjust/en, ,=/w, ,0.5/m,)/w,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,从/p,上图/n,可/v,看出/v,，/w,title/en,为/p,mr/en,的/u,乘客/n,幸存/v,比例/n,非常/d,小/a,，/w,而/c,title/en,为/p,mrs/en,和/c,miss/en,的/u,乘客/n,幸存/v,比例/n,非常/d,大/a,。/w,这里/r,使用/v,woe/en,和/c,iv/en,来/v,定量/v,计算/v,title/en,这/r,一/m,变量/n,对于/p,最终/d,的/u,预测/v,是否/v,有用/a,。/w,从/p,计算/v,结果/n,可见/v,，/w,iv/en,为/p,1.520702/m,，/w,且/c,"/w,highly/en, ,predictive/en,"/w,。/w,因此/c,，/w,可/v,暂/d,将/d,title/en,作为/v,预测/v,模型/n,中/f,的/u,一个/m,特征/n,变量/n,。/w,woetable/en,(/w,x/en,=/w,data/en,$/w,title/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,col/en, ,1/m, ,1/m, ,2/m, ,0.002873563/m, ,0.001808318/m, ,0.46315552/m, ,4.933741/m,e/en,-/w,04/m, ,#,#, ,2/m, ,dr/en, ,3/m, ,4/m, ,7/m, ,0.008620690/m, ,0.007233273/m, ,0.17547345/m, ,2.434548/m,e/en,-/w,04/m, ,#,#, ,3/m, ,lady/en, ,2/m, ,1/m, ,3/m, ,0.005747126/m, ,0.001808318/m, ,1.15630270/m, ,4.554455/m,e/en,-/w,03/m, ,#,#, ,4/m, ,master/en, ,23/m, ,17/m, ,40/m, ,0.066091954/m, ,0.030741410/m, ,0.76543639/m, ,2.705859/m,e/en,-/w,02/m, ,#,#, ,5/m, ,miss/en, ,127/m, ,55/m, ,182/m, ,0.364942529/m, ,0.099457505/m, ,1.30000942/m, ,3.451330/m,e/en,-/w,01/m, ,#,#, ,6/m, ,mlle/en, ,3/m, ,3/m, ,3/m, ,0.008620690/m, ,0.005424955/m, ,0.46315552/m, ,1.480122/m,e/en,-/w,03/m, ,#,#, ,7/m, ,mr/en, ,81/m, ,436/m, ,517/m, ,0.232758621/m, ,0.788426763/m, ,-/w,1.22003757/m, ,6.779360/m,e/en,-/w,01/m, ,#,#, ,8/m, ,mrs/en, ,99/m, ,26/m, ,125/m, ,0.284482759/m, ,0.047016275/m, ,1.80017883/m, ,4.274821/m,e/en,-/w,01/m, ,#,#, ,9/m, ,ms/en, ,1/m, ,1/m, ,1/m, ,0.002873563/m, ,0.001808318/m, ,0.46315552/m, ,4.933741/m,e/en,-/w,04/m, ,#,#, ,10/m, ,rev/en, ,6/m, ,6/m, ,6/m, ,0.017241379/m, ,0.010849910/m, ,0.46315552/m, ,2.960244/m,e/en,-/w,03/m, ,#,#, ,11/m, ,sir/en, ,2/m, ,3/m, ,5/m, ,0.005747126/m, ,0.005424955/m, ,0.05769041/m, ,1.858622/m,e/en,-/w,05/m,iv/en,(/w,x/en,=/w,data/en,$/w,title/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,1.487853/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,女性/n,幸存率/nw,远/a,高于/v,男性/n,对于/p,sex/en,变量/n,，/w,由/p,titanic/en,号/q,沉没/v,的/u,背景/n,可知/v,，/w,逃生/v,时/ng,遵循/v,“/w,妇女/n,与/p,小孩/n,先/d,走/v,”/w,的/u,规则/n,，/w,由此/d,猜想/vn,，/w,sex/en,变量/n,应该/v,对/p,预测/v,乘客/n,幸存/v,有/v,帮助/v,。/w,如下/v,数据/n,验证/vn,了/u,这/r,一/m,猜想/vn,，/w,大部分/m,女性/n,（/w,233/m,//w,(/w,233/m,+/w,81/m,)/w,=/w,74.20%/mq,）/w,得以/v,幸存/v,，/w,而/c,男性/n,中/f,只/d,有/v,很/d,小/a,部分/n,（/w,109/m,//w,(/w,109/m,+/w,468/m,)/w,=/w,22.85%/mq,）/w,幸存/v,。/w,data/en,$/w,sex/en, ,</w,-/w, ,as/en,./w,factor/en,(/w,data/en,$/w,sex/en,)/w, ,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,sex/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,sex/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,sex/en, ,impact/en, ,survivo/en,'/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,通过/p,计算/v,woe/en,和/c,iv/en,可知/v,，/w,sex/en,的/u,iv/en,为/p,1.34/m,且/c,"/w,highly/en, ,predictive/en,"/w,，/w,可/v,暂/d,将/d,sex/en,作为/v,特征/n,变量/n,。/w,woetable/en,(/w,x/en,=/w,data/en,$/w,sex/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,female/en, ,233/m, ,81/m, ,314/m, ,0.6812865/m, ,0.147541/m, ,1.5298770/m, ,0.8165651/m, ,#,#, ,2/m, ,male/en, ,109/m, ,468/m, ,577/m, ,0.3187135/m, ,0.852459/m, ,-/w,0.9838327/m, ,0.5251163/m,iv/en,(/w,x/en,=/w,data/en,$/w,sex/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,1.341681/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,未成年人/n,幸存率/nw,高于/v,成年人/n,结合/v,背景/n,，/w,按照/p,“/w,妇女/n,与/p,小孩/n,先/d,走/v,”/w,的/u,规则/n,，/w,未成年人/n,应该/v,有/v,更/d,大/a,可能/v,幸存/v,。/w,如/v,下/f,图/n,所/u,示/vg,，/w,age/en, ,</w, ,18/m,的/u,乘客/n,中/f,，/w,幸存/v,人数/n,确实/ad,高于/v,遇难/v,人数/n,。/w,同时/c,青壮年/n,乘客/n,中/f,，/w,遇难/v,人数/n,远/a,高于/v,幸存/v,人数/n,。/w,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,(/w,!/w,is/en,./w,na/en,(/w,data/en,$/w,age/en,)/w,)/w, ,&/w, ,row/en,(/w,data/en,[/w,,/w, ,'/w,age/en,'/w,]/w,)/w, ,</w,=/w, ,891/m,,/w, ,]/w,,/w, ,aes/en,(/w,x/en, ,=/w, ,age/en,,/w, ,color/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,line/en,(/w,aes/en,(/w,label/en,=/w,./w,./w,count/en,./w,./w,)/w,,/w, ,stat/en, ,=/w, ,'/w,bin/en,'/w,,/w, ,binwidth/en,=/w,5/m,)/w, ,+/w, ,labs/en,(/w,title/en, ,=/w, ,"/w,how/en, ,age/en, ,impact/en, ,survivor/en,"/w,,/w, ,x/en, ,=/w, ,"/w,age/en,"/w,,/w, ,y/en, ,=/w, ,"/w,count/en,"/w,,/w, ,fill/en, ,=/w, ,"/w,survived/en,"/w,)/w,#,#, ,warning/en,:/w, ,ignoring/en, ,unknown/en, ,aesthetics/en,:/w, ,label/en,配偶/n,及/c,兄弟/n,姐妹/n,数/m,适中/a,的/u,乘客/n,更/d,易/a,幸存/v,对于/p,sibsp/en,变量/n,，/w,分别/d,统计/v,出/v,幸存/v,与/p,遇难/v,人数/n,。/w,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,sibsp/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,labs/en,(/w,title/en, ,=/w, ,"/w,how/en, ,sibsp/en, ,impact/en, ,survivor/en,"/w,,/w, ,x/en, ,=/w, ,"/w,sibsp/en,"/w,,/w, ,y/en, ,=/w, ,"/w,count/en,"/w,,/w, ,fill/en, ,=/w, ,"/w,survived/en,"/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,从/p,上图/n,可见/v,，/w,sibsp/en,为/p,0/m,的/u,乘客/n,，/w,幸存率/nw,低于/v,1/m,//w,3/m,；/w,sibsp/en,为/p,1/m,或/c,2/m,的/u,乘客/n,，/w,幸存率/nw,高于/v,50%/mq,；/w,sibsp/en,大于/v,等于/v,3/m,的/u,乘客/n,，/w,幸存率/nw,非常/d,低/a,。/w,可/v,通过/p,计算/v,woe/en,与/p,iv/en,定量/v,计算/v,sibsp/en,对/p,预测/v,的/u,贡献/n,。/w,iv/en,为/p,0.1448994/m,，/w,且/c,"/w,highly/en, ,predictive/en,"/w,。/w,woetable/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,sibsp/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,0/m, ,210/m, ,398/m, ,608/m, ,0.593220339/m, ,0.724954463/m, ,-/w,0.2005429/m, ,0.026418349/m, ,#,#, ,2/m, ,1/m, ,112/m, ,97/m, ,209/m, ,0.316384181/m, ,0.176684882/m, ,0.5825894/m, ,0.081387334/m, ,#,#, ,3/m, ,2/m, ,13/m, ,15/m, ,28/m, ,0.036723164/m, ,0.027322404/m, ,0.2957007/m, ,0.002779811/m, ,#,#, ,4/m, ,3/m, ,4/m, ,12/m, ,16/m, ,0.011299435/m, ,0.021857923/m, ,-/w,0.6598108/m, ,0.006966604/m, ,#,#, ,5/m, ,4/m, ,3/m, ,15/m, ,18/m, ,0.008474576/m, ,0.027322404/m, ,-/w,1.1706364/m, ,0.022063953/m, ,#,#, ,6/m, ,5/m, ,5/m, ,5/m, ,5/m, ,0.014124294/m, ,0.009107468/m, ,0.4388015/m, ,0.002201391/m, ,#,#, ,7/m, ,8/m, ,7/m, ,7/m, ,7/m, ,0.019774011/m, ,0.012750455/m, ,0.4388015/m, ,0.003081947/m,iv/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,sibsp/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.1448994/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,父母/n,与/p,子女/n,数/m,为/p,1/m,到/v,3/m,的/u,乘客/n,更/d,可能/v,幸存/v,对于/p,parch/en,变量/n,，/w,分别/d,统计/v,出/v,幸存/v,与/p,遇难/v,人数/n,。/w,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,parch/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,labs/en,(/w,title/en, ,=/w, ,"/w,how/en, ,parch/en, ,impact/en, ,survivor/en,"/w,,/w, ,x/en, ,=/w, ,"/w,parch/en,"/w,,/w, ,y/en, ,=/w, ,"/w,count/en,"/w,,/w, ,fill/en, ,=/w, ,"/w,survived/en,"/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,从/p,上图/n,可见/v,，/w,parch/en,为/p,0/m,的/u,乘客/n,，/w,幸存率/nw,低于/v,1/m,//w,3/m,；/w,parch/en,为/p,1/m,到/v,3/m,的/u,乘客/n,，/w,幸存率/nw,高于/v,50%/mq,；/w,parch/en,大于/v,等于/v,4/m,的/u,乘客/n,，/w,幸存率/nw,非常/d,低/a,。/w,可/v,通过/p,计算/v,woe/en,与/p,iv/en,定量/v,计算/v,parch/en,对/p,预测/v,的/u,贡献/n,。/w,iv/en,为/p,0.1166611/m,，/w,且/c,"/w,highly/en, ,predictive/en,"/w,。/w,woetable/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,parch/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,0/m, ,233/m, ,445/m, ,678/m, ,0.671469741/m, ,0.810564663/m, ,-/w,0.1882622/m, ,0.026186312/m, ,#,#, ,2/m, ,1/m, ,65/m, ,53/m, ,118/m, ,0.187319885/m, ,0.096539162/m, ,0.6628690/m, ,0.060175728/m, ,#,#, ,3/m, ,2/m, ,40/m, ,40/m, ,80/m, ,0.115273775/m, ,0.072859745/m, ,0.4587737/m, ,0.019458440/m, ,#,#, ,4/m, ,3/m, ,3/m, ,2/m, ,5/m, ,0.008645533/m, ,0.003642987/m, ,0.8642388/m, ,0.004323394/m, ,#,#, ,5/m, ,4/m, ,4/m, ,4/m, ,4/m, ,0.011527378/m, ,0.007285974/m, ,0.4587737/m, ,0.001945844/m, ,#,#, ,6/m, ,5/m, ,1/m, ,4/m, ,5/m, ,0.002881844/m, ,0.007285974/m, ,-/w,0.9275207/m, ,0.004084922/m, ,#,#, ,7/m, ,6/m, ,1/m, ,1/m, ,1/m, ,0.002881844/m, ,0.001821494/m, ,0.4587737/m, ,0.000486461/m,iv/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,parch/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.1166611/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,familysize/en,为/p,2/m,到/v,4/m,的/u,乘客/n,幸存/v,可能性/n,较/d,高/a,sibsp/en,与/p,parch/en,都/d,说明/v,，/w,当/p,乘客/n,无/v,亲人/n,时/ng,，/w,幸存率/nw,较/d,低/a,，/w,乘客/n,有/v,少数/m,亲人/n,时/ng,，/w,幸存率/nw,高于/v,50%/mq,，/w,而/c,当/p,亲人/n,数/m,过/u,高/a,时/ng,，/w,幸存率/nw,反而/d,降低/v,。/w,在/p,这里/r,，/w,可以/v,考虑/v,将/d,sibsp/en,与/p,parch/en,相加/v,，/w,生成/vn,新/a,的/u,变量/n,，/w,familysize/en,。/w,data/en,$/w,familysize/en, ,</w,-/w, ,data/en,$/w,sibsp/en, ,+/w, ,data/en,$/w,parch/en, ,+/w, ,1/m, ,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,familysize/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,familysize/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,familysize/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,计算/v,familysize/en,的/u,woe/en,和/c,iv/en,可知/v,，/w,iv/en,为/p,0.3497672/m,，/w,且/c,“/w,highly/en, ,predictive/en,”/w,。/w,由/p,sibsp/en,与/p,parch/en,派生/v,出来/v,的/u,新/a,变量/n,familysize/en,的/u,iv/en,高于/v,sibsp/en,与/p,parch/en,的/u,iv/en,，/w,因此/c,，/w,可/v,将/d,这个/r,派生/v,变量/n,familysize/en,作为/v,特征/n,变量/n,。/w,woetable/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,familysize/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,1/m, ,163/m, ,374/m, ,537/m, ,0.459154930/m, ,0.68123862/m, ,-/w,0.3945249/m, ,0.0876175539/m, ,#,#, ,2/m, ,2/m, ,89/m, ,72/m, ,161/m, ,0.250704225/m, ,0.13114754/m, ,0.6479509/m, ,0.0774668616/m, ,#,#, ,3/m, ,3/m, ,59/m, ,43/m, ,102/m, ,0.166197183/m, ,0.07832423/m, ,0.7523180/m, ,0.0661084057/m, ,#,#, ,4/m, ,4/m, ,21/m, ,8/m, ,29/m, ,0.059154930/m, ,0.01457195/m, ,1.4010615/m, ,0.0624634998/m, ,#,#, ,5/m, ,5/m, ,3/m, ,12/m, ,15/m, ,0.008450704/m, ,0.02185792/m, ,-/w,0.9503137/m, ,0.0127410643/m, ,#,#, ,6/m, ,6/m, ,3/m, ,19/m, ,22/m, ,0.008450704/m, ,0.03460838/m, ,-/w,1.4098460/m, ,0.0368782940/m, ,#,#, ,7/m, ,7/m, ,4/m, ,8/m, ,12/m, ,0.011267606/m, ,0.01457195/m, ,-/w,0.2571665/m, ,0.0008497665/m, ,#,#, ,8/m, ,8/m, ,6/m, ,6/m, ,6/m, ,0.016901408/m, ,0.01092896/m, ,0.4359807/m, ,0.0026038712/m, ,#,#, ,9/m, ,11/m, ,7/m, ,7/m, ,7/m, ,0.019718310/m, ,0.01275046/m, ,0.4359807/m, ,0.0030378497/m,iv/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,familysize/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.3497672/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,共/d,票号/n,乘客/n,幸存率/nw,高/a,对于/p,ticket/en,变量/n,，/w,重复/v,度/q,非常/d,低/a,，/w,无法/v,直接/ad,利用/v,。/w,先/d,统计/v,出/v,每/r,张/q,票/n,对应/v,的/u,乘客/n,数/m,。/w,ticket/en,./w,count/en, ,</w,-/w, ,aggregate/en,(/w,data/en,$/w,ticket/en,,/w, ,by/en, ,=/w, ,list/en,(/w,data/en,$/w,ticket/en,)/w,,/w, ,function/en,(/w,x/en,)/w, ,sum/en,(/w,!/w,is/en,./w,na/en,(/w,x/en,)/w,)/w,)/w,这里/r,有/v,个/q,猜想/vn,，/w,票号/n,相同/a,的/u,乘客/n,，/w,是/v,一家人/n,，/w,很/d,可能/v,同时/c,幸存/v,或者/c,同时/c,遇难/v,。/w,现/tg,将/d,所有/b,乘客/n,按照/p,ticket/en,分为/v,两组/mq,，/w,一组/mq,是/v,使用/v,单独/d,票号/n,，/w,另/r,一组/mq,是/v,与/p,他人/r,共享/v,票号/n,，/w,并/c,统计/v,出/v,各组/r,的/u,幸存/v,与/p,遇难/v,人数/n,。/w,data/en,$/w,ticketcount/en, ,</w,-/w, ,apply/en,(/w,data/en,,/w, ,1/m,,/w, ,function/en,(/w,x/en,)/w, ,ticket/en,./w,count/en,[/w,which/en,(/w,ticket/en,./w,count/en,[/w,,/w, ,1/m,]/w, ,=/w,=/w, ,x/en,[/w,'/w,ticket/en,'/w,]/w,)/w,,/w, ,2/m,]/w,)/w, ,data/en,$/w,ticketcount/en, ,</w,-/w, ,factor/en,(/w,sapply/en,(/w,data/en,$/w,ticketcount/en,,/w, ,function/en,(/w,x/en,)/w, ,ifelse/en,(/w,x/en, ,>, ,1/m,,/w, ,'/w,share/en,'/w,,/w, ,'/w,unique/en,'/w,)/w,)/w,)/w, ,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,ticketcount/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,ticketcount/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,ticketcount/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,由/p,上图/n,可见/v,，/w,未/d,与/p,他人/r,同/p,票号/n,的/u,乘客/n,，/w,只有/c,130/m,//w,(/w,130/m,+/w,351/m,)/w,=/w,27%/mq,幸存/v,，/w,而/c,与/p,他人/r,同/p,票号/n,的/u,乘客/n,有/v,212/m,//w,(/w,212/m,+/w,198/m,)/w,=/w,51.7%/mq,幸存/v,。/w,计算/v,ticketcount/en,的/u,woe/en,与/p,iv/en,如下/v,。/w,其/r,iv/en,为/p,0.2751882/m,，/w,且/c,"/w,highly/en, ,predictive/en,"/w,woetable/en,(/w,x/en,=/w,data/en,$/w,ticketcount/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,share/en, ,212/m, ,198/m, ,410/m, ,0.619883/m, ,0.3606557/m, ,0.5416069/m, ,0.1403993/m, ,#,#, ,2/m, ,unique/en, ,130/m, ,351/m, ,481/m, ,0.380117/m, ,0.6393443/m, ,-/w,0.5199641/m, ,0.1347889/m,iv/en,(/w,x/en,=/w,data/en,$/w,ticketcount/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.2751882/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,支出/n,船票费/nw,越/d,高/a,幸存率/nw,越/d,高/a,对于/p,fare/en,变量/n,，/w,由/p,下/f,图/n,可知/v,，/w,fare/en,越/d,大/a,，/w,幸存率/nw,越/d,高/a,。/w,ggplot/en,(/w,data/en, ,=/w, ,data/en,[/w,(/w,!/w,is/en,./w,na/en,(/w,data/en,$/w,fare/en,)/w,)/w, ,&/w, ,row/en,(/w,data/en,[/w,,/w, ,'/w,fare/en,'/w,]/w,)/w, ,</w,=/w, ,891/m,,/w, ,]/w,,/w, ,aes/en,(/w,x/en, ,=/w, ,fare/en,,/w, ,color/en,=/w,survived/en,)/w,)/w, ,+/w, ,geom/en,_,line/en,(/w,aes/en,(/w,label/en,=/w,./w,./w,count/en,./w,./w,)/w,,/w, ,stat/en, ,=/w, ,'/w,bin/en,'/w,,/w, ,binwidth/en,=/w,10/m,)/w, ,+/w, ,labs/en,(/w,title/en, ,=/w, ,"/w,how/en, ,fare/en, ,impact/en, ,survivor/en,"/w,,/w, ,x/en, ,=/w, ,"/w,fare/en,"/w,,/w, ,y/en, ,=/w, ,"/w,count/en,"/w,,/w, ,fill/en, ,=/w, ,"/w,survived/en,"/w,)/w,不同/a,仓位/nz,的/u,乘客/n,幸存率/nw,不同/a,对于/p,cabin/en,变量/n,，/w,其/r,值/n,以/p,字母/n,开始/v,，/w,后面/f,伴/v,以/p,数字/n,。/w,这里/r,有/v,一个/m,猜想/vn,，/w,字母/n,代表/n,某个/r,区域/n,，/w,数据/n,代表/n,该/r,区域/n,的/u,序号/n,。/w,类似/v,于/p,火车票/n,即/v,有/v,车/n,箱号/nw,又/d,有/v,座位号/n,。/w,因此/c,，/w,这里/r,可/v,尝试/vn,将/d,cabin/en,的/u,首/m,字母/n,提取/v,出来/v,，/w,并/c,分别/d,统计/v,出/v,不同/a,首/m,字母/n,仓位/nz,对应/v,的/u,乘客/n,的/u,幸存率/nw,。/w,ggplot/en,(/w,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w, ,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,as/en,./w,factor/en,(/w,sapply/en,(/w,data/en,$/w,cabin/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,,/w, ,function/en,(/w,x/en,)/w, ,str/en,_,sub/en,(/w,x/en,,/w, ,start/en, ,=/w, ,1/m,,/w, ,end/en, ,=/w, ,1/m,)/w,)/w,)/w,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en, ,=/w, ,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,cabin/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,cabin/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,由/p,上图/n,可见/v,，/w,仓位/nz,号/q,首/m,字母/n,为/p,b/en,，/w,c/en,，/w,d/en,，/w,e/en,，/w,f/en,的/u,乘客/n,幸存率/nw,均/d,高于/v,50%/mq,，/w,而/c,其它/r,仓位/nz,的/u,乘客/n,幸存率/nw,均/d,远/a,低于/v,50%/mq,。/w,仓位/nz,变量/n,的/u,woe/en,及/c,iv/en,计算/v,如下/v,。/w,由此可见/c,，/w,cabin/en,的/u,iv/en,为/p,0.1866526/m,，/w,且/c,“/w,highly/en, ,predictive/en,”/w,data/en,$/w,cabin/en, ,</w,-/w, ,sapply/en,(/w,data/en,$/w,cabin/en,,/w, ,function/en,(/w,x/en,)/w, ,str/en,_,sub/en,(/w,x/en,,/w, ,start/en, ,=/w, ,1/m,,/w, ,end/en, ,=/w, ,1/m,)/w,)/w, ,woetable/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,cabin/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,a/en, ,7/m, ,8/m, ,15/m, ,0.05109489/m, ,0.11764706/m, ,-/w,0.8340046/m, ,0.055504815/m, ,#,#, ,2/m, ,b/en, ,35/m, ,12/m, ,47/m, ,0.25547445/m, ,0.17647059/m, ,0.3699682/m, ,0.029228917/m, ,#,#, ,3/m, ,c/en, ,35/m, ,24/m, ,59/m, ,0.25547445/m, ,0.35294118/m, ,-/w,0.3231790/m, ,0.031499197/m, ,#,#, ,4/m, ,d/en, ,25/m, ,8/m, ,33/m, ,0.18248175/m, ,0.11764706/m, ,0.4389611/m, ,0.028459906/m, ,#,#, ,5/m, ,e/en, ,24/m, ,8/m, ,32/m, ,0.17518248/m, ,0.11764706/m, ,0.3981391/m, ,0.022907100/m, ,#,#, ,6/m, ,f/en, ,8/m, ,5/m, ,13/m, ,0.05839416/m, ,0.07352941/m, ,-/w,0.2304696/m, ,0.003488215/m, ,#,#, ,7/m, ,g/en, ,2/m, ,2/m, ,4/m, ,0.01459854/m, ,0.02941176/m, ,-/w,0.7004732/m, ,0.010376267/m, ,#,#, ,8/m, ,t/en, ,1/m, ,1/m, ,1/m, ,0.00729927/m, ,0.01470588/m, ,-/w,0.7004732/m, ,0.005188134/m,iv/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,cabin/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.1866526/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,embarked/en,为/p,s/en,的/u,乘客/n,幸存率/nw,较/d,低/a,embarked/en,变量/n,代表/n,登船/nz,码头/n,，/w,现/tg,通过/p,统计/v,不同/a,码头/n,登船/nz,的/u,乘客/n,幸存率/nw,来/v,判断/v,embarked/en,是否/v,可/v,用于/v,预测/v,乘客/n,幸存/v,情况/n,。/w,ggplot/en,(/w,data/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w, ,]/w,,/w, ,mapping/en, ,=/w, ,aes/en,(/w,x/en, ,=/w, ,embarked/en,,/w, ,y/en, ,=/w, ,./w,./w,count/en,./w,./w,,/w, ,fill/en, ,=/w, ,survived/en,)/w,)/w, ,+/w, ,geom/en,_,bar/en,(/w,stat/en, ,=/w, ,'/w,count/en,'/w,,/w, ,position/en,=/w,'/w,dodge/en,'/w,)/w, ,+/w, ,xlab/en,(/w,'/w,embarked/en,'/w,)/w, ,+/w, ,ylab/en,(/w,'/w,count/en,'/w,)/w, ,+/w, ,ggtitle/en,(/w,'/w,how/en, ,embarked/en, ,impact/en, ,survivor/en,'/w,)/w, ,+/w, ,geom/en,_,text/en,(/w,stat/en, ,=/w, ,"/w,count/en,"/w,,/w, ,aes/en,(/w,label/en, ,=/w, ,./w,./w,count/en,./w,./w,)/w,,/w, ,position/en,=/w,position/en,_,dodge/en,(/w,width/en,=/w,1/m,)/w,,/w, ,,/w, ,vjust/en,=/w,-/w,0.5/m,)/w, ,+/w, ,theme/en,(/w,plot/en,./w,title/en, ,=/w, ,element/en,_,text/en,(/w,hjust/en, ,=/w, ,0.5/m,)/w,,/w, ,legend/en,./w,position/en,=/w,"/w,bottom/en,"/w,)/w,从/p,上图/n,可见/v,，/w,embarked/en,为/p,s/en,的/u,乘客/n,幸存率/nw,仅/d,为/p,217/m,//w,(/w,217/m,+/w,427/m,)/w,=/w,33.7%/mq,，/w,而/c,embarked/en,为/p,c/en,或/c,为/p,na/en,的/u,乘客/n,幸存率/nw,均/d,高于/v,50%/mq,。/w,初步/d,判断/v,embarked/en,可/v,用于/v,预测/v,乘客/n,是否/v,幸存/v,。/w,embarked/en,的/u,woe/en,和/c,iv/en,计算/v,如下/v,。/w,woetable/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,embarked/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,cat/en, ,goods/en, ,bads/en, ,total/en, ,pct/en,_,g/en, ,pct/en,_,b/en, ,woe/en, ,iv/en, ,#,#, ,1/m, ,c/en, ,93/m, ,75/m, ,168/m, ,0.27352941/m, ,0.1366120/m, ,0.6942642/m, ,9.505684/m,e/en,-/w,02/m, ,#,#, ,2/m, ,q/en, ,30/m, ,47/m, ,77/m, ,0.08823529/m, ,0.0856102/m, ,0.0302026/m, ,7.928467/m,e/en,-/w,05/m, ,#,#, ,3/m, ,s/en, ,217/m, ,427/m, ,644/m, ,0.63823529/m, ,0.7777778/m, ,-/w,0.1977338/m, ,2.759227/m,e/en,-/w,02/m,iv/en,(/w,x/en,=/w,as/en,./w,factor/en,(/w,data/en,$/w,embarked/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,,/w, ,y/en,=/w,data/en,$/w,survived/en,[/w,1/m,:/w,nrow/en,(/w,train/en,)/w,]/w,)/w,#,#, ,[/w,1/m,]/w, ,0.1227284/m, ,#,#, ,attr/en,(/w,,/w,"/w,howgood/en,"/w,)/w, ,#,#, ,[/w,1/m,]/w, ,"/w,highly/en, ,predictive/en,"/w,从/p,上述/b,计算/v,结果/n,可见/v,，/w,iv/en,为/p,0.1227284/m,，/w,且/c,“/w,highly/en, ,predictive/en,”/w,。/w,填补/v,缺/v,失值/nw,列出/v,所有/b,缺失/n,数据/n,attach/en,(/w,data/en,)/w, ,missing/en, ,</w,-/w, ,list/en,(/w,pclass/en,=/w,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,pclass/en,)/w,,/w, ,]/w,)/w,)/w, ,missing/en,$/w,name/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,name/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,sex/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,sex/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,age/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,age/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,sibsp/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,sibsp/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,parch/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,parch/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,ticket/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,ticket/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,fare/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,fare/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,cabin/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,cabin/en,)/w,,/w, ,]/w,)/w, ,missing/en,$/w,embarked/en, ,</w,-/w, ,nrow/en,(/w,data/en,[/w,is/en,./w,na/en,(/w,embarked/en,)/w,,/w, ,]/w,)/w, ,for/en, ,(/w,name/en, ,in/en, ,names/en,(/w,missing/en,)/w,)/w, ,{/w, ,if/en, ,(/w,missing/en,[/w,[/w,name/en,]/w,]/w,[/w,1/m,]/w, ,>, ,0/m,)/w, ,{/w, ,print/en,(/w,paste/en,(/w,'/w,'/w,,/w, ,name/en,,/w, ,'/w, ,miss/en, ,'/w,,/w, ,missing/en,[/w,[/w,name/en,]/w,]/w,[/w,1/m,]/w,,/w, ,'/w, ,values/en,'/w,,/w, ,sep/en, ,=/w, ,'/w,'/w,)/w,)/w, ,}/w, ,}/w, ,detach/en,(/w,data/en,)/w,#,#, ,[/w,1/m,]/w, ,"/w,age/en, ,miss/en, ,263/m, ,values/en,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,fare/en, ,miss/en, ,1/m, ,values/en,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,cabin/en, ,miss/en, ,1014/m, ,values/en,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,embarked/en, ,miss/en, ,2/m, ,values/en,"/w,预测/v,乘客/n,年龄/n,缺失/n,年龄/n,信息/n,的/u,乘客/n,数/m,为/p,263/m,，/w,缺/v,失量/nw,比较/d,大/a,，/w,不/d,适合/v,使用/v,中位数/nz,或者/c,平均值/n,填补/v,。/w,一般/a,通过/p,使用/v,其它/r,变量/n,预测/v,或者/c,直接/ad,将/d,缺失/n,值/n,设置/v,为/p,默认值/nw,的/u,方法/n,填补/v,，/w,这里/r,通过/p,其它/r,变量/n,来/v,预测/v,缺失/n,的/u,年龄/n,信息/n,。/w,age/en,./w,model/en, ,</w,-/w, ,rpart/en,(/w,age/en, ,~/w, ,pclass/en, ,+/w, ,sex/en, ,+/w, ,sibsp/en, ,+/w, ,parch/en, ,+/w, ,fare/en, ,+/w, ,embarked/en, ,+/w, ,title/en, ,+/w, ,familysize/en,,/w, ,data/en,=/w,data/en,[/w,!/w,is/en,./w,na/en,(/w,data/en,$/w,age/en,)/w,,/w, ,]/w,,/w, ,method/en,=/w,'/w,anova/en,'/w,)/w, ,data/en,$/w,age/en,[/w,is/en,./w,na/en,(/w,data/en,$/w,age/en,)/w,]/w, ,</w,-/w, ,predict/en,(/w,age/en,./w,model/en,,/w, ,data/en,[/w,is/en,./w,na/en,(/w,data/en,$/w,age/en,)/w,,/w, ,]/w,)/w,中位数/nz,填补/v,缺失/n,的/u,embarked/en,值/n,从/p,如下/v,数据/n,可见/v,，/w,缺失/n,embarked/en,信息/n,的/u,乘客/n,的/u,pclass/en,均/d,为/p,1/m,，/w,且/c,fare/en,均/d,为/p,80/m,。/w,data/en,[/w,is/en,./w,na/en,(/w,data/en,$/w,embarked/en,)/w,,/w, ,c/en,(/w,'/w,passengerid/en,'/w,,/w, ,'/w,pclass/en,'/w,,/w, ,'/w,fare/en,'/w,,/w, ,'/w,embarked/en,'/w,)/w,]/w,#,#, ,#, ,a/en, ,tibble/en,:/w, ,2/m, ,×/w, ,4/m, ,#,#, ,passengerid/en, ,pclass/en, ,fare/en, ,embarked/en, ,#,#, ,</w,int/en,>, ,</w,int/en,>, ,</w,dbl/en,>, ,</w,chr/en,>, ,#,#, ,1/m, ,62/m, ,1/m, ,80/m, ,</w,na/en,>, ,#,#, ,2/m, ,830/m, ,1/m, ,80/m, ,</w,na/en,>,由/p,下/f,图/n,所/u,见/v,，/w,embarked/en,为/p,c/en,且/c,pclass/en,为/p,1/m,的/u,乘客/n,的/u,fare/en,中位数/nz,为/p,80/m,。/w,ggplot/en,(/w,data/en,[/w,!/w,is/en,./w,na/en,(/w,data/en,$/w,embarked/en,)/w,,/w,]/w,,/w, ,aes/en,(/w,x/en,=/w,embarked/en,,/w, ,y/en,=/w,fare/en,,/w, ,fill/en,=/w,factor/en,(/w,pclass/en,)/w,)/w,)/w, ,+/w, ,geom/en,_,boxplot/en,(/w,)/w, ,+/w, ,geom/en,_,hline/en,(/w,aes/en,(/w,yintercept/en,=/w,80/m,)/w,,/w, ,color/en,=/w,'/w,red/en,'/w,,/w, ,linetype/en,=/w,'/w,dashed/en,'/w,,/w, ,lwd/en,=/w,2/m,)/w, ,+/w, ,scale/en,_,y/en,_,continuous/en,(/w,labels/en,=/w,dollar/en,_,format/en,(/w,)/w,)/w, ,+/w, ,theme/en,_,few/en,(/w,)/w,因此/c,可以/v,将/d,缺失/n,的/u,embarked/en,值/n,设置/v,为/p,'/w,c/en,'/w,。/w,data/en,$/w,embarked/en,[/w,is/en,./w,na/en,(/w,data/en,$/w,embarked/en,)/w,]/w, ,</w,-/w, ,'/w,c/en,'/w, ,data/en,$/w,embarked/en, ,</w,-/w, ,as/en,./w,factor/en,(/w,data/en,$/w,embarked/en,)/w,中位数/nz,填补/v,一个/m,缺失/n,的/u,fare/en,值/n,由于/c,缺失/n,fare/en,值/n,的/u,记录/v,非常/d,少/a,，/w,一般/a,可/v,直接/ad,使用/v,平均值/n,或者/c,中位数/nz,填补/v,该/r,缺失/n,值/n,。/w,这里/r,使用/v,乘客/n,的/u,fare/en,中位数/nz,填补/v,缺失/n,值/n,。/w,data/en,$/w,fare/en,[/w,is/en,./w,na/en,(/w,data/en,$/w,fare/en,)/w,]/w, ,</w,-/w, ,median/en,(/w,data/en,$/w,fare/en,,/w, ,na/en,./w,rm/en,=/w,true/en,)/w,将/d,缺失/n,的/u,cabin/en,设置/v,为/p,默认值/nw,缺失/n,cabin/en,信息/n,的/u,记录/v,数/m,较/d,多/a,，/w,不/d,适合/v,使用/v,中位数/nz,或者/c,平均值/n,填补/v,，/w,一般/a,通过/p,使用/v,其它/r,变量/n,预测/v,或者/c,直接/ad,将/d,缺失/n,值/n,设置/v,为/p,默认值/nw,的/u,方法/n,填补/v,。/w,由于/c,cabin/en,信息/n,不/d,太/d,容易/a,从/p,其它/r,变量/n,预测/v,，/w,并且/c,在/p,上/f,一节/mq,中/f,，/w,将/d,na/en,单独/d,对待/v,时/ng,，/w,其/r,iv/en,已经/d,比较/d,高/a,。/w,因此/c,这里/r,直接/ad,将/d,缺失/n,的/u,cabin/en,设置/v,为/p,一个/m,默认值/nw,。/w,data/en,$/w,cabin/en, ,</w,-/w, ,as/en,./w,factor/en,(/w,sapply/en,(/w,data/en,$/w,cabin/en,,/w, ,function/en,(/w,x/en,)/w, ,ifelse/en,(/w,is/en,./w,na/en,(/w,x/en,)/w,,/w, ,'/w,x/en,'/w,,/w, ,str/en,_,sub/en,(/w,x/en,,/w, ,start/en, ,=/w, ,1/m,,/w, ,end/en, ,=/w, ,1/m,)/w,)/w,)/w,)/w,训练/vn,模型/n,set/en,./w,seed/en,(/w,415/m,)/w, ,model/en, ,</w,-/w, ,cforest/en,(/w,survived/en, ,~/w, ,pclass/en, ,+/w, ,title/en, ,+/w, ,sex/en, ,+/w, ,age/en, ,+/w, ,sibsp/en, ,+/w, ,parch/en, ,+/w, ,familysize/en, ,+/w, ,ticketcount/en, ,+/w, ,fare/en, ,+/w, ,cabin/en, ,+/w, ,embarked/en,,/w, ,data/en, ,=/w, ,data/en,[/w,train/en,./w,row/en,,/w, ,]/w,,/w, ,controls/en,=/w,cforest/en,_,unbiased/en,(/w,ntree/en,=/w,2000/m,,/w, ,mtry/en,=/w,3/m,)/w,)/w,交叉/vn,验证/vn,一般/a,情况/n,下/f,，/w,应该/v,将/d,训练/vn,数据/n,分为/v,两/m,部分/n,，/w,一部分/m,用于/v,训练/vn,，/w,另/r,一部分/m,用于/v,验证/vn,。/w,或者/c,使用/v,k/en,-/w,fold/en,交叉/vn,验证/vn,。/w,本文/r,将/d,所有/b,训练/vn,数据/n,都/d,用于/v,训练/vn,，/w,然后/c,随机/d,选取/v,30%/mq,数据集/nw,用于/v,验证/vn,。/w,cv/en,./w,summarize/en, ,</w,-/w, ,function/en,(/w,data/en,./w,true/en,,/w, ,data/en,./w,predict/en,)/w, ,{/w, ,print/en,(/w,paste/en,(/w,'/w,recall/en,:/w,'/w,,/w, ,recall/en,(/w,data/en,./w,true/en,,/w, ,data/en,./w,predict/en,)/w,)/w,)/w, ,print/en,(/w,paste/en,(/w,'/w,precision/en,:/w,'/w,,/w, ,precision/en,(/w,data/en,./w,true/en,,/w, ,data/en,./w,predict/en,)/w,)/w,)/w, ,print/en,(/w,paste/en,(/w,'/w,accuracy/en,:/w,'/w,,/w, ,accuracy/en,(/w,data/en,./w,predict/en,,/w, ,data/en,./w,true/en,)/w,)/w,)/w, ,print/en,(/w,paste/en,(/w,'/w,auc/en,:/w,'/w,,/w, ,auc/en,(/w,data/en,./w,predict/en,,/w, ,data/en,./w,true/en,)/w,)/w,)/w, ,}/w, ,set/en,./w,seed/en,(/w,415/m,)/w, ,cv/en,./w,test/en,./w,sample/en, ,</w,-/w, ,sample/en,(/w,1/m,:/w,nrow/en,(/w,train/en,)/w,,/w, ,as/en,./w,integer/en,(/w,0.3/m, ,*/w, ,nrow/en,(/w,train/en,)/w,)/w,,/w, ,replace/en, ,=/w, ,true/en,)/w, ,cv/en,./w,test/en, ,</w,-/w, ,data/en,[/w,cv/en,./w,test/en,./w,sample/en,,/w,]/w, ,cv/en,./w,prediction/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,cv/en,./w,test/en,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,cv/en,./w,summarize/en,(/w,cv/en,./w,test/en,$/w,survived/en,,/w, ,cv/en,./w,prediction/en,)/w,#,#, ,[/w,1/m,]/w, ,"/w,recall/en,:/w, ,0.947976878612717/m,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,precision/en,:/w, ,0.841025641025641/m,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,accuracy/en,:/w, ,0.850187265917603/m,"/w, ,#,#, ,[/w,1/m,]/w, ,"/w,auc/en,:/w, ,0.809094822285082/m,"/w,预测/v,predict/en,./w,result/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,data/en,[/w,(/w,1/m,+/w,nrow/en,(/w,train/en,)/w,)/w,:/w,(/w,nrow/en,(/w,data/en,)/w,)/w,,/w, ,]/w,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,output/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,passengerid/en, ,=/w, ,test/en,$/w,passengerid/en,,/w, ,survived/en, ,=/w, ,predict/en,./w,result/en,)/w, ,write/en,./w,csv/en,(/w,output/en,,/w, ,file/en, ,=/w, ,"/w,cit/en,1/m,./w,csv/en,"/w,,/w, ,row/en,./w,names/en, ,=/w, ,false/en,)/w,该/r,模型/n,预测/v,结果/n,在/p,kaggle/en,的/u,得分/n,为/p,0.80383/m,，/w,排/v,第/m,992名/mq,，/w,前/f,992/m,//w,6292/m,=/w,15.8%/mq,。/w,调/v,优/ag,去掉/v,关联/vn,特征/n,由于/c,familysize/en,结合/v,了/u,sibsp/en,与/p,parch/en,的/u,信息/n,，/w,因此/c,可以/v,尝试/vn,将/d,sibsp/en,与/p,parch/en,从/p,特征/n,变量/n,中/f,移除/v,。/w,set/en,./w,seed/en,(/w,415/m,)/w, ,model/en, ,</w,-/w, ,cforest/en,(/w,survived/en, ,~/w, ,pclass/en, ,+/w, ,title/en, ,+/w, ,sex/en, ,+/w, ,age/en, ,+/w, ,familysize/en, ,+/w, ,ticketcount/en, ,+/w, ,fare/en, ,+/w, ,cabin/en, ,+/w, ,embarked/en,,/w, ,data/en, ,=/w, ,data/en,[/w,train/en,./w,row/en,,/w, ,]/w,,/w, ,controls/en,=/w,cforest/en,_,unbiased/en,(/w,ntree/en,=/w,2000/m,,/w, ,mtry/en,=/w,3/m,)/w,)/w, ,predict/en,./w,result/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,data/en,[/w,test/en,./w,row/en,,/w, ,]/w,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,submit/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,passengerid/en, ,=/w, ,test/en,$/w,passengerid/en,,/w, ,survived/en, ,=/w, ,predict/en,./w,result/en,)/w, ,write/en,./w,csv/en,(/w,submit/en,,/w, ,file/en, ,=/w, ,"/w,cit/en,2/m,./w,csv/en,"/w,,/w, ,row/en,./w,names/en, ,=/w, ,false/en,)/w,该/r,模型/n,预测/v,结果/n,在/p,kaggle/en,的/u,得分/n,仍/d,为/p,0.80383/m,。/w,去掉/v,iv/en,较/d,低/a,的/u,cabin/en,由于/c,cabin/en,的/u,iv/en,值/n,相对/d,较/d,低/a,，/w,因此/c,可以/v,考虑/v,将/d,其/r,从/p,模型/n,中/f,移除/v,。/w,set/en,./w,seed/en,(/w,415/m,)/w, ,model/en, ,</w,-/w, ,cforest/en,(/w,survived/en, ,~/w, ,pclass/en, ,+/w, ,title/en, ,+/w, ,sex/en, ,+/w, ,age/en, ,+/w, ,familysize/en, ,+/w, ,ticketcount/en, ,+/w, ,fare/en, ,+/w, ,embarked/en,,/w, ,data/en, ,=/w, ,data/en,[/w,train/en,./w,row/en,,/w, ,]/w,,/w, ,controls/en,=/w,cforest/en,_,unbiased/en,(/w,ntree/en,=/w,2000/m,,/w, ,mtry/en,=/w,3/m,)/w,)/w, ,predict/en,./w,result/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,data/en,[/w,test/en,./w,row/en,,/w, ,]/w,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,submit/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,passengerid/en, ,=/w, ,test/en,$/w,passengerid/en,,/w, ,survived/en, ,=/w, ,predict/en,./w,result/en,)/w, ,write/en,./w,csv/en,(/w,submit/en,,/w, ,file/en, ,=/w, ,"/w,cit/en,3/m,./w,csv/en,"/w,,/w, ,row/en,./w,names/en, ,=/w, ,false/en,)/w,该/r,模型/n,预测/v,结果/n,在/p,kaggle/en,的/u,得分/n,仍/d,为/p,0.80383/m,。/w,增加/v,派生/v,特征/n,对于/p,name/en,变量/n,，/w,上文/n,从中/d,派生/v,出/v,了/u,title/en,变量/n,。/w,由于/c,以下/f,原因/n,，/w,可/v,推测/v,乘客/n,的/u,姓氏/n,可能/v,具有/v,一定/d,的/u,预测/v,作用/n,部分/n,西方/s,国家/n,中/f,人名/n,的/u,重复/v,度/q,较/d,高/a,，/w,而/c,姓氏/n,重复/v,度/q,较/d,低/a,，/w,姓氏/n,具有/v,一定/d,辨识度/nw,部分/n,国家/n,的/u,姓氏/n,具有/v,一定/d,的/u,身份/n,识别/v,作用/n,姓氏/n,相同/a,的/u,乘客/n,，/w,可能/v,是/v,一家人/n,（/w,这/r,一点/m,也/d,基于/p,西方/s,国家/n,姓氏/n,重复/v,度/q,较/d,低/a,这/r,一/m,特点/n,）/w,，/w,而/c,一家人/n,同时/c,幸存/v,或/c,遇难/v,的/u,可能性/n,较/d,高/a,考虑/v,到/v,只/d,出现/v,一次/mq,的/u,姓氏/n,不/d,可能/v,同时/c,出现/v,在/p,训练集/nw,和/c,测试/vn,集中/v,，/w,不/d,具/vg,辨识度/nw,和/c,预测/v,作用/n,，/w,因此/c,将/d,只/d,出现/v,一次/mq,的/u,姓氏/n,均/d,命名/v,为/p,'/w,small/en,'/w,data/en,$/w,surname/en, ,</w,-/w, ,sapply/en,(/w,data/en,$/w,name/en,,/w, ,fun/en,=/w,function/en,(/w,x/en,)/w, ,{/w,strsplit/en,(/w,x/en,,/w, ,split/en,=/w,'/w,[/w,,/w,./w,]/w,'/w,)/w,[/w,[/w,1/m,]/w,]/w,[/w,1/m,]/w,}/w,)/w, ,data/en,$/w,familyid/en, ,</w,-/w, ,paste/en,(/w,as/en,./w,character/en,(/w,data/en,$/w,familysize/en,)/w,,/w, ,data/en,$/w,surname/en,,/w, ,sep/en,=/w,"/w,"/w,)/w, ,data/en,$/w,familyid/en,[/w,data/en,$/w,familysize/en, ,</w,=/w, ,2/m,]/w, ,</w,-/w, ,'/w,small/en,'/w, ,#, ,delete/en, ,erroneous/en, ,family/en, ,ids/en, ,famids/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,table/en,(/w,data/en,$/w,familyid/en,)/w,)/w, ,famids/en, ,</w,-/w, ,famids/en,[/w,famids/en,$/w,freq/en, ,</w,=/w, ,2/m,,/w,]/w, ,data/en,$/w,familyid/en,[/w,data/en,$/w,familyid/en, ,%/w,in/en,%/w, ,famids/en,$/w,var/en,1/m,]/w, ,</w,-/w, ,'/w,small/en,'/w, ,#, ,convert/en, ,to/en, ,a/en, ,factor/en, ,data/en,$/w,familyid/en, ,</w,-/w, ,factor/en,(/w,data/en,$/w,familyid/en,)/w,set/en,./w,seed/en,(/w,415/m,)/w, ,model/en, ,</w,-/w, ,cforest/en,(/w,as/en,./w,factor/en,(/w,survived/en,)/w, ,~/w, ,pclass/en, ,+/w, ,sex/en, ,+/w, ,age/en, ,+/w, ,fare/en, ,+/w, ,embarked/en, ,+/w, ,title/en, ,+/w, ,familysize/en, ,+/w, ,familyid/en, ,+/w, ,ticketcount/en,,/w, ,data/en, ,=/w, ,data/en,[/w,train/en,./w,row/en,,/w, ,]/w,,/w, ,controls/en,=/w,cforest/en,_,unbiased/en,(/w,ntree/en,=/w,2000/m,,/w, ,mtry/en,=/w,3/m,)/w,)/w, ,predict/en,./w,result/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,data/en,[/w,test/en,./w,row/en,,/w, ,]/w,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,submit/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,passengerid/en, ,=/w, ,test/en,$/w,passengerid/en,,/w, ,survived/en, ,=/w, ,predict/en,./w,result/en,)/w, ,write/en,./w,csv/en,(/w,submit/en,,/w, ,file/en, ,=/w, ,"/w,cit/en,4/m,./w,csv/en,"/w,,/w, ,row/en,./w,names/en, ,=/w, ,false/en,)/w,该/r,模型/n,预测/v,结果/n,在/p,kaggle/en,的/u,得分/n,为/p,0.82297/m,，/w,排/v,第/m,207名/mq,，/w,前/f,207/m,//w,6292/m,=/w,3.3%/mq,其它/r,经/p,试验/vn,，/w,将/d,缺失/n,的/u,embarked/en,补充/v,为/p,出现/v,最/d,多/a,的/u,s/en,而非/c,c/en,，/w,成绩/n,有所/v,提升/v,。/w,但/c,该/r,方法/n,理论/n,依据/n,不/d,强/a,，/w,并且/c,该/r,成绩/n,只是/d,public/en,排行榜/n,成绩/n,，/w,并非/v,最终/d,成绩/n,，/w,并/c,不/d,能/v,说明/v,该/r,方法/n,一定/d,优于/v,其它/r,方法/n,。/w,因此/c,本/r,文/ng,并/c,不/d,推荐/v,该/r,方法/n,，/w,只是/d,作为/v,一种/mq,可能/v,的/u,思路/n,，/w,供/v,大家/r,参考/v,学习/v,。/w,data/en,$/w,embarked/en,[/w,c/en,(/w,62/m,,/w,830/m,)/w,]/w, ,=/w, ,"/w,s/en,"/w, ,data/en,$/w,embarked/en, ,</w,-/w, ,factor/en,(/w,data/en,$/w,embarked/en,)/w,set/en,./w,seed/en,(/w,415/m,)/w, ,model/en, ,</w,-/w, ,cforest/en,(/w,as/en,./w,factor/en,(/w,survived/en,)/w, ,~/w, ,pclass/en, ,+/w, ,sex/en, ,+/w, ,age/en, ,+/w, ,fare/en, ,+/w, ,embarked/en, ,+/w, ,title/en, ,+/w, ,familysize/en, ,+/w, ,familyid/en, ,+/w, ,ticketcount/en,,/w, ,data/en, ,=/w, ,data/en,[/w,train/en,./w,row/en,,/w, ,]/w,,/w, ,controls/en,=/w,cforest/en,_,unbiased/en,(/w,ntree/en,=/w,2000/m,,/w, ,mtry/en,=/w,3/m,)/w,)/w, ,predict/en,./w,result/en, ,</w,-/w, ,predict/en,(/w,model/en,,/w, ,data/en,[/w,test/en,./w,row/en,,/w, ,]/w,,/w, ,oob/en,=/w,true/en,,/w, ,type/en, ,=/w, ,"/w,response/en,"/w,)/w, ,submit/en, ,</w,-/w, ,data/en,./w,frame/en,(/w,passengerid/en, ,=/w, ,test/en,$/w,passengerid/en,,/w, ,survived/en, ,=/w, ,predict/en,./w,result/en,)/w, ,write/en,./w,csv/en,(/w,submit/en,,/w, ,file/en, ,=/w, ,"/w,cit/en,5/m,./w,csv/en,"/w,,/w, ,row/en,./w,names/en, ,=/w, ,false/en,)/w,该/r,模型/n,预测/v,结果/n,在/p,kaggle/en,的/u,得分/n,仍/d,为/p,0.82775/m,，/w,排/v,第/m,114名/mq,，/w,前/f,114/m,//w,6292/m,=/w,1.8%/mq,总结/v,本文/r,详述/v,了/u,如何/r,通过/p,数据/n,预览/nz,，/w,探索/v,式/k,数据/n,分析/vn,，/w,缺失/n,数据/n,填补/v,，/w,删除/v,关联/vn,特征/n,以及/c,派生/v,新/a,特征/n,等/u,方法/n,，/w,在/p,kaggle/en,的/u,titanic/en,幸存/v,预测/v,这/r,一/m,分类/vn,问题/n,竞赛/vn,中/f,获得/v,前/f,2%/mq,排名/v,的/u,具体/a,方法/n,。/w,下篇/n,预告/v,下/f,一篇/mq,文章/n,将/d,侧重/v,讲解