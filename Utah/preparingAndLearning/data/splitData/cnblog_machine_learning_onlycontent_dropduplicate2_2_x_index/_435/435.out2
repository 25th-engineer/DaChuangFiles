在/p,机器/n,学习/v,用于/v,产品/n,的/u,时候/n,，/w,我们/r,经常/d,会/v,遇到/v,跨/v,平台/n,的/u,问题/n,。/w,比如/v,我们/r,用/p,python/en,基于/p,一系列/mq,的/u,机器/n,学习/v,库/n,训练/vn,了/u,一个/m,模型/n,，/w,但是/c,有时候/d,其他/r,的/u,产品/n,和/c,项目/n,想/v,把/p,这个/r,模型/n,集成/vn,进去/v,，/w,但是/c,这些/r,产品/n,很多/m,只/d,支持/v,某些/r,特定/b,的/u,生产/vn,环境/n,比如/v,java/en,，/w,为了/p,上/f,一个/m,机器/n,学习/v,模型/n,去/v,大动干戈/i,修改/v,环境/n,配置/vn,很/d,不/d,划算/a,，/w,此时/r,我们/r,就/d,可以/v,考虑/v,用/p,预测/v,模型/n,标记/n,语言/n,(/w,predictive/en, ,model/en, ,markup/en, ,language/en,,/w,以下/f,简称/v,pmml/en,)/w,来/v,实现/v,跨/v,平台/n,的/u,机器/n,学习/v,模型/n,部署/v,了/u,。/w,1/m,./w, ,pmml/en,概述/v,pmml/en,是/v,数据/n,挖掘/v,的/u,一种/mq,通用/vn,的/u,规范/v,，/w,它/r,用/p,统一/vn,的/u,xml/en,格式/n,来/v,描述/v,我们/r,生成/vn,的/u,机器/n,学习/v,模型/n,。/w,这样/r,无论/c,你/r,的/u,模型/n,是/v,sklearn/en,,/w,r/en,还是/c,spark/en, ,mllib/en,生成/vn,的/u,，/w,我们/r,都/d,可以/v,将/d,其/r,转化/v,为/p,标准/n,的/u,xml/en,格式/n,来/v,存储/vn,。/w,当/p,我们/r,需要/v,将/d,这个/r,pmml/en,的/u,模型/n,用于/v,部署/v,的/u,时候/n,，/w,可以/v,使用/v,目标/n,环境/n,的/u,解析/v,pmml/en,模型/n,的/u,库/n,来/v,加/v,载/v,模型/n,，/w,并/c,做/v,预测/v,。/w,可以/v,看出/v,，/w,要/v,使用/v,pmml/en,，/w,需要/v,两步/mq,的/u,工作/vn,，/w,第一/m,块/q,是/v,将/d,离线/n,训练/vn,得到/v,的/u,模型/n,转化/v,为/p,pmml/en,模型/n,文件/n,，/w,第二/m,块/q,是/v,将/d,pmml/en,模型/n,文件/n,载入/v,在线/vn,预测/v,环境/n,，/w,进行/v,预测/v,。/w,这两块/n,都/d,需要/v,相关/v,的/u,库/n,支持/v,。/w,2/m,./w, ,pmml/en,模型/n,的/u,生成/vn,和/c,加载/v,相关/v,类/q,库/n,pmml/en,模型/n,的/u,生成/vn,相关/v,的/u,库/n,需要/v,看/v,我们/r,使用/v,的/u,离线/n,训练库/nw,。/w,如果/c,我们/r,使用/v,的/u,是/v,sklearn/en,，/w,那么/r,可以/v,使用/v,sklearn/en,2/m,pmml/en,这个/r,python/en,库/n,来/v,做/v,模型/n,文件/n,的/u,生成/vn,，/w,这个/r,库/n,安装/v,很/d,简单/a,，/w,使用/v,"/w,pip/en, ,install/en, ,sklearn/en,2/m,pmml/en,"/w,即可/v,，/w,相关/v,的/u,使用/v,我们/r,后面/f,会/v,有/v,一个/m,demo/en,。/w,如果/c,使用/v,的/u,是/v,spark/en, ,mllib/en,,/w, ,这个/r,库/n,有/v,一些/m,模型/n,已经/d,自/p,带/v,了/u,保存/v,pmml/en,模型/n,的/u,方法/n,，/w,可惜/v,并/c,不/d,全/a,。/w,如果/c,是/v,r/en,，/w,则/d,需要/v,安装/v,包/v,"/w,xml/en,"/w,和/c,“/w,pmml/en,”/w,。/w,此外/c,，/w,java/en,库/n,jpmml/en,可以/v,用/p,来/v,生成/vn,r/en,,/w,sparkmllib/en,,/w,xgboost/en,,/w,sklearn/en,的/u,模型/n,对应/v,的/u,pmml/en,文件/n,。/w,github/en,地址/n,是/v,：/w,https/en,:/w,//w,//w,github/en,./w,com/en,//w,jpmml/en,//w,jpmml/en,。/w,加/v,载/v,pmml/en,模型/n,需要/v,目标/n,环境/n,支持/v,pmml/en,加载/v,的/u,库/n,，/w,如果/c,是/v,java/en,，/w,则/d,可以/v,用/p,jpmml/en,来/v,加/v,载/v,pmml/en,模型/n,文件/n,。/w,相关/v,的/u,使用/v,我们/r,后面/f,会/v,有/v,一个/m,demo/en,。/w,3/m,./w, ,pmml/en,模型/n,生成/vn,和/c,加载/v,示例/n,下面/f,我们/r,给/p,一个/m,示例/n,，/w,使用/v,sklearn/en,生成/vn,一个/m,决策/n,树/v,模型/n,，/w,用/p,sklearn/en,2/m,pmml/en,生成/vn,模型/n,文件/n,，/w,用/p,jpmml/en,加载/v,模型/n,文件/n,，/w,并/c,做/v,预测/v,。/w,完整/a,代码/n,参见/v,我/r,的/u,github/en,:/w,https/en,:/w,//w,//w,github/en,./w,com/en,//w,ljpzzz/en,//w,machinelearning/en,//w,blob/en,//w,master/en,//w,model/en,-/w,in/en,-/w,product/en,//w,sklearn/en,-/w,jpmml/en,首先/d,是/v,用/p,用/p,sklearn/en,生成/vn,一个/m,决策/n,树/v,模型/n,，/w,由于/c,我们/r,是/v,需要/v,保存/v,pmml/en,文件/n,，/w,所以/c,最好/d,把/p,模型/n,先/d,放/v,到/v,一个/m,pipeline/en,数组/n,里面/f,。/w,这个/r,数组/n,里面/f,除了/p,我们/r,的/u,决策/n,树/v,模型/n,以外/f,，/w,还/d,可以/v,有/v,归/v,一化/nw,，/w,降维/nw,等/u,预/d,处理/v,操作/v,，/w,这里/r,作为/v,一个/m,示例/n,，/w,我们/r,pipeline/en,数组/n,里面/f,只/d,有/v,决策/n,树/v,模型/n,。/w,代码/n,如下/v,:/w,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,%/w,matplotlib/en, ,inline/en, ,import/en, ,pandas/en, ,as/en, ,pd/en, ,from/en, ,sklearn/en, ,import/en, ,tree/en, ,from/en, ,sklearn/en,2/m,pmml/en,./w,pipeline/en, ,import/en, ,pmmlpipeline/en, ,from/en, ,sklearn/en,2/m,pmml/en, ,import/en, ,sklearn/en,2/m,pmml/en, ,import/en, ,os/en, ,os/en,./w,environ/en,[/w,"/w,path/en,"/w,]/w, ,+/w,=/w, ,os/en,./w,pathsep/en, ,+/w, ,'/w,c/en,:/w,//w,program/en, ,files/en,//w,java/en,//w,jdk/en,1/m,./w,8/m,./w,0/m,_,171/m,//w,bin/en,'/w, ,x/en,=/w,[/w,[/w,1/m,,/w,2/m,,/w,3/m,,/w,1/m,]/w,,/w,[/w,2/m,,/w,4/m,,/w,1/m,,/w,5/m,]/w,,/w,[/w,7/m,,/w,8/m,,/w,3/m,,/w,6/m,]/w,,/w,[/w,4/m,,/w,8/m,,/w,4/m,,/w,7/m,]/w,,/w,[/w,2/m,,/w,5/m,,/w,6/m,,/w,9/m,]/w,]/w, ,y/en,=/w,[/w,0/m,,/w,1/m,,/w,0/m,,/w,2/m,,/w,1/m,]/w, ,pipeline/en, ,=/w, ,pmmlpipeline/en,(/w,[/w,(/w,"/w,classifier/en,"/w,,/w, ,tree/en,./w,decisiontreeclassifier/en,(/w,random/en,_,state/en,=/w,9/m,)/w,)/w,]/w,)/w,;/w, ,pipeline/en,./w,fit/en,(/w,x/en,,/w,y/en,)/w, ,sklearn/en,2/m,pmml/en,(/w,pipeline/en,,/w, ,"/w,./w,\/w,demo/en,./w,pmml/en,"/w,,/w, ,with/en,_,repr/en, ,=/w, ,true/en,)/w,上面/f,这/r,段/q,代码/n,做/v,了/u,一个/m,非常/d,简单/a,的/u,决策/n,树/v,分类/vn,模型/n,，/w,只有/c,5个/m,训练/vn,样本/n,，/w,特征/n,有/v,4个/m,，/w,输出/v,类别/n,有/v,3个/m,。/w,实际/n,应用/vn,时/ng,，/w,我们/r,需要/v,将/d,模型/n,调参/nw,完毕/v,后/f,才/d,将/d,其/r,放/v,入/v,pmmlpipeline/en,进行/v,保存/v,。/w,运行/vn,代码/n,后/f,，/w,我们/r,在/p,当前/t,目录/n,会/v,得到/v,一个/m,pmml/en,的/u,xml/en,文件/n,，/w,可以/v,直接/ad,打开/v,看/v,，/w,内容/n,大概/d,如下/v,：/w,</w,?/w,xml/en, ,version/en,=/w,"/w,1.0/m,"/w, ,encoding/en,=/w,"/w,utf/en,-/w,8/m,"/w, ,standalone/en,=/w,"/w,yes/en,"/w,?/w,>, ,</w,pmml/en, ,xmlns/en,=/w,"/w,http/en,:/w,//w,//w,www/en,./w,dmg/en,./w,org/en,//w,pmml/en,-/w,4/m,_,3/m,"/w, ,version/en,=/w,"/w,4.3/m,"/w,>, ,</w,header/en,>, ,</w,application/en, ,name/en,=/w,"/w,jpmml/en,-/w,sklearn/en,"/w, ,version/en,=/w,"/w,1/m,./w,5/m,./w,3/m,"/w,//w,>, ,</w,timestamp/en,>,2018/m,-/w,06/m,-/w,24/m,t/en,05/m,:/w,47/m,:/w,17/m,z/en,</w,//w,timestamp/en,>, ,</w,//w,header/en,>, ,</w,miningbuildtask/en,>, ,</w,extension/en,>,pmmlpipeline/en,(/w,steps/en,=/w,[/w,(/w,'/w,classifier/en,'/w,,/w, ,decisiontreeclassifier/en,(/w,class/en,_,weight/en,=/w,none/en,,/w, ,criterion/en,=/w,'/w,gini/en,'/w,,/w, ,max/en,_,depth/en,=/w,none/en,,/w, ,max/en,_,features/en,=/w,none/en,,/w, ,max/en,_,leaf/en,_,nodes/en,=/w,none/en,,/w, ,min/en,_,impurity/en,_,decrease/en,=/w,0.0/m,,/w, ,min/en,_,impurity/en,_,split/en,=/w,none/en,,/w, ,min/en,_,samples/en,_,leaf/en,=/w,1/m,,/w, ,min/en,_,samples/en,_,split/en,=/w,2/m,,/w, ,min/en,_,weight/en,_,fraction/en,_,leaf/en,=/w,0.0/m,,/w, ,presort/en,=/w,false/en,,/w, ,random/en,_,state/en,=/w,9/m,,/w, ,splitter/en,=/w,'/w,best/en,'/w,)/w,)/w,]/w,)/w,</w,//w,extension/en,>, ,</w,//w,miningbuildtask/en,>, ,</w,datadictionary/en,>, ,</w,datafield/en, ,name/en,=/w,"/w,y/en,"/w, ,optype/en,=/w,"/w,categorical/en,"/w, ,datatype/en,=/w,"/w,integer/en,"/w,>, ,</w,value/en, ,value/en,=/w,"/w,0/m,"/w,//w,>, ,</w,value/en, ,value/en,=/w,"/w,1/m,"/w,//w,>, ,</w,value/en, ,value/en,=/w,"/w,2/m,"/w,//w,>, ,</w,//w,datafield/en,>, ,</w,datafield/en, ,name/en,=/w,"/w,x/en,3/m,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,float/en,"/w,//w,>, ,</w,datafield/en, ,name/en,=/w,"/w,x/en,4/m,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,float/en,"/w,//w,>, ,</w,//w,datadictionary/en,>, ,</w,transformationdictionary/en,>, ,</w,derivedfield/en, ,name/en,=/w,"/w,double/en,(/w,x/en,3/m,)/w,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,double/en,"/w,>, ,</w,fieldref/en, ,field/en,=/w,"/w,x/en,3/m,"/w,//w,>, ,</w,//w,derivedfield/en,>, ,</w,derivedfield/en, ,name/en,=/w,"/w,double/en,(/w,x/en,4/m,)/w,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,double/en,"/w,>, ,</w,fieldref/en, ,field/en,=/w,"/w,x/en,4/m,"/w,//w,>, ,</w,//w,derivedfield/en,>, ,</w,//w,transformationdictionary/en,>, ,</w,treemodel/en, ,functionname/en,=/w,"/w,classification/en,"/w, ,missingvaluestrategy/en,=/w,"/w,nullprediction/en,"/w, ,splitcharacteristic/en,=/w,"/w,multisplit/en,"/w,>, ,</w,miningschema/en,>, ,</w,miningfield/en, ,name/en,=/w,"/w,y/en,"/w, ,usagetype/en,=/w,"/w,target/en,"/w,//w,>, ,</w,miningfield/en, ,name/en,=/w,"/w,x/en,3/m,"/w,//w,>, ,</w,miningfield/en, ,name/en,=/w,"/w,x/en,4/m,"/w,//w,>, ,</w,//w,miningschema/en,>, ,</w,output/en,>, ,</w,outputfield/en, ,name/en,=/w,"/w,probability/en,(/w,0/m,)/w,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,double/en,"/w, ,feature/en,=/w,"/w,probability/en,"/w, ,value/en,=/w,"/w,0/m,"/w,//w,>, ,</w,outputfield/en, ,name/en,=/w,"/w,probability/en,(/w,1/m,)/w,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,double/en,"/w, ,feature/en,=/w,"/w,probability/en,"/w, ,value/en,=/w,"/w,1/m,"/w,//w,>, ,</w,outputfield/en, ,name/en,=/w,"/w,probability/en,(/w,2/m,)/w,"/w, ,optype/en,=/w,"/w,continuous/en,"/w, ,datatype/en,=/w,"/w,double/en,"/w, ,feature/en,=/w,"/w,probability/en,"/w, ,value/en,=/w,"/w,2/m,"/w,//w,>, ,</w,//w,output/en,>, ,</w,node/en,>, ,</w,true/en,//w,>, ,</w,node/en,>, ,</w,simplepredicate/en, ,field/en,=/w,"/w,double/en,(/w,x/en,3/m,)/w,"/w, ,operator/en,=/w,"/w,lessorequal/en,"/w, ,value/en,=/w,"/w,3.5/m,"/w,//w,>, ,</w,node/en, ,score/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,>, ,</w,simplepredicate/en, ,field/en,=/w,"/w,double/en,(/w,x/en,3/m,)/w,"/w, ,operator/en,=/w,"/w,lessorequal/en,"/w, ,value/en,=/w,"/w,2.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,0/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,2/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,//w,node/en,>, ,</w,node/en, ,score/en,=/w,"/w,0/m,"/w, ,recordcount/en,=/w,"/w,2.0/m,"/w,>, ,</w,true/en,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,0/m,"/w, ,recordcount/en,=/w,"/w,2.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,2/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,//w,node/en,>, ,</w,//w,node/en,>, ,</w,node/en, ,score/en,=/w,"/w,2/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,>, ,</w,simplepredicate/en, ,field/en,=/w,"/w,double/en,(/w,x/en,4/m,)/w,"/w, ,operator/en,=/w,"/w,lessorequal/en,"/w, ,value/en,=/w,"/w,8.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,0/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,2/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,//w,>, ,</w,//w,node/en,>, ,</w,node/en, ,score/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,>, ,</w,true/en,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,0/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,1/m,"/w, ,recordcount/en,=/w,"/w,1.0/m,"/w,//w,>, ,</w,scoredistribution/en, ,value/en,=/w,"/w,2/m,"/w, ,recordcount/en,=/w,"/w,0.0/m,"/w,//w,>, ,</w,//w,node/en,>, ,</w,//w,node/en,>, ,</w,//w,treemodel/en,>, ,</w,//w,pmml/en,>,可以/v,看到/v,里面/f,就/d,是/v,决策/n,树/v,模型/n,的/u,树/v,结构/n,节点/n,的/u,各个/r,参数/n,，/w,以及/c,输入值/nw,。/w,我们/r,的/u,输入/v,被/p,定义/n,为/p,x/en,1/m,-/w,x/en,4/m,,/w,输出/v,定义/n,为/p,y/en,。/w,有/v,了/u,pmml/en,模型/n,文件/n,，/w,我们/r,就/d,可以/v,写/v,java/en,代码/n,来/v,读/v,取/v,加载/v,这个/r,模型/n,并/c,做/v,预测/v,了/u,。/w,我们/r,创建/v,一个/m,maven/en,或者/c,gradle/en,工程/n,，/w,加入/v,jpmml/en,的/u,依赖/v,，/w,这里/r,给/p,出/v,maven/en,在/p,pom/en,./w,xml/en,的/u,依赖/v,，/w,gradle/en,的/u,结构/n,是/v,类似/v,的/u,。/w,</w,dependency/en,>, ,</w,groupid/en,>,org/en,./w,jpmml/en,</w,//w,groupid/en,>, ,</w,artifactid/en,>,pmml/en,-/w,evaluator/en,</w,//w,artifactid/en,>, ,</w,version/en,>,1/m,./w,4/m,./w,1/m,</w,//w,version/en,>, ,</w,//w,dependency/en,>, ,</w,dependency/en,>, ,</w,groupid/en,>,org/en,./w,jpmml/en,</w,//w,groupid/en,>, ,</w,artifactid/en,>,pmml/en,-/w,evaluator/en,-/w,extension/en,</w,//w,artifactid/en,>, ,</w,version/en,>,1/m,./w,4/m,./w,1/m,</w,//w,version/en,>, ,</w,//w,dependency/en,>,接着/c,就/d,是/v,读/v,取/v,模型/n,文件/n,并/c,预测/v,的/u,代码/n,了/u,，/w,具体/a,代码/n,如下/v,：/w,import/en, ,org/en,./w,dmg/en,./w,pmml/en,./w,fieldname/en,;/w, ,import/en, ,org/en,./w,dmg/en,./w,pmml/en,./w,pmml/en,;/w, ,import/en, ,org/en,./w,jpmml/en,./w,evaluator/en,./w,*/w,;/w, ,import/en, ,org/en,./w,xml/en,./w,sax/en,./w,saxexception/en,;/w, ,import/en, ,javax/en,./w,xml/en,./w,bind/en,./w,jaxbexception/en,;/w, ,import/en, ,java/en,./w,io/en,./w,fileinputstream/en,;/w, ,import/en, ,java/en,./w,io/en,./w,ioexception/en,;/w, ,import/en, ,java/en,./w,io/en,./w,inputstream/en,;/w, ,import/en, ,java/en,./w,util/en,./w,hashmap/en,;/w, ,import/en, ,java/en,./w,util/en,./w,linkedhashmap/en,;/w, ,import/en, ,java/en,./w,util/en,./w,list/en,;/w, ,import/en, ,java/en,./w,util/en,./w,map/en,;/w, ,//w,*/w,*/w, ,*/w, ,created/en, ,by/en, ,刘建平/nr,pinard/en, ,on/en, ,2018/m,//w,6/m,//w,24/m,./w, ,*/w,//w, ,public/en, ,class/en, ,pmmldemo/en, ,{/w, ,private/en, ,evaluator/en, ,loadpmml/en,(/w,)/w,{/w, ,pmml/en, ,pmml/en, ,=/w, ,new/en, ,pmml/en,(/w,)/w,;/w, ,inputstream/en, ,inputstream/en, ,=/w, ,null/en,;/w, ,try/en, ,{/w, ,inputstream/en, ,=/w, ,new/en, ,fileinputstream/en,(/w,"/w,d/en,:/w,//w,demo/en,./w,pmml/en,"/w,)/w,;/w, ,}/w, ,catch/en, ,(/w,ioexception/en, ,e/en,)/w, ,{/w, ,e/en,./w,printstacktrace/en,(/w,)/w,;/w, ,}/w, ,if/en,(/w,inputstream/en, ,=/w,=/w, ,null/en,)/w,{/w, ,return/en, ,null/en,;/w, ,}/w, ,inputstream/en, ,is/en, ,=/w, ,inputstream/en,;/w, ,try/en, ,{/w, ,pmml/en, ,=/w, ,org/en,./w,jpmml/en,./w,model/en,./w,pmmlutil/en,./w,unmarshal/en,(/w,is/en,)/w,;/w, ,}/w, ,catch/en, ,(/w,saxexception/en, ,e/en,1/m,)/w, ,{/w, ,e/en,1/m,./w,printstacktrace/en,(/w,)/w,;/w, ,}/w, ,catch/en, ,(/w,jaxbexception/en, ,e/en,1/m,)/w, ,{/w, ,e/en,1/m,./w,printstacktrace/en,(/w,)/w,;/w, ,}/w,finally/en, ,{/w, ,//w,//w,关闭/v,输入/v,流/v, ,try/en, ,{/w, ,is/en,./w,close/en,(/w,)/w,;/w, ,}/w, ,catch/en, ,(/w,ioexception/en, ,e/en,)/w, ,{/w, ,e/en,./w,printstacktrace/en,(/w,)/w,;/w, ,}/w, ,}/w, ,modelevaluatorfactory/en, ,modelevaluatorfactory/en, ,=/w, ,modelevaluatorfactory/en,./w,newinstance/en,(/w,)/w,;/w, ,evaluator/en, ,evaluator/en, ,=/w, ,modelevaluatorfactory/en,./w,newmodelevaluator/en,(/w,pmml/en,)/w,;/w, ,pmml/en, ,=/w, ,null/en,;/w, ,return/en, ,evaluator/en,;/w, ,}/w, ,private/en, ,int/en, ,predict/en,(/w,evaluator/en, ,evaluator/en,,/w,int/en, ,a/en,,/w, ,int/en, ,b/en,,/w, ,int/en, ,c/en,,/w, ,int/en, ,d/en,)/w, ,{/w, ,map/en,</w,string/en,,/w, ,integer/en,>, ,data/en, ,=/w, ,new/en, ,hashmap/en,</w,string/en,,/w, ,integer/en,>,(/w,)/w,;/w, ,data/en,./w,put/en,(/w,"/w,x/en,1/m,"/w,,/w, ,a/en,)/w,;/w, ,data/en,./w,put/en,(/w,"/w,x/en,2/m,"/w,,/w, ,b/en,)/w,;/w, ,data/en,./w,put/en,(/w,"/w,x/en,3/m,"/w,,/w, ,c/en,)/w,;/w, ,data/en,./w,put/en,(/w,"/w,x/en,4/m,"/w,,/w, ,d/en,)/w,;/w, ,list/en,</w,inputfield/en,>, ,inputfields/en, ,=/w, ,evaluator/en,./w,getinputfields/en,(/w,)/w,;/w, ,//w,//w,过/u,模型/n,的/u,原始/a,特征/n,，/w,从/p,画像/n,中/f,获取/v,数据/n,，/w,作为/v,模型/n,输入/v, ,map/en,</w,fieldname/en,,/w, ,fieldvalue/en,>, ,arguments/en, ,=/w, ,new/en, ,linkedhashmap/en,</w,fieldname/en,,/w, ,fieldvalue/en,>,(/w,)/w,;/w, ,for/en, ,(/w,inputfield/en, ,inputfield/en, ,:/w, ,inputfields/en,)/w, ,{/w, ,fieldname/en, ,inputfieldname/en, ,=/w, ,inputfield/en,./w,getname/en,(/w,)/w,;/w, ,object/en, ,rawvalue/en, ,=/w, ,data/en,./w,get/en,(/w,inputfieldname/en,./w,getvalue/en,(/w,)/w,)/w,;/w, ,fieldvalue/en, ,inputfieldvalue/en, ,=/w, ,inputfield/en,./w,prepare/en,(/w,rawvalue/en,)/w,;/w, ,arguments/en,./w,put/en,(/w,inputfieldname/en,,/w, ,inputfieldvalue/en,)/w,;/w, ,}/w, ,map/en,</w,fieldname/en,,/w, ,?/w,>, ,results/en, ,=/w, ,evaluator/en,./w,evaluate/en,(/w,arguments/en,)/w,;/w, ,list/en,</w,targetfield/en,>, ,targetfields/en, ,=/w, ,evaluator/en,./w,gettargetfields/en,(/w,)/w,;/w, ,targetfield/en, ,targetfield/en, ,=/w, ,targetfields/en,./w,get/en,(/w,0/m,)/w,;/w, ,fieldname/en, ,targetfieldname/en, ,=/w, ,targetfield/en,./w,getname/en,(/w,)/w,;/w, ,object/en, ,targetfieldvalue/en, ,=/w, ,results/en,./w,get/en,(/w,targetfieldname/en,)/w,;/w, ,system/en,./w,out/en,./w,println/en,(/w,"/w,target/en,:/w, ,"/w, ,+/w, ,targetfieldname/en,./w,getvalue/en,(/w,)/w, ,+/w, ,"/w, ,value/en,:/w, ,"/w, ,+/w, ,targetfieldvalue/en,)/w,;/w, ,int/en, ,primitivevalue/en, ,=/w, ,-/w,1/m,;/w, ,if/en, ,(/w,targetfieldvalue/en, ,instanceof/en, ,computable/en,)/w, ,{/w, ,computable/en, ,computable/en, ,=/w, ,(/w,computable/en,)/w, ,targetfieldvalue/en,;/w, ,primitivevalue/en, ,=/w, ,(/w,integer/en,)/w,computable/en,./w,getresult/en,(/w,)/w,;/w, ,}/w, ,system/en,./w,out/en,./w,println/en,(/w,a/en, ,+/w, ,"/w, ,"/w, ,+/w, ,b/en, ,+/w, ,"/w, ,"/w, ,+/w, ,c/en, ,+/w, ,"/w, ,"/w, ,+/w, ,d/en, ,+/w, ,"/w,:/w,"/w, ,+/w, ,primitivevalue/en,)/w,;/w, ,return/en, ,primitivevalue/en,;/w, ,}/w, ,public/en, ,static/en, ,void/en, ,main/en,(/w,string/en, ,args/en,[/w,]/w,)/w,{/w, ,pmmldemo/en, ,demo/en, ,=/w, ,new/en, ,pmmldemo/en,(/w,)/w,;/w, ,evaluator/en, ,model/en, ,=/w, ,demo/en,./w,loadpmml/en,(/w,)/w,;/w, ,demo/en,./w,predict/en,(/w,model/en,,/w,1/m,,/w,8/m,,/w,99/m,,/w,1/m,)/w,;/w, ,demo/e