一/m,、/w,二次/mq,代价/n,函数/n,1/m,./w, ,形式/n,：/w,其中/r,，/w,c/en,为/p,代价/n,函数/n,，/w,x/en,表示/v,样本/n,，/w,y/en,表示/v,实际值/nw,，/w,a/en,表示/v,输出/v,值/n,，/w,n/en,为/p,样本/n,总数/n,2/m,./w, ,利用/v,梯度/n,下降/v,法/j,调整/vn,权值/nw,参数/n,大小/n,，/w,推导/vn,过程/n,如下/v,图/n,所/u,示/vg,：/w,根据/p,结果/n,可/v,得/u,，/w,权重/nz,w/en,和/c,偏置/nw,b/en,的/u,梯度/n,跟/p,激活/vn,函数/n,的/u,梯度/n,成/v,正比/n,（/w,即/v,激活/vn,函数/n,的/u,梯度/n,越/d,大/a,，/w,w/en,和/c,b/en,的/u,大小/n,调整/vn,的/u,越/d,快/a,，/w,训练/vn,速度/n,也/d,越/d,快/a,）/w,3/m,./w, ,激活/vn,函数/n,是/v,sigmoid/en,函数/n,时/ng,，/w,二次/mq,代价/n,函数/n,调整/vn,参数/n,过程/n,分析/vn,理想/n,调整/vn,参数/n,状态/n,：/w,距离/n,目标/n,点远/nw,时/ng,，/w,梯度/n,大/a,，/w,参数/n,调整/vn,较/d,快/a,；/w,距离/n,目标/n,点/q,近/a,时/ng,，/w,梯度/n,小/a,，/w,参数/n,调整/vn,较/d,慢/a,。/w,如果/c,我/r,的/u,目标/n,点/q,是/v,调整/vn,到/v,m/en,点/q,，/w,从/p,a/en,点/q,=/w,=/w,>,b/en,点/q,的/u,调整/vn,过程/n,，/w,a/en,点/q,距离/n,目标/n,点远/nw,，/w,梯度/n,大/a,，/w,调整/vn,参数/n,较/d,快/a,；/w,b/en,点/q,距离/n,目标/n,较/d,近/a,，/w,梯度/n,小/a,，/w,调整/vn,参数/n,慢/a,。/w,符合/v,参数/n,调整/vn,策略/n,如果/c,我/r,的/u,目标/n,点/q,是/v,调整/vn,到/v,n/en,点/q,，/w,从/p,b/en,点/q,=/w,=/w,>,a/en,点/q,的/u,调整/vn,过程/n,，/w,a/en,点/q,距离/n,目标/n,点/q,近/a,，/w,梯度/n,大/a,，/w,调整/vn,参数/n,较/d,快/a,；/w,b/en,点/q,距离/n,目标/n,较/d,远/a,，/w,梯度/n,小/a,，/w,调整/vn,参数/n,慢/a,。/w,不/d,符合/v,参数/n,调整/vn,策略/n,二/m,、/w,交叉/vn,熵/g,代价/n,函数/n,1/m,./w,形式/n,：/w,其中/r,，/w,c/en,为/p,代价/n,函数/n,，/w,x/en,表示/v,样本/n,，/w,y/en,表示/v,实际值/nw,，/w,a/en,表示/v,输出/v,值/n,，/w,n/en,为/p,样本/n,总数/n,2/m,./w, ,利用/v,梯度/n,下降/v,法/j,调整/vn,权值/nw,参数/n,大小/n,，/w,推导/vn,过程/n,如下/v,图/n,所/u,示/vg,：/w,根据/p,结果/n,可/v,得/u,，/w,权重/nz,w/en,和/c,偏置/nw,b/en,的/u,梯度/n,跟/p,激活/vn,函数/n,的/u,梯度/n,无关/v,。/w,而/c,和/c,输出/v,值/n,与/p,实际值/nw,的/u,误差/n,成/v,正比/n,（/w,即/v,误差/n,越/d,大/a,，/w,w/en,和/c,b/en,的/u,大小/n,调整/vn,的/u,越/d,快/a,，/w,训练/vn,速度/n,也/d,越/d,快/a,）/w,3/m,./w,激活/vn,函数/n,是/v,sigmoid/en,函数/n,时/ng,，/w,二次/mq,代价/n,函数/n,调整/vn,参数/n,过程/n,分析/vn,理想/n,调整/vn,参数/n,状态/n,：/w,距离/n,目标/n,点远/nw,时/ng,，/w,梯度/n,大/a,，/w,参数/n,调整/vn,较/d,快/a,；/w,距离/n,目标/n,点/q,近/a,时/ng,，/w,梯度/n,小/a,，/w,参数/n,调整/vn,较/d,慢/a,。/w,如果/c,我/r,的/u,目标/n,点/q,是/v,调整/vn,到/v,m/en,点/q,，/w,从/p,a/en,点/q,=/w,=/w,>,b/en,点/q,的/u,调整/vn,过程/n,，/w,a/en,点/q,距离/n,目标/n,点远/nw,，/w,误差/n,大/a,，/w,调整/vn,参数/n,较/d,快/a,；/w,b/en,点/q,距离/n,目标/n,较/d,近/a,，/w,误差/n,小/a,，/w,调整/vn,参数/n,较/d,慢/a,。/w,符合/v,参数/n,调整/vn,策略/n,如果/c,我/r,的/u,目标/n,点/q,是/v,调整/vn,到/v,n/en,点/q,，/w,从/p,b/en,点/q,=/w,=/w,>,a/en,点/q,的/u,调整/vn,过程/n,，/w,a/en,点/q,距离/n,目标/n,点/q,近/a,，/w,误差/n,小/a,，/w,调整/vn,参数/n,较/d,慢/a,；/w,b/en,点/q,距离/n,目标/n,较/d,远/a,，/w,误差/n,大/a,，/w,调整/vn,参数/n,较/d,快/a,。/w,符合/v,参数/n,调整/vn,策略/n,总结/v,：/w,如果/c,输出/v,神经元/n,是/v,线性/n,的/u,，/w,选择/v,二次/mq,代价/n,函数/n,较为/d,合适/a,如果/c,输出/v,神经元/n,是/v,s/en,型/k,函数/n,（/w,sigmoid/en,函数/n,）/w,，/w,选择/v,交叉/vn,熵/g,代价/n,函数/n,较为/d,合适/a,如果/c,输出/v,神经元/n,是/v,softmax/en,回归/v,的/u,代价/n,函数/n,，/w,选择/v,对数/n,释然/z,代价/n,函数/n,较为/d,合适/a,二/m,、/w,利用/v,代价/n,函数/n,优化/v,mnist/en,数据集/nw,识别/v,程序/n,1/m,./w,在/p,tensorflow/en,中/f,代价/n,函数/n,的/u,选择/v,：/w,如果/c,输出/v,神经元/n,是/v,线性/n,的/u,，/w,选择/v,二次/mq,代价/n,函数/n,较为/d,合适/a, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,square/en,(/w,)/w,)/w,如果/c,输出/v,神经元/n,是/v,s/en,型/k,函数/n,（/w,sigmoid/en,函数/n,）/w,，/w,选择/v,交叉/vn,熵/g,代价/n,函数/n,较为/d,合适/a, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,nn/en,./w,sigmoid/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,)/w,)/w,如果/c,输出/v,神经元/n,是/v,softmax/en,回归/v,的/u,代价/n,函数/n,，/w,选择/v,对数/n,释然/z,代价/n,函数/n,较为/d,合适/a, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,)/w,)/w,2/m,./w,通过/p,代价/n,函数/n,选择/v,对/p,mnist/en,数据集/nw,分类/vn,程序/n,优化/v,#,使用/v,交叉/vn,熵/g,代价/n,函数/n,1/m, ,import/en, ,os/en, ,2/m, ,os/en,./w,environ/en,[/w,'/w,tf/en,_,cpp/en,_,min/en,_,log/en,_,level/en,'/w,]/w, ,=/w, ,'/w,2/m,'/w, ,3/m, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,4/m, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,input/en,_,data/en, ,5/m, ,#,载入/v,数据集/nw, ,6/m, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,'/w,mnist/en,_,data/en,'/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,7/m, ,#,每个/r,批次/n,的/u,大小/n,（/w,即/v,每次/r,训练/vn,的/u,图片/n,数量/n,）/w, ,8/m, ,batch/en,_,size/en, ,=/w, ,50/m, ,9/m, ,#,计算/v,一共/d,有/v,多少/r,个/q,批次/n, ,10/m, ,n/en,_,bitch/en, ,=/w, ,mnist/en,./w,train/en,./w,num/en,_,examples/en, ,//w,//w, ,batch/en,_,size/en, ,11/m, ,#,定义/n,两个/m,placeholder/en, ,12/m, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,784/m,]/w,)/w, ,13/m, ,y/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,10/m,]/w,)/w, ,14/m, ,#,创建/v,一个/m,只有/c,输入层/nw,（/w,784个/m,神经元/n,）/w,和/c,输出/v,层/q,（/w,10个/m,神经元/n,）/w,的/u,简单/a,神经/n,网络/n, ,15/m, ,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,784/m,,/w, ,10/m,]/w,)/w,)/w, ,16/m, ,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,]/w,)/w,)/w, ,17/m, ,wx/en,_,plus/en,_,b/en, ,=/w, ,tf/en,./w,matmul/en,(/w,x/en,,/w, ,weights/en,)/w, ,+/w, ,biases/en, ,18/m, ,prediction/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,wx/en,_,plus/en,_,b/en,)/w, ,19/m, ,#,交叉/vn,熵/g,代价/n,函数/n, ,20/m, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,labels/en,=/w,y/en,,/w, ,logits/en,=/w,prediction/en,)/w,)/w, ,21/m, ,#,使用/v,梯度/n,下降/v,法/j, ,22/m, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,0.15/m,)/w,./w,minimize/en,(/w,loss/en,)/w, ,23/m, ,#,初始化/v,变量/n, ,24/m, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,25/m, ,#,结果/n,存放/v,在/p,一个/m,布尔型/nr,列表/v,中/f, ,26/m, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,,/w, ,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,prediction/en,,/w, ,1/m,)/w,)/w, ,#,argmax/en,返回/v,一维/nw,张量/nr,中/f,最/d,大/a,的/u,值/n,所/u,在/p,的/u,位置/n,，/w,标签/n,值/n,和/c,预测/v,值/n,相同/a,，/w,返回/v,为/p,true/en, ,27/m, ,#,求/v,准确率/n, ,28/m, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,tf/en,./w,float/en,32/m,)/w,)/w, ,#,cast/en,函数/n,将/d,correct/en,_,prediction/en,的/u,布尔型/nr,转换/v,为/p,浮点型/nw,，/w,然后/c,计算/v,平均值/n,即/v,为/p,准确率/n, ,29/m, ,30/m, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,31/m, ,sess/en,./w,run/en,(/w,init/en,)/w, ,32/m, ,#,将/d,测试/vn,集/vg,循环/vn,训练/vn,20次/mq, ,33/m, ,for/en, ,epoch/en, ,in/en, ,range/en,(/w,21/m,)/w,:/w, ,34/m, ,#,将/d,测试/vn,集中/v,所有/b,数据/n,循环/vn,一次/mq, ,35/m, ,for/en, ,batch/en, ,in/en, ,range/en,(/w,n/en,_,bitch/en,)/w,:/w, ,36/m, ,batch/en,_,xs/en,,/w, ,batch/en,_,ys/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,batch/en,_,size/en,)/w, ,#,取/v,测试/vn,集中/v,batch/en,_,size/en,数量/n,的/u,图片/n,及/c,对应/v,的/u,标签/n,值/n, ,37/m, ,sess/en,./w,run/en,(/w,train/en,_,step/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,batch/en,_,xs/en,,/w, ,y/en,:/w,batch/en,_,ys/en,}/w,)/w, ,#,将/d,上/f,一行/n,代码/n,取/v,到/v,的/u,数据/n,进行/v,训练/vn, ,38/m, ,acc/en, ,=/w, ,sess/en,./w,run/en,(/w,accuracy/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,:/w,mnist/en,./w,test/en,./w,labels/en,}/w,)/w, ,#,准确率/n,的/u,计算/v, ,39/m, ,print/en,(/w,'/w,iter/en, ,:/w, ,'/w, ,+/w, ,str/en,(/w,epoch/en,)/w, ,+/w, ,'/w,,/w,testing/en, ,accuracy/en, ,=/w, ,'/w, ,+/w, ,str/en,(/w,acc/en,)/w,)/w,view/en, ,code/en,#,执行/v,结果/n,1/m, ,iter/en, ,:/w, ,0/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8323/m, ,2/m, ,iter/en, ,:/w, ,1/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8947/m, ,3/m, ,iter/en, ,:/w, ,2/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9032/m, ,4/m, ,iter/en, ,:/w, ,3/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9068/m, ,5/m, ,iter/en, ,:/w, ,4/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.909/m, ,6/m, ,iter/en, ,:/w, ,5/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9105/m, ,7/m, ,iter/en, ,:/w, ,6/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9126/m, ,8/m, ,iter/en, ,:/w, ,7/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9131/m, ,9/m, ,iter/en, ,:/w, ,8/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9151/m, ,10/m, ,iter/en, ,:/w, ,9/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9168/m, ,11/m, ,iter/en, ,:/w, ,10/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9178/m, ,12/m, ,iter/en, ,:/w, ,11/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9173/m, ,13/m, ,iter/en, ,:/w, ,12/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9181/m, ,14/m, ,iter/en, ,:/w, ,13/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9194/m, ,15/m, ,iter/en, ,:/w, ,14/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9201/m, ,16/m, ,iter/en, ,:/w, ,15/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9197/m, ,17/m, ,iter/en, ,:/w, ,16/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9213/m, ,18/m, ,iter/en, ,:/w, ,17/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9212/m, ,19/m, ,iter/en, ,:/w, ,18/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9205/m, ,20/m, ,iter/en, ,:/w, ,19/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9215/m,view/en, ,code/en,#,使用/v,二次/mq,代价/n,函数/n,1/m, ,import/en, ,os/en, ,2/m, ,os/en,./w,environ/en,[/w,'/w,tf/en,_,cpp/en,_,min/en,_,log/en,_,level/en,'/w,]/w, ,=/w, ,'/w,2/m,'/w, ,3/m, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,4/m, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,input/en,_,data/en, ,5/m, ,#,载入/v,数据集/nw, ,6/m, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,'/w,mnist/en,_,data/en,'/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,7/m, ,#,每个/r,批次/n,的/u,大小/n,（/w,即/v,每次/r,训练/vn,的/u,图片/n,数量/n,）/w, ,8/m, ,batch/en,_,size/en, ,=/w, ,100/m, ,9/m, ,#,计算/v,一共/d,有/v,多少/r,个/q,批次/n, ,10/m, ,n/en,_,bitch/en, ,=/w, ,mnist/en,./w,train/en,./w,num/en,_,examples/en, ,//w,//w, ,batch/en,_,size/en, ,11/m, ,#,定义/n,两个/m,placeholder/en, ,12/m, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,784/m,]/w,)/w, ,13/m, ,y/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,10/m,]/w,)/w, ,14/m, ,#,创建/v,一个/m,只有/c,输入层/nw,（/w,784个/m,神经元/n,）/w,和/c,输出/v,层/q,（/w,10个/m,神经元/n,）/w,的/u,简单/a,神经/n,网络/n, ,15/m, ,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,784/m,,/w, ,10/m,]/w,)/w,)/w, ,16/m, ,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,]/w,)/w,)/w, ,17/m, ,wx/en,_,plus/en,_,b/en, ,=/w, ,tf/en,./w,matmul/en,(/w,x/en,,/w, ,weights/en,)/w, ,+/w, ,biases/en, ,18/m, ,prediction/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,wx/en,_,plus/en,_,b/en,)/w, ,19/m, ,#,二次/mq,代价/n,函数/n, ,20/m, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,square/en,(/w,y/en, ,-/w, ,prediction/en,)/w,)/w, ,21/m, ,#,使用/v,梯度/n,下降/v,法/j, ,22/m, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,gradientdescentoptimizer/en,(/w,0.2/m,)/w,./w,minimize/en,(/w,loss/en,)/w, ,23/m, ,#,初始化/v,变量/n, ,24/m, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,25/m, ,#,结果/n,存放/v,在/p,一个/m,布尔型/nr,列表/v,中/f, ,26/m, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,,/w, ,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,prediction/en,,/w, ,1/m,)/w,)/w, ,#,argmax/en,返回/v,一维/nw,张量/nr,中/f,最/d,大/a,的/u,值/n,所/u,在/p,的/u,位置/n,，/w,标签/n,值/n,和/c,预测/v,值/n,相同/a,，/w,返回/v,为/p,true/en, ,27/m, ,#,求/v,准确率/n, ,28/m, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,tf/en,./w,float/en,32/m,)/w,)/w, ,#,cast/en,函数/n,将/d,correct/en,_,prediction/en,的/u,布尔型/nr,转换/v,为/p,浮点型/nw,，/w,然后/c,计算/v,平均值/n,即/v,为/p,准确率/n, ,29/m, ,30/m, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,31/m, ,sess/en,./w,run/en,(/w,init/en,)/w, ,32/m, ,#,将/d,测试/vn,集/vg,循环/vn,训练/vn,20次/mq, ,33/m, ,for/en, ,epoch/en, ,in/en, ,range/en,(/w,21/m,)/w,:/w, ,34/m, ,#,将/d,测试/vn,集中/v,所有/b,数据/n,循环/vn,一次/mq, ,35/m, ,for/en, ,batch/en, ,in/en, ,range/en,(/w,n/en,_,bitch/en,)/w,:/w, ,36/m, ,batch/en,_,xs/en,,/w, ,batch/en,_,ys/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,batch/en,_,size/en,)/w, ,#,取/v,测试/vn,集中/v,batch/en,_,size/en,数量/n,的/u,图片/n,及/c,对应/v,的/u,标签/n,值/n, ,37/m, ,sess/en,./w,run/en,(/w,train/en,_,step/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,batch/en,_,xs/en,,/w, ,y/en,:/w,batch/en,_,ys/en,}/w,)/w, ,#,将/d,上/f,一行/n,代码/n,取/v,到/v,的/u,数据/n,进行/v,训练/vn, ,38/m, ,acc/en, ,=/w, ,sess/en,./w,run/en,(/w,accuracy/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,:/w,mnist/en,./w,test/en,./w,labels/en,}/w,)/w, ,#,准确率/n,的/u,计算/v, ,39/m, ,print/en,(/w,'/w,iter/en, ,:/w, ,'/w, ,+/w, ,str/en,(/w,epoch/en,)/w, ,+/w, ,'/w,,/w,testing/en, ,accuracy/en, ,=/w, ,'/w, ,+/w, ,str/en,(/w,acc/en,)/w,)/w,view/en, ,code/en,#,执行/v,结果/n,1/m, ,iter/en, ,:/w, ,0/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8325/m, ,2/m, ,iter/en, ,:/w, ,1/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8711/m, ,3/m, ,iter/en, ,:/w, ,2/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8831/m, ,4/m, ,iter/en, ,:/w, ,3/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8876/m, ,5/m, ,iter/en, ,:/w, ,4/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.8942/m, ,6/m, ,iter/en, ,:/w, ,5/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.898/m, ,7/m, ,iter/en, ,:/w, ,6/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9002/m, ,8/m, ,iter/en, ,:/w, ,7/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9014/m, ,9/m, ,iter/en, ,:/w, ,8/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9036/m, ,10/m, ,iter/en, ,:/w, ,9/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9052/m, ,11/m, ,iter/en, ,:/w, ,10/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9065/m, ,12/m, ,iter/en, ,:/w, ,11/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9073/m, ,13/m, ,iter/en, ,:/w, ,12/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9084/m, ,14/m, ,iter/en, ,:/w, ,13/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.909/m, ,15/m, ,iter/en, ,:/w, ,14/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9095/m, ,16/m, ,iter/en, ,:/w, ,15/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9115/m, ,17/m, ,iter/en, ,:/w, ,16/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.912/m, ,18/m, ,iter/en, ,:/w, ,17/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9126/m, ,19/m, ,iter/en, ,:/w, ,18/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.913/m, ,20/m, ,iter/en, ,:/w, ,19/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9136/m, ,21/m, ,iter/en, ,:/w, ,20/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.914/m,view/en, ,code/en,结论/n,：/w,（/w,二者/r,只有/c,代价/n,函数/n,不同/a,）/w,正确率/n,达到/v,90%/mq,所/u,用/p,迭代/vn,次数/n,：/w,使用/v,交叉/vn,熵/g,代价/n,函数/n,为/p,第三/nw,次/q,；/w,使用/v,二次/mq,代价/n,函数/n,为/p,第六/nw,次/q,（/w,在/p,mnist/en,数据集/nw,分类/vn,中/f,，/w,使用/v,交叉/vn,熵/g,代价/n,函数/n,收敛/vn,速度/n,较/d,快/a,）/w,最终/d,正确率/n,：/w,使用/v,交叉/vn,熵/g,代价/n,函数/n,为/p,92.15%/mq,，/w,使用/v,二次/mq,代价/n,函数/n,为/p,91.4%/mq,（/w,在/p,mnist/en,数据集/nw,分类/vn,中/f,，/w,使用/v,交叉/vn,熵/g,代价/n,函数/n,识别/v,准确率/n,较/d,高/a,）/w,三/m,、/w,拟合/nz,问题/n,参考/v,文章/n,：/w,https/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,willduan/en,1/m,//w,article/en,//w,details/en,//w,530707771/m,./w,根据/p,拟合/nz,结果/n,分类/vn,：/w,欠/v,拟合/nz,：/w,模型/n,没有/v,很/d,好/a,地/u,捕捉/v,到/v,数据/n,特征/n,，/w,不/d,能够/v,很/d,好/a,地/u,拟合/nz,数据/n,正确/a,拟合/nz,过/u,拟合/nz,：/w,模型/n,把/p,数据/n,学习/v,的/u,太/d,彻底/ad,，/w,以至于/c,把/p,噪声/n,数据/n,的/u,特征/n,也/d,学习/v,到/v,了/u,，/w,这样/r,就/d,会/v,导致/v,在/p,后期/f,测试/vn,的/u,时候/n,不/d,能够/v,很/d,好/a,地/u,识别/v,数据/n,，/w,即/v,不/d,能/v,正确/a,的/u,分类/vn,，/w,模型/n,泛化/nw,能力/n,太/d,差/a,2/m,./w,解决/v,欠/v,拟合/nz,和/c,过/u,拟合/nz,解决/v,欠/v,拟合/nz,常用/a,方法/n,：/w,添加/vn,其他/r,特征/n,项/q,，/w,有时候/d,我们/r,模型/n,出现/v,欠/v,拟合/nz,的/u,时候/n,是/v,因为/c,特征/n,项/q,不够/a,导致/v,的/u,，/w,可以/v,添加/vn,其他/r,特征/n,项/q,来/v,很/d,好/a,地/u,解决/v,。/w,添加/vn,多/a,项式/nr,特征/n,，/w,这个/r,在/p,机器/n,学习/v,算法/n,里面/f,用/p,的/u,很/d,普遍/ad,，/w,例如/v,将/d,线性/n,模型/n,通过/p,添加/vn,二次/mq,项/q,或者/c,三次/mq,项/q,使/v,模型/n,泛化/nw,能力/n,更/d,强/a,。/w,减少/v,正则化/nw,参数/n,，/w,正则化/nw,的/u,目的/n,是/v,用/p,来/v,防止/v,过/u,拟合/nz,的/u,，/w,但是/c,现在/t,模型/n,出现/v,了/u,欠/v,拟合/nz,，/w,则/d,需要/v,减少/v,正则化/nw,参数/n,。/w,解决/v,过/u,拟合/nz,常用/a,方法/n,：/w,增加/v,数据/n,集正则化/nw,方法/n,dropout/en,（/w,通俗/a,一点/m,讲/v,就/d,是/v,dropout/en,方法/n,在/p,训练/vn,的/u,时候/n,让/v,神经元/n,以/p,一定/d,的/u,概率/n,不/d,工作/vn,）/w,四/m,、/w,初始化/v,优化/v,mnist/en,数据集/nw,分类/vn,问题/n,#,改变/v,初始化/v,方法/n,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,784/m,,/w, ,10/m,]/w,)/w,)/w, ,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,]/w,)/w, ,+/w, ,0.1/m,)/w,五/m,、/w,优化器/nw,优化/v,mnist/en,数据集/nw,分类/vn,问题/n,大多数/m,机器/n,学习/v,任务/n,就/d,是/v,最小化/nw,损失/n,，/w,在/p,损失/n,定义/n,的/u,情况/n,下/f,，/w,后面/f,的/u,工作/vn,就/d,交给/v,优化器/nw,。/w,因为/c,深度/n,学习/v,常见/a,的/u,是/v,对于/p,梯度/n,的/u,优化/v,，/w,也就是说/l,，/w,优化器/nw,最后/f,其实/d,就是/d,各种/r,对于/p,梯度/n,下降/v,算法/n,的/u,优化/v,。/w,1/m,./w,梯度/n,下降/v,法/j,分类/vn,及其/c,介绍/v,标准/n,梯度/n,下降/v,法/j,：/w,先/d,计算/v,所有/b,样本/n,汇总/v,误差/n,，/w,然后/c,根据/p,总/b,误差/n,来/v,更新/v,权值/nw,随机/d,梯度/n,下降/v,法/j,：/w,随机/d,抽取/vn,一个/m,样本/n,来/v,计算/v,误差/n,，/w,然后/c,更新/v,权值/nw,批量/d,梯度/n,下降/v,法/j,：/w,是/v,一种/mq,折中/vn,方案/n,，/w,从/p,总/b,样本/n,中/f,选取/v,一个/m,批次/n,（/w,batch/en,）/w,，/w,然后/c,计算/v,这个/r,batch/en,的/u,总/b,误差/n,，/w,根据/p,总/b,误差/n,来/v,更新/v,权值/nw,2/m,./w,常见/a,优化器/nw,介绍/v,参考/v,文章/n,：/w,https/en,:/w,//w,//w,www/en,./w,leiphone/en,./w,com/en,//w,news/en,//w,201706/m,//w,e/en,0/m,puneezaxwsmpzx/en,./w,html/en,3/m,./w,优化器/nw,优化/v,mnist/en,数据集/nw,分类/vn,问题/n,#,选择/v,adam/en,优化器/nw,1/m, ,import/en, ,os/en, ,2/m, ,os/en,./w,environ/en,[/w,'/w,tf/en,_,cpp/en,_,min/en,_,log/en,_,level/en,'/w,]/w, ,=/w, ,'/w,2/m,'/w, ,3/m, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,4/m, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,input/en,_,data/en, ,5/m, ,#,载入/v,数据集/nw, ,6/m, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,'/w,mnist/en,_,data/en,'/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,7/m, ,#,每个/r,批次/n,的/u,大小/n,（/w,即/v,每次/r,训练/vn,的/u,图片/n,数量/n,）/w, ,8/m, ,batch/en,_,size/en, ,=/w, ,50/m, ,9/m, ,#,计算/v,一共/d,有/v,多少/r,个/q,批次/n, ,10/m, ,n/en,_,bitch/en, ,=/w, ,mnist/en,./w,train/en,./w,num/en,_,examples/en, ,//w,//w, ,batch/en,_,size/en, ,11/m, ,#,定义/n,两个/m,placeholder/en, ,12/m, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,784/m,]/w,)/w, ,13/m, ,y/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,10/m,]/w,)/w, ,14/m, ,#,创建/v,一个/m,只有/c,输入层/nw,（/w,784个/m,神经元/n,）/w,和/c,输出/v,层/q,（/w,10个/m,神经元/n,）/w,的/u,简单/a,神经/n,网络/n, ,15/m, ,weights/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,784/m,,/w, ,10/m,]/w,)/w,)/w, ,16/m, ,biases/en, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,]/w,)/w,)/w, ,17/m, ,wx/en,_,plus/en,_,b/en, ,=/w, ,tf/en,./w,matmul/en,(/w,x/en,,/w, ,weights/en,)/w, ,+/w, ,biases/en, ,18/m, ,prediction/en, ,=/w, ,tf/en,./w,nn/en,./w,softmax/en,(/w,wx/en,_,plus/en,_,b/en,)/w, ,19/m, ,#,交叉/vn,熵/g,代价/n,函数/n, ,20/m, ,loss/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,nn/en,./w,softmax/en,_,cross/en,_,entropy/en,_,with/en,_,logits/en,(/w,labels/en,=/w,y/en,,/w, ,logits/en,=/w,prediction/en,)/w,)/w, ,21/m, ,#,使用/v,adam/en,优化器/nw, ,22/m, ,train/en,_,step/en, ,=/w, ,tf/en,./w,train/en,./w,adamoptimizer/en,(/w,1/m,e/en,-/w,2/m,)/w,./w,minimize/en,(/w,loss/en,)/w, ,23/m, ,#,初始化/v,变量/n, ,24/m, ,init/en, ,=/w, ,tf/en,./w,global/en,_,variables/en,_,initializer/en,(/w,)/w, ,25/m, ,#,结果/n,存放/v,在/p,一个/m,布尔型/nr,列表/v,中/f, ,26/m, ,correct/en,_,prediction/en, ,=/w, ,tf/en,./w,equal/en,(/w,tf/en,./w,argmax/en,(/w,y/en,,/w, ,1/m,)/w,,/w, ,tf/en,./w,argmax/en,(/w,prediction/en,,/w, ,1/m,)/w,)/w, ,#,argmax/en,返回/v,一维/nw,张量/nr,中/f,最/d,大/a,的/u,值/n,所/u,在/p,的/u,位置/n,，/w,标签/n,值/n,和/c,预测/v,值/n,相同/a,，/w,返回/v,为/p,true/en, ,27/m, ,#,求/v,准确率/n, ,28/m, ,accuracy/en, ,=/w, ,tf/en,./w,reduce/en,_,mean/en,(/w,tf/en,./w,cast/en,(/w,correct/en,_,prediction/en,,/w, ,tf/en,./w,float/en,32/m,)/w,)/w, ,#,cast/en,函数/n,将/d,correct/en,_,prediction/en,的/u,布尔型/nr,转换/v,为/p,浮点型/nw,，/w,然后/c,计算/v,平均值/n,即/v,为/p,准确率/n, ,29/m, ,30/m, ,with/en, ,tf/en,./w,session/en,(/w,)/w, ,as/en, ,sess/en,:/w, ,31/m, ,sess/en,./w,run/en,(/w,init/en,)/w, ,32/m, ,#,将/d,测试/vn,集/vg,循环/vn,训练/vn,20次/mq, ,33/m, ,for/en, ,epoch/en, ,in/en, ,range/en,(/w,21/m,)/w,:/w, ,34/m, ,#,将/d,测试/vn,集中/v,所有/b,数据/n,循环/vn,一次/mq, ,35/m, ,for/en, ,batch/en, ,in/en, ,range/en,(/w,n/en,_,bitch/en,)/w,:/w, ,36/m, ,batch/en,_,xs/en,,/w, ,batch/en,_,ys/en, ,=/w, ,mnist/en,./w,train/en,./w,next/en,_,batch/en,(/w,batch/en,_,size/en,)/w, ,#,取/v,测试/vn,集中/v,batch/en,_,size/en,数量/n,的/u,图片/n,及/c,对应/v,的/u,标签/n,值/n, ,37/m, ,sess/en,./w,run/en,(/w,train/en,_,step/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,batch/en,_,xs/en,,/w, ,y/en,:/w,batch/en,_,ys/en,}/w,)/w, ,#,将/d,上/f,一行/n,代码/n,取/v,到/v,的/u,数据/n,进行/v,训练/vn, ,38/m, ,acc/en, ,=/w, ,sess/en,./w,run/en,(/w,accuracy/en,,/w, ,feed/en,_,dict/en,=/w,{/w,x/en,:/w,mnist/en,./w,test/en,./w,images/en,,/w, ,y/en,:/w,mnist/en,./w,test/en,./w,labels/en,}/w,)/w, ,#,准确率/n,的/u,计算/v, ,39/m, ,print/en,(/w,'/w,iter/en, ,:/w, ,'/w, ,+/w, ,str/en,(/w,epoch/en,)/w, ,+/w, ,'/w,,/w,testing/en, ,accuracy/en, ,=/w, ,'/w, ,+/w, ,str/en,(/w,acc/en,)/w,)/w,view/en, ,code/en,#,执行/v,结果/n,iter/en, ,:/w, ,1/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9224/m, ,iter/en, ,:/w, ,2/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9293/m, ,iter/en, ,:/w, ,3/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9195/m, ,iter/en, ,:/w, ,4/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9282/m, ,iter/en, ,:/w, ,5/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.926/m, ,iter/en, ,:/w, ,6/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9291/m, ,iter/en, ,:/w, ,7/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9288/m, ,iter/en, ,:/w, ,8/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9274/m, ,iter/en, ,:/w, ,9/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9277/m, ,iter/en, ,:/w, ,10/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9249/m, ,iter/en, ,:/w, ,11/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9313/m, ,iter/en, ,:/w, ,12/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9301/m, ,iter/en, ,:/w, ,13/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9315/m, ,iter/en, ,:/w, ,14/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9295/m, ,iter/en, ,:/w, ,15/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9299/m, ,iter/en, ,:/w, ,16/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9303/m, ,iter/en, ,:/w, ,17/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.93/m, ,iter/en, ,:/w, ,18/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9304/m, ,iter/en, ,:/w, ,19/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9269/m, ,iter/en, ,:/w, ,20/m,,/w,testing/en, ,accuracy/en, ,=/w, ,0.9273/m,view/en, ,code/en,注意/v,：/w,不同/a,优化器/nw,参数/n,的/u,设置/v,是/v,关键/n,。/w,在/p,机器/n,学习/v,中/f,，/w,参数/n,的/u,调整/vn,应该/v,是/v,技术/n,加/v,经验/n,，/w,而/c,不/d,是/v,盲目/ad,调整/vn,。/w,这边/r,是/v,我/r,以后/f,需要/v,学习/v,和/c,积累/v,的/u,地方/n,六/m,、/w,根据/p,今天/t,所/u,学/v,内容/n,，/w,对/p,mnist/en,数据集/nw,分类/vn,进行/v,优化/v,，/w,准确率/n,达到/v,95%/mq,以上/f,#,优化/v,程序/n,1/m, ,import/en, ,os/en, ,2/m, ,os/en,./w,environ/en,[/w,'/w,tf/en,_,cpp/en,_,min/en,_,log/en,_,level/en,'/w,]/w, ,=/w, ,'/w,2/m,'/w, ,3/m, ,import/en, ,tensorflow/en, ,as/en, ,tf/en, ,4/m, ,from/en, ,tensorflow/en,./w,examples/en,./w,tutorials/en,./w,mnist/en, ,import/en, ,input/en,_,data/en, ,5/m, ,#,载入/v,数据集/nw, ,6/m, ,mnist/en, ,=/w, ,input/en,_,data/en,./w,read/en,_,data/en,_,sets/en,(/w,'/w,mnist/en,_,data/en,'/w,,/w, ,one/en,_,hot/en,=/w,true/en,)/w, ,7/m, ,#,每个/r,批次/n,的/u,大小/n,（/w,即/v,每次/r,训练/vn,的/u,图片/n,数量/n,）/w, ,8/m, ,batch/en,_,size/en, ,=/w, ,50/m, ,9/m, ,#,计算/v,一共/d,有/v,多少/r,个/q,批次/n, ,10/m, ,n/en,_,bitch/en, ,=/w, ,mnist/en,./w,train/en,./w,num/en,_,examples/en, ,//w,//w, ,batch/en,_,size/en, ,11/m, ,#,定义/n,两个/m,placeholder/en, ,12/m, ,x/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,784/m,]/w,)/w, ,13/m, ,y/en, ,=/w, ,tf/en,./w,placeholder/en,(/w,tf/en,./w,float/en,32/m,,/w, ,[/w,none/en,,/w, ,10/m,]/w,)/w, ,14/m, ,#,创建/v,一个/m,只有/c,输入层/nw,（/w,784个/m,神经元/n,）/w,和/c,输出/v,层/q,（/w,10个/m,神经元/n,）/w,的/u,简单/a,神经/n,网络/n, ,15/m, ,weights/en,1/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,784/m,,/w, ,200/m,]/w,)/w,)/w, ,16/m, ,biases/en,1/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,200/m,]/w,)/w, ,+/w, ,0.1/m,)/w, ,17/m, ,wx/en,_,plus/en,_,b/en,_,l/en,1/m, ,=/w, ,tf/en,./w,matmul/en,(/w,x/en,,/w, ,weights/en,1/m,)/w, ,+/w, ,biases/en,1/m, ,18/m, ,l/en,1/m, ,=/w, ,tf/en,./w,nn/en,./w,tanh/en,(/w,wx/en,_,plus/en,_,b/en,_,l/en,1/m,)/w, ,19/m, ,20/m, ,weights/en,2/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,200/m,,/w, ,50/m,]/w,)/w,)/w, ,21/m, ,biases/en,2/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,50/m,]/w,)/w, ,+/w, ,0.1/m,)/w, ,22/m, ,wx/en,_,plus/en,_,b/en,_,l/en,2/m, ,=/w, ,tf/en,./w,matmul/en,(/w,l/en,1/m,,/w, ,weights/en,2/m,)/w, ,+/w, ,biases/en,2/m, ,23/m, ,l/en,2/m, ,=/w, ,tf/en,./w,nn/en,./w,tanh/en,(/w,wx/en,_,plus/en,_,b/en,_,l/en,2/m,)/w, ,24/m, ,25/m, ,weights/en,3/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,truncated/en,_,normal/en,(/w,[/w,50/m,,/w, ,10/m,]/w,)/w,)/w, ,26/m, ,biases/en,3/m, ,=/w, ,tf/en,./w,variable/en,(/w,tf/en,./w,zeros/en,(/w,[/w,10/m,