介绍/v,在/p,学习/v,机器/n,学习/v,的/u,时候/n,，/w,首当其冲/i,的/u,就是/d,准备/v,一份/mq,通用/vn,的/u,数据集/nw,，/w,方便/a,与/p,其他/r,的/u,算法/n,进行/v,比较/d,。/w,在/p,这里/r,，/w,我/r,写/v,了/u,一个/m,用于/v,加载/v,mnist/en,数据集/nw,的/u,方法/n,，/w,并/c,将/d,其/r,进行/v,封装/vn,，/w,主要/b,用于/v,将/d,mnist/en,数据集/nw,转换/v,成/v,numpy/en,./w,array/en,(/w,)/w,格式/n,的/u,训练/vn,数据/n,。/w,直接/ad,下面/f,看/v,下面/f,的/u,代码/n,吧/y,(/w,主要/b,还是/c,如何/r,用/p,python/en,去/v,读/v,取/v,binnary/en, ,file/en,)/w,！/w,mnist/en,数据集/nw,原/b,网址/n,：/w,http/en,:/w,//w,//w,yann/en,./w,lecun/en,./w,com/en,//w,exdb/en,//w,mnist/en,//w,github/en,源码/nw,下载/v,：/w,数据集/nw,（/w,源文件/n,+/w,解压/v,文件/n,+/w,字体/n,图像/n,jpg/en,格式/n,）/w,，/w, ,py/en,源码/nw,文件/n,文件/n,目录/n,//w,utils/en,//w,data/en,_,util/en,./w,py/en, ,用于/v,加载/v,mnist/en,数据集/nw,方法/n,文件/n,//w,utils/en,//w,test/en,./w,py/en, ,用于/v,测试/vn,的/u,文件/n,，/w,一个/m,简单/a,的/u,knn/en,测试/vn,mnist/en,数据集/nw,//w,data/en,//w,train/en,-/w,images/en,./w,idx/en,3/m,-/w,ubyte/en, ,训练/vn,集/vg,x/en,//w,dataset/en,//w,train/en,-/w,labels/en,./w,idx/en,1/m,-/w,ubyte/en, ,训练/vn,集/vg,y/en,//w,dataset/en,//w,data/en,//w,t/en,10/m,k/en,-/w,images/en,./w,idx/en,3/m,-/w,ubyte/en, ,测试/vn,集/vg,x/en,//w,dataset/en,//w,data/en,//w,t/en,10/m,k/en,-/w,labels/en,./w,idx/en,1/m,-/w,ubyte/en, ,测试/vn,集/vg,ymnist/en,数据集/nw,解释/v,将/d,mnist/en,文件/n,解压/v,后/f,，/w,发现/v,这些/r,文件/n,并/c,不/d,是/v,标准/n,的/u,图像/n,格式/n,。/w,这些/r,图像/n,数据/n,都/d,保存/v,在/p,二进制/n,文件/n,中/f,。/w,每个/r,样本/n,图像/n,的/u,宽高/nw,为/p,28/m,*/w,28/m,。/w,mnist/en,的/u,结构/n,如下/v,，/w,选取/v,train/en,-/w,images/en,[/w,code/en,]/w,training/en, ,set/en, ,image/en, ,file/en, ,(/w,train/en,-/w,images/en,-/w,idx/en,3/m,-/w,ubyte/en,)/w,:/w, ,[/w,offset/en,]/w, ,[/w,type/en,]/w, ,[/w,value/en,]/w, ,[/w,description/en,]/w, ,0000/m, ,32/m, ,bit/en, ,integer/en, ,0/m,x/en,00000803/m,(/w,2051/m,)/w, ,magic/en, ,number/en, ,0004/m, ,32/m, ,bit/en, ,integer/en, ,60000/m, ,number/en, ,of/en, ,images/en, ,0008/m, ,32/m, ,bit/en, ,integer/en, ,28/m, ,number/en, ,of/en, ,rows/en, ,0012/m, ,32/m, ,bit/en, ,integer/en, ,28/m, ,number/en, ,of/en, ,columns/en, ,0016/m, ,unsigned/en, ,byte/en, ,?/w,?/w, ,pixel/en, ,0017/m, ,unsigned/en, ,byte/en, ,?/w,?/w, ,pixel/en, ,./w,./w,./w,./w,./w,./w,./w,./w, ,xxxx/en, ,unsigned/en, ,byte/en, ,?/w,?/w, ,pixel/en,首先/d,该/r,数据/n,是/v,以/p,二进制/n,存储/vn,的/u,，/w,我们/r,读取/v,的/u,时候/n,要/v,以/p,’/w,rb/en,’/w,方式/n,读/v,取/v,；/w,其次/c,，/w,真正/d,的/u,数据/n,只有/c,[/w,value/en,]/w,这/r,一项/mq,，/w,其他/r,的/u,[/w,type/en,]/w,等/u,只/d,是/v,来/v,描述/v,的/u,，/w,并/c,不/d,真正/d,在/p,数据/n,文件/n,里面/f,。/w,也就是说/l,，/w,在/p,读/v,取/v,真实/a,数据/n,之前/f,，/w,我们/r,要/v,读/v,取/v,4个/m,32/m, ,bit/en, ,integer/en,./w,由/p,[/w,offset/en,]/w,我们/r,可以/v,看出/v,真正/d,的/u,pixel/en,是从/v,0016/m,开始/v,的/u,，/w,一个/m,int/en, ,32位/mq,，/w,所以/c,在/p,读/v,取/v,pixel/en,之前/f,我们/r,要/v,读/v,取/v,4个/m, ,32/m, ,bit/en, ,integer/en,，/w,也/d,就/d,是/v,magic/en, ,number/en,,/w, ,number/en, ,of/en, ,images/en,,/w, ,number/en, ,of/en, ,rows/en,,/w, ,number/en, ,of/en, ,columns/en,./w, ,当然/d,，/w,在/p,这里/r,使用/v,struct/en,./w,unpack/en,_,from/en,(/w,)/w,会/v,比较/d,方便/a,./w,源码/nw,说明/v,：/w,‘/w,>,iiii/en,’/w,指/v,的/u,是/v,使用/v,大端法/nw,读/v,取/v,4个/m,unsinged/en, ,int/en, ,32/m, ,bit/en, ,integer/en,‘/w,>,784/m,b/en,’/w,指/v,的/u,是/v,使用/v,大端法/nw,读取/v,784个/m,unsigned/en, ,bytedata/en,_,util/en,./w,py/en,文件/n,[/w,code/en,]/w,#, ,-/w,*/w,-/w, ,coding/en,:/w, ,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,"/w,"/w,"/w, ,created/en, ,on/en, ,thu/en, ,feb/en, ,25/m, ,14/m,:/w,40/m,:/w,06/m, ,2016/m, ,load/en, ,mnist/en, ,dataset/en, ,@/w,author/en,:/w, ,liudiwei/en, ,"/w,"/w,"/w, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,struct/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,import/en, ,os/en, ,class/en, ,datautils/en,(/w,object/en,)/w,:/w, ,"/w,"/w,"/w,mnist/en,数据集/nw,加载/v, ,输出/v,格式/n,为/p,：/w,numpy/en,./w,array/en,(/w,)/w, ,使用/v,方法/n,如下/v, ,from/en, ,data/en,_,util/en, ,import/en, ,datautils/en, ,def/en, ,main/en,(/w,)/w,:/w, ,trainfile/en,_,x/en, ,=/w, ,'/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,train/en,-/w,images/en,./w,idx/en,3/m,-/w,ubyte/en,'/w, ,trainfile/en,_,y/en, ,=/w, ,'/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,train/en,-/w,labels/en,./w,idx/en,1/m,-/w,ubyte/en,'/w, ,testfile/en,_,x/en, ,=/w, ,'/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,t/en,10/m,k/en,-/w,images/en,./w,idx/en,3/m,-/w,ubyte/en,'/w, ,testfile/en,_,y/en, ,=/w, ,'/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,t/en,10/m,k/en,-/w,labels/en,./w,idx/en,1/m,-/w,ubyte/en,'/w, ,train/en,_,x/en, ,=/w, ,datautils/en,(/w,filename/en,=/w,trainfile/en,_,x/en,)/w,./w,getimage/en,(/w,)/w, ,train/en,_,y/en, ,=/w, ,datautils/en,(/w,filename/en,=/w,trainfile/en,_,y/en,)/w,./w,getlabel/en,(/w,)/w, ,test/en,_,x/en, ,=/w, ,datautils/en,(/w,testfile/en,_,x/en,)/w,./w,getimage/en,(/w,)/w, ,test/en,_,y/en, ,=/w, ,datautils/en,(/w,testfile/en,_,y/en,)/w,./w,getlabel/en,(/w,)/w, ,#,以下/f,内容/n,是/v,将/d,图像/n,保存/v,到/v,本地/r,文件/n,中/f, ,#,path/en,_,trainset/en, ,=/w, ,"/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,imgs/en,_,train/en,"/w, ,#,path/en,_,testset/en, ,=/w, ,"/w,./w,./w,//w,dataset/en,//w,mnist/en,//w,imgs/en,_,test/en,"/w, ,#,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,path/en,_,trainset/en,)/w,:/w, ,#, ,os/en,./w,mkdir/en,(/w,path/en,_,trainset/en,)/w, ,#,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,path/en,_,testset/en,)/w,:/w, ,#, ,os/en,./w,mkdir/en,(/w,path/en,_,testset/en,)/w, ,#,datautils/en,(/w,outpath/en,=/w,path/en,_,trainset/en,)/w,./w,outimg/en,(/w,train/en,_,x/en,,/w, ,train/en,_,y/en,)/w, ,#,datautils/en,(/w,outpath/en,=/w,path/en,_,testset/en,)/w,./w,outimg/en,(/w,test/en,_,x/en,,/w, ,test/en,_,y/en,)/w, ,return/en, ,train/en,_,x/en,,/w, ,train/en,_,y/en,,/w, ,test/en,_,x/en,,/w, ,test/en,_,y/en, ,"/w,"/w,"/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,filename/en,=/w,none/en,,/w, ,outpath/en,=/w,none/en,)/w,:/w, ,self/en,./w,_,filename/en, ,=/w, ,filename/en, ,self/en,./w,_,outpath/en, ,=/w, ,outpath/en, ,self/en,./w,_,tag/en, ,=/w, ,'/w,>,'/w, ,self/en,./w,_,twobytes/en, ,=/w, ,'/w,ii/en,'/w, ,self/en,./w,_,fourbytes/en, ,=/w, ,'/w,iiii/en,'/w, ,self/en,./w,_,picturebytes/en, ,=/w, ,'/w,784/m,b/en,'/w, ,self/en,./w,_,labelbyte/en, ,=/w, ,'/w,1/m,b/en,'/w, ,self/en,./w,_,twobytes/en,2/m, ,=/w, ,self/en,./w,_,tag/en, ,+/w, ,self/en,./w,_,twobytes/en, ,self/en,./w,_,fourbytes/en,2/m, ,=/w, ,self/en,./w,_,tag/en, ,+/w, ,self/en,./w,_,fourbytes/en, ,self/en,./w,_,picturebytes/en,2/m, ,=/w, ,self/en,./w,_,tag/en, ,+/w, ,self/en,./w,_,picturebytes/en, ,self/en,./w,_,labelbyte/en,2/m, ,=/w, ,self/en,./w,_,tag/en, ,+/w, ,self/en,./w,_,labelbyte/en, ,def/en, ,getimage/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w, ,将/d,mnist/en,的/u,二进制/n,文件/n,转换/v,成/v,像素/n,特征/n,数据/n, ,"/w,"/w,"/w, ,binfile/en, ,=/w, ,open/en,(/w,self/en,./w,_,filename/en,,/w, ,'/w,rb/en,'/w,)/w, ,#,以/p,二进制/n,方式/n,打开/v,文件/n, ,buf/en, ,=/w, ,binfile/en,./w,read/en,(/w,)/w, ,binfile/en,./w,close/en,(/w,)/w, ,index/en, ,=/w, ,0/m, ,nummagic/en,,/w,numimgs/en,,/w,numrows/en,,/w,numcols/en,=/w,struct/en,./w,unpack/en,_,from/en,(/w,self/en,./w,_,fourbytes/en,2/m,,/w,\/w, ,buf/en,,/w,\/w, ,index/en,)/w, ,index/en, ,+/w,=/w, ,struct/en,./w,calcsize/en,(/w,self/en,./w,_,fourbytes/en,)/w, ,images/en, ,=/w, ,[/w,]/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,numimgs/en,)/w,:/w, ,imgval/en, ,=/w, ,struct/en,./w,unpack/en,_,from/en,(/w,self/en,./w,_,picturebytes/en,2/m,,/w, ,buf/en,,/w, ,index/en,)/w, ,index/en, ,+/w,=/w, ,struct/en,./w,calcsize/en,(/w,self/en,./w,_,picturebytes/en,2/m,)/w, ,imgval/en, ,=/w, ,list/en,(/w,imgval/en,)/w, ,for/en, ,j/en, ,in/en, ,range/en,(/w,len/en,(/w,imgval/en,)/w,)/w,:/w, ,if/en, ,imgval/en,[/w,j/en,]/w, ,>, ,1/m,:/w, ,imgval/en,[/w,j/en,]/w, ,=/w, ,1/m, ,images/en,./w,append/en,(/w,imgval/en,)/w, ,return/en, ,np/en,./w,array/en,(/w,images/en,)/w, ,def/en, ,getlabel/en,(/w,self/en,)/w,:/w, ,"/w,"/w,"/w, ,将/d,mnist/en,中/f,label/en,二进制/n,文件/n,转换/v,成/v,对应/v,的/u,label/en,数字/n,特征/n, ,"/w,"/w,"/w, ,binfile/en, ,=/w, ,open/en,(/w,self/en,./w,_,filename/en,,/w,'/w,rb/en,'/w,)/w, ,buf/en, ,=/w, ,binfile/en,./w,read/en,(/w,)/w, ,binfile/en,./w,close/en,(/w,)/w, ,index/en, ,=/w, ,0/m, ,magic/en,,/w, ,numitems/en,=/w, ,struct/en,./w,unpack/en,_,from/en,(/w,self/en,./w,_,twobytes/en,2/m,,/w, ,buf/en,,/w,index/en,)/w, ,index/en, ,+/w,=/w, ,struct/en,./w,calcsize/en,(/w,sel