我/r,是/v,一名/mq,初/f,学者/n,，/w,如果/c,你/r,发现/v,文中/s,有/v,错误/n,，/w,请/v,留言/v,告诉/v,我/r,，/w,谢谢/v,如果/c,需要/v,检测/vn,到/v,图像/n,里面/f,的/u,边缘/n,，/w,首先/d,我们/r,需要/v,知道/v,边缘/n,处/n,具有/v,什么/r,特征/n,。/w,对于/p,一幅/mq,灰度/n,图像/n,来说/u,，/w,边缘/n,两边/f,的/u,灰度/n,值/n,肯定/v,不/d,相同/a,，/w,这样/r,我们/r,才/d,能/v,分辨/v,出/v,哪里/r,是/v,边缘/n,，/w,哪里/r,不/d,是/v,。/w,因此/c,，/w,如果/c,我们/r,需要/v,检测/vn,一个/m,灰度/n,图像/n,的/u,边缘/n,，/w,我们/r,需要/v,找/v,出/v,哪里/r,的/u,灰度/n,变化/vn,最/d,大/a,。/w,显然/ad,，/w,灰度/n,变化/vn,越/d,大/a,，/w,对比度/n,越/d,强/a,，/w,边缘/n,就/d,越/d,明显/a,。/w,那么/r,问题/n,来/v,了/u,，/w,我们/r,怎么/r,知道/v,哪里/r,灰度/n,变化/vn,大/a,，/w,哪里/r,灰度/n,变化/vn,小/a,呢/y,？/w,导数/n,，/w,梯度/n,，/w,边缘/n,信息/n,在/p,数学/n,中/f,，/w,与/p,变化率/n,有关/vn,的/u,就/d,是/v,导数/n,。/w,如果/c,灰度/n,图像/n,的/u,像素/n,是/v,连续/a,的/u,(/w,实际/n,不/d,是/v,)/w,，/w,那么/r,我们/r,可以/v,分别/d,原/b,图像/n,g/en,对/p,x/en,方向/n,和/c,y/en,方向/n,求/v,导数/n,，/w,获得/v,x/en,方向/n,的/u,导数/n,图像/n,gx/en,和/c,y/en,方向/n,的/u,导数/n,图像/n,gy/en,。/w,gx/en,和/c,gy/en,分别/d,隐含/v,了/u,x/en,和/c,y/en,方向/n,的/u,灰度/n,变化/vn,信息/n,，/w,也/d,就/d,隐含/v,了/u,边缘/n,信息/n,。/w,如果/c,要/v,在/p,同一/b,图像/n,上/f,包含/v,两个/m,方向/n,的/u,边缘/n,信息/n,，/w,我们/r,可以/v,用/p,到/v,梯度/n,。/w,（/w,梯度/n,是/v,一个/m,向量/n,）/w,原/b,图像/n,的/u,梯度/n,向量/n,gxy/en,为/p,（/w,gx/en,,/w,gy/en,）/w,,/w,梯度/n,向量/n,的/u,大小/n,和/c,方向/n,可以/v,用/p,下面/f,两个/m,式子/n,计算/v,角度/n,值/n,好像/v,需要/v,根据/p,向量/n,所/u,在/p,象限/n,不同/a,适当/a,+/w,pi/en,或者/c,-/w,pi/en,。/w,梯度/n,向/p,量/n,大小/n,就/d,包含/v,了/u,x/en,方向/n,和/c,y/en,方向/n,的/u,边缘/n,信息/n,。/w,图像/n,导数/n,实际上/d,，/w,图像/n,矩阵/n,是/v,离散/vn,的/u,。/w,连续/a,函数/n,求/v,变化率/n,用/p,的/u,是/v,导数/n,，/w,而/c,离散/vn,函数/n,求/v,变化率/n,用/p,的/u,是/v,差分/nw,。/w,差分/nw,的/u,概念/n,很/d,容易/a,理解/v,，/w,就是/d,用/p,相邻/v,两/m,个数/n,的/u,差/a,来/v,表示/v,变化率/n,。/w,下面/f,公式/n,是/v,向/p,后/f,差分/nw,x/en,方向/n,的/u,差分/nw,：/w,gx/en,(/w,n/en,,/w,y/en,)/w, ,=/w, ,g/en,(/w,n/en,,/w,y/en,)/w,-/w,g/en,(/w,n/en,-/w,1/m,,/w,y/en,)/w,y/en,方向/n,的/u,差分/nw,：/w,gy/en,(/w,x/en,,/w,n/en,)/w, ,=/w, ,g/en,(/w,x/en,,/w,n/en,)/w,-/w,g/en,(/w,x/en,,/w,n/en,-/w,1/m,)/w,实际/n,计算/v,图像/n,导数/n,时/ng,，/w,我们/r,是/v,通过/p,原/b,图像/n,和/c,一个/m,算子/n,进行/v,卷积/nw,来/v,完成/v,的/u,(/w,这种/r,方法/n,是/v,求/v,图像/n,的/u,近似/a,导数/n,)/w,。/w,最/d,简单/a,的/u,求/v,图像/n,导数/n,的/u,算子/n,是/v, ,prewitt/en,算子/n, ,：/w,x/en,方向/n,的/u,prewitt/en,算子/n,为/p,y/en,方向/n,的/u,prewitt/en,算子/n,为/p,---------------------------------------------/nrf,原/b,图像/n,和/c,一个/m,算子/n,进行/v,卷积/nw,的/u,大概/d,过程/n,如下/v,如果/c,图像/n,矩阵/n,中/f,一块/mq,区域/n,为/p,那么/r,x/en,5处/mq,的/u,x/en,方向/n,的/u,导数/n,是/v,，/w,将/d,x/en,方向/n,算子/n,的/u,中心/n,和/c,x/en,5/m,重合/vn,，/w,然后/c,对应/v,元素/n,相/d,乘/v,再/d,求和/vn,，/w,即/v,x/en,5处/mq,的/u,x/en,方向/n,导数/n,为/p,x/en,3/m,+/w,x/en,6/m,+/w,x/en,9/m,-/w,x/en,1/m,-/w,x/en,4/m,-/w,x/en,7对/mq,矩阵/n,中/f,所有/b,元素/n,进行/v,上述/b,计算/v,，/w,就是/d,卷积/nw,的/u,过程/n,。/w,--------------------------------------------/nrf,因此/c,，/w,利用/v,原/b,图像/n,和/c,x/en,方向/n,prewitt/en,算子/n,进行/v,卷积/nw,就/d,可以/v,得到/v,图像/n,的/u,x/en,方向/n,导数/n,矩阵/n,gx/en,，/w,利用/v,原/b,图像/n,和/c,y/en,方向/n,prewitt/en,算子/n,进行/v,卷积/nw,就/d,可以/v,得到/v,图像/n,的/u,y/en,方向/n,导数/n,矩阵/n,gy/en,。/w,利用/v,公式/n,就/d,可以/v,得到/v,图像/n,的/u,梯度/n,矩阵/n,gxy/en,，/w,这个/r,矩阵/n,包含/v,图像/n,x/en,方向/n,和/c,y/en,方向/n,的/u,边缘/n,信息/n,。/w,python/en,实现/v,卷积/nw,及/c,prewitt/en,算子/n,的/u,边缘/n,检测/vn,首先/d,我们/r,把/p,图像/n,卷积/nw,函数/n,封/q,装/v,在/p,一个/m,名/q,为/p,imconv/en,的/u,函数/n,中/f, , ,(/w, ,实际上/d,，/w,scipy/en,库/n,中/f,的/u,signal/en,模块/n,含有/v,一个/m,二维/nr,卷积/nw,的/u,方法/n,convolve/en,2/m,d/en,(/w,)/w, , ,)/w,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,pil/en, ,import/en, ,image/en, ,def/en, ,imconv/en,(/w,image/en,_,array/en,,/w,suanzi/en,)/w,:/w, ,'/w,'/w,'/w,计算/v,卷积/nw, ,参数/n, ,image/en,_,array/en, ,原/b,灰度/n,图像/n,矩阵/n, ,suanzi/en, ,算子/n, ,返回/v, ,原/b,图像/n,与/p,算子/n,卷积/nw,后/f,的/u,结果/n,矩阵/n, ,'/w,'/w,'/w, ,image/en, ,=/w, ,image/en,_,array/en,./w,copy/en,(/w,)/w, ,#, ,原/b,图像/n,矩阵/n,的/u,深/a,拷贝/n, ,dim/en,1/m,,/w,dim/en,2/m, ,=/w, ,image/en,./w,shape/en, ,#, ,对/p,每个/r,元素/n,与/p,算子/n,进行/v,乘积/n,再/d,求/v,和/c,(/w,忽略/v,最/d,外/f,圈/q,边/d,框/q,像/v,素/dg,)/w, ,for/en, ,i/en, ,in/en, ,range/en,(/w,1/m,,/w,dim/en,1/m,-/w,1/m,)/w,:/w, ,for/en, ,j/en, ,in/en, ,range/en,(/w,1/m,,/w,dim/en,2/m,-/w,1/m,)/w,:/w, ,image/en,[/w,i/en,,/w,j/en,]/w, ,=/w, ,(/w,image/en,_,array/en,[/w,(/w,i/en,-/w,1/m,)/w,:/w,(/w,i/en,+/w,2/m,)/w,,/w,(/w,j/en,-/w,1/m,)/w,:/w,(/w,j/en,+/w,2/m,)/w,]/w,*/w,suanzi/en,)/w,./w,sum/en,(/w,)/w, ,#, ,由于/c,卷积/nw,后/f,灰度/n,值/n,不/d,一定/d,在/p,0/m,-/w,255/m,之间/f,，/w,统一/vn,化成/v,0/m,-/w,255/m, ,image/en, ,=/w, ,image/en,*/w,(/w,255.0/m,//w,image/en,./w,max/en,(/w,)/w,)/w, ,#, ,返回/v,结果/n,矩阵/n, ,return/en, ,image/en,然后/c,我们/r,利用/v,prewitt/en,算子/n,计算/v,x/en,方向/n,导数/n,矩阵/n,gx/en,，/w,y/en,方向/n,导数/n,矩阵/n,gy/en,，/w,和/c,梯度/n,矩阵/n,gxy/en,。/w,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,matplotlib/en,./w,pyplot/en, ,as/en, ,plt/en, ,#, ,x/en,方向/n,的/u,prewitt/en,算子/n, ,suanzi/en,_,x/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,-/w,1/m,,/w, ,0/m,,/w, ,1/m,]/w,,/w, ,[/w, ,-/w,1/m,,/w, ,0/m,,/w, ,1/m,]/w,,/w, ,[/w, ,-/w,1/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,)/w, ,#, ,y/en,方向/n,的/u,prewitt/en,算子/n, ,suanzi/en,_,y/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,-/w,1/m,,/w,-/w,1/m,,/w,-/w,1/m,]/w,,/w, ,[/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w, ,1/m,,/w, ,1/m,,/w, ,1/m,]/w,]/w,)/w, ,#, ,打开/v,图像/n,并/c,转化/v,成/v,灰度/n,图像/n, ,image/en, ,=/w, ,image/en,./w,open/en,(/w,"/w,pika/en,./w,jpg/en,"/w,)/w,./w,convert/en,(/w,"/w,l/en,"/w,)/w, ,#, ,转化/v,成/v,图像/n,矩阵/n, ,image/en,_,array/en, ,=/w, ,np/en,./w,array/en,(/w,image/en,)/w, ,#, ,得到/v,x/en,方向/n,矩阵/n, ,image/en,_,x/en, ,=/w, ,imconv/en,(/w,image/en,_,array/en,,/w,suanzi/en,_,x/en,)/w, ,#, ,得到/v,y/en,方向/n,矩阵/n, ,image/en,_,y/en, ,=/w, ,imconv/en,(/w,image/en,_,array/en,,/w,suanzi/en,_,y/en,)/w, ,#, ,得到/v,梯度/n,矩阵/n, ,image/en,_,xy/en, ,=/w, ,np/en,./w,sqrt/en,(/w,image/en,_,x/en,*/w,*/w,2/m,+/w,image/en,_,y/en,*/w,*/w,2/m,)/w, ,#, ,梯度/n,矩阵/n,统一/vn,到/v,0/m,-/w,255/m, ,image/en,_,xy/en, ,=/w, ,(/w,255.0/m,//w,image/en,_,xy/en,./w,max/en,(/w,)/w,)/w,*/w,image/en,_,xy/en, ,#, ,绘/v,出/v,图像/n, ,plt/en,./w,subplot/en,(/w,2/m,,/w,2/m,,/w,1/m,)/w, ,plt/en,./w,imshow/en,(/w,image/en,_,array/en,,/w,cmap/en,=/w,cm/en,./w,gray/en,)/w, ,plt/en,./w,axis/en,(/w,"/w,off/en,"/w,)/w, ,plt/en,./w,subplot/en,(/w,2/m,,/w,2/m,,/w,2/m,)/w, ,plt/en,./w,imshow/en,(/w,image/en,_,x/en,,/w,cmap/en,=/w,cm/en,./w,gray/en,)/w, ,plt/en,./w,axis/en,(/w,"/w,off/en,"/w,)/w, ,plt/en,./w,subplot/en,(/w,2/m,,/w,2/m,,/w,3/m,)/w, ,plt/en,./w,imshow/en,(/w,image/en,_,y/en,,/w,cmap/en,=/w,cm/en,./w,gray/en,)/w, ,plt/en,./w,axis/en,(/w,"/w,off/en,"/w,)/w, ,plt/en,./w,subplot/en,(/w,2/m,,/w,2/m,,/w,4/m,)/w, ,plt/en,./w,imshow/en,(/w,image/en,_,xy/en,,/w,cmap/en,=/w,cm/en,./w,gray/en,)/w, ,plt/en,./w,axis/en,(/w,"/w,off/en,"/w,)/w, ,plt/en,./w,show/en,(/w,)/w,prewitt/en,算子/n, ,的/u,结果/n,如下/v,图/n,所/u,示/vg,上方/f,：/w,左图/n,为/p,原/b,图像/n,，/w,右图/n,为/p,x/en,方向/n,导数/n,图像/n,下方/f,：/w,左图/n,为/p,y/en,方向/n,导数/n,图像/n,，/w,右图/n,为/p,梯度/n,图像/n,从/p,图/n,中/f,可以/v,看出/v,，/w,prewitt/en,算子/n,虽然/c,能/v,检测/vn,出/v,图像/n,边缘/n,，/w,但是/c,检测/vn,结果/n,较为/d,粗糙/a,，/w,还/d,带有/v,大量/m,的/u,噪声/n,。/w,近似/a,导数/n,的/u,sobel/en,算子/n,sobel/en,算子/n,与/p,prewitt/en,比较/d,类似/v,，/w,但是/c,它/r,比/p,prewitt/en,算子/n,要/v,好/a,一些/m,。/w,x/en,方向/n,的/u,sobel/en,算子/n,为/p,y/en,方向/n,的/u,sobel/en,算子/n,为/p,python/en,代码/n,只/d,需要/v,将/d,上面/f,代码/n,中/f,的/u,prewitt/en,算子/n,改/v,成/v,sobel/en,算子/n,即可/v,。/w,#, ,x/en,方向/n,的/u,sobel/en,算子/n, ,suanzi/en,_,x/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,-/w,1/m,,/w, ,0/m,,/w, ,1/m,]/w,,/w, ,[/w, ,-/w,2/m,,/w, ,0/m,,/w, ,2/m,]/w,,/w, ,[/w, ,-/w,1/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,)/w, ,#, ,y/en,方向/n,的/u,sobel/en,算子/n, ,suanzi/en,_,y/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,-/w,1/m,,/w,-/w,2/m,,/w,-/w,1/m,]/w,,/w, ,[/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w, ,1/m,,/w, ,2/m,,/w, ,1/m,]/w,]/w,)/w,sobel/en,算子/n, ,的/u,结果/n,如下/v,图/n,所/u,示/vg,上方/f,：/w,左图/n,为/p,原/b,图像/n,，/w,右图/n,为/p,x/en,方向/n,导数/n,图像/n,下方/f,：/w,左图/n,为/p,y/en,方向/n,导数/n,图像/n,，/w,右图/n,为/p,梯度/n,图像/n,从/p,图/n,中/f,看出/v,，/w,比较/d,prewitt/en,算子/n,和/c,sobel/en,算子/n,，/w,sobel/en,算子/n,稍微/d,减少/v,了/u,一点/m,噪声/n,，/w,但/c,噪声/n,还是/c,比较/d,多/a,的/u,。/w,近似/a,二阶/nr,导数/n,的/u,laplace/en,算子/n,laplace/en,算子/n,是/v,一个/m,二阶/nr,导数/n,的/u,算子/n,，/w,它/r,实际上/d,是/v,一个/m,x/en,方向/n,二阶/nr,导数/n,和/c,y/en,方向/n,二阶/nr,导数/n,的/u,和/c,的/u,近似/a,求导/nw,算子/n,。/w,实际上/d,，/w,laplace/en,算子/n,是/v,通过/p,sobel/en,算子/n,推导/vn,出来/v,的/u,。/w,laplace/en,算子/n,为/p,laplace/en,还有/v,一种/mq,扩展/v,算子/n,为/p,为了/p,不再/d,重复/v,造/v,轮子/n,，/w,这次/r,我们/r,运用/v,scipy/en,库/n,中/f,signal/en,模块/n