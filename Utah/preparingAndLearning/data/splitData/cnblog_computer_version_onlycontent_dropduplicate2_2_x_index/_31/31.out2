1999年/t,由/p,david/en, ,lowe/en,首先/d,发表/v,于/p,计算机/n,视觉/n,国际/n,会议/n,（/w,international/en, ,conference/en, ,on/en, ,computer/en, ,vision/en,，/w,iccv/en,）/w,，/w,2004年/t,再次/d,经/p,david/en, ,lowe/en,整理/v,完善/v,后/f,发表/v,于/p,international/en, ,journal/en, ,of/en, ,computer/en, ,vision/en,（/w,ijcv/en,）/w,。/w,截止/vn,2014年/t,8月/t,，/w,该/r,论文/n,单/d,篇/q,被/p,引/v,次数/n,达/v,25000/m,余/m,次/q,。/w,---/nrf,来自/v,百科/n,本/r,打算/v,对/p,04年/t,的/u,论文/n,进行/v,翻译/v,，/w,结果/n,。/w,居然/d,搜/v,到/v,完整/a,翻译/v,版/n,，/w,虽然/c,翻译/v,的/u,不/d,太/d,好/a,，/w,不过/c,有/v,聊胜于无/i,。/w,本文/r,的/u,讲解/v,大部分/m,主要/b,还是/c,借鉴/v,了/u,最/d,下面/f,参考/v,文献/n,【/w,8/m,】/w,的/u,资料/n,，/w,先/d,谢/v,过/u,作者/n,，/w,该/r,作者/n,对/p,opencv/en,的/u,好多/m,源码/nw,进行/v,了/u,分析/vn,，/w,很/d,强/a,啊/y,。/w,先/d,说/v,sift/en,中/f,一步/mq,一步/mq,的/u,的/u,动机/n,（/w,motivation/en,）/w,：/w,对于/p,普通/a,的/u,图像/n,匹配/vn,来说/u,（/w,都/d,是/v,平面/n,物体/n,：/w,比如/v,放在/v,这个/r,桌子/n,上/f,的/u,书/n,，/w,然后/c,这/r,本/r,书/n,放/v,在/p,另/r,一个/m,地方/n,，/w,而/c,非/h,人/n,脸/n,在/p,不断/d,的/u,旋转/v,，/w,一下/m,只能/v,看到/v,侧脸/nw,，/w,一下/m,看到/v,前脸/nw,。/w,即/v,sift/en,的/u,优点/n,之/u,处/n,，/w,旋转/v,，/w,缩放/v,，/w,尺度/n,不/d,变/v,的/u,特性/n,，/w,而/c,这里/r,都/d,指/v,的/u,是/v,平面/n,内/f,，/w,而/c,不/d,是/v,平面/n,外/f,的/u,旋转/v,）/w,【此/nw,观点/n,如果/c,有/v,误/v,还/d,望/v,告知/v,】/w,，/w,sift/en,的/u,先驱/n,们/k,发现/v,，/w,对于/p,平面/n,物体/n,来说/u,只要/c,对/p,两幅/mq,图像/n,找到/v,超过/v,3对/mq,物体/n,间/f,的/u,匹配/vn,点/q,，/w,就/d,能/v,使用/v,射影/n,几何/n,进行/v,对应/v,。/w,而/c,对于/p,旋转/v,的/u,，/w,缩放/v,的/u,图像/n,，/w,如何/r,建立/v,稳定/a,的/u,关键点/n,，/w,就/d,是/v,关键/n,了/u,，/w,当然/d,必须/d,考虑/v,到/v,光照/n,变化/vn,，/w,所以/c,相对/d,来说/u,，/w,比如/v,角点/nw,、/w,边缘/n,、/w,亮/v,区域/n,中/f,的/u,暗点/nw,，/w,暗/ad,区域/n,中/f,的/u,亮点/n,等等/u,。/w,--/nrf,这/r,就/d,是/v,关键点/n,检测/vn,。/w,ps/en,：/w,sift/en,是/v,建立/v,在/p,灰度/n,图/n,上/f,的/u,。/w,当然/d,找/v,关键点/n,的/u,方法/n,就/d,是/v,求取/nw,空间/n,的/u,极值/nz,，/w,可是/c,对于/p,只有/c,离散/vn,值/n,的/u,图像/n,来说/u,，/w,如何/r,能够/v,模拟/b,连续/a,值/n,形式/n,的/u,函数/n,来/v,找到/v,最小值/nz,，/w,这/r,是/v,问题/n,的/u,关键/n,。/w,而且/c,通常/d,来说/u,，/w,要求/v,图像/n,的/u,最/d,值/n,，/w,需要/v,求导/nw,什么的/r,，/w,而/c,这/r,都/d,是/v,使用/v,滤波器/n,的/u,方法/n,来/v,实现/v,的/u,。/w,可是/c,对于/p,不同/a,尺度/n,的/u,图像/n,或者/c,其中/r,的/u,物体/n,来说/u,，/w,同一/b,个/q,尺寸/n,的/u,滤波器滤波/nw,之后/f,得到/v,的/u,极值/nz,有/v,可能/v,差别/n,较/d,大/a,，/w,所以/c,就/d,出现/v,了/u,金字塔/n,形状/n,。/w,【此/nw,观点/n,如果/c,有/v,误/v,，/w,还/d,望/v,告知/v,】/w,假设/v,图像/n,是/v,深层/b,的/u,，/w,那么/r,不断/d,的/u,不同/a,大小/n,的/u,尺度/n,的/u,图/n,中/f,是/v,会/v,有/v,相同/a,信息/n,的/u,，/w,所以/c,这/r,可以/v,看成/v,是/v,插值/nw,形式/n,，/w,即/v,当前/t,图像/n,与/p,图像/n,浓缩/vn,成/v,一个/m,点/q,之间/f,无限/vd,的/u,插值/nw,而/c,成/v,的/u,不同/a,尺度/n,却/d,内容/n,相同/a,的/u,图像/n,序列/n,。/w,可想而知/i,这时候/r,关键点/n,是/v,有/v,了/u,，/w,可是/c,杂质/n,太/d,多/a,，/w,所以/c,需要/v,提纯/vn,，/w,所以/c,在/p,极值/nz,之后/f,得到/v,关键点/n,，/w,接着/c,就/d,需要/v,基于/p,关键点/n,进行/v,筛选/v,，/w,得到/v,更/d,稳定/a,的/u,关键点/n,。/w,---/nrf,这/r,就/d,是/v,关键点/n,定位/vn,。/w,ps/en,：/w,解决/v,了/u,缩放/v,、/w,尺度/n,的/u,特性/n,问题/n,。/w,然后/c,为了/p,使得/v,关键点/n,更加/d,稳固/a,，/w,如果/c,加上/v,关键点/n,周边/n,的/u,信息/n,，/w,一起/s,作为/v,其/r,特征/n,，/w,那么/r,就/d,能/v,更/d,好/a,的/u,建立/v,特征/n,空间/n,。/w,这时候/r,可以/v,引入/v,方向/n,信息/n,，/w,即/v,求/v,其/r,梯度/n,，/w,这样/r,只要/c,将/d,不同/a,图片/n,的/u,这/r,一步/mq,的/u,方向/n,都/d,旋转/v,到/v,同一个/r,方向/n,，/w,那么/r,就/d,能够/v,更/d,好/a,的/u,匹配/vn,配/v,了/u,，/w,这样/r,就/d,解决/v,了/u,旋转/v,的/u,问题/n,。/w,---/nrf,这/r,就/d,是/v,方向/n,确定/v,。/w,ps/en,：/w,这样/r,尺度/n,、/w,方向/n,，/w,位置/n,信息/n,就/d,都/d,有/v,了/u,。/w,接下来/l,就/d,是/v,将/d,上面/f,的/u,这些/r,信息/n,都/d,进行/v,统一/vn,的/u,描述/v,，/w,从而/c,建立/v,最后/f,的/u,sift/en,特征/n,。/w,---/nrf,这/r,就/d,是/v,建立/v,描述符/n,。/w,一/m,、/w,原理/n,分析/vn,1/m,、/w,尺度/n,空间/n,极/d,值点/nw,检测/vn,尺度/n,空间/n,：/w,高大/a,上/f,的/u,词/n,，/w,具体/a,可/v,参考/v,[/w,6/m,，/w,7/m,]/w,。/w,其实/d,就/d,是/v,对应/v,着/u,平时/t,拍照/v,时候/n,，/w,摄像头/n,的/u,聚焦/v,过程/n,产生/v,的/u,清晰/a,还是/c,模糊/a,的/u,意思/n,。/w,为了/p,更/d,直观/a,，/w,先/d,从/p,维基/nrf,上/f,找到/v,的/u,资料/n,来/v,解释/v,下/f,什么/r,是/v,尺度/n,空间/n,，/w,当然/d,这里/r,指/v,的/u,是/v,计算机/n,视觉/n,中/f,的/u,尺度/n,空间/n,。/w,对于/p,一幅/mq,给/p,定/v,的/u,图像/n, ,,/w, ,它/r,的/u,线性/n,（/w,高斯/nr,）/w,尺度/n,空间/n,就/d,是/v,由/p,该/r,图像/n,与/p,一个/m,2维/mq,高斯/nr,核卷/nw,积/v,得到/v,的/u, , ,./w,其中/r,卷积核/nw,如下/v,：/w,（/w,公式/n,1/m,）/w,其中/r,为/p,模糊/a,半径/n,的/u,平方/q,。/w,得到/v,的/u,尺度/n,空间/n,为/p,：/w,（/w,公式/n,2/m,）/w,中/f,的/u,点/q,表示/v,只/d,在/p,变量/n, ,,/w,上/f,执行/v,卷积/nw,操作/v,，/w, , ,就/d,是/v,尺度/n,参数/n,了/u,，/w,是/v,用/p,来/v,表示/v,当前/t,在/p,哪个/r,尺度/n,级别/n,上/f,进行/v,卷积/nw,。/w,这个/r,定义/n, , ,中/f,限制/v,了/u, ,,/w,不过/c,可以/v,看/v,得/u,出来/v,，/w,计算机/n,视觉/n,中/f,得到/v,的/u,都/d,是/v,离散/vn,的/u,，/w,间断/v,的/u,图像/n,序列/n,，/w,而/c,没法/v,得到/v,连续/a,的/u,图像/n,。/w,当然/d,尺度/n,参数/n,即/v,为/p,高斯/nr,过滤器/n,的/u,方差/nr, , ,，/w,如果/c,说/v, ,那么/r,过滤器/n, , ,就/d,变成/v,一个/m,脉冲/n,函数/n,，/w,导致/v,的/u,结果/n,就/d,是/v, , ,也/d,就是/d,在/p, , ,这个/r,级别/n,的/u,尺度/n,空间/n,，/w,其实/d,就/d,是/v,图像/n, , ,自己/r,。/w,随着/p, ,的/u,变/v,大/a,，/w, ,就/d,是/v,针对/p,图像/n,上/f,使用/v,越来越/d,大/a,的/u,平滑/an,过滤器/n,,/w,因而/c,会/v,移/v,除/p,越来越/d,多/a,图像/n,内容/n,的/u,细节/n,。/w,因为/c,过滤器/n,的/u,标准/n,差/a,是/v, ,,/w,所以/c,很/d,大/a,程度/n,上/f,明显/a,小于/v,该值/nw,的/u,一些/m,细节/n,就/d,会/v,被/p,忽略/v,掉/v,：/w,scale/en,-/w,space/en, ,representation/en, , ,at/en, ,scale/en, ,,/w, ,corresponding/en, ,to/en, ,the/en, ,original/en, ,imagescale/en,-/w,space/en, ,representation/en, , ,at/en, ,scalescale/en,-/w,space/en, ,representation/en, , ,at/en, ,scalescale/en,-/w,space/en, ,representation/en, , ,at/en, ,scalescale/en,-/w,space/en, ,representation/en, , ,at/en, ,scalescale/en,-/w,space/en, ,representation/en, , ,at/en, ,scale/en,说/v,完/v,了/u,尺度/n,空间/n,，/w,现在/t,接着/c,说/v,sift/en,的/u,第一/m,步/q,，/w,极值/nz,点/q,检测/vn,。/w,ps/en,：/w,尺度/n,是/v,自然/d,存在/v,的/u,，/w,不/d,是/v,人为/d,创造/v,的/u,，/w,高斯/nr,卷积/nw,只是/d,表现/v,尺度/n,的/u,一种/mq,形式/n,。/w,高斯/nr,卷积/nw,（/w,也/d,叫做/v,高斯/nr,平滑/an,，/w,高斯/nr,模糊/a,）/w,：/w,通常/d,可以/v,用/p,来/v,减少/v,图像/n,噪声/n,以及/c,降低/v,细节/n,层次/n,。/w,因为/c,在/p,实际/n,应用/vn,中/f,，/w,在/p,计算/v,高斯/nr,函数/n,的/u,离散/vn,近似/a,时/ng,，/w,在/p,大概/d,3/m,σ,距离/n,之外/f,的/u,像素/n,都/d,可以/v,看作/v,不/d,起/v,作用/n,，/w,这些/r,像素/n,的/u,计算/v,也/d,就/d,可以/v,忽略/v,。/w,通常/d,，/w,图像/n,处理/v,程序/n,只/d,需要/v,计算/v,的/u,矩阵/n,就/d,可以/v,保证/v,相关/v,像素/n,影响/vn,。/w,所以/c,我们/r,先/d,计算σ/nw,的/u,值/n,，/w,然后/c,通过/p,该值/nw,计算/v,出/v,所/u,需要/v,的/u,模板/n,的/u,大小/n,，/w,然后/c,对/p,模板/n,进行/v,归/v,一化/nw,，/w,接着/c,用/p,其/r,对/p,图像/n,进行/v,高斯/nr,过滤/v,。/w,比如/v,当方/nw,差/a,为/p,0.6时/t,得到/v,的/u,就/d,是/v,5/m,×/w,5/m,的/u,高斯/nr,模板/n,，/w,可以/v,通过/p,matlab/en,代码/n,生成/vn,：/w,a/en,=/w,fspecial/en,(/w,'/w,gaussian/en,'/w,,/w,5/m,,/w,0.6/m,)/w,ps/en,：/w,高斯/nr,模糊/a,具有/v,园/ng,对称性/n,；/w,而且/c,是/v,线性/n,可/v,分/q,的/u,，/w,所以/c,可以/v,在/p,二维/nr,的/u,图像/n,上/f,对/p,每/r,一维/mq,单独/d,进行/v,一维高斯/nr,模糊/a,来/v,减少/v,计算量/nw,，/w,这/r,可以/v,参考/v,【/w,4/m,】/w,中/f,的/u,2.3/m,分离/v,高斯/nr,模糊/a,部分/n,；/w,而且/c,对于/p,一幅/mq,图像/n,进行/v,多次/nrf,连续/a,高斯/nr,模糊/a,的/u,效果/n,与/p,一次/mq,更/d,大/a,的/u,高斯/nr,模糊/a,可以/v,产生/v,同样/d,的/u,效果/n,，/w,大/a,的/u,高斯/nr,模糊/a,的/u,半径/n,是/v,所/u,用/p,多/a,个/q,高斯/nr,模糊/a,半径/n,平方和/n,的/u,平方根/n,，/w,比如/v,，/w,使用/v,半径/n,分别/d,为/p,6/m, ,和/c,8/m,的/u,两次/mq,高斯/nr,模糊/a,变换/v,得到/v,的/u,效果/n,等于/v,一次/mq,半径/n,为/p,10/m,的/u,高斯/nr,模糊/a,效果/n,，/w,因为/c,6/m,^,2/m,+/w,8/m,^,2/m,=/w,10/m,^,2/m,。/w,所以/c,使用/v,多/a,个/q,连续/a,较/d,小/a,的/u,高斯/nr,模糊/a,处理/v,不/d,会/v,比/p,单个/b,高斯/nr,较/d,大/a,处理/v,时间/n,少/a,。/w,上面/f,介绍/v,了/u,尺度/n,空间/n,和/c,高斯/nr,模糊/a,，/w,接下来/l,就/d,是/v,介绍/v,高斯/nr,金字塔/n,了/u,，/w,通过/p,构建/v,多/a,层/q,的/u,高斯/nr,金字塔/n,来/v,计算/v,后续/vn,的/u,图片/n,中/f,的/u,极值/nz,。/w,高斯/nr,金字塔/n,：/w,，/w,高斯/nr,金字塔/n,高斯/nr,金字塔/n,共/d,分/q,o/en, ,组/q,（/w,octave/en,）/w,，/w,每/r,组/q,又/d,分/q,s/en, ,层/q,（/w,layer/en,）/w,。/w,组内/nw,各/r,层/q,图像/n,的/u,分辨率/n,是/v,相同/a,的/u,，/w,即/v,长/a,和/c,宽/a,相同/a,，/w,但/c,尺度/n,逐渐/d,增加/v,，/w,即/v,越/d,往/p,塔顶/n,图像/n,越/d,模糊/a,。/w,而/c,下/f,一组/mq,的/u,图像/n,是/v,由/p,上/f,一组/mq,图像/n,（/w,上/f,一组/mq,倒数/v,第/m,3张/mq,，/w,即/v,上图/n,中/f,的/u,2组/mq,的/u,第/m,0层/mq,是/v,第一/m,组/q,的/u,上/f,往/p,下/f,数/m,第/m,3张/mq,采样/v,得到/v,的/u,）/w,按照/p,隔/v,点/q,降/v,采样/v,得到/v,的/u,，/w,即/v,图像/n,的/u,长/a,和/c,宽/a,分别/d,减半/v,。/w,高斯/nr,金字塔/n,的/u,组数/nw,o/en, ,是/v,由/p,输入/v,图像/n,的/u,分辨率/n,得到/v,的/u,，/w,因为/c,要/v,进行/v,隔/v,点/q,降/v,采样/v,，/w,所以/c,在/p,执行/v,降/v,采样/v,生成/vn,高斯/nr,金字塔/n,时/ng,，/w,一直/d,到/v,4/m,*/w,4/m,大小/n,（/w,因为/c,太/d,小/a,的/u,图片/n,也/d,没/d,什么/r,意义/n,了/u,）/w,。/w,其中/r,组数/nw,公式/n,为/p,：/w,（/w,公式/n,3/m,）/w,其中/r,，/w,x/en, ,和/c,y/en, ,分别/d,为/p,输入/v,图像/n,的/u,长/a,和/c,宽/a,，/w,⌊, ,⌋,表示/v,向/p,下/f,取整/nw,。/w,并且/c,每组/r,的/u,金字塔/n,的/u,层数/n,s/en, ,为/p,：/w,s/en, ,=/w, ,s/en, ,+/w, ,2/m,+/w,1/m, ,。/w,这里/r,lowe/en, ,建议/n,s/en, ,为/p,3/m, ,。/w,（/w,s/en,为/p,建议/n,的/u,，/w,2/m,是/v,为了/p,不同/a,组/q,之间/f,能够/v,平滑/an,过渡/v,而/c,在/p,顶部/f,加上/v,的/u,2层/mq,，/w,1/m,为/p,最/d,底/f,的/u,原始层/nw,）/w,【/w,8/m,】/w,假设/v,当前/t,图像/n,大小/n,为/p,512/m,*/w,512/m,，/w,则/d,如下/v,操作/v,：/w,上面/f,公式/n,中/f,减/v,2/m, ,是/v,因为/c,假设/v,当前/t,图像/n,即/v,为/p,输入/v,图像/n,，/w,而/c,有的/r,资料/n,减/v,3/m, ,是因为/c,，/w,他们/r,把/p,自然界/n,作为/v,第/m,0组/mq,，/w,而/c,经过/p,相机/n,拍摄/v,就/d,成/v,了/u,第/m,1组/mq,，/w,所以/c,是/v,多/a,减/v,一次/mq,（/w,当然/d,了/u,，/w,到底/d,减/v,多少/r,，/w,任/v,君/ng,喜欢/v,，/w,这/r,不/d,是/v,重点/n,）/w,。/w,这时候/r,就/d,需要/v,依据/n,当前/t,图像/n,建立/v,自然/d,场景/n,的/u,第/m, ,0/m, ,组/q,图像/n,了/u,，/w,即/v,用/p,当前/t,图像/n,进行/v,插值/nw,得到/v,例如/v,上面/f,那样/r,的/u,1024/m,*/w,1024/m,的/u,一张/mq,图片/n,。/w,得到/v,了/u,组数/nw,之后/f,，/w,就/d,是/v,计算/v,组内/nw,尺度/n,和/c,组间/nw,尺度/n,了/u,。/w,记得/v,这里/r,是/v,假设/v,当前/t,得到/v,的/u,图片/n,的/u,尺度/n,为/p,0.5/m,的/u,，/w,即/v,第/m,1组/mq,的/u,第/m,0层/mq,（/w,自然界/n,为/p,第/m,0组/mq,）/w,，/w,即/v,拍照/v,拍/v,到/v,之后/f,拿/v,到/v,的/u,那/r,张/q,图片/n,。/w,我们/r,可以/v,很/d,自然/d,的/u,知道/v,，/w,这/r,是/v,有/v,组内/nw,尺度/n,和/c,组间/nw,尺度/n,的/u,。/w,对于/p,组内/nw,相邻/v,的/u,两幅/mq,图片/n,来说/u,：/w,（/w,公式/n,4/m,）/w,假设/v,，/w,这里/r,的/u,s/en,为/p,小/a,写/v,的/u,，/w,不/d,是/v,表示/v,层数/n,的/u,那个/r,大/a,s/en,。/w,（/w,为什么/r,使用/v,1/m,//w,2/m,，/w,这个/r,可以/v,看/v,lowe/en,的/u,论文/n,【/w,1/m,】/w,）/w,所以/c,，/w,对于/p,某/r,一组/mq,来说/u,，/w,当/p,s/en, ,=/w,3时/t,，/w,有/v,s/en,=/w,s/en,+/w,2/m,+/w,1/m, ,=/w,6幅/mq,图片/n,，/w,即/v,[/w,0/m,,/w,1/m,,/w,2/m,,/w,3/m,,/w,4/m,,/w,5/m,)/w,：/w,而/c,对于/p,组间/nw,相邻/v,的/u,尺度/n,来说/u,，/w,因为/c,后/f,一组/mq,是/v,通过/p,前/f,一组/mq,的/u,倒数/v,第/m,3幅/mq,图/n,进行/v,降/v,采样/v,得到/v,的/u,,/w,即/v,前/f,一组/mq,的/u,第/m,s/en,幅/q,。/w,为/p,，/w,将/d,带入/v,得/u,其/r,为/p,，/w,即/v,后/f,一组/mq,的/u,第/m,0幅/mq,图/n,为/p,前/f,一组/mq,第/m,0幅/mq,图/n,的/u,2倍/mq,尺度/n,。/w,同时/c,推出/v,相邻/v,两组/mq,同一/b,层/q,的/u,图像/n,都/d,是/v,2倍/mq,尺度/n,关系/n,的/u,。/w,则/d,，/w,总/b,的/u,尺度/n,坐标/n,为/p,：/w,（/w,公式/n,5/m,）/w,其中/r,，/w,o/en, ,表示/v,第几/nw,组/q,，/w,r/en,表示/v,组内/nw,第几/nw,层/q,。/w,在/p,lowe/en,的/u,论文/n,中/f,，/w,他/r,将/d,第/m,0层/mq,，/w,也/d,就/d,是/v,自然界层/nw,的/u,初始/b,尺度/n,定义/n,为/p,1.6/m,，/w,而/c,我们/r,获取/v,的/u,图片/n,初始/b,尺度/n,为/p,0.5/m,，/w,则/d,图像/n,金字塔/n,第/m,0层/mq,的/u,实际/n,尺度/n,为/p,sqrt/en,（/w,1.6/m,*/w,1.6/m,-/w,0.5/m,*/w,0.5/m,）/w,=/w,1.52/m,（/w,之所以/c,可以/v,这么/r,计算/v,就/d,是/v,因为/c,上面/f,高斯/nr,金字塔/n,之上/f,的/u,ps/en,部分/n,所述/nz,）/w,。/w,当然/d,这/r,是/v,为了/p,避免/v,检测/vn,极/d,值点/nw,之前/f,就/d,对/p,原始/a,图像/n,的/u,高斯/nr,平滑/an,以致/c,于/p,图像/n,丢失/v,高频/b,信息/n,，/w,所以/c,才/d,建议/n,在/p,建立/v,尺度/n,空间/n,前/f,首先/d,对/p,原始/a,图像/n,的/u,长宽/v,扩展/v,一倍/mq,，/w,以/p,保留/v,原始/a,图像/n,的/u,信息/n,，/w,也/d,就/d,是/v,我们/r,之前/f,说/v,的/u,那个/r,假设/v,你/r,获得/v,了/u,图像/n,是/v,512/m,*/w,512/m,的/u,，/w,那么/r,就/d,弄/v,一个/m,1024/m,*/w,1024/m,的/u,作为/v,最/d,底/f,层/q,图/n, ,，/w,这时候/r,因为/c,图像/n,扩展/v,造成/v,的/u,尺度/n,计算/v,为/p,（/w,即/v,通过/p,计算机/n,得到/v,的/u,真实/a,尺度/n,）/w,，/w,当然/d,这/r,一组/mq,在/p,很多/m,资料/n,中/f,也/d,叫做/v,第/m, ,-/w,1/m, ,组/q,：/w,(/w,公式/n,6/m,)/w,本来/d,对于/p,关键点/n,的/u,检测/vn,，/w,可以/v, ,利用/v,log/en,（/w,高斯拉普拉斯/nw,方法/n,，/w,laplacian/en, ,of/en, ,gaussian/en,）/w,，/w,即/v,图像/n,的/u,二阶/nr,导数/n,，/w,能够/v,在/p,不同/a,的/u,尺度/n,下/f,检测/vn,到/v,图像/n,的/u,斑点/n,特征/n,，/w,从而/c,可以/v,确定/v,图像/n,的/u,特征点/nw,。/w,lindeberg/en,在/p,文献/n,《/w,scale/en, ,space/en, ,theory/en,:/w,a/en, ,basic/en, ,tool/en, ,for/en, ,analysising/en, ,structures/en, ,at/en, ,different/en, ,scales/en,》/w,中/f,指出/v,尺度/n,规范化/vn,的/u,log/en,算子/n,具有/v,真正/d,的/u,尺度/n,不/d,变性/vn,。/w,但/c,log/en, ,的/u,效率/n,不/d,高/a,。/w,所以/c,sift/en,不/d,这么/r,做/v,，/w,作者/n,对/p,两个/m,相邻/v,高斯/nr,尺度/n,空间/n,的/u,图像/n,相减/nw,，/w,得到/v,一个/m,dog/en,（/w,高斯/nr,差分/nw,，/w,difference/en, ,of/en, ,gaussians/en,）/w,的/u,响应/v,值/n,图像/n,d/en,(/w,x/en,,/w, ,y/en,,/w, ,σ,)/w,来/v,近似/a,log/en, ,：/w,（/w,公式/n,7/m,）/w,两者/r,为什么/r,能够/v,等/u,效/ng,，/w,仔细/ad,的/u,推导/vn,可以/v,看/v,这里/r,的/u,3.4/m, ,高斯/nr,差分/nw,金字塔/n,部分/n,。/w,用/p,dog/en, ,代替/v,log/en, ,并/c,不/d,影响/vn,对/p,图像/n,斑点/n,位置/n,的/u,检测/vn,。/w,而且/c,用/p,dog/en, ,近似/a,log/en, ,可以/v,实现/v,下列/b,好处/n,：/w,第一/m,是/v,log/en, ,需要/v,使用/v,两个/m,方向/n,的/u,高斯/nr,二阶/nr,微分/n,卷积/nw,核/n,，/w,而/c,dog/en, ,直接/ad,使用/v,高斯/nr,卷积/nw,核/n,，/w,省去/v,了/u,卷积/nw,核/n,生成/vn,的/u,运算量/nw,；/w,第二/m,是/v,dog/en, ,保留/v,了/u,个/q,高斯/nr,尺度/n,空间/n,的/u,图像/n,，/w,因此/c,在/p,生成/vn,某/r,一/m,空间/n,尺度/n,的/u,特征/n,时/ng,，/w,可以/v,直接/ad,使用/v,公式/n,2/m,产生/v,的/u,尺度/n,空间/n,图像/n,，/w,而/c,无需/v,重新/d,再次/d,生成/vn,该/r,尺度/n,的/u,图像/n,；/w,第三/nw,是/v,dog/en, ,具有/v,与/p,log/en, ,相同/a,的/u,性质/n,，/w,即/v,稳定性/n,好/a,、/w,抗干扰/l,能力/n,强/a,。/w,为了/p,在/p,连续/a,的/u,尺度/n,下/f,检测/vn,图像/n,的/u,特征点/nw,，/w,需要/v,建立/v,dog/en, ,金字塔/n,，/w,而/c,dog/en, ,金字塔/n,的/u,建立/v,又/d,离/v,不/d,开/v,高斯/nr,金字塔/n,的/u,建立/v,，/w,如/v,下/f,图/n,所/u,示/vg,，/w,左侧/f,为/p,高斯/nr,金字塔/n,，/w,右侧/f,为/p,dog/en, ,金字塔/n,【/w,8/m,】/w,：/w,高斯/nr,金字塔/n,的/u,组内/nw,相邻/v,两层/mq,相减/nw,，/w,而/c,两组/mq,间/f,的/u,各/r,层/q,是/v,不能/v,相减/nw,的/u,。/w,因此/c,高斯/nr,金字塔/n,每/r,组/q,有/v,s/en,+/w,3/m, ,层/q,图像/n,，/w,而/c,dog/en, ,金字塔/n,每/r,组/q,则/d,有/v,s/en,+/w,2/m, ,层/q,图像/n, ,。/w,我们/r,可以/v,发现/v,未/d,被/p,利用/v,到/v,的/u,高斯/nr,金字塔/n,的/u,第/m,0组/mq,的/u,第/m,0层/mq,和/c,最/d,上面/f,一组/mq,的/u,最/d,上面/f,一层/mq,；/w,而/c,dog/en,金字塔/n,的/u,每组/r,的/u,第/m,0层/mq,和/c,顶层/f,未/d,被/p,用/p,到/v,（/w,原因/n,如下/v,）/w,。/w,极值/nz,点/q,的/u,搜索/vn,是/v,在/p,dog/en, ,金字塔/n,内/f,进行/v,的/u,，/w,这些/r,极值/nz,点/q,就/d,是/v,候选/b,的/u,特征点/nw,。/w,在/p,搜索/vn,之前/f,，/w,我们/r,需要/v,在/p,dog/en, ,金字塔/n,内/f,剔除/v,那些/r,像/v,素值/nr,过/u,小/a,的/u,点/q,，/w,因为/c,这些/r,像素/n,具有/v,较/d,低/a,的/u,对比度/n,，/w,它们/r,肯定/v,不/d,是/v,稳定/a,的/u,特征点/nw,。/w,极值/nz,点/q,的/u,搜索/vn,不仅/c,需要/v,在/p,它/r,所/u,在/p,尺度/n,空间/n,图像/n,的/u,邻域/nw,内/f,进行/v,，/w,还/d,需要/v,在/p,它/r,的/u,相邻/v,尺度/n,空间/n,图像/n,内/f,进行/v,，/w,如/v,2/m,、/w,关键点/n,的/u,定位/vn,从/p,上面/f,的/u,搜索/vn,中/f,就/d,能够/v,得到/v,许多/m,的/u,极/d,值点/nw,了/u,，/w,之/u,所谓/v,极/d,值点/nw,，/w,就/d,是/v,都/d,是/v,一群/mq,待/v,选/v,的/u,点/q,，/w,不/d,是/v,直接/ad,就/d,可以/v,用/p,的/u,关键点/n,。/w,因为/c,它们/r,还/d,存在/v,一些/m,不/d,确定/v,的/u,因素/n,，/w,首先/d,是/v,极值/nz,点/q,的/u,搜索/vn,是/v,在/p,离散/vn,空间/n,内/f,进行/v,的/u,，/w,并且/c,这些/r,离散/vn,空间/n,还是/c,经过/p,不断/d,的/u,降/v,采样/v,得到/v,的/u,。/w,如果/c,把/p,采样点/nw,拟/v,合成/v,曲面/n,后/f,我们/r,会/v,发现/v,，/w,原先/d,的/u,极值/nz,点/q,并/c,不/d,是/v,真正/d,的/u,极/d,值点/nw,，/w,也/d,就/d,是/v,离散/vn,空间/n,的/u,极值/nz,点/q,并/c,不/d,是/v,连续/a,空间/n,的/u,极/d,值点/nw,，/w,如/v,下/f,图【/nw,4/m,】/w,：/w,（/w,接下来/l,这/r,一/m,大/a,段/q,都/d,是/v,来自/v,参考/v,文献/n,【/w,8/m,】/w,，/w,因为/c,觉得/v,该/r,作者/n,讲/v,的/u,详细/ad,，/w,所以/c,直接/ad,复制/v,过来/v,这/r,部分/n,了/u,）/w,为了/p,提高/v,关键点/n,的/u,稳定性/n,，/w,需要/v,对/p,尺度/n,空间/n,dog/en,函数/n,进行/v,曲线/n,拟合/nz,。/w,因为/c,，/w,极/d,值点/nw,是/v,一个/m,三维/nz,矢量/n,，/w,即/v,它/r,包括/v,极/d,值点/nw,所在/n,的/u,图像/n,坐标/n,，/w,及/c,尺度/n,坐标/n,：/w,。/w,利用/v,dog/en,函数/n,在/p,尺度/n,空间/n,的/u,taylor/en,展开式/nw,(/w,拟合/nz,函数/n,)/w,，/w,假设/v,我们/r,在/p,点处/nw,展开/v,，/w,展开/v,2/m,阶/ng,即/v,可/v, ,：/w,（/w,公式/n,8/m,）/w,对应/v,的/u,矩阵/n,形式/n,为/p,：/w,（/w,公式/n,9/m,）/w,在/p,这里/r, ,表示/v,离散/vn,空间/n,下/f,的/u,插值/nw,中心/n,（/w,在/p,离散/vn,空间/n,内/f,也/d,就/d,是/v,采样点/nw,）/w,坐标/n,，/w, ,表示/v,拟合/nz,后/f,连续/a,空间/n,下/f,的/u,插值点/nw,坐标/n,，/w,设/v,，/w,则/d,表示/v,相对于/nw,插值/nw,中心/n,，/w,插值/nw,后/f,的/u,偏移量/nz,。/w,因此/c,上述/b,公式/n,可/v,写/v,成/v,：/w,（/w,公式/n,10/m,）/w,求导/nw,得/u,：/w,(/w,公式/n,11/m,)/w,将/d,其/r,置/v,为/p,0/m,，/w,得到/v,结果/n,为/p,：/w,（/w,公式/n,12/m,）/w,将/d,上面/f,的/u,极值/nz,点/q,带入/v,求导/nw,前/f,的/u,原/b,公式/n,（/w,10/m,）/w,得/u,：/w,（/w,公式/n,13/m,）/w,对于/p,公式/n,12/m, ,所/u,求得/v,的/u,偏移量/nz,如果/c,大于/v,0.5/m,（/w,只要/c,x/en,、/w,y/en, ,和/c,σ, ,任意/d,一个/m,量/n,大于/nrf,0.5/m,）/w,，/w,则/d,表明/v,插值点/nw,已/d,偏/d,移/v,到/v,了/u,它/r,的/u,临近/v,的/u,插值/nw,中心/n,，/w,所以/c,必须/d,改变/v,当前/t,的/u,位置/n,，/w,使/v,其/r,为/p,它/r,所/u,偏/d,移/v,到/v,的/u, ,插值/nw,中心/n,处/n,，/w,然后/c,在/p,新/a,的/u,位置/n,上/f,重新/d,进行/v,泰勒级数/nr,插值/nw,拟合/nz,，/w,直到/v,偏移量/nz,小于/v,0.5/m, ,为止/u,（/w,x/en,、/w,y/en, ,和/c,σ, ,都/d,小于/v,0.5/m,）/w,，/w,这/r,是/v,一个/m,迭代/vn,的/u,工程/n,。/w,当然/d,，/w,为了/p,避免/v,无限/vd,次/q,的/u,迭代/vn,，/w,我们/r,还/d,需要/v,设置/v,一个/m,最/d,大/a,迭代/vn,次数/n,，/w,在/p,达到/v,了/u,迭代/vn,次数/n,但/c,仍然/d,没有/v,满足/v,偏移量/nz,小于/v,0.5/m, ,的/u,情况/n,下/f,，/w,该/r,极/d,值点/nw,就要/d,被/p,剔除/v,掉/v,。/w,另外/c,，/w,如果/c,由/p,公式/n,13/m, ,所/u,得到/v,的/u,极值/nz,过/u,小/a,，/w,即时/d,（/w,假设/v,图像/n,的/u,灰度/n,值/n,在/p,0/m,～/w,1.0/m, ,之间/f,）/w,，/w,则/d,这样/r,的/u,点易/nw,受到/v,噪声/n,的/u,干扰/v,而/c,变/v,得/u,不/d,稳定/a,，/w,所以/c,这些/r,点/q,也/d,应该/v,剔除/v,。/w,而/c,在/p,opencv/en, ,中/f,，/w,使用/v,的/u,是/v,下列/b,公式/n,来/v,判断/v,其/r,是否/v,为/p,不/d,稳定/a,的/u,极/d,值/n, ,：/w,（/w,公式/n,14/m,）/w,其中/r,t/en, ,为/p,经验/n,阈值/n,，/w,系统/n,默认/v,初始/b,化为/v,0.04/m,。/w,仅仅/d,去除/v,低/a,对比度/n,的/u,极值/nz,点/q,对于/p,特征/n,的/u,稳定性/n,还是/c,远远/d,不够/a,的/u,。/w,dog/en,函数/n,在/p,图像/n,边缘/n,也/d,有/v,着/u,较/d,强/a,的/u,边缘/n,响应/v,，/w,因此/c,我们/r,还/d,需要/v,排除/v,边缘/n,响应/v,。/w,一旦/d,特征点/nw,落/v,在/p,图像/n,的/u,边缘/n,上/f,，/w,这些/r,点/q,就/d,是/v,不/d,稳定/a,的/u,点/q,。/w,这/r,是/v,因为/c,一方面/c,图像/n,边缘/n,上/f,的/u,点/q,是/v,很/d,难/a,定位/vn,的/u,，/w,具有/v,定位/vn,的/u,歧义性/nw,；/w,另一方面/c,这样/r,的/u,点/q,很/d,容易/a,受到/v,噪声/n,的/u,干扰/v,而/c,变/v,得/u,不/d,稳定/a,。/w,因此/c,我们/r,一定/d,要/v,把/p,这些/r,点/q,找到/v,并/c,剔除/v,掉/v,。/w,它/r,的/u,方法/n,与/p,harris/en, ,角点/nw,检测/vn,算法/n,相似/a,，/w,即/v,一个/m,平坦/a,的/u,dog/en, ,响应/v,峰值/n,往往/d,在/p,横跨/v,边缘/n,的/u,地方/n,有/v,较/d,大/a,的/u,主曲率/nw,，/w,而/c,在/p,垂直/v,边缘/n,的/u,方向/n,上/f,有/v,较/d,小/a,的/u,主曲率/nw,，/w,主曲率/nw,可以/v,通过/p,2/m,×/w,2/m, ,的/u,hessian/en, ,矩阵/n,h/en, ,求/v,出/v, ,：/w,（/w,公式/n,15/m,）/w,其中/r,、/w,和/c,分别/d,表示/v,对/p,dog/en, ,图像/n,中/f,的/u,像素/n,在/p,x/en, ,轴/q,方向/n,和/c,y/en, ,轴/q,方向/n,上/f,求/v,二阶/nr,偏导/nw,和/c,二阶/nr,混合/vn,偏导/nw,。/w,（/w,而/c,这/r,4个/m,值/n,，/w,可以/v,用/p,有限/a,差分/nw,求导/nw,来/v,近似/a,得到/v,）/w,在/p,这里/r,，/w,我们/r,不/d,需/v,要求/v,具体/a,的/u,矩阵/n,h/en, ,的/u,两个/m,特征/n,值/n,α, ,和/c,β,，/w,而/c,只要/c,知道/v,两个/m,特征/n,值/n,的/u,比例/n,就/d,可以/v,知道/v,该/r,像素/n,点/q,的/u,主曲率/nw, ,。/w,矩阵/n,h/en, ,的/u,直迹/nw,和/c,行列式/n,分别/d,为/p,：/w,（/w,公式/n,16/m,）/w,（/w,公式/n,17/m,）/w,我们/r,首先/d,剔除/v,掉/v,那些/r,行列式/n,为/p,负数/n,的/u,点/q,，/w,即/v,det/en,(/w,h/en,)/w, ,</w, ,0/m,，/w,因为/c,如果/c,像素/n,的/u,曲率/n,有/v,不同/a,的/u,符号/n,，/w,则/d,该/r,点/q,肯定/v,不/d,是/v,特征点/nw,。/w,设α/nw, ,>, ,β,，/w,并且/c,α, ,=/w, ,γ, ,β,，/w,其中/r,γ, ,>, ,1/m,，/w,则/d, ,：/w,（/w,公式/n,18/m,）/w,上式/nw,的/u,结果/n,只/d,与/p,两个/m,特征/n,值/n,的/u,比例/n,有关/vn,，/w,而/c,与/p,具体/a,的/u,特征/n,值/n,无关/v,。/w,我们/r,知道/v,，/w,当/p,某个/r,像素/n,的/u,h/en, ,矩阵/n,的/u,两个/m,特征/n,值/n,相差/v,越/d,大/a,，/w,即/v,γ, ,很大/d,，/w,则/d,该/r,像素/n,越/d,有/v,可能/v,是/v,边缘/n,。/w,对于/p,上面/f,那个/r,公式/n,来说/u,，/w,当/p,两个/m,特征值/n,相等/v,时/ng,，/w,等/u,式/k,的/u,值/n,最/d,小/a,，/w,随着/p,γ, ,的/u,增加/v,，/w,等/u,式/k,的/u,值/n,也/d,增加/v,。/w,所以/c,，/w,要/v,想/v,检查/vn,主曲率/nw,的/u,比值/n,是否/v,小于/v,某/r,一/m,阈值/n,γ,，/w,只要/c,检查/vn,下式/nw,是否/v,成立/v,即可/v, ,：/w,（/w,公式/n,19/m,）/w,对于/p,不/d,满足/v,上式/nw,的/u,极值/nz,点/q,就/d,不/d,是/v,特征点/nw,，/w,因此/c,应该/v,把/p,它们/r,剔除/v,掉/v,。/w,lowe/en, ,给出/v,γ, ,为/p,10/m,。/w,在/p,上面/f,的/u,运算/vn,中/f,，/w,需要/v,用/p,到/v,有限/a,差分法/nz,求/v,偏导/nw, ,。/w,这/r,部分/n,可以/v,看看/v,这里/r,的/u,4.3/m,有限/a,差分/nw,求导/nw,。/w,3/m,、/w,方向/n,角度/n,的/u,确定/v,上面/f,这样/r,就/d,算是/v,从/p,dog/en,图/n,中/f,找到/v,极/d,值点/nw,，/w,然后/c,筛选/v,下/f,留下/v,的/u,就/d,是/v,关键点/n,了/u,。/w,这时候/r,为了/p,解决/v,旋转/v,不变性/nz,，/w,并且/c,使得/v,关键点/n,更加/d,的/u,鲁棒/nr,，/w,就/d,对/p,其/r,周围/f,进行/v,深/a,挖/v,，/w,将/d,周边/n,的/u,信息/n,赋予/v,到/v,这个/r,关键点/n,上/f,。/w,就/d,是/v,需要/v,根据/p,检测/vn,到/v,的/u,特征点/nw,所在/n,的/u,高斯/nr,尺度/n,图像/n,的/u,局部/n,结构/n,求得/v,一个/m,方向/n,基准/n,。/w,该/r,高斯/nr,尺度/n,图像/n,的/u,尺度/n,σ, ,是/v,已知/nz,的/u,，/w,并且/c,该/r,尺度/n,是/v,相对于/nw,高斯/nr,金字塔/n,所在组/nw,的/u,基准层/nw,的/u,尺度/n,，/w,即/v,（/w,公式/n,20/m,，/w,该/r,式子/n,的/u,r/en, ,表示/v,的/u,是/v,第几/nw,层/q,，/w,而/c,下面/f,的/u,r/en, ,表示/v,的/u,是/v,半径/n,）/w,而/c,所谓/v,局部/n,结构/n,指/v,的/u,是/v,在/p,高斯/nr,尺度/n,图像/n,中/f,以/p,特征点/nw,为/p,中心/n,，/w,以/p,r/en, ,为/p,半径/n,的/u,区域/n,内/f,计算/v,所有/b,像素/n,梯度/n,的/u,幅角/nw,和/c,幅值/nw,，/w,半径/n,r/en, ,为/p,：/w,（/w,公式/n,21/m,）/w,其中/r,σ, ,就/d,是/v,上面/f,提到/v,的/u,相对于/nw,所在组/nw,的/u,基准层/nw,的/u,高斯/nr,尺度/n,图像/n,的/u,尺度/n,。/w,当然/d,了/u,像素/n,梯度/n,的/u,幅值/nw,和/c,幅角/nw,的/u,计算/v,公式/n,计算/v,公式/n,为/p,：/w,（/w,公式/n,22/m,）/w,（/w,公式/n,23/m,）/w,因为/c,在/p,以/p,r/en, ,为/p,半径/n,的/u,区域/n,内/f,的/u,像素/n,梯度/n,幅值/nw,对/p,圆心处/nw,的/u,特征点/nw,的/u,贡献/n,是/v,不同/a,的/u,，/w,因此/c,还/d,需要/v,对/p,幅值/nw,进行/v,加权/v,处理/v,，/w,这里/r,采用/v,的/u,是/v,高斯加权/nr,，/w,该/r,高斯/nr,函数/n,的/u,方差/nr, ,为/p,：/w,（/w,公式/n,24/m,）/w,在/p,完成/v,特征点/nw,邻域/nw,范围/n,内/f,的/u,梯度/n,计算/v,后/f,，/w,还要/v,应用/vn,梯度/n,方向/n,直方图/n,来/v,统计/v,邻域/nw,内/f,像素/n,的/u,梯度/n,方向/n,所/u,对应/v,的/u,幅值/nw,大小/n,。/w,具体/a,的/u,做法/n,是/v,，/w,把/p,360度/mq,分为/v,36/m, ,个/q,柱/q,，/w,则/d,每/r,10度/mq,为/p,一个/m,柱/q,，/w,其中/r,0/m,-/w,9/m,为/p,第/m,1/m, ,柱/q,，/w,10/m,-/w,19/m,为/p,第/m,2/m, ,柱/q,，/w,以此类推/l,。/w,在/p,以/p,r/en, ,为/p,半径/n,的/u,区域/n,内/f,，/w,把/p,那些/r,梯度/n,方向/n,在/p,0/m,-/w,9/m,范围/n,内/f,的/u,像素/n,找/v,出来/v,，/w,把/p,它们/r,的/u,加权/v,后/f,的/u,梯度/n,幅值/nw,相加/v,在/p,一起/s,，/w,作为/v,第/m,1/m, ,柱/q,的/u,柱高/nw,；/w,求/v,第/m,2/m, ,柱/q,以及/c,其他/r,柱/q,的/u,高度/d,的/u,方法/n,相同/a,。/w,为了/p,防止/v,某个/r,梯度/n,方向/n,角度/n,因/p,受到/v,噪声/n,的/u,干扰/v,而/c,突变/vn,，/w,我们/r,还/d,需要/v,对/p,梯度/n,方向/n,直方图/n,进行/v,平滑/an,处理/v, ,。/w,opencv/en,中直方图/nw,以/p,周围/f,360度/mq,为/p,范围/n,，/w,每/r,10度/mq,为/p,一个/m,柱/q,，/w,一共/d,36个柱/mq,，/w,柱/q,所/u,代表/n,的/u,方向/n,为/p,像/v,素点/nr,梯度/n,方向/n,，/w,柱/q,的/u,长短/n,代表/n,了/u,梯度/n,幅值/nw,。/w,根据/p,lowe/en,的/u,建议/n,，/w,模板/n,采用/v,[/w,0.25/m,,/w,0.5/m,,/w,0.25/m,]/w,,/w,并/c,连续/a,加权/v,两次/mq,：/w,（/w,公式/n,25/m,）/w,（/w,这里/r,要/v,注意/v,下/f,，/w,不同/a,版本/n,的/u,opencv/en,中/f,实现/v,的/u,方法/n,不/d,一样/u,）/w,其中/r,h/en, ,和/c,h/en, ,分别/d,表示/v,平滑/an,前/f,和/c,平滑/an,后/f,的/u,直方图/n,。/w,由于/c,角度/n,是/v,循环/vn,的/u,，/w,即/v,0度/mq,=/w,360度/mq,，/w,如果/c,出现/v,h/en,(/w,j/en,)/w,，/w,j/en, ,超出/v,了/u,(/w,0/m,,/w,…/w,,/w,15/m,)/w,的/u,范围/n,，/w,那么/r,可以/v,通过/p,圆周/n,循环/vn,的/u,方法/n,找到/v,它/r,所/u,对应/v,的/u,、/w,在/p,0/m,-/w,360度/mq,之间/f,的/u,值/n,，/w,如/v,h/en,(/w,-/w,1/m,)/w, ,=/w, ,h/en,(/w,35/m,)/w, ,。/w,上图/n,只/d,画/v,了/u,8个柱/mq,。/w,该/r,图/n,来自/v,这里/r,。/w,方向/n,直方图/n,的/u,峰值/n,则/d,代表/n,了/u,该/r,特征点/nw,处/n,邻域/nw,梯度/n,的/u,方向/n,，/w,以/p,直方图/n,中/f,最/d,大/a,值/n,作为/v,该/r,关键点/n,的/u,主/n,方向/n,。/w,为了/p,增强/v,匹配/vn,的/u,鲁棒性/nz,，/w,只/d,保留/v,峰值/n,大于/v,主/n,方向/n,峰值/n,80/m,％/w,的/u,方向/n,作为/v,该/r,关键点/n,的/u,辅/vg,方向/n,。/w,因此/c,，/w,对于/p,同一/b,梯度/n,值/n,的/u,多/a,个/q,峰值/n,的/u,关键点/n,位置/n,，/w,在/p,相同/a,位置/n,和/c,尺度/n,将/d,会/v,有/v,多/a,个/q,关键点/n,被/p,创建/v,但/c,方向/n,不同/a,。/w,仅/d,有/v,15/m,％/w,的/u,关键点/n,被/p,赋予/v,多/a,个/q,方向/n,，/w,但/c,可以/v,明显/a,的/u,提高/v,关键点/n,匹配/vn,的/u,稳定性/n,。/w,实际/n,编程/vn,实现/v,中/f,，/w,就是/d,把/p,该/r,关键点/n,复制/v,成/v,多/a,份/q,关键点/n,，/w,并/c,将/d,方向/n,值/n,分别/d,赋/v,给/p,这些/r,复制/v,后/f,的/u,关键点/n,，/w,并且/c,，/w,离散/vn,的/u,梯度/n,方向/n,直方图/n,要/v,进行/v,插值/nw,拟合/nz,处理/v,，/w,来/v,求得/v,更/d,精确/a,的/u,方向/n,角度/n,值/n,。/w,这样/r,，/w,直方图/n,的/u,主峰值/nw,，/w,即/v,最高/a,的/u,那个/r,柱体/nw,所/u,代表/n,的/u,方向/n,就/d,是/v,该/r,特征点/nw,处/n,邻域/nw,范围/n,内/f,图像/n,梯度/n,的/u,主/n,方向/n,，/w,也/d,就/d,是/v,该/r,特征点/nw,的/u,主/n,方向/n,。/w,由于/c,柱体/nw,所/u,代表/n,的/u,角度/n,只/d,是/v,一个/m,范围/n,，/w,如/v,第/m,1柱/mq,的/u,角度/n,为/p,0/m,-/w,9度/mq,，/w,因此/c,还/d,需要/v,对/p,离散/vn,的/u,梯度/n,方向/n,直方图/n,进行/v,插值/nw,拟合/nz,处理/v,，/w,以/p,得到/v,更/d,精确/a,的/u,方向/n,角度/n,值/n,。/w,例如/v,我们/r,已经/d,得到/v,了/u,第/m,i/en, ,柱/q,所/u,代表/n,的/u,方向/n,为/p,特征点/nw,的/u,主/n,方向/n,，/w,则/d,拟合/nz,公式/n,为/p, ,：/w,（/w,公式/n,26/m,）/w,（/w,公式/n,27/m,）/w,其中/r,，/w,h/en, ,为由/v,公式/n,34/m, ,得到/v,的/u,直方图/n,，/w,角度/n,θ, ,的/u,单位/n,是度/nw,。/w,同样/d,的/u,，/w,上面/f,两个/m,公式/n,也/d,存在/v,着/u,之前/f,那个/r,直方图/n,平滑/an,所/u,遇到/v,的/u,角度/n,问题/n,，/w,处理/v,的/u,方法/n,同样/d,还是/c,利用/v,角度/n,的/u,圆周/n,循环/vn,。/w,每个/r,特征点/nw,除了/p,必须/d,分配/vn,一个/m,主方/nw,向/p,外/f,，/w,还/d,可能/v,有/v,一个/m,或/c,更/d,多/a,个/q,辅/vg,方向/n,，/w,增加/v,辅/vg,方向/n,的/u,目的/n,是/v,为了/p,增强/v,图像/n,匹配/vn,的/u,鲁棒性/nz,。/w,辅/vg,方向/n,的/u,定义/n,是/v,，/w,当/p,存在/v,另/r,一个/m,柱体/nw,高度/d,大于/v,主方/nw,向/p,柱/q, ,体/ng,高度/d,的/u,80%/mq,时/ng,，/w,则/d,该/r,柱体/nw,所/u,代表/n,的/u,方向/n,角度/n,就/d,是/v,该/r,特征点/nw,的/u,辅/vg,方向/n,。/w,在/p,第/m,2/m, ,步/q,中/f,，/w,我们/r,实现/v,了/u,用/p,两个/m,信息量/n,来/v,表示/v,一个/m,特征点/nw,，/w,即/v,位置/n,和/c,尺度/n,。/w,那么/r,经过/p,上面/f,的/u,计算/v,，/w,我们/r,对/p,特征点/nw,的/u,表示/v,形式/n,又/d,增加/v,了/u,一个/m,信息量/n,：/w,方向/n,，/w, ,即/v,。/w,如果/c,某个/r,特征点/nw,还有/v,一个/m,辅/vg,方向/n,，/w,则/d,这个/r,特征点/nw,就要/d,用/p,两个/m,值/n,来/v,表示/v,：/w,和/c,，/w,其中/r,表示/v,主/n,方向/n,，/w,表示/v,辅助/vn,方向/n,。/w,而/c,其他/r,的/u,变量/n,：/w,x/en,,/w, ,y/en,,/w, ,σ, ,不变/nz,。/w,4/m,、/w,描述符/n,的/u,建立/v,描述/v,的/u,目的/n,在于/v,之前/f,的/u,那些/r,零碎/an,的/u,关键点/n,的/u,计算/v,之后/f,，/w,如何/r,用/p,一组/mq,向/p,量/n,来/v,将/d,这个/r,关键点/n,描述/v,出来/v,，/w,这个/r,描述子/nw,不但/c,包含/v,关键点/n,，/w,也/d,包含/v,了/u,周边/n,贡献/n,的/u,像素/n,点/q,的/u,信息/n,。/w,因为/c,已经/d,有/v,了/u,尺度/n,，/w,位置/n,和/c,方向/n,等/u,信息/n,，/w,所以/c,能够/v,有/v,较/d,好/a,的/u,适应性/n,。/w,思路/n,就/d,是/v,对/p,关键点/n,周围/f,图像/n,区域/n,分块/v,，/w,计算/v,块/q,内/f,梯度/n,直方图/n,生成/vn,具有/v,独特性/nw,的/u,向量/n,，/w,该/r,向/p,量/n,就/d,是/v,该/r,区域/n,图像/n,信息/n,的/u,一种/mq,抽象/a,，/w,具有/v,唯一性/n,。/w,在/p,图像/n,局部/n,区域/n,内/f,，/w,这些/r,参数/n,可以/v,重复/v,的/u,用/p,来/v,描述/v,局部/n,二维/nr,坐标/n,系统/n,，/w,因为/c,这些/r,参数/n,具有/v,不/d,变性/vn,。/w,下面/f,就/d,来/v,计算/v,局部/n,图像/n,区域/n,的/u,描述符/n,，/w,描述符/n,既/c,具有/v,可/v,区分性/nw,，/w,又/d,具有/v,对/p,某些/r,变量/n,的/u,不变性/nz,，/w,如/v,光亮/n,或/c,三维/nz,视角/n,。/w,描述符/n,是/v,与/p,关键点/n,所在/n,的/u,尺度/n,有关/vn,的/u,，/w,所以/c,描述/v,关键点/n,是/v,需要/v,在/p,该/r,关键点/n,所在/n,的/u,高斯/nr,尺度/n,图像/n,上/f,进行/v,的/u,。/w,在/p,高斯/nr,尺度/n,图像/n,上/f,，/w,以/p,关键点/n,为/p,中心/n,，/w,将/d,其/r,附近/f,邻域/nw,划分/v,为/p,d/en,×/w,d/en, ,个子/n,区域/n,（/w,lowe/en, ,取/v,d/en, ,=/w, ,4/m,）/w,。/w,每个/r,子/ng,区域/n,都/d,是/v,一个/m,正方形/n,，/w,正方形/n,的/u,边长/n,为/p,3/m,σ,，/w,也就是说/l,正方形/n,的/u,边长/n,有/v,3/m,σ, ,个/q,像/v,素点/nr,（/w,这里/r,当然/d,要/v,对/p,3/m,σ, ,取整/nw,）/w,。/w,σ, ,为/p,相对于/nw,关键点/n,所在/n,的/u,高斯/nr,金字塔/n,的/u,组/q,的/u,基准层/nw,图像/n,的/u,尺度/n,，/w,即/v,公式/n,20/m, ,所/u,表示/v,的/u,尺度/n,。/w,考虑/v,到/v,实际/n,编程/vn,的/u,需要/v,，/w,关键点/n,邻域/nw,范围/n,的/u,边长/n,应/v,为/p,3/m,σ,(/w,d/en,+/w,1/m,)/w,，/w,因此/c,关键点/n,邻域/nw,区域/n,一共/d,应有/v,3/m,σ,(/w,d/en,+/w,1/m,)/w,×/w,3/m,σ,(/w,d/en,+/w,1/m,)/w,个/q,像素/n,点/q,。/w,为了/p,保证/v,关键点/n,具有/v,旋转/v,不变性/nz,，/w,还/d,需要/v,以/p,关键点/n,为/p,中心/n,，/w,将/d,上面/f,确定/v,下来/v,的/u,关键点/n,邻域/nw,区域/n,旋转/v,θ,（/w,θ, ,就/d,是/v,该/r,关键点/n,的/u,方向/n,）/w,。/w,