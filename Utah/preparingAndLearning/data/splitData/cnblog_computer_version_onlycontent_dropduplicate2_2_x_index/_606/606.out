相机/n,标定/v,（/w,camera/en, ,calibration/en,）/w,原理/n,、/w,步骤/n,author/en,@/w,jason/en,_,ql/en,（/w,lql/en,0716/m,）/w,http/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,lql/en,0716/m,在/p,图像/n,测量/vn,过程/n,以及/c,机器/n,视觉/n,应用/vn,中/f,，/w,为/p,确定/v,空间/n,物体/n,表面/n,某/r,点/q,的/u,三维/nz,几何/n,位置/n,与/p,其/r,在/p,图像/n,中/f,对应点/nz,之间/f,的/u,相互/d,关系/n,，/w,必须/d,建立/v,相机/n,成像/vn,的/u,几何/n,模型/n,，/w,这些/r,几何/n,模型/n,参数/n,就/d,是/v,相机/n,参数/n,。/w,在/p,大多数/m,条件/n,下/f,这些/r,参数/n,必须/d,通过/p,实验/vn,与/p,计算/v,才/d,能/v,得到/v,，/w,这个/r,求解/v,参数/n,的/u,过程/n,就/d,称之为/v,相机/n,标定/v,（/w,或/c,摄像机/n,标定/v,）/w,。/w,无论是/c,在/p,图像/n,测量/vn,或者/c,机器/n,视觉/n,应用/vn,中/f,，/w,相机/n,参数/n,的/u,标定/v,都/d,是/v,非常/d,关键/n,的/u,环节/n,，/w,其/r,标定/v,结果/n,的/u,精度/n,及/c,算法/n,的/u,稳定性/n,直接/ad,影响/vn,相机/n,工作/vn,产生/v,结果/n,的/u,准确性/n,。/w,因此/c,，/w,做好/v,相机/n,标定/v,是/v,做好/v,后续/vn,工作/vn,的/u,前提/n,，/w,提高/v,标定/v,精度/n,是/v,科研/n,工作/vn,的/u,重点/n,所在/n,。/w,常用/a,术语/n,内参/n,矩阵/n,:/w, ,intrinsic/en, ,matrix/en,焦距/n,:/w, ,focal/en, ,length/en,主点/nw,:/w, ,principal/en, ,point/en,径向/n,畸变/n,:/w, ,radial/en, ,distortion/en,切向/nw,畸/ng,变/v,:/w, ,tangential/en, ,distortion/en,旋转/v,矩阵/n,:/w, ,rotation/en, ,matrices/en,平移/vn,向/p,量/n,:/w, ,translation/en, ,vectors/en,平均/a,重/a,投影/vn,误差/n,:/w, ,mean/en, ,reprojection/en, ,error/en,重/a,投影/vn,误差/n,:/w, ,reprojection/en, ,errors/en,重/a,投影点/nw,:/w, ,reprojected/en, ,points/en,1/m,、/w,坐标系/n,的/u,转换/v,1.1/m, ,世界/n,坐标/n,系/v,世界/n,坐标系/n,（/w,world/en, ,coordinate/en,）/w,(/w,xw/en,,/w,yw/en,,/w,zw/en,)/w,，/w,也/d,称为/v,测量/vn,坐标系/n,，/w,是/v,一个/m,三维/nz,直角/n,坐标系/n,，/w,以/p,其/r,为/p,基准/n,可以/v,描述/v,相机/n,和/c,待/v,测/v,物体/n,的/u,空间/n,位置/n,。/w,世界/n,坐标系/n,的/u,位置/n,可以/v,根据/p,实际/n,情况/n,自由/a,确定/v,。/w,1.2/m, ,相机/n,坐标系/n,相机/n,坐标系/n,（/w,camera/en, ,coordinate/en,）/w,(/w,xc/en,,/w,yc/en,,/w,zc/en,)/w,，/w,也/d,是/v,一个/m,三维/nz,直角/n,坐标系/n,，/w,原/b,点/q,位于/v,镜头/n,光心/nr,处/n,，/w,x/en,、/w,y/en,轴/q,分别/d,与/p,相面/v,的/u,两边/f,平行/vn,，/w,z/en,轴/q,为/p,镜头/n,光轴/nw,，/w,与/p,像/v,平面/n,垂直/v,。/w,1.3/m, ,世界/n,坐标系/n,转换/v,为/p,相机/n,坐标系/n,⎡,⎣⎢/nw,⎢⎢/nw,xcyczc/en,1/m,⎤,⎦⎥/nw,⎥⎥/nw,=/w,[/w,r/en,0/m,t/en,1/m,]/w,⎡,⎣⎢/nw,⎢⎢/nw,xwywzw/en,1/m,⎤,⎦⎥/nw,⎥⎥/nw,其中/r,r/en,为/p,3/m,*/w,3/m,的/u,旋转/v,矩阵/n,，/w,t/en,为/p,3/m,*/w,1/m,的/u,平移/vn,矢量/n,，/w,(/w,xc/en,,/w,yc/en,,/w,zc/en,,/w,1/m,)/w,t/en,为/p,相机/n,坐标系/n,的/u,齐次/nrf,坐标/n,，/w,(/w,xw/en,,/w,yw/en,,/w,zw/en,,/w,1/m,)/w,t/en,为/p,世界/n,坐标系/n,的/u,齐次/nrf,坐标/n,。/w,1.4/m, ,像素/n,坐标系/n,、/w,图像/n,坐标系/n,：/w,像素/n,坐标系/n,（/w,pixel/en, ,coordinate/en,）/w,如/v,，/w,像素/n,坐标系/n,uov/en,是/v,一个/m,二维/nr,直角/n,坐标系/n,，/w,反映/v,了/u,相机/n,ccd/en,//w,cmos/en,芯片/n,中/f,像素/n,的/u,排列/v,情况/n,。/w,原/b,点/q,o/en,位于/v,图像/n,的/u,左上角/nw,，/w,u/en,轴/q,、/w,v/en,轴/q,分别/d,于/p,像/v,面的/n,两边/f,平行/vn,。/w,像素/n,坐标/n,系/v,中/f,坐标轴/n,的/u,单位/n,是/v,像素/n,（/w,整数/n,）/w,。/w,像素/n,坐标/n,系/v,不/d,利于/v,坐标/n,变换/v,，/w,因此/c,需要/v,建立/v,图像/n,坐标系/n,xoy/en,，/w,其/r,坐标轴/n,的/u,单位/n,通常/d,为/p,毫米/q,（/w,mm/en,）/w,，/w,原/b,点/q,是/v,相机/n,光轴/nw,与/p,相面/v,的/u,交点/n,（/w,称为/v,主点/nw,）/w,，/w,即/v,图像/n,的/u,中心点/nz,，/w,x/en,轴/q,、/w,y/en,轴/q,分别/d,与/p,u/en,轴/q,、/w,v/en,轴/q,平行/vn,。/w,故/c,两个/m,坐标系/n,实际/n,是/v,平移/vn,关系/n,，/w,即/v,可以/v,通过/p,平移/vn,就/d,可/v,得到/v,。/w,图像/n,坐标系/n,转换/v,为/p,像素/n,坐标系/n,⎡,⎣⎢/nw,uv/en,1/m,⎤,⎦⎥/nw,=/w,⎡,⎣⎢/nw,1/m,//w,dx/en,0001/m,//w,dy/en,0/m,u/en,0/m,v/en,01/m,⎤⎦/nw,⎥⎡/nw,⎣⎢/nw,xy/en,1/m,⎤,⎦⎥/nw,其中/r,，/w,dx/en,、/w,dy/en,分别/d,为/p,像素/n,在/p,x/en,、/w,y/en,轴/q,方向/n,上/f,的/u,物理/n,尺寸/n,，/w,u/en,0/m,,/w,v/en,0/m,为/p,主点/nw,（/w,图像/n,原点/n,）/w,坐标/n,。/w,1.5/m, ,针孔/n,成像/vn,原理/n,：/w,如/v,图/n,，/w,空间/n,任意/d,一点/m,p/en,与其/c,图像点/nw,p/en,之间/f,的/u,关系/n,，/w,p/en,与/p,相机/n,光心/nr,o/en,的/u,连线/v,为/p,op/en,，/w,op/en,与/p,像/v,面的/n,交点/n,p/en,即/v,为/p,空间点/nw,p/en,在/p,图像/n,平面/n,上/f,的/u,投影/vn,。/w,该/r,过程/n,为/p,透视/v,投影/vn,，/w,如下/v,矩阵/n,表示/v,：/w,s/en,⎡,⎣⎢/nw,xy/en,1/m,⎤,⎦⎥/nw,=/w,⎡,⎣⎢/nw,f/en,000/m,f/en,0001000/m,⎤,⎦,⎥⎡/nw,⎣⎢/nw,⎢⎢/nw,xyz/en,1/m,⎤,⎦⎥/nw,⎥⎥/nw,其中/r,，/w,s/en,为/p,比例/n,因子/n,（/w,s/en,不为/c,0/m,）/w,，/w,f/en,为/p,有效/a,焦距/n,（/w,光心/nr,到/v,图像/n,平面/n,的/u,距离/n,）/w,，/w,(/w,x/en,,/w,y/en,,/w,z/en,,/w,1/m,)/w,t/en,是/v,空间点/nw,p/en,在/p,相机/n,坐标系/n,oxyz/en,中/f,的/u,齐次/nrf,坐标/n,，/w,(/w,x/en,,/w,y/en,,/w,1/m,)/w,t/en,是/v,像/v,点/q,p/en,在/p,图像/n,坐标系/n,oxy/en,中/f,的/u,齐次/nrf,坐标/n,。/w,1.6/m, ,世界/n,坐标系/n,转换/v,为/p,像素/n,坐标系/n,s/en,⎡,⎣⎢/nw,uv/en,1/m,⎤,⎦⎥/nw,=/w,⎡,⎣⎢/nw,1/m,//w,dx/en,0001/m,//w,dy/en,0/m,u/en,0/m,v/en,01/m,⎤⎦/nw,⎥⎡/nw,⎣⎢/nw,f/en,000/m,f/en,0001000/m,⎤,⎦⎥/nw,[/w,r/en,0/m,t/en,1/m,]/w,⎡,⎣⎢/nw,⎢⎢/nw,xwywzw/en,1/m,⎤,⎦⎥/nw,⎥⎥/nw,=/w,⎡,⎣⎢/nw,α,x/en,000/m,α,y/en,0/m,u/en,0/m,v/en,01000/m,⎤,⎦⎥/nw,[/w,r/en,0/m,t/en,1/m,]/w,⎡,⎣⎢/nw,⎢⎢/nw,xwywzw/en,1/m,⎤,⎦⎥/nw,⎥⎥/nw,=/w,m/en,1/m,m/en,2/m,xw/en,=/w,mxw/en,其中/r,，/w,α,x/en,=/w,f/en,//w,dx/en,、/w,α,y/en,=/w,f/en,//w,dy/en,，/w,称为/v,u/en,、/w,v/en,轴/q,的/u,尺度/n,因子/n,，/w,m/en,1/m,称为/v,相机/n,的/u,内部/f,参数/n,矩阵/n,，/w,m/en,2/m,称为/v,相机/n,的/u,外部/f,参数/n,矩阵/n,，/w,m/en,称为/v,投影/vn,矩阵/n,。/w,2/m, ,相机/n,内/f,参与/v,畸变/n,参数/n,2.1/m, ,相机/n,内参/n,参看/v,1.6节/mq,所述/nz,2.2/m, ,畸变/n,参数/n,畸变/n,参数/n,(/w,distortion/en, ,parameters/en,)/w,畸/ng,变/v,（/w,distortion/en,）/w,是/v,对/p,直线/n,投影/vn,（/w,rectilinear/en, ,projection/en,）/w,的/u,一种/mq,偏移/vn,。/w,简单/a,来说/u,直线/n,投影/vn,是/v,场景/n,内/f,的/u,一条/mq,直线/n,投影/vn,到/v,图片/n,上/f,也/d,保持/v,为/p,一条/mq,直线/n,。/w,畸变/n,简单/a,来说/u,就/d,是/v,一条/mq,直线/n,投影/vn,到/v,图片/n,上/f,不能/v,保持/v,为/p,一条/mq,直线/n,了/u,，/w,这/r,是/v,一种/mq,光学/n,畸变/n,（/w,optical/en, ,aberration/en,）/w,,/w,可能/v,由于/c,摄像机/n,镜头/n,的/u,原因/n,。/w,畸变/n,一般/a,可以/v,分为/v,：/w,径向/n,畸变/n,、/w,切向/nw,畸变/n,1/m,、/w,径向/n,畸变/n,来自/v,于/p,透镜/n,形状/n,2/m,、/w,切向/nw,畸变/n,来自/v,于/p,整个/b,摄像机/n,的/u,组装/v,过程/n,畸变/n,还有/v,其他/r,类型/n,的/u,畸变/n,，/w,但是/c,没有/v,径向/n,畸变/n,、/w,切向/nw,畸变/n,显著/a,畸/ng,变/v,图示/v,径向/n,畸变/n,实际/n,摄像机/n,的/u,透镜/n,总是/d,在/p,成像仪/nw,的/u,边缘/n,产生/v,显著/a,的/u,畸变/n,，/w,这种/r,现象/n,来源于/v,“/w,筒形/nw,”/w,或/c,“/w,鱼眼/nw,”/w,的/u,影响/vn,。/w,如/v,下/f,图/n,，/w,光线/n,在/p,原理/n,透镜/n,中心/n,的/u,地方/n,比/p,靠近/v,中心/n,的/u,地方/n,更加/d,弯曲/v,。/w,对于/p,常用/a,的/u,普通/a,透镜/n,来说/u,，/w,这种/r,现象/n,更加/d,严重/a,。/w,筒形/nw,畸变/n,在/p,便宜/a,的/u,网络/n,摄像机/n,中/f,非常/d,厉害/a,，/w,但/c,在/p,高/a,端/v,摄像机/n,中/f,不/d,明显/a,，/w,因为/c,这些/r,透镜/n,系统/n,做/v,了/u,很多/m,消除/v,径向/n,畸变/n,的/u,工作/vn,。/w,对于/p,径向/n,畸变/n,，/w,成像/vn,仪中心/nt,（/w,光学/n,中心/n,）/w,的/u,畸/ng,变为/v,0/m,，/w,随着/p,向/p,边缘/n,移动/vn,，/w,畸变/n,越来越/d,严重/a,。/w,径向/n,畸变/n,包括/v,：/w,枕形/nw,畸变/n,、/w,桶/q,形/ng,畸/ng,变/v,切向/nw,畸变/n,切向/nw,畸变/n,是/v,由于/c,透镜/n,制造/v,上/f,的/u,缺陷/n,使得/v,透镜/n,本身/r,与/p,图像/n,平面/n,不/d,平行/vn,而/c,产生/v,的/u,。/w,切向/nw,畸变/n,可/v,分为/v,：/w,薄透镜/nr,畸变/n,、/w,离心/b,畸/ng,变/v,切向/nw,畸/ng,变/v,图示/v,：/w,2/m,./w,2/m,./w,1/m, ,opencv/en,中/f,的/u,畸变/n,模型/n,径向/n,畸变/n,模型/n,：/w,以下/f,公式/n,由/p,泰勒展/nr,式/k,得出/v,，/w,在/p,opencv/en,中/f,k/en,=/w,1/m,，/w,r/en,2/m,=/w,x/en,2/m,+/w,y/en,2/m,,/w,(/w,x/en,,/w,y/en,)/w,为/p,真实/a,坐标/n,（/w,发生/v,畸变/n,）/w,，/w,(/w,x/en,′/w,,/w,y/en,′/w,)/w,为/p,理想/n,坐标/n,。/w,δ,xr/en,=/w,x/en,(/w,k/en,1/m,r/en,2/m,+/w,k/en,2/m,r/en,4/m,+/w,k/en,3/m,r/en,6/m,+/w,k/en,)/w,δ,yr/en,=/w,y/en,(/w,k/en,1/m,r/en,2/m,+/w,k/en,2/m,r/en,4/m,+/w,k/en,3/m,r/en,6/m,+/w,k/en,)/w,切向/nw,畸变/n,模型/n,：/w,δ,xd/en,=/w,2/m,p/en,1/m,xy/en,+/w,p/en,2/m,(/w,r/en,2/m,+/w,2/m,x/en,2/m,)/w,+/w,k/en,δ,yd/en,=/w,2/m,p/en,1/m,(/w,r/en,2/m,+/w,2/m,y/en,2/m,)/w,+/w,2/m,p/en,2/m,xy/en,+/w,k/en,理想/n,坐标/n,(/w,x/en,′/w,,/w,y/en,′/w,)/w,与/p,真实/a,坐标/n,(/w,x/en,,/w,y/en,)/w,：/w,x/en,′/w,=/w,x/en,+/w,δ,xr/en,+/w,δ,xdy/en,′/w,=/w,y/en,+/w,δ,yr/en,+/w,δ,yd/en,也/d,即/v,：/w,[/w,x/en,′/w,y/en,′/w,]/w,=/w,(/w,1/m,+/w,k/en,1/m,r/en,2/m,+/w,k/en,2/m,r/en,4/m,+/w,k/en,3/m,r/en,6/m,)/w,[/w,xy/en,]/w,+/w,[/w,2/m,p/en,1/m,xy/en,+/w,p/en,2/m,(/w,r/en,2/m,+/w,2/m,x/en,2/m,)/w,2/m,p/en,1/m,(/w,r/en,2/m,+/w,2/m,y/en,2/m,)/w,+/w,2/m,p/en,2/m,xy/en,]/w,实际/n,计算/v,过程/n,中/f,，/w,如果/c,考虑/v,太/d,多/a,高阶/nz,的/u,畸变/n,参数/n,，/w,会/v,导致/v,标定/v,求解/v,的/u,不/d,稳定/a,。/w,2/m,./w,2/m,./w,2/m, ,张氏/nz,标定/v,中/f,的/u,畸变/n,模型/n,张正友/nr,的/u,方法/n,只/d,考虑/v,了/u,径向/n,畸变/n,，/w,没有/v,考虑/v,切向/nw,畸变/n,模型/n,：/w,理想/n,情况/n,下/f,(/w,没有/v,畸/ng,变/v,)/w,图片/n,的/u,像素/n,坐标/n,为/p,：/w,(/w,u/en,,/w,v/en,)/w,真实/a,的/u,像素/n,坐标/n,为/p,：/w,(/w,u/en,¯/w,,/w,v/en,¯/w,)/w,真实/a,坐标/n,与/p,理想/n,坐标/n,的/u,关系式/n,（/w,泰勒/nr,展开/v,）/w,：/w,(/w,x/en,,/w,y/en,)/w,and/en,(/w,x/en,¯/w,,/w,y/en,¯/w,)/w,are/en, ,the/en, ,ideal/en, ,(/w,distortion/en,-/w,free/en,)/w, ,and/en, ,real/en, ,(/w,distorted/en,)/w, ,normalized/en, ,image/en, ,coordinates/en,./w,x/en,¯/w,=/w,x/en,+/w,x/en,[/w,k/en,1/m,(/w,x/en,2/m,+/w,y/en,2/m,)/w,+/w,k/en,2/m,(/w,x/en,2/m,+/w,y/en,2/m,)/w,2/m,]/w,y/en,¯/w,=/w,y/en,+/w,y/en,[/w,k/en,1/m,(/w,x/en,2/m,+/w,y/en,2/m,)/w,+/w,k/en,2/m,(/w,x/en,2/m,+/w,y/en,2/m,)/w,2/m,]/w,其中/r,k/en,