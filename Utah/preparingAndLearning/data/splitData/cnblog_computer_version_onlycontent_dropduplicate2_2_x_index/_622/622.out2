第八/nw,章/q, ,目标/n,跟踪/v,1/m,检测/vn,目标/n,的/u,移动/vn,基本/a,的/u,运动/n,检测/vn,,/w,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,#, ,捕获/v,摄像头/n,图像/n, ,camera/en, ,=/w, ,cv/en,2/m,./w,videocapture/en,(/w,0/m,)/w, ,#, ,es/en, ,=/w, ,cv/en,2/m,./w,getstructuringelement/en,(/w,cv/en,2/m,./w,morph/en,_,ellipse/en,,/w, ,(/w,10/m,,/w, ,10/m,)/w,)/w, ,kernel/en, ,=/w, ,np/en,./w,ones/en,(/w,(/w,5/m,,/w, ,5/m,)/w,,/w, ,np/en,./w,uint/en,8/m,)/w, ,background/en, ,=/w, ,none/en, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,ret/en,,/w, ,frame/en, ,=/w, ,camera/en,./w,read/en,(/w,)/w, , , , , ,#, ,将/d,第一/m,帧/q,设/v,为/p,图像/n,的/u,背景/n, , , , , ,if/en, ,background/en, ,is/en, ,none/en,:/w, , , , , , , , , ,#, ,转换/v,颜色/n,空间/n, , , , , , , , , ,background/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,gray/en,)/w, , , , , , , , , ,#, ,高/a,斯/rg,模糊/a, , , , , , , , , ,background/en, ,=/w, ,cv/en,2/m,./w,gaussianblur/en,(/w,background/en,,/w, ,(/w,21/m,,/w, ,21/m,)/w,,/w, ,0/m,)/w, , , , , , , , , ,continue/en, , , , , ,#, ,转换/v,颜色/n,空间/n,并/c,作/v,模糊/a,处理/v, , , , , ,gray/en,_,frame/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,gray/en,)/w, , , , , ,gray/en,_,frame/en, ,=/w, ,cv/en,2/m,./w,gaussianblur/en,(/w,gray/en,_,frame/en,,/w, ,(/w,21/m,,/w, ,21/m,)/w,,/w, ,0/m,)/w, , , , , ,#, ,取得/v,差/a,分/q,图/n, , , , , ,diff/en, ,=/w, ,cv/en,2/m,./w,absdiff/en,(/w,background/en,,/w, ,gray/en,_,frame/en,)/w, , , , , ,diff/en, ,=/w, ,cv/en,2/m,./w,threshold/en,(/w,diff/en,,/w, ,25/m,,/w, ,255/m,,/w, ,cv/en,2/m,./w,thresh/en,_,binary/en,)/w,[/w,1/m,]/w, , , , , ,#, ,膨胀/v, , , , , ,diff/en, ,=/w, ,cv/en,2/m,./w,dilate/en,(/w,diff/en,,/w, ,es/en,,/w, ,iterations/en,=/w,2/m,)/w, , , , , ,#, ,得到/v,图像/n,中/f,目标/n,的/u,轮廓/n, , , , , ,image/en,,/w, ,cnts/en,,/w, ,hierarchy/en, ,=/w, ,cv/en,2/m,./w,findcontours/en,(/w,diff/en,./w,copy/en,(/w,)/w,,/w, ,cv/en,2/m,./w,retr/en,_,external/en,,/w, ,cv/en,2/m,./w,chain/en,_,approx/en,_,simple/en,)/w, , , , , ,for/en, ,c/en, ,in/en, ,cnts/en,:/w, , , , , , , , , ,if/en, ,cv/en,2/m,./w,contourarea/en,(/w,c/en,)/w, ,</w, ,1500/m,:/w, , , , , , , , , , , , , ,continue/en, , , , , , , , , ,#, ,计算/v,矩形/n,边框/n, , , , , , , , , ,(/w,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en,)/w, ,=/w, ,cv/en,2/m,./w,boundingrect/en,(/w,c/en,)/w, , , , , , , , , ,#, ,绘制/v,矩形/n, , , , , , , , , ,cv/en,2/m,./w,rectangle/en,(/w,frame/en,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,(/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,)/w,,/w, ,(/w,0/m,,/w, ,255/m,,/w, ,0/m,)/w,,/w, ,2/m,)/w, , , , , ,#, ,显示/v,图像/n, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,contours/en,'/w,,/w, ,frame/en,)/w, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,dif/en,'/w,,/w, ,diff/en,)/w, , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,int/en,(/w,1000/m, ,//w, ,12/m,)/w,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,ord/en,(/w,'/w,q/en,'/w,)/w,:/w, , , , , , , , , ,break/en, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w, ,camera/en,./w,release/en,(/w,)/w,运行/vn,结果/n,如下/v,:/w,2/m,背景/n,分割器/nw, ,knn/en, ,mog/en,2/m,和/c,gmgopencv/en,3/m,有/v,三种/mq,背景/n,分割器/nw,k/en,-/w,nearest/en,(/w,knn/en,)/w,mixture/en, ,of/en, ,gaussians/en,(/w,mog/en,2/m,)/w,geometric/en, ,multigid/en,(/w,gmc/en,)/w,backgroundsubtractor/en,用于/v,分割/v,前景/n,和/c,背景/n,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,cv/en,2/m,./w,ocl/en,./w,setuseopencl/en,(/w,false/en,)/w, ,cap/en, ,=/w, ,cv/en,2/m,./w,videocapture/en,(/w,0/m,)/w, ,mog/en, ,=/w, ,cv/en,2/m,./w,createbackgroundsubtractormog/en,2/m,(/w,)/w, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,ret/en,,/w, ,frame/en, ,=/w, ,cap/en,./w,read/en,(/w,)/w, , , , , ,fgmask/en, ,=/w, ,mog/en,./w,apply/en,(/w,frame/en,)/w, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,frame/en,'/w,,/w, ,fgmask/en,)/w, , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,30/m,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,ord/en,(/w,'/w,q/en,'/w,)/w,:/w, , , , , , , , , ,break/en, ,cap/en,./w,release/en,(/w,)/w, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w,运行/vn,结果/n,如下/v,:/w,使用/v,backgroundsubtractorknn/en,来/v,实现/v,运动/n,检测/vn,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,cv/en,2/m,./w,ocl/en,./w,setuseopencl/en,(/w,false/en,)/w, ,bs/en, ,=/w, ,cv/en,2/m,./w,createbackgroundsubtractorknn/en,(/w,detectshadows/en,=/w,true/en,)/w, ,#, ,读/v,取/v,本地/r,视频/n, ,camera/en, ,=/w, ,cv/en,2/m,./w,videocapture/en,(/w,'/w,./w,./w,//w,traffic/en,./w,flv/en,'/w,)/w, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,ret/en,,/w, ,frame/en, ,=/w, ,camera/en,./w,read/en,(/w,)/w, , , , , ,fgmask/en, ,=/w, ,bs/en,./w,apply/en,(/w,frame/en,./w,copy/en,(/w,)/w,)/w, , , , , ,#, ,设置/v,阈值/n, , , , , ,th/en, ,=/w, ,cv/en,2/m,./w,threshold/en,(/w,fgmask/en,,/w, , ,#, ,源/ng,图像/n, , , , , , , , , , , , , , , , , , , , , , , , ,244/m,,/w, , ,#, ,阈值/n, , , , , , , , , , , , , , , , , , , , , , , , ,255/m,,/w, , ,#, ,最大值/nz, , , , , , , , , , , , , , , , , , , , , , , , ,cv/en,2/m,./w,thresh/en,_,binary/en,)/w,[/w,1/m,]/w, , ,#, ,阈值/n,类型/n, , , , , ,#, ,膨胀/v, , , , , ,dilated/en, ,=/w, ,cv/en,2/m,./w,dilate/en,(/w,th/en,,/w, , ,#, ,源/ng,图像/n, , , , , , , , , , , , , , , , , , , , , , , , , , ,cv/en,2/m,./w,getstructuringelement/en,(/w,cv/en,2/m,./w,morph/en,_,ellipse/en,,/w, ,(/w,3/m,,/w, ,3/m,)/w,)/w,,/w, , ,#, ,内核/n, , , , , , , , , , , , , , , , , , , , , , , , , , ,iterations/en,=/w,2/m,)/w, , ,#, ,腐蚀/v,次数/n, , , , , ,#, ,查找/v,图像/n,中/f,的/u,目标/n,轮廓/n, , , , , ,image/en,,/w, ,contours/en,,/w, ,hier/en, ,=/w, ,cv/en,2/m,./w,findcontours/en,(/w,dilated/en,,/w, ,cv/en,2/m,./w,retr/en,_,external/en,,/w, ,cv/en,2/m,./w,chain/en,_,approx/en,_,simple/en,)/w, , , , , ,for/en, ,c/en, ,in/en, ,contours/en,:/w, , , , , , , , , ,if/en, ,cv/en,2/m,./w,contourarea/en,(/w,c/en,)/w, ,>, ,1600/m,:/w, , , , , , , , , , , , , ,(/w,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en,)/w, ,=/w, ,cv/en,2/m,./w,boundingrect/en,(/w,c/en,)/w, , , , , , , , , , , , , ,cv/en,2/m,./w,rectangle/en,(/w,frame/en,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,(/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,)/w,,/w, ,(/w,255/m,,/w, ,255/m,,/w, ,0/m,)/w,,/w, ,2/m,)/w, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,mog/en,'/w,,/w, ,fgmask/en,)/w, , ,#, ,分割/v,前景/n,与/p,背景/n, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,thresh/en,'/w,,/w, ,th/en,)/w, , ,#, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,detection/en,'/w,,/w, ,frame/en,)/w, , ,#, ,运动/n,检测/vn,结果/n, , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,30/m,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,27/m,:/w, , , , , , , , , ,break/en, ,camera/en,./w,release/en,(/w,)/w, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w,运行/vn,结果/n,如下/v,:/w,均值/n,漂/v,移/v,meanshift/en,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,#, ,取得/v,摄像头/n,图像/n, ,cap/en, ,=/w, ,cv/en,2/m,./w,videocapture/en,(/w,0/m,)/w, ,ret/en,,/w, ,frame/en, ,=/w, ,cap/en,./w,read/en,(/w,)/w, ,#, ,设置/v,跟踪/v,窗体/nw,大小/n, ,r/en,,/w, ,h/en,,/w, ,c/en,,/w, ,w/en, ,=/w, ,10/m,,/w, ,200/m,,/w, ,10/m,,/w, ,200/m, ,track/en,_,window/en, ,=/w, ,(/w,c/en,,/w, ,r/en,,/w, ,w/en,,/w, ,h/en,)/w, ,#, ,提取/v,roi/en, ,roi/en, ,=/w, ,frame/en,[/w,r/en,:/w,r/en, ,+/w, ,h/en,,/w, ,c/en,:/w,c/en, ,+/w, ,w/en,]/w, ,#, ,转换/v,颜色/n,空间/n, ,hsv/en,_,roi/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, ,#, ,根据/p,阈值/n,构建/v,掩码/nw, ,mask/en, ,=/w, ,cv/en,2/m,./w,inrange/en,(/w,hsv/en,_,roi/en,,/w, ,np/en,./w,array/en,(/w,(/w,100/m,./w,,/w, ,30/m,./w,,/w, ,32/m,./w,)/w,)/w,,/w, ,np/en,./w,array/en,(/w,(/w,180/m,./w,,/w, ,120/m,./w,,/w, ,255/m,./w,)/w,)/w,)/w, ,#, ,计算/v,roi/en,图形/n,的/u,彩色/b,直方图/n, ,roi/en,_,hist/en, ,=/w, ,cv/en,2/m,./w,calchist/en,(/w,[/w,hsv/en,_,roi/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,mask/en,,/w, ,[/w,180/m,]/w,,/w, ,[/w,0/m,,/w, ,180/m,]/w,)/w, ,cv/en,2/m,./w,normalize/en,(/w,roi/en,_,hist/en,,/w, ,roi/en,_,hist/en,,/w, ,0/m,,/w, ,255/m,,/w, ,cv/en,2/m,./w,norm/en,_,minmax/en,)/w, ,#, ,指定/v,停止/v,条件/n, ,term/en,_,crit/en, ,=/w, ,(/w,cv/en,2/m,./w,term/en,_,criteria/en,_,eps/en, ,|/w, ,cv/en,2/m,./w,term/en,_,criteria/en,_,count/en,,/w, ,10/m,,/w, ,1/m,)/w, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,ret/en,,/w, ,frame/en, ,=/w, ,cap/en,./w,read/en,(/w,)/w, , , , , ,if/en, ,ret/en, ,=/w,=/w, ,true/en,:/w, , , , , , , , , ,#, ,更换/v,颜色/n,空间/n, , , , , , , , , ,hsv/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, , , , , , , , , ,#, ,histogram/en, ,back/en, ,projection/en, ,calculation/en, ,直方图/n,反向/f,投影/vn, , , , , , , , , ,dst/en, ,=/w, ,cv/en,2/m,./w,calcbackproject/en,(/w,[/w,hsv/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,roi/en,_,hist/en,,/w, ,[/w,0/m,,/w, ,180/m,]/w,,/w, ,1/m,)/w, , , , , , , , , ,#, ,均值/n,漂/v,移/v, , , , , , , , , ,ret/en,,/w, ,track/en,_,window/en, ,=/w, ,cv/en,2/m,./w,meanshift/en,(/w,dst/en,,/w, ,track/en,_,window/en,,/w, ,term/en,_,crit/en,)/w, , , , , , , , , ,#, ,绘制/v,矩形/n,显示/v,图像/n, , , , , , , , , ,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en, ,=/w, ,track/en,_,window/en, , , , , , , , , ,img/en,2/m, ,=/w, ,cv/en,2/m,./w,rectangle/en,(/w,frame/en,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,(/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,)/w,,/w, ,255/m,,/w, ,2/m,)/w, , , , , , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,img/en,2/m,'/w,,/w, ,img/en,2/m,)/w, , , , , , , , , ,#, ,esc/en,退出/v, , , , , , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,60/m,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,27/m,:/w, , , , , , , , , , , , , ,break/en, , , , , ,else/en,:/w, , , , , , , , , ,break/en, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w, ,cap/en,./w,release/en,(/w,)/w,运行/vn,结果/n,如下/v,:/w,彩色/b,直方图/n,calhist/en,函数/n,函数/n,原型/n,:/w,def/en, ,calchist/en,(/w,images/en,,/w, ,#,源/ng,图像/n,channels/en,,/w, ,#,通道/n,列表/v,mask/en,,/w,#,可/v,选/v,的/u,掩码/nw,histsize/en,,/w, ,#,每个/r,维度/n,下/f,直方图/n,数组/n,的/u,大小/n,ranges/en,,/w,#,每/r,一个/m,维度/n,下/f,直方图/n,bin/en,的/u,上下界/nw,的/u,数组/n,hist/en,=/w,none/en,,/w,#,输出/v,直方图/n,是/v,一个/m,[/w,]/w,维稠/nr,密度/n,的/u,数组/n,accumulate/en,=/w,none/en,)/w,#,累计/v,标志/n,camshift/en,示例/n,代码/n,如下/v,:/w,#,!/w,//w,usr/en,//w,bin/en,//w,env/en, ,python/en, ,#, ,-/w,*/w,-/w, ,coding/en,:/w, ,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,#, ,@/w,time/en, , , , ,:/w, ,2016/m,//w,12/m,//w,15/m, ,16/m,:/w,48/m, ,#, ,@/w,author/en, , ,:/w, ,retacn/en, ,#, ,@/w,site/en, , , , ,:/w, ,camshift/en,实现/v,物体/n,跟踪/v, ,#, ,@/w,file/en, , , , ,:/w, ,camshift/en,./w,py/en, ,#, ,@/w,software/en,:/w, ,pycharm/en, ,_,_,author/en,_,_, ,=/w, ,"/w,retacn/en,"/w, ,_,_,copyright/en,_,_, ,=/w, ,"/w,property/en, ,of/en, ,mankind/en,./w,"/w, ,_,_,license/en,_,_, ,=/w, ,"/w,cn/en,"/w, ,_,_,version/en,_,_, ,=/w, ,"/w,0/m,./w,0/m,./w,1/m,"/w, ,_,_,maintainer/en,_,_, ,=/w, ,"/w,retacn/en,"/w, ,_,_,email/en,_,_, ,=/w, ,"/w,zhenhuayue/en,@/w,sina/en,./w,com/en,"/w, ,_,_,status/en,_,_, ,=/w, ,"/w,development/en,"/w, ,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,#, ,取得/v,摄像头/n,图像/n, ,cap/en, ,=/w, ,cv/en,2/m,./w,videocapture/en,(/w,0/m,)/w, ,ret/en,,/w, ,frame/en, ,=/w, ,cap/en,./w,read/en,(/w,)/w, ,#, ,设置/v,跟踪/v,窗体/nw,大小/n, ,r/en,,/w, ,h/en,,/w, ,c/en,,/w, ,w/en, ,=/w, ,300/m,,/w, ,200/m,,/w, ,400/m,,/w, ,300/m, ,track/en,_,window/en, ,=/w, ,(/w,c/en,,/w, ,r/en,,/w, ,w/en,,/w, ,h/en,)/w, ,#, ,提取/v,roi/en, ,roi/en, ,=/w, ,frame/en,[/w,r/en,:/w,r/en, ,+/w, ,h/en,,/w, ,c/en,:/w,c/en, ,+/w, ,w/en,]/w, ,#, ,转换/v,颜色/n,空间/n, ,hsv/en,_,roi/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, ,#, ,根据/p,阈值/n,构建/v,掩码/nw, ,mask/en, ,=/w, ,cv/en,2/m,./w,inrange/en,(/w,hsv/en,_,roi/en,,/w, ,np/en,./w,array/en,(/w,(/w,100/m,./w,,/w, ,30/m,./w,,/w, ,32/m,./w,)/w,)/w,,/w, ,np/en,./w,array/en,(/w,(/w,180/m,./w,,/w, ,120/m,./w,,/w, ,255/m,./w,)/w,)/w,)/w, ,#, ,计算/v,roi/en,图形/n,的/u,彩色/b,直方图/n, ,roi/en,_,hist/en, ,=/w, ,cv/en,2/m,./w,calchist/en,(/w,[/w,hsv/en,_,roi/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,mask/en,,/w, ,[/w,180/m,]/w,,/w, ,[/w,0/m,,/w, ,180/m,]/w,)/w, ,cv/en,2/m,./w,normalize/en,(/w,roi/en,_,hist/en,,/w, ,roi/en,_,hist/en,,/w, ,0/m,,/w, ,255/m,,/w, ,cv/en,2/m,./w,norm/en,_,minmax/en,)/w, ,#, ,指定/v,停止/v,条件/n, ,term/en,_,crit/en, ,=/w, ,(/w,cv/en,2/m,./w,term/en,_,criteria/en,_,eps/en, ,|/w, ,cv/en,2/m,./w,term/en,_,criteria/en,_,count/en,,/w, ,10/m,,/w, ,1/m,)/w, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,ret/en,,/w, ,frame/en, ,=/w, ,cap/en,./w,read/en,(/w,)/w, , , , , ,if/en, ,ret/en, ,=/w,=/w, ,true/en,:/w, , , , , , , , , ,#, ,更换/v,颜色/n,空间/n, , , , , , , , , ,hsv/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, , , , , , , , , ,#, ,histogram/en, ,back/en, ,projection/en, ,calculation/en, ,直方图/n,反向/f,投影/vn, , , , , , , , , ,dst/en, ,=/w, ,cv/en,2/m,./w,calcbackproject/en,(/w,[/w,hsv/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,roi/en,_,hist/en,,/w, ,[/w,0/m,,/w, ,180/m,]/w,,/w, ,1/m,)/w, , , , , , , , , ,#, ,均值/n,漂/v,移/v, , , , , , , , , ,ret/en,,/w, ,track/en,_,window/en, ,=/w, ,cv/en,2/m,./w,camshift/en,(/w,dst/en,,/w, ,track/en,_,window/en,,/w, ,term/en,_,crit/en,)/w, , , , , , , , , ,#, ,绘制/v,矩形/n,显示/v,图像/n, , , , , , , , , ,pts/en, ,=/w, ,cv/en,2/m,./w,boxpoints/en,(/w,ret/en,)/w, , , , , , , , , ,pts/en, ,=/w, ,np/en,./w,int/en,0/m,(/w,pts/en,)/w, , , , , , , , , ,img/en,2/m, ,=/w, ,cv/en,2/m,./w,polylines/en,(/w,frame/en,,/w, ,[/w,pts/en,]/w,,/w, ,true/en,,/w, ,255/m,,/w, ,2/m,)/w, , , , , , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,img/en,2/m,'/w,,/w, ,img/en,2/m,)/w, , , , , , , , , ,#, ,esc/en,退出/v, , , , , , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,60/m,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,27/m,:/w, , , , , , , , , , , , , ,break/en, , , , , ,else/en,:/w, , , , , , , , , ,break/en, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w, ,cap/en,./w,release/en,(/w,)/w,运行/vn,结果/n,如下/v,:/w,4/m, ,卡尔曼滤波器/nw,函数/n,原型/n,为/p,：/w,def/en, ,kalmanfilter/en,(/w,dynamparams/en,=/w,none/en,,/w,#,状态/n,的/u,维度/n,measureparams/en,=/w,none/en,,/w, ,#,测量/vn,的/u,维度/n,controlparams/en,=/w,none/en,,/w,#,控制/v,的/u,维度/n,type/en,=/w,none/en,)/w,#,矩阵/n,的/u,类型/n,示例/n,代码/n,如下/v,：/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,#, ,创建/v,空帧/nw, ,frame/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,800/m,,/w, ,800/m,,/w, ,3/m,)/w,,/w, ,np/en,./w,uint/en,8/m,)/w, ,#, ,测量/vn,坐标/n, ,last/en,_,measurement/en, ,=/w, ,current/en,_,measurement/en, ,=/w, ,np/en,./w,array/en,(/w,(/w,2/m,,/w, ,1/m,)/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,#, ,鼠标/n,运动/n,预测/v, ,last/en,_,prediction/en, ,=/w, ,current/en,_,predication/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,2/m,,/w, ,1/m,)/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,def/en, ,mousemove/en,(/w,event/en,,/w, ,x/en,,/w, ,y/en,,/w, ,s/en,,/w, ,p/en,)/w,:/w, , , , , ,#, ,设置/v,全局/n,变量/n, , , , , ,global/en, ,frame/en,,/w, ,measurements/en,,/w, ,current/en,_,measurement/en,,/w, ,last/en,_,measurement/en,,/w, ,current/en,_,predication/en,,/w, ,last/en,_,prediction/en, , , , , ,last/en,_,prediction/en, ,=/w, ,current/en,_,predication/en, , , , , ,last/en,_,measurement/en, ,=/w, ,current/en,_,measurement/en, , , , , ,current/en,_,measurement/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,np/en,./w,float/en,32/m,(/w,x/en,)/w,]/w,,/w, ,[/w,np/en,./w,float/en,32/m,(/w,y/en,)/w,]/w,]/w,)/w, , , , , ,kalman/en,./w,correct/en,(/w,current/en,_,measurement/en,)/w, , , , , ,current/en,_,predication/en, ,=/w, ,kalman/en,./w,predict/en,(/w,)/w, , , , , ,#, ,实际/n,移动/vn,起始点/nw, , , , , ,lmx/en,,/w, ,lmy/en, ,=/w, ,last/en,_,measurement/en,[/w,0/m,]/w,,/w, ,last/en,_,measurement/en,[/w,1/m,]/w, , , , , ,cmx/en,,/w, ,cmy/en, ,=/w, ,current/en,_,measurement/en,[/w,0/m,]/w,,/w, ,current/en,_,measurement/en,[/w,1/m,]/w, , , , , ,#, ,预测/v,线/n,起/v,止点/nw, , , , , ,lpx/en,,/w, ,lpy/en, ,=/w, ,last/en,_,prediction/en,[/w,0/m,]/w,,/w, ,last/en,_,prediction/en,[/w,1/m,]/w, , , , , ,cpx/en,,/w, ,cpy/en, ,=/w, ,current/en,_,predication/en,[/w,0/m,]/w,,/w, ,current/en,_,predication/en,[/w,1/m,]/w, , , , , ,#, ,绘制/v,连线/v, , , , , ,cv/en,2/m,./w,line/en,(/w,frame/en,,/w, ,(/w,lmx/en,,/w, ,lmy/en,)/w,,/w, ,(/w,cmx/en,,/w, ,cmy/en,)/w,,/w, ,(/w,0/m,,/w, ,100/m,,/w, ,0/m,)/w,)/w, , ,#, ,绿色/n, , , , , ,cv/en,2/m,./w,line/en,(/w,frame/en,,/w, ,(/w,lpx/en,,/w, ,lpy/en,)/w,,/w, ,(/w,cpx/en,,/w, ,cpy/en,)/w,,/w, ,(/w,0/m,,/w, ,0/m,,/w, ,200/m,)/w,)/w, , ,#, ,红色/n, ,#, ,创建/v,窗体/nw, ,cv/en,2/m,./w,namedwindow/en,(/w,'/w,mouse/en,_,detection/en,'/w,)/w, ,#, ,注册/v,鼠标/n,事件/n,的/u,回调/vn,函数/n, ,cv/en,2/m,./w,setmousecallback/en,(/w,'/w,mouse/en,_,detection/en,'/w,,/w, ,mousemove/en,)/w, ,#, ,卡尔曼滤波器/nw, ,kalman/en, ,=/w, ,cv/en,2/m,./w,kalmanfilter/en,(/w,4/m,,/w, ,2/m,)/w, ,kalman/en,./w,measurementmatrix/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,]/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,kalman/en,./w,transitionmatrix/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,1/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,kalman/en,./w,processnoisecov/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,*/w, ,0.03/m, ,while/en, ,(/w,true/en,)/w,:/w, , , , , ,cv/en,2/m,./w,imshow/en,(/w,'/w,mouse/en,_,detection/en,'/w,,/w, ,frame/en,)/w, , , , , ,if/en, ,cv/en,2/m,./w,waitkey/en,(/w,30/m,)/w, ,&/w, ,0/m,xff/en, ,=/w,=/w, ,27/m,:/w, , , , , , , , , ,break/en, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w,运行/vn,结果/n,如下/v,：/w,一个/m,基于/p,行人/n,跟踪/v,的/u,例子/n,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,os/en,./w,path/en, ,as/en, ,path/en, ,import/en, ,argparse/en, ,font/en, ,=/w, ,cv/en,2/m,./w,font/en,_,hershey/en,_,simplex/en, ,parser/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,parser/en,./w,add/en,_,argument/en,(/w,"/w,-/w,a/en,"/w,,/w, ,"/w,--/nrf,algorithm/en,"/w,,/w, , , , , , , , , , , , , , , , , , , , , ,help/en,=/w,"/w,m/en, ,(/w,or/en, ,nothing/en,)/w, ,for/en, ,meanshift/en, ,and/en, ,c/en, ,for/en, ,camshift/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,parser/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,#, ,计算/v,矩阵/n,中心/n,(/w,行人/n,位置/n,)/w, ,def/en, ,center/en,(/w,points/en,)/w,:/w, , , , , ,x/en, ,=/w, ,(/w,points/en,[/w,0/m,]/w,[/w,0/m,]/w, ,+/w, ,points/en,[/w,1/m,]/w,[/w,0/m,]/w, ,+/w, ,points/en,[/w,2/m,]/w,[/w,0/m,]/w, ,+/w, ,points/en,[/w,3/m,]/w,[/w,0/m,]/w,)/w, ,//w, ,4/m, , , , , ,y/en, ,=/w, ,(/w,points/en,[/w,0/m,]/w,[/w,1/m,]/w, ,+/w, ,points/en,[/w,1/m,]/w,[/w,1/m,]/w, ,+/w, ,points/en,[/w,2/m,]/w,[/w,1/m,]/w, ,+/w, ,points/en,[/w,3/m,]/w,[/w,1/m,]/w,)/w, ,//w, ,4/m, , , , , ,#, ,print/en,(/w,np/en,./w,array/en,(/w,[/w,np/en,./w,float/en,32/m,(/w,x/en,)/w,,/w, ,np/en,./w,float/en,32/m,(/w,y/en,)/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w,)/w, , , , , ,#, ,[/w, ,588/m,./w, , , ,257.5/m,]/w, , , , , ,return/en, ,np/en,./w,array/en,(/w,[/w,np/en,./w,float/en,32/m,(/w,x/en,)/w,,/w, ,np/en,./w,float/en,32/m,(/w,y/en,)/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, ,#, ,行人/n, ,class/en, ,pedestrian/en,(/w,)/w,:/w, , , , , ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,id/en,,/w, ,frame/en,,/w, ,track/en,_,window/en,)/w,:/w, , , , , , , , , ,self/en,./w,id/en, ,=/w, ,int/en,(/w,id/en,)/w, , ,#, ,行人/n,id/en, , , , , , , , , ,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en, ,=/w, ,track/en,_,window/en, , ,#, ,跟踪/v,窗体/nw, , , , , , , , , ,self/en,./w,track/en,_,window/en, ,=/w, ,track/en,_,window/en, , , , , , , , , ,#, ,更换/v,颜色/n,空间/n, , , , , , , , , ,self/en,./w,roi/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,[/w,y/en,:/w,y/en, ,+/w, ,h/en,,/w, ,x/en,:/w,x/en, ,+/w, ,w/en,]/w,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, , , , , , , , , ,#, ,计算/v,roi/en,图形/n,的/u,彩色/b,直方图/n, , , , , , , , , ,roi/en,_,hist/en, ,=/w, ,cv/en,2/m,./w,calchist/en,(/w,[/w,self/en,./w,roi/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,none/en,,/w, ,[/w,16/m,]/w,,/w, ,[/w,0/m,,/w, ,180/m,]/w,)/w, , , , , , , , , ,self/en,./w,roi/en,_,hist/en, ,=/w, ,cv/en,2/m,./w,normalize/en,(/w,roi/en,_,hist/en,,/w, ,roi/en,_,hist/en,,/w, ,0/m,,/w, ,255/m,,/w, ,cv/en,2/m,./w,norm/en,_,minmax/en,)/w, , , , , , , , , ,#, ,设置/v,卡尔曼滤波器/nw, , , , , , , , , ,self/en,./w,kalman/en, ,=/w, ,cv/en,2/m,./w,kalmanfilter/en,(/w,4/m,,/w, ,2/m,)/w, , , , , , , , , ,self/en,./w,kalman/en,./w,measurementmatrix/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,]/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, , , , , , , , , ,self/en,./w,kalman/en,./w,transitionmatrix/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,1/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,,/w, ,np/en,./w,float/en,32/m,)/w, , , , , , , , , ,self/en,./w,kalman/en,./w,processnoisecov/en, ,=/w, ,np/en,./w,array/en,(/w,[/w,[/w,1/m,,/w, ,0/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,0/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,1/m,,/w, ,0/m,]/w,,/w, ,[/w,0/m,,/w, ,0/m,,/w, ,0/m,,/w, ,1/m,]/w,]/w,,/w, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , ,np/en,./w,float/en,32/m,)/w, ,*/w, ,0.03/m, , , , , , , , , ,#, ,测量/vn,坐标/n, , , , , , , , , ,self/en,./w,measurement/en, ,=/w, ,np/en,./w,array/en,(/w,(/w,2/m,,/w, ,1/m,)/w,,/w, ,np/en,./w,float/en,32/m,)/w, , , , , , , , , ,#, ,鼠标/n,运动/n,预测/v, , , , , , , , , ,self/en,./w,predication/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,2/m,,/w, ,1/m,)/w,,/w, ,np/en,./w,float/en,32/m,)/w, , , , , , , , , ,#, ,指定/v,停止/v,条件/n, , , , , , , , , ,self/en,./w,term/en,_,crit/en, ,=/w, ,(/w,cv/en,2/m,./w,term/en,_,criteria/en,_,eps/en, ,|/w, ,cv/en,2/m,./w,term/en,_,criteria/en,_,count/en,,/w, ,10/m,,/w, ,1/m,)/w, , , , , , , , , ,self/en,./w,center/en, ,=/w, ,none/en, , , , , , , , , ,self/en,./w,update/en,(/w,frame/en,)/w, , , , , ,def/en, ,_,_,del/en,_,_,(/w,self/en,)/w,:/w, , , , , , , , , ,print/en,(/w,'/w,pedestrian/en, ,%/w,d/en, ,destroyed/en,'/w, ,%/w, ,self/en,./w,id/en,)/w, , , , , ,#, ,更新/v,图像/n,帧/q, , , , , ,def/en, ,update/en,(/w,self/en,,/w, ,frame/en,)/w,:/w, , , , , , , , , ,#, ,更换/v,颜色/n,空间/n, , , , , , , , , ,hsv/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,frame/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, , , , , , , , , ,#, ,histogram/en, ,back/en, ,projection/en, ,calculation/en, ,直方图/n,反向/f,投影/vn, , , , , , , , , ,back/en,_,project/en, ,=/w, ,cv/en,2/m,./w,calcbackproject/en,(/w,[/w,hsv/en,]/w,,/w, ,[/w,0/m,]/w,,/w, ,self/en,./w,roi/en,_,hist/en,,/w, ,[/w,0/m,,/w, ,180/m,]/w,,/w, ,1/m,)/w, , , , , , , , , ,#, ,camshift/en, , , , , , , , , ,if/en, ,args/en,./w,get/en,(/w,'/w,algorithm/en,'/w,)/w, ,=/w,=/w, ,'/w,c/en,'/w,:/w, , , , , , , , , , , , , ,ret/en,,/w, ,self/en,./w,track/en,_,window/en, ,=/w, ,cv/en,2/m,./w,camshift/en,(/w,back/en,_,project/en,,/w, ,self/en,./w,track/en,_,window/en,,/w, ,self/en,./w,term/en,_,crit/en,)/w, , , , , , , , , , , , , ,#, ,绘制/v,跟踪/v,框/q, , , , , , , , , , , , , ,pts/en, ,=/w, ,cv/en,2/m,./w,boxpoints/en,(/w,ret/en,)/w, , , , , , , , , , , , , ,pts/en, ,=/w, ,np/en,./w,int/en,0/m,(/w,pts/en,)/w, , , , , , , , , , , , , ,self/en,./w,center/en, ,=/w, ,center/en,(/w,pts/en,)/w, , , , , , , , , , , , , ,cv/en,2/m,./w,polylines/en,(/w,frame/en,,/w, ,[/w,pts/en,]/w,,/w, ,true/en,,/w, ,255/m,,/w, ,1/m,)/w, , , , , , , , , ,#, ,均值/n,漂移/v, , , , , , , , , ,if/en, ,not/en, ,args/en,./w,get/en,(/w,'/w,algorithm/en,'/w,)/w, ,or/en, ,args/en,./w,get/en,(/w,'/w,algorithm/en,'/w,)/w, ,=/w,=/w, ,'/w,m/en,'/w,:/w, , , , , , , , , , , , , ,ret/en,,/w, ,self/en,./w,track/en,_,window/en, ,=/w, ,cv/en,2/m,./w,meanshift/en,(/w,back/en,_,project/en,,/w, ,self/en,./w,track/en,_,window/en,,/w, ,self/en,./w,term/en,_,crit/en,)/w, , , , , , , , , , , , , ,#, ,绘制/v,跟踪/v,框/q, , , , , , , , , , , , , ,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en, ,=/w, ,self/en,./w,track/en,_,window/en, , , , , , , , , , , , , ,self/en,./w,center/en, ,=/w, ,center/en,(/w,[/w,[/w,x/en,,/w, ,y/en,]/w,,/w, ,[/w,x/en, ,+/w, ,w/en,,/w, ,y/en,]/w,,/w, ,[/w,x/en,,/w, ,y/en, ,+/w, ,h/en,]/w,,/w, ,[/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,]/w,]/w,)/w, , , , , , , , , , , , , ,cv/en,2/m,./w,rectangle/en,(/w,frame/en,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,(/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,)/w,,/w, ,(/w,255/m,,/w, ,255/m,,/w, ,0/m,)/w,,/w, ,2/m,)/w, , , , , , , , , ,self/en,./w,kalman/en,./w,correct/en,(/w,self/en,./w,center/en,)/w, , , , , , , , , ,predic