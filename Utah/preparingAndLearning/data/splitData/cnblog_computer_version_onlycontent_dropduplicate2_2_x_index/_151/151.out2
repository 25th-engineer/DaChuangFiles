『/w,教程/n,』/w,batch/en, ,normalization/en, ,层/q,介绍/v,知乎/nw,：/w,详解/v,深度/n,学习/v,中/f,的/u,normalization/en,，/w,bn/en,//w,ln/en,//w,wn/en,一/m,、/w,两个/m,概念/n,独立/v,同/p,分布/v,（/w,independent/en, ,and/en, ,identically/en, ,distributed/en,）/w,独立/v,同/p,分布/v,的/u,数据/n,可以/v,简化/v,常规/n,机器/n,学习/v,模型/n,的/u,训练/vn,、/w,提升/v,机器/n,学习/v,模型/n,的/u,预测/v,能力/n,白化/nr,（/w,whitening/en,）/w,去除/v,特征/n,之间/f,的/u,相关性/n, ,—/w,>, ,独立/v,；/w,使得/v,所有/b,特征/n,具有/v,相同/a,的/u,均值/n,和/c,方差/nr, ,—/w,>, ,同/p,分布/v,。/w,二/m,、/w,问题/n,1/m,、/w,抽象/a,程度/n,高/a,的/u,层/q,难以/d,训练/vn,深度/n,神经/n,网络/n,涉及/v,到/v,很多/m,层/q,的/u,叠加/vn,，/w,而/c,每/r,一层/mq,的/u,参数/n,更新/v,会/v,导致/v,上层/f,的/u,输入/v,数据/n,分布/v,发生/v,变化/vn,，/w,通过/p,层层/q,叠加/vn,，/w,高层/n,（/w,抽象/a,程度/n,高/a,）/w,的/u,输入/v,分布/v,变化/vn,会/v,非常/d,剧烈/a,，/w,这/r,就/d,使得/v,高层/n,需要/v,不断/d,去/v,重新/d,适应/v,底层/n,的/u,数据/n,更新/v,google/en, ,将/d,这/r,一/m,现象/n,总结/v,为/p, ,internal/en, ,covariate/en, ,shif/en,：/w,统计/v,机器/n,学习/v,中/f,的/u,一个/m,经典/n,假设/v,是/v,“/w,源/ng,空间/n,（/w,source/en, ,domain/en,）/w,和/c,目标/n,空间/n,（/w,target/en, ,domain/en,）/w,的/u,数据/n,分布/v,（/w,distribution/en,）/w,是/v,一致/a,的/u,”/w,。/w,如果/c,不/d,一致/a,，/w,那么/r,就/d,出现/v,了/u,新/a,的/u,机器/n,学习/v,问题/n,，/w,如/v, ,transfer/en, ,learning/en, ,//w, ,domain/en, ,adaptation/en, ,等/u,。/w,而/c, ,covariate/en, ,shift/en, ,就/d,是/v,分布/v,不/d,一致/a,假设/v,之下/f,的/u,一个/m,分支/n,问题/n,，/w,它/r,是/v,指源/nw,空间/n,和/c,目标/n,空间/n,的/u,条件/n,概率/n,是/v,一致/a,的/u,，/w,但是/c,其/r,边缘/n,概率/n,不同/a,，/w,即/v,：/w,对/p,所有/b,,/w,但是/c,大家/r,细/a,想/v,便/d,会/v,发现/v,，/w,的确/d,，/w,对于/p,神经/n,网络/n,的/u,各/r,层/q,输出/v,，/w,由于/c,它们/r,经过/p,了/u,层/q,内/f,操作/v,作用/n,，/w,各/r,层/q,的/u,输入/v,信号/n,的/u,分布/v,显然/ad,不同/a,，/w,而且/c,差异/n,会/v,随着/p,网络/n,深度/n,增大/v,而/c,增大/v,，/w,可是/c,它们/r,所/u,能/v,“/w,指示/n,”/w,的/u,样本/n,标记/n,（/w,label/en,）/w,仍然/d,是/v,不/d,变/v,的/u,，/w,这/r,便/d,符合/v,了/u,covariate/en, ,shift/en,的/u,定义/n,。/w,由于/c,是/v,对/p,层/q,间/f,信号/n,的/u,分析/vn,，/w,也/d,即/v,是/v,“/w,internal/en,”/w,的/u,来由/n,。/w,问题/n,描述/v,简而言之/l,，/w,每个/r,神经元/n,的/u,输入/v,数据/n,不再/d,是/v,“/w,独立/v,同/p,分布/v,”/w,。/w,其一/r,，/w,上层/f,参数/n,需要/v,不断/d,适应/v,新/a,的/u,输入/v,数据/n,分布/v,，/w,降低/v,学习/v,速度/n,。/w,其二/r,，/w,下层/f,输入/v,的/u,变化/vn,可能/v,趋向/v,于/p,变/v,大/a,或者/c,变/v,小/a,，/w,导致/v,上层/f,落入/v,饱和区/ns,，/w,使得/v,学习/v,过早/d,停止/v,。/w,其三/r,，/w,每/r,层/q,的/u,更新/v,都/d,会/v,影响/vn,到/v,其它/r,层/q,，/w,因此/c,每/r,层/q,的/u,参数/n,更新/v,策略/n,需要/v,尽可能/d,的/u,谨慎/a,。/w,2/m,、/w,问题/n,挑战/vn,我们/r,以/p,神经/n,网络/n,中/f,的/u,一个/m,普通/a,神经元/n,为/p,例/n,。/w,神经元/n,接收/v,一组/mq,输入/v,向量/n,通过/p,某种/r,运算/vn,后/f,，/w,输出/v,一个/m,标量/n,值/n,：/w,由于/c, ,ics/en, ,问题/n,的/u,存在/v,，/w, ,对于/p,某/r,一/m,特定/b,层/q,，/w,不同/a,批次/n,的/u,输入/v, ,的/u,分布/v,可能/v,相差/v,很/d,大/a,。/w,要/v,解决/v,独立/v,同/p,分布/v,的/u,问题/n,，/w,“/w,理论/n,正确/a,”/w,的/u,方法/n,就/d,是/v,对/p,每/r,一层/mq,的/u,数据/n,都/d,进行/v,白化/nr,操作/v,。/w,然而/c,标准/n,的/u,白化/nr,操作/v,代价/n,高昂/a,，/w,特别/d,是/v,我们/r,还/d,希望/v,白化/nr,操作/v,是/v,可微/nw,的/u,，/w,保证/v,白化/nr,操作/v,可以/v,通过/p,反向/f,传播/vn,来/v,更新/v,梯度/n,。/w,三/m,、/w,解决/v,思路/n,：/w,bn/en,1/m,、/w,通用/vn,框架/n,在/p,将/d, ,送给/v,神经元/n,之前/f,，/w,先/d,对/p,其/r,做/v,平移/vn,和/c,伸缩/v,变换/v,，/w, ,将/d, ,的/u,分布/v,规范化/vn,成/v,在/p,固定/a,区间/n,范围/n,的/u,标准/n,分布/v,。/w,通用/vn,变换/v,框架/n,就/d,如下/v,所/u,示/vg,：/w,（/w,1/m,）/w, ,是/v,平移/vn,参数/n,（/w,shift/en, ,parameter/en,）/w,，/w, ,是/v,缩放/v,参数/n,（/w,scale/en, ,parameter/en,）/w,。/w,通过/p,这/r,两个/m,参数/n,进行/v, ,shift/en, ,和/c, ,scale/en, ,变换/v,：/w,得到/v,的/u,数据/n,符合/v,均值/n,为/p, ,0/m,、/w,方差/nr,为/p, ,1/m, ,的/u,标准/n,分布/v,。/w,（/w,2/m,）/w, ,是/v,再/d,平移/vn,参数/n,（/w,re/en,-/w,shift/en, ,parameter/en,）/w,，/w, ,是/v,再/d,缩放/v,参数/n,（/w,re/en,-/w,scale/en, ,parameter/en,）/w,。/w,将/d, ,上/f,一步/mq,得到/v,的/u, ,进一步/d,变换/v,为/p,：/w,最终/d,得到/v,的/u,数据/n,符合/v,均值/n,为/p, ,、/w,方差/nr,为/p, ,的/u,分布/v,。/w,2/m,、/w,第二/m,次/q,变换/v,的/u,目的/n,1/m,、/w,目的/n,一/m,第一/m,次/q,变换/v,得到/v,均值/n,为/p, ,0/m,、/w,方差/nr,为/p, ,1/m, ,的/u,标准/n,分布/v,，/w,表达/v,能力/n,有限/a,，/w,下层/f,神经元/n,可能/v,很/d,努力/ad,地/u,在/p,学习/v,，/w,但/c,不论/c,其/r,如何/r,变化/vn,，/w,其/r,输出/v,的/u,结果/n,在/p,交给/v,上层/f,神经元/n,进行/v,处理/v,之前/f,，/w,将/d,被/p,粗暴/ad,地/u,重新/d,调整/vn,到/v,这/r,一/m,固定/a,范围/n,。/w,为了/p,更/d,好/a,的/u,应用/vn,底层/n,神经/n,网络/n,的/u,学习/v,结果/n,，/w,我们/r,将/d,规范化/vn,后/f,的/u,数据/n,进行/v,再/d,平移/vn,和/c,再/d,缩放/v,，/w,使得/v,每个/r,神经元/n,对应/v,的/u,输入/v,范围/n,是/v,针对/p,该/r,神经元量/nw,身/ng,定制/v,的/u,一个/m,确定/v,范围/n,（/w,均值/n,为/p, ,、/w,方差/nr,为/p, ,）/w,。/w,rescale/en, ,和/c, ,reshift/en, ,的/u,参数/n,都/d,是/v,可/v,学习/v,的/u,，/w,这/r,就/d,使得/v, ,normalization/en, ,层/q,可以/v,学习/v,如何/r,去/v,适应/v,底层/n,的/u,学习/v,结果/n,。/w,2/m,、/w,目的/n,二除/nw,了/u,充分/ad,利用/v,底层/n,学习/v,的/u,能力/n,，/w,另一方面/c,的/u,重要/a,意义/n,在于/v,保证/v,获得/v,非线性/b,的/u,表达/v,能力/n,。/w,sigmoid/en, ,等/u,激活/vn,函数/n,在/p,神经/n,网络/n,中/f,有着/v,重要/a,作用/n,，/w,通过/p,区分/v,饱和区/ns,和/c,非饱和区/ns,，/w,使得/v,神经/n,网络/n,的/u,数据/n,变换/v,具有/v,了/u,非线性/b,计算/v,能力/n,。/w,而/c,第一/m,步/q,的/u,规范化/vn,会/v,将/d,几乎/d,所有/b,数据/n,映射/v,到/v,激活/vn,函数/n,的/u,非饱和区/ns,（/w,线性/n,区/n,）/w,，/w,仅/d,利用/v,到/v,了/u,线性/n,变化/vn,能力/n,，/w,从而/c,降低/v,了/u,神经/n,网络/n,的/u,表达/v,能力/n,。/w,而/c,进行/v,再/d,变换/v,，/w,则/d,可以/v,将/d,数据/n,从/p,线性/n,区/n,变换/v,到/v,非线性区/ns,，/w,恢复/v,模型/n,的/u,表达/v,能力/n,。/w,3/m,、/w,优势/n,不/d,添加/vn,正则化/nw,，/w, ,的/u,均值/n,取决于/v,下层/f,神经/n,网络/n,的/u,复杂/a,关联/vn,；/w,添加/vn,本层/nw,后/f,，/w,取值/v, ,仅/d,由/p, ,来/v,确定/v,，/w,去除/v,了/u,与/p,下层/f,计算/v,的/u,密切/ad,耦合/vn,。/w,新/a,参数/n,很/d,容易/a,通过/p,梯度/n,下降/v,来/v,学习/v,，/w,简化/v,了/u,神经/n,网络/n,的/u,训练/vn,。/w,4/m,、/w,问题/n,a/en,）/w,bn/en,的/u,实际/n,作用/n,标准/n,白化/nr,操作/v,的/u,目的/n,是/v,“/w,独立/v,同/p,分布/v,”/w,。/w,独立/v,就/d,不/d,说/v,了/u,，/w,暂/d,不/d,考虑/v,。/w,变换/v,为/p,均值/n,为/p, ,、/w,方差/nr,为/p, ,的/u,分布/v,，/w,也/d,并/c,不/d,是/v,严格/ad,的/u,同/p,分布/v,，/w,只是/d,映射/v,到/v,了/u,一个/m,确定/v,的/u,区间/n,范围/n,而已/y,（/w,所以/c,，/w,这个/r,问题/n,仍然/d,有/v,研究/vn,空间/n,）/w,。/w,另外/c,有人/r,提出/v,：/w,bn/en,其/r,优势/n,并非/v,解决/v,了/u,独立/v,同/p,分布/v,的/u,问题/n,（/w,实际上/d,它/r,也/d,没/d,解决/v,）/w,，/w,其/r,最/d,大/a,意义/n,在于/v,解决/v,了/u,梯度/n,弥散/v,问题/n,，/w,见/v,论文/n,：/w,how/en, ,does/en, ,batch/en, ,normalization/en, ,help/en, ,optimization/en,?/w,（/w,知乎/nw,上/f,的/u,一篇/mq,阅读/v,笔记/n,：/w,为什么/r,batch/en, ,normalization/en,那么/r,有用/a,？/w,)/w,。/w,文章/n,结论/n,如下/v,：/w,没有/v,证据/n,表明/v,bn/en,的/u,work/en,，/w,是/v,因为/c,减少/v,了/u,ics/en,（/w,interval/en, ,covariate/en, ,shift/en,）/w,。/w,bn/en, ,work/en,的/u,根本/a,原因/n,，/w,是/v,因为/c,在/p,网络/n,的/u,训练/vn,阶段/n,，/w,其/r,能够/v,让/v,优化/v,空间/n,（/w,optimization/en, ,landscape/en,）/w,变/v,的/u,平滑/an,。/w,其他/r,的/u,normalization/en,技术/n,也/d,能够/v,像/v,bn/en,那样/r,对于/p,网络/n,的/u,训练/vn,起/v,到/v,作用/n,。/w,其/r,作用/n,为/p,防止/v,梯度/n,爆炸/v,或/c,弥散/v,、/w,可以/v,提高/v,训练/vn,时/ng,模型/n,对于/p,不同/a,超参/nw,（/w,学习率/nw,、/w,初始化/v,）/w,的/u,鲁棒性/nz,、/w,可以/v,让/v,大部分/m,的/u,激活/vn,函数/n,能够/v,远离/v,其/r,饱和/vn,区域/n,。/w,b/en,)/w, ,bn/en,对/p,小/a,批次/n,训练/vn,效果/n,不好/a,当/p,单个/b,小/a,批次/n,(/w,minibatch/en,)/w,的/u,数据/n,不/d,能/v,代表/n,整个/b,数据/n,的/u,分布/v,时/ng,，/w,bn/en,的/u,表现/v,就/d,会/v,不/d,尽如人意/i,，/w,这/r,意味/n,着/u,忘记/v,将/d,输入/v,随机/d,打乱/v,顺序/n,的/u,情况/n,下/f,使用/v,批归/nw,一化/nw,是/v,很/d,危险/an,的/u,，/w,实际上/d,batch/en,过/u,小/a,的/u,时候/n,就/d,不/d,太/d,适合/v,开放/v,bn/en,的/u,可/v,训练性/nw,。/w,具体/a,讨论/v,见/v,论文/n,：/w,batch/en, ,normalization/en,:/w, ,accelerating/en, ,deep/en, ,network/en, ,training/en, ,by/en, ,reducing/en,。/w,bn/en,训练/vn,时/ng,为什么/r,不/d,使用/v,全局/n,均值/n,//w,方差/nr,？/w,使用/v, ,bn/en, ,的/u,目的/n,就是/d,为了/p,保证/v,每/r,批/q,数据/n,的/u,分布/v,稳定/a,，/w,使用/v,全局/n,统计量/nw,反而/d,违背/v,了/u,这个/r,初衷/n,；/w,bn/en, ,的/u,作者/n,认为/v,在/p,训练/vn,时/ng,采用/v,移动/vn,平均/a,可能/v,会/v,与/p,梯度/n,优化/v,存在/v,冲突/vn,四/m,、/w,主流/n, ,normalization/en, ,方法/n,梳理/v,batchnorm/en,：/w,batch/en,方向/n,做/v,归/v,一化/nw,，/w,算/v,n/en,*/w,h/en,*/w,w/en,的/u,均值/n,layernorm/en,：/w,channel/en,方向/n,做/v,归/v,一化/nw,，/w,算/v,c/en,*/w,h/en,*/w,w/en,的/u,均值/n,instancenorm/en,：/w,一个/m,channel/en,内/f,做/v,归/v,一化/nw,，/w,算/v,h/en,*/w,w/en,的/u,均值/n,groupnorm/en,：/w,将/d,channel/en,方向/n,分/q,group/en,，/w,然后/c,每个/r,group/en,内/f,做/v,归/v,一化/nw,，/w,算/v,(/w,c/en,//w,//w,g/en,)/w,*/w,h/en,*/w,w/en,的/u,均值/n,https/en,:/w,//w,//w,zhuanlan/en,./w,zhihu/en,./w,com/en,//w,p/en,//w,696598441/m,、/w,batch/en, ,normalization/en,『/w,tensorflow/en,』/w,批/q,处理/v,类/q,『/w,教程/n,』/w,batch/en, ,normalization/en, ,层/q,介绍/v,于/p,2015年/t,由/p, ,google/en, ,提出/v,，/w,bn/en, ,独立/v,地/u,规范化/vn,每/r,一个/m,层/q,不同/a,批次/n,的/u, ,，/w,但/c,规范化/vn,的/u,参数/n,是/v,一个/m, ,mini/en,-/w,batch/en, ,的/u,一/m,阶统/nw,计量/vn,和/c,二阶统计量/nw,。/w,这/r,就/d,要求/v, ,每/r,一个/m, ,mini/en,-/w,batch/en, ,的/u,统计量/nw,是/v,整体/n,统计量/nw,的/u,近似/a,估计/v,，/w,或者说/nw,每/r,一个/m, ,mini/en,-/w,batch/en, ,彼此/r,之间/f,，/w,以及/c,和/c,整体/n,数据/n,，/w,都/d,应该/v,是/v,近似/a,同/p,分布/v,的/u,。/w,分布/v,差距/n,较/d,小/a,的/u, ,mini/en,-/w,batch/en, ,可以/v,看做/v,是/v,为/p,规范化/vn,操作/v,和/c,模型/n,训练/vn,引入/v,了/u,噪声/n,，/w,可以/v,增加/v,模型/n,的/u,鲁棒性/nz,；/w,但/c,如果/c,每个/r, ,mini/en,-/