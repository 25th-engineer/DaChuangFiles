1/m,）/w,验证码/nw,的/u,基本/a,知识/n,及/c,来/v,由/p,网络/n,安全/an,技术/n,中/f,的/u,验证码/nw,的/u,主要/b,目的/n,是/v,强制/vn,人机/n,交互/v,来/v,抵御/v,机器/n,自动化/vn,攻击/vn,。/w,用/p,来/v,防止/v,机器/n,模拟/b,http/en,行为/n,，/w,直接/ad,抓/v,取/v,文本/n,进行/v,导航/vn,；/w,或/c,直接/ad,提交/v,文本/n,进行/v,登录/vn,尝试/vn,。/w,在/p,现在/t,带宽/n,较/d,大/a,的/u,今天/t,，/w,在线/vn,密码/n,穷举/v,带宽/n,已经/d,不能/v,作为/v,瓶颈/n,了/u,，/w,验证码/nw,识别/v,以/p,2/m,m/en, ,adsl/en,连接/v,实际/n,测试/vn,，/w,20/m,线程/n,大概/d,每秒/d,可以/v,完成/v,30个/m,左右/m,的/u,连接/v,，/w,如果/c,是/v,6位/mq,数字/n,密码/n,，/w,在/p,不/d,考虑/v,字典/n,完全/ad,穷举/v,的/u,时候/n,也/d,只/d,需要/v,几/m,个/q,小时/n,便/d,可/v,破解/v,，/w,严重/a,的/u,威胁/vn,了/u,网络/n,账号/n,的/u,安全/an,，/w,因此/c,，/w,网络/n,登录/vn,注册/v,验证码/nw,的/u,普及/v,势在必行/i,。/w,而/c,如今/t,国内/s,大部分/m,的/u,验证/vn,码设计者/nw,并/c,不得要领/i,，/w,要么/c,不/d,了解/v,图像/n,处理/v,、/w,机器/n,视觉/n,、/w,模式/n,识别/v,、/w,人工智能/n,的/u,基本/a,概念/n,；/w,要么/c,设计/vn,出/v,的/u,验证码/nw,连/u,人/n,都/d,难以/d,识别/v,，/w,导致/v,用户/n, ,体验/vn,度/q,下降/v,。/w, ,比如/v,工商/n,银行/n,的/u,wap/en,手机/n,银行/n,验证码/nw,，/w,只有/c,4位/mq,，/w,而且/c,验证码/nw,的/u,薄弱/a,形同虚设/l,，/w,使用/v,穷举/v,计算机/n,很快/d,就/d,能/v,破解/v,一个/m,六位/mq,数字/n,密码/n,的/u,账户/n,。/w,当然/d,，/w,也/d,有/v,设计/vn,得/u,比较/d,好/a, ,的/u,，/w,比如/v,yahoo/en,、/w,google/en,、/w,baidu/en,等/u,。/w,2/m,）/w,验证码/nw,的/u,展望/v,未来/t,的/u,网络/n,安全/an,验证码/nw,，/w,可能/v,更/d,多/a,地/u,使用/v,渐进/v,色层/nw,、/w,同级/vn,灰度/n,色差/n,，/w,更/d,多/a,曲线/n,反/v,转/v,、/w,随机/d,字符/n,数量/n,、/w,字符/n,粘连/v,等/u,手段/n,防止/v,机器/n,的/u,识别/v,，/w,但/c,加密/vn,与/p,破解/v,总是/d,一对/m,孪生/b,兄弟/n,，/w,不/d,可能/v,消失/v,一方/mq,的/u,。/w,我们/r,只是/d,希望/v,通过/p,本文/r,，/w,给/p,编写/v,验证/vn,码算法/nw,的/u,人员/n,一些/m,建议/n,，/w,使/v,我们/r,的/u,网络/n,更/d,安全/an,，/w,操作/v,也/d,不/d,会/v,因/p,此/r,而/c,繁琐/a,。/w,算法/n,分析/vn,在/p,验证码/nw,处理/v,方面/n,，/w,我们/r,大概/d,要/v,涉及/v,到/v,如下/v,内容/n,：/w,人工智能/n,、/w,模式/n,识别/v,、/w,机器/n,视觉/n,、/w,图像/n,处理/v,。/w,1/m,）/w, ,主要/b,流程/n,：/w,如果/c,我们/r,要/v,从/p,一幅/mq,图片/n,中/f,识别/v,出/v,验证码/nw,；/w,又/d,或者/c,我们/r,要/v,从/p,一幅/mq,图片/n,中/f,检测/vn,并/c,识别/v,出/v,一/m,个字符/n,，/w,其/r,步骤/n,可/v,概括/v,如下/v,：/w,图像/n,采集/v,：/w,取得/v,一个/m,验证码/nw,，/w,就/d,直接/ad,通过/p,http/en,抓/v,html/en,，/w,然后/c,分析/vn,出/v,图片/n,的/u,url/en,，/w,下载/v,保存/v,。/w,预/d,处理/v,：/w,检测/vn,是/v,正确/a,的/u,图像/n,格式/n,，/w,转换/v,到/v,合适/a,的/u,格式/n,，/w,压缩/v,，/w,剪切/vn,出/v,roi/en,，/w,去除/v,噪音/n,，/w,灰度化/nw,，/w,转换/v,色彩/n,空间/n,。/w,检测/vn,：/w,找/v,出/v,文字/n,所在/n,的/u,主要/b,区域/n,。/w,前/f,处理/v,：/w,文字/n,的/u,切割/v,、/w,缩放/v,和/c,扭曲/v,校正/v,。/w,训练/vn,：/w,通过/p,各种/r,模式/n,识别/v,，/w,机器/n,学习/v,算法/n,，/w,来/v,挑选/v,和/c,训练/vn,合适/a,数量/n,的/u,训练/vn,集/vg,。/w,训练/vn,的/u,样本/n,并非/v,越/d,多/a,越/d,好/a,。/w,通过/p,学习/v,，/w,泛化/nw,能力/n,差/a,的/u,问题/n,可能/v,会/v,出现/v,在/p,这里/r,。/w,识别/v,：/w,输入/v,待/v,识别/v,的/u,处理/v,后/f,的/u,图片/n,，/w,转换/v,成/v,分类器/nw,需要/v,的/u,输入/v,格式/n,，/w,通过/p,输出/v,的/u,类/q,和/c,置信/v,度/q,，/w,来/v,判断/v,大概/d,可能/v,是/v,哪个/r,字母/n,。/w,识别/v,本质/n,上/f,就/d,是/v,分类/vn,。/w,2/m,）/w,关键/n,概念/n,图像/n,处理/v,：/w,一般/a,指/v,针对/p,数字/n,图像/n,的/u,某种/r,数学/n,处理/v,，/w,比如/v,投影/vn,、/w,钝化/vn,、/w,锐化/nr,、/w,细化/v,、/w,边缘/n,检测/vn,、/w,二值化/nw,、/w,压缩/v,，/w,以及/c,各种/r,数据/n,变换/v,等等/u,。/w,二值化/nw,：/w,一般/a,图片/n,都/d,是/v,彩色/b,的/u,，/w,按照/p,逼真/a,程度/n,，/w,可能/v,很多/m,级别/n,。/w,为了/p,降低/v,计算/v,复杂/a,度/q,，/w,方便/a,后续/vn,的/u,处理/v,，/w,如果/c,在/p,不/d,损失/n,关键/n,信息/n,的/u,情况/n,下/f,，/w,能/v,将/d,图片/n,处理/v,成/v,黑/a,白/a,两种/mq,颜色/n,，/w,那/r,就/d,最好/d,不过/c,了/u,。/w,细化/v,：/w,找/v,出/v,图像/n,的/u,骨架/n,，/w,图像/n,线条/n,可能/v,是/v,很/d,宽/a,的/u,，/w,通过/p,细化/v,将/d,宽度/n,降/v,为/p,1/m,，/w,某些/r,地方/n,可能/v,大于/v,1/m,。/w,不同/a,的/u,细化/v,算法/n,，/w,可能/v,有/v,不同/a,的/u,差异/n,，/w,比如/v,是否/v,更/d,靠近/v,线条/n,中间/f,，/w,比如/v,是否/v,保持/v,联/vg,通行/v,等/u,。/w,边缘/n,检测/vn,：/w,主要/b,是/v,理解/v,边缘/n,的/u,概念/n,。/w,边缘/n,实际上/d,是/v,图像/n,中/f,图像/n,像素/n,属性/n,变化/vn,剧烈/a,的/u,地方/n,，/w,可以/v,通过/p,一个/m,固定/a,的/u,门限/nw,值/n,来/v,判断/v,，/w,也/d,可以/v,是/v,自/p,适应/v,的/u,。/w,门限/nw,可以/v,是/v,图像/n,全/a, ,局/n,的/u,，/w,也/d,可以/v,是/v,局部/n,的/u,。/w,不能/v,说/v,哪个/r,就/d,一定/d,好/a,，/w,不过/c,大部分/m,时候/n,，/w,自/p,适应/v,的/u,局部/n,的/u,门限/nw,可能/v,要/v,好/a,点/q,。/w,被/p,分析/vn,的/u,可能/v,是/v,颜色/n,，/w,也/d,可能/v,是/v,灰度/n,图像/n,的/u,灰度/n,。/w,机器/n,视觉/n,：/w,利用/v,计算机/n,来/v,模式/n,实现/v,人/n,的/u,视觉/n,，/w,比如/v,物体/n,检测/vn,、/w,定位/vn,、/w,识别/v,。/w,按照/p,对/p,图像/n,理解/v,的/u,层次/n,的/u,差别/n,，/w,分/q,高阶/nz,和/c,低阶/nw,的/u,理解/v,。/w,模式/n,识别/v,：/w,对/p,事物/n,或者/c,现象/n,的/u,某种/r,表示/v,方式/n,（/w,数值/n,、/w,文字/n,，/w,我们/r,这里/r,主要/b,想/v,说/v,的/u,是/v,数值/n,）/w,，/w,通过/p,一些/m,处理/v,和/c,分析/vn,来/v,描述/v,、/w,归类/vn,、/w,理解/v,、/w,解释/v,这些/r,事物/n,、/w,现象/n,及其/c,某种/r,抽象/a,。/w,人工智能/n,：/w,这种/r,概念/n,比较/d,宽/a,，/w,上面/f,这些/r,都/d,属于/v,人工智能/n,这个/r,大/a,的/u,方向/n,。/w,简单点/nw,不要/d,过分学院派/nw,的/u,理解/v,就/d,是/v,，/w,把/p,人类/n,的/u,很/d,“/w,智能/n,”/w,的/u,东西/n,给/p,模拟/b,出来/v,，/w,协助/v,生物/n,的/u,人/n,来/v,处理/v,问题/n,，/w,特别/d,是/v,在/p,计算机/n,里面/f,。/w,验证码/nw,识别/v,原理/n,及/c,代码/n,演示/vn,本来/d,拿/v,一个/m,银行/n,网站/n,来/v,进行/v,验证码/nw,解密/v,是/v,很/d,危险/an,的/u,，/w,但/c,我们/r,发现/v,，/w,工行/j,的/u,算法/n,已经/d,进行/v,了/u,改变/v,，/w,所以/c,姑且/d,以/p,之前/f,的/u,工行/j,wap/en,银行/n,做/v,个/q,举例/v,好/a,了/u,，/w,同时/c,也/d,希望/v,工行/j,的/u,加密/vn,能/v,越/d,做/v,越/d,好/a,。/w,其实/d,工行/j,的/u,wap/en,验证码/nw,是/v,很/d,简单/a,的/u,，/w,是/v,未/d,加/v,干扰/v,的/u,原始/a,字符/n,打印/v,图片/n,而已/y,。/w,针对/p,这种/r,验证码/nw,，/w,我们/r,将/d,使用/v,点/q,阵库/nw,校验/v,的/u,方式/n,进行/v,，/w,首先/d,从/p,整个/b,程序/n,的/u,编写/v,及/c,操作/v,顺序/n,开始/v,。/w,首先/d,要/v,知道/v,我们/r,需要/v,取得/v,的/u,字/n,的/u,点阵/n,有/v,哪些/r,。/w,工行/j,的/u,wap/en,银行/n,验证码/nw,只/d,有/v,0/m,~/w,9/m,，/w,10个/m,数字/n,，/w,那么/r,我们/r,先/d,将/d,验证码/nw,图片/n,下载/v,到/v,本机/nz,，/w,这里/r,我们/r,必须/d,将/d,所有/b,字符/n,的/u,图样/n,都/d,下载/v,到/v,本机/nz,，/w,以便/d,建立/v,基础/n,点/q,阵库/nw,。/w,得到/v,这些/r,图片/n,文件/n,后/f,，/w,我们/r,将/d,用/p,程序/n,来/v,获得/v,图片/n,点阵/n,。/w,从/p,本地/r,磁盘/n,加载/v,一个/m,图像/n,文件/n,，/w,这个/r,文件/n,是/v,我们/r,已经/d,下载/v,好/a,的/u,。/w,首先/d,应该/v,让/v,程序/n,先/d,将/d,0/m,~/w,9/m,的/u,图像/n,都/d,“/w,识别/v,”/w, ,一遍/mq,，/w,使/v,我们/r,的/u,程序/n,“/w,记住/v,”/w,它们/r,的/u,点阵/n,，/w,样/q,例如/v,所示/nz,。/w,该/r,图像/n,包含/v,的/u,验证码/nw,，/w,从/p,左/f,到/v,右/f,就/d,是/v,0123/m,，/w,将/d,这个/r,图像/n,逐点/nw,转换/v,灰度/n,，/w,也/d,就是/d,将/d,彩色/b,图片/n,先/d,进行/v,灰/ag, ,度/q,化/v,、/w,去色/nw,，/w,变成/v,黑白/b,照片/n,，/w,便于/v,下/f,一步/mq,操作/v,。/w,{/w,for/en, ,(/w,int/en, ,i/en, ,=/w, ,0/m,;/w, ,i/en, ,</w, ,bmpobj/en,./w,height/en,;/w, ,i/en,+/w,+/w,)/w,//w,//w,遍历/nw,高度/d,{/w,for/en, ,(/w,int/en, ,j/en, ,=/w, ,0/m,;/w, ,j/en, ,</w, ,bmpobj/en,./w,width/en,;/w, ,j/en,+/w,+/w,)/w,//w,//w,遍历/nw,宽度/n,，/w,双层/b,for/en,就/d,循环/vn,了/u,整个/b,图片/n,的/u,像素/n,点/q,{/w,int/en, ,tmpvalue/en, ,=/w, ,getgraynumcolor/en,(/w,bmpobj/en,./w,getpixel/en,(/w,j/en,,/w, ,i/en,)/w,)/w,;/w,bmpobj/en,./w,setpixel/en,(/w,j/en,,/w, ,i/en,,/w, ,color/en,./w,fromargb/en,(/w,tmpvalue/en,,/w, ,tmpvalue/en,,/w, ,tmpvalue/en,)/w,)/w,;/w,}/w,}/w,}/w,灰度化/nw,之后/f,，/w,像素/n,的/u,rgb/en,三色/mq,都/d,是/v,相同/a,的/u,值/n,了/u,，/w,亮度/n,从/p,0/m,~/w,255/m,（/w,hxff/en,）/w,。/w,但/c,用于/v,识别/v,程序/n,，/w,灰度/n,值/n,并/c,不能/v,很/d,好/a,的/u,区分/v,背景/n,色/ng,和/c,前景色/nz,，/w,尤其/d,是/v,对于/p,渐进/v,的/u, ,背景/n,来说/u,，/w,所以/c,我们/r,还要/v,将/d,图像/n,进一步/d,处理/v,，/w,就是/d,将/d,灰度/n,图片/n,2/m,值化/nw,，/w,类似/v,的/u,算法/n,还有/v,分水岭算法/nw,等/u,。/w,因为/c,本文/r,中/f,的/u,验证码/nw,相对/d,简单/a,，/w,故/c,直接/ad,使用/v,2/m,值化/nw,转换/v,，/w,寻找/v, ,有效/a,区/n,并/c,转为/v,单色/b,黑白/b,图/n,。/w,{/w,int/en, ,dggrayvalue/en, ,=/w, ,128/m, ,//w,//w,灰度/n,背景/n,分界/v,值/n,int/en, ,charscount/en, ,=/w, ,4/m, ,//w,//w,有效/a,字符/n,数/m,，/w,已知/nz,int/en, ,posx/en,1/m, ,=/w, ,bmpobj/en,./w,width/en,;/w, ,int/en, ,posy/en,1/m, ,=/w, ,bmpobj/en,./w,height/en,;/w,int/en, ,posx/en,2/m, ,=/w, ,0/m,;/w, ,int/en, ,posy/en,2/m, ,=/w, ,0/m,;/w,for/en, ,(/w,int/en, ,i/en, ,=/w, ,0/m,;/w, ,i/en, ,</w, ,bmpobj/en,./w,height/en,;/w, ,i/en,+/w,+/w,)/w,//w,//w,找/v,有效/a,区/n,{/w,for/en, ,(/w,int/en, ,j/en, ,=/w, ,0/m,;/w, ,j/en, ,</w, ,bmpobj/en,./w,width/en,;/w, ,j/en,+/w,+/w,)/w,{/w,int/en, ,pixelvalue/en, ,=/w, ,bmpobj/en,./w,getpixel/en,(/w,j/en,,/w, ,i/en,)/w,./w,r/en,;/w,//w,//w,取得/v,红色/n,值/n,r/en,，/w,因为/c,转/v,成/v,黑白/b,图/n,后/f,，/w,红/a,、/w,黄/a,、/w,蓝/a,三位/mq,都/d,是/v,一样/u,的/u,值/n,，/w,所以/c,这里/r,取/v,什么/r,色值/nw,都/d,是/v,一样/u,的/u,if/en, ,(/w,pixelvalue/en, ,</w, ,dggrayvalue/en,)/w, ,//w,//w,根据/p,灰度/n,值/n,{/w,if/en, ,(/w,posx/en,1/m, ,>, ,j/en,)/w, ,posx/en,1/m, ,=/w, ,j/en,;/w,if/en, ,(/w,posy/en,1/m, ,>, ,i/en,)/w, ,posy/en,1/m, ,=/w, ,i/en,;/w,if/en, ,(/w,posx/en,2/m, ,</w, ,j/en,)/w, ,posx/en,2/m, ,=/w, ,j/en,;/w,if/en, ,(/w,posy/en,2/m, ,</w, ,i/en,)/w, ,posy/en,2/m, ,=/w, ,i/en,;/w,}/w,}/w,}/w,//w,//w,确保/v,能/v,整除/v,int/en, ,span/en, ,=/w, ,charscount/en, ,-/w, ,(/w,posx/en,2/m, ,-/w, ,posx/en,1/m, ,+/w, ,1/m,)/w, ,%/w, ,charscount/en,;/w,//w,//w,可/v,整除/v,的/u,差额/n,数/m,if/en, ,(/w,span/en, ,</w, ,charscount/en,)/w,{/w,int/en, ,leftspan/en, ,=/w, ,span/en, ,//w, ,2/m,;/w,//w,//w,分配/vn,到/v,左边/f,的/u,空列/nw,，/w,如/v,span/en,为/p,单数/n,，/w,则/d,右边/f,比/p,左边/f,大/a,1/m,if/en, ,(/w,posx/en,1/m, ,>, ,leftspan/en,)/w,posx/en,1/m, ,=/w, ,posx/en,1/m, ,-/w, ,leftspan/en,;/w,if/en, ,(/w,posx/en,2/m, ,+/w, ,span/en, ,-/w, ,leftspan/en, ,</w, ,bmpobj/en,./w,width/en,)/w,posx/en,2/m, ,=/w, ,posx/en,2/m, ,+/w, ,span/en, ,-/w, ,leftspan/en,;/w,}/w,//w,//w,复制/v,新/a,图/n,rectangle/en, ,clonerect/en, ,=/w, ,new/en, ,rectangle/en,(/w,posx/en,1/m,,/w, ,posy/en,1/m,,/w, ,posx/en,2/m, ,-/w, ,posx/en,1/m, ,+/w, ,1/m,,/w, ,posy/en,2/m, ,-/w, ,posy/en,1/m, ,+/w, ,1/m,)/w,;/w,bmpobj/en, ,=/w, ,bmpobj/en,./w,clone/en,(/w,clonerect/en,,/w, ,bmpobj/en,./w,pixelformat/en,)/w,;/w,}/w,bitmap/en,[/w,]/w, ,pics/en, ,=/w, ,getsplitpics/en,(/w,4/m,,/w, ,1/m,)/w,;/w, ,//w,//w,分割/v,，/w,pics/en,[/w,0/m,]/w,中/f,的/u,图片/n,如/v,所/u,示/vg,在/p,平均/a,分割/v,图片/n,的/u,部分/n,，/w,设置/v,水平/n,上/f,分割/v,数/m,为/p,rownum/en,，/w,垂直/v,上/f,分割/v,数/m,为/p,colnum/en,，/w,返回/v,分割/v,好/a,的/u,图片/n,数/m,组/q,，/w,程序/n,编写/v,如下/v,：/w,public/en, ,bitmap/en,[/w,]/w, ,getsplitpics/en,(/w,int/en, ,rownum/en,,/w, ,int/en, ,colnum/en,)/w,{/w,if/en, ,(/w,rownum/en, ,=/w,=/w, ,0/m, ,|/w,|/w, ,colnum/en, ,=/w,=/w, ,0/m,)/w,return/en, ,null/en,;/w,int/en, ,singw/en, ,=/w, ,bmpobj/en,./w,width/en, ,//w, ,rownum/en,;/w,int/en, ,singh/en, ,=/w, ,bmpobj/en,./w,height/en, ,//w, ,colnum/en,;/w,bitmap/en,[/w,]/w, ,picarray/en, ,=/w, ,new/en, ,bitmap/en,[/w,rownum/en, ,*/w, ,colnum/en,]/w,;/w,rectangle/en, ,clonerect/en,;/w,for/en, ,(/w,int/en, ,i/en, ,=/w, ,0/m,;/w, ,i/en, ,</w, ,colnum/en,;/w, ,i/en,+/w,+/w,)/w,//w,//w,找/v,有效/a,区/n,{/w,for/en, ,(/w,int/en, ,j/en, ,=/w, ,0/m,;/w, ,j/en, ,</w, ,rownum/en,;/w, ,j/en,+/w,+/w,)/w,{/w,clonerect/en, ,=/w, ,new/en, ,rectangle/en,(/w,j/en, ,*/w, ,singw/en,,/w, ,i/en, ,*/w, ,singh/en,,/w, ,singw/en,,/w, ,singh/en,)/w,;/w,picarray/en,[/w,i/en, ,*/w, ,rownum/en, ,+/w, ,j/en,]/w, ,=/w, ,bmpobj/en,./w,clone/en,(/w,clonerect/en,,/w, ,bmpobj/en,./w,pixelformat/en,)/w,;/w,//w,//w,复制/v,小/a,块/q,图/n,}/w,}/w,return/en, ,picarray/en,;/w,}/w,此时/r,图像/n,分割/v,已/d,结束/v,，/w,pics/en, ,的/u,长度/n,应该/v,是/v,4/m,，/w,并且/c,每/r,一个/m,pics/en,就/d,是/v,一个/m,验证码/nw,的/u,位图/nw,，/w,经过/p,错误/n,处理/v,，/w,修边/nw,，/w,和/c,去除/v,无用/v,背景/n,空白/n,，/w,修正/v,完/v,的/u,位图/nw,为/p,数字/n,0/m,。/w,得到/v,有效/a,图形/n,后/f,，/w,由/p,外面/f,传入/v,该/r,图形/n,，/w,设置/v,灰度/n,背景/n,分界/v,值/n,为/p,“/w,dggrayvalue/en,”/w,，/w,有效/a,字符/n,数/m,为/p,charscount/en,，/w,程序/n,编写/v,如下/v,：/w,public/en, ,bitmap/en, ,getpicvalidbyvalue/en,(/w,bitmap/en, ,singlepic/en,,/w, ,int/en, ,dggrayvalue/en,)/w,{/w,int/en, ,posx/en,1/m, ,=/w, ,singlepic/en,./w,width/en,;/w, ,int/en, ,posy/en,1/m, ,=/w, ,singlepic/en,./w,height/en,;/w,int/en, ,posx/en,2/m, ,=/w, ,0/m,;/w, ,int/en, ,posy/en,2/m, ,=/w, ,0/m,;/w,for/en, ,(/w,int/en, ,i/en, ,=/w, ,0/m,;/w, ,i/en, ,</w, ,singlepic/en,./w,height/en,;/w, ,i/en,+/w,+/w,)/w,//w,//w,找/v,有效/a,区/n,{/w,for/en, ,(/w,int/en, ,j/en, ,=/w, ,0/m,;/w, ,j/en, ,</w, ,singlepic/en,./w,width/en,;/w, ,j/en,+/w,+/w,)/w,{/w,int/en, ,pixelvalue/en, ,=/w, ,singlepic/en,./w,getpixel/en,(/w,j/en,,/w, ,i/en,)/w,./w,r/en,;/w,if/en, ,(/w,pixelvalue/en, ,</w, ,dggrayvalue/en,)/w, ,//w,//w,根据/p,灰度/n,值/n,{/w,if/en, ,(/w,posx/en,1/m, ,>, ,j/en,)/w, ,posx/en,1/m, ,=/w, ,j/en,;/w,if/en, ,(/w,posy/en,1/m, ,>, ,i/en,)/w, ,posy/en,1/m, ,=/w, ,i/en,;/w,if/en, ,(/w,posx/en,2/m, ,</w, ,j/en,)/w, ,posx/en,2/m, ,=/w, ,j/en,;/w,if/en, ,(/w,posy/en,2/m, ,</w, ,i/en,)/w, ,posy/en,2/m, ,=/w, ,i/en,;/w,}/w,;/w,}/w,;/w,}/w,;/w,//w,//w,复制/v,新/a,图/n,rectangle/en, ,clonerect/en, ,=/w, ,new/en, ,rectangle/en,(/w,posx/en,1/m,,/w, ,posy/en,1/m,,/w, ,posx/en,2/m, ,-/w, ,posx/en,1/m, ,+/w, ,1/m,,/w, ,posy/en,2/m, ,-/w, ,posy/en,1/m, ,+/w, ,1/m,)/w,;/w,return/en, ,singlepic/en,./w,clone/en,(/w,clonerect/en,,/w, ,singlepic/en,./w,pixelformat/en,)/w,;/w,}/w,至此/d,，/w,pics/en,图像组/nw,中/f,就/d,是/v,有效/a,的/u,点阵/n,图/n,了/u,。/w,下面/f,我们/r,把/p,pics/en,中/f,的/u,图形/n,转换/v,为/p,代表/n,点阵/n,的/u,字符/n,串/v,，/w,返回/v,灰度/n,图片/n,的/u,点阵/n,描述/v,字/n,串/v,，/w,1/m,表示/v,灰点/nw,，/w,0/m,表示/v,背景/n,。/w,设置/v,灰度/n,图/n,为/p,singlepic/en,，/w,背/v,前景/n,灰色/n,界限/n,为/p,dggrayvalue/en,。/w,string/en, ,code/en, ,=/w, ,getsinglebmpcode/en,(/w,pics/en,[/w,0/m,]/w,,/w, ,128/m,)/w,;/w,public/en, ,string/en, ,getsinglebmpcode/en,(/w,bitmap/en, ,singlepic/en,,/w, ,int/en, ,dggrayvalue/en,)/w,{/w,color/en, ,piexl/en,;/w,stringbuilder/en, ,sbcode/en, ,=/w, ,new/en, ,stringbuilder/en,(/w,)/w,;/w,for/en, ,(/w,int/en, ,posy/en, ,=/w, ,0/m,;/w, ,posy/en, ,</w, ,singlepic/en,./w,height/en,;/w, ,posy/en,+/w,+/w,)/w,for/en, ,(/w,int/en, ,posx/en, ,=/w, ,0/m,;/w, ,posx/en, ,</w, ,singlepic/en,./w,width/en,;/w, ,posx/en,+/w,+/w,)/w,{/w,piexl/en, ,=/w, ,singlepic/en,./w,getpixel/en,(/w,posx/en,,/w, ,posy/en,)/w,;/w,if/en, ,(/w,piexl/en,./w,r/en, ,</w, ,dggrayvalue/en,)/w,//w,//w, ,color/en,./w,black/en, ,)/w,sbcode/en,./w,append/en,(/w,'/w,1/m,'/w,)/w,;/w,elsesbcode/en,./w,append/en,(/w,'/w,0/m,'/w,)/w,;/w,}/w,return/en, ,sbcode/en,./w,tostring/en,(/w,)/w,;/w,}/w,此时/r,，/w,code/en,中/f,的/u,字符/n,串/v,就/d,代表/n,字符/n,0/m,在/p,工行/j,wap/en,银行/n,上/f,图像/n,验证码/nw,的/u,值/n,了/u,；/w,以此类推/l,，/w,我们/r,可以/v,得到/v,一个/m,完整/a,的/u,，/w,代表/n,图像/n,0/m,~/w,9/m,的/u,数组/n,，/w,字/n,符表/nr,的/u,顺序/n,为/p,0/m,~/w,9/m,，/w,a/en,~/w,z/en,，/w,a/en,~/w,z/en,。/w,现在/t,，/w,图片点/nw,阵数/nw,组/q,已经/d,取得/v,了/u,，/w,接下来/l,我们/r,看看/v,如何/r,把/p,一个/m,图片/n,识别/v,出来/v,吧/y,！/w,已知/nz,如下/v,的/u,点/q,阵表/nw,：/w,string/en,[/w,]/w, ,codearray/en, ,=/w, ,new/en, ,string/en,[/w,]/w, ,{/w,"/w,0011100011011011000111100011110101111010111100011110001101101100011100/m,"/w,,/w,"/w,001100011100111100001100001100001100001100001100001100111111/m,"/w,,/w,"/w,0111110110001100000110000110000110000110000110000110000011000111111111/m,"/w,,/w,"/w,0111110110001100000110000011001111000000110000011000001111000110111110/m,"/w,,/w,"/w,0000110000111000111100110110110011011111110000110000011000001100001111/m,"/w,,/w,"/w,00011111000110000001100000011000000111111000000010000000100000001001100000001111/m,"/w,,/w,"/w,001110011000110000110000111111110001110001110001110001011111/m,"/w,,/w,"/w,00011111000110000000000000000000000000011000001110000110100001101000011000000110/m,"/w,,/w,"/w,0111110110001111000111100011011111011000111100011110001111000110111110/m,"/w,,/w,"/w,0111110110001111000111100011011111100000110000011000001100001100111100/m,"/w, ,}/w,;/w,开始/v,处理/v,比较/d,操作/v,：/w,stringbuilder/en, ,sbresult/en, ,=/w, ,new/en, ,stringbuilder/en,(/w,)/w,;/w,{/w,for/en, ,(/w,int/en, ,i/en, ,=/w, ,0/m,;/w, ,i/en, ,</w, ,4/m,;/w, ,i/en,+/w,+/w,)/w,{/w,string/en, ,code/en, ,=/w, ,getsinglebmpcode/en,(/w,pics/en,[/w,i/en,]/w,,/w, ,128/m,)/w,;/w,//w,//w,得到/v,代码/n,串/v,system/en,./w,collections/en,./w,generic/en,./w,dictionary/en,</w,char/en,,/w, ,double/en,>, ,equalspercentlist/en, ,=/w, ,new/en, ,dictionary/en,</w,char/en,,/w, ,double/en,>,(/w,)/w,;/w, ,//w,//w,建立/v,差异/n,程度/n,列表/v,for/en, ,(/w,int/en, ,arrayindex/en, ,=/w, ,0/m,;/w, ,arrayindex/en, ,</w, ,codearray/en,./w,length/en,;/w, ,arrayindex/en,+/w,+/w,)/w,{/w,if/en, ,(/w,arrayindex/en, ,</w, ,10/m,)/w,//w,//w,0/m,~/w,9/m,{/w,equalspercentlist/en,./w,add/en,(/w,(/w,char/en,)/w,(/w,48/m, ,+/w, ,arrayindex/en,)/w,,/w, ,100/m,)/w,;/w,//w,//w,数字/n,转/v,字符/n,，/w,c/en,语法/n,习惯/n,}/w,}/w,for/en, ,(/w,int/en, ,arrayindex/en, ,=/w, ,0/m,;/w, ,arrayindex/en, ,</w, ,codearray/en,./w,length/en,;/w, ,arrayindex/en,+/w,+/w,)/w, ,//w,//w,和/c,点/q,阵表/nw,内/f,的/u,字符/n,序列/n,进行/v,比较/d,{/w,if/en, ,(/w,arrayindex/en, ,</w, ,10/m,)/w,//w,//w,0/m,~/w,9/m,{/w,equalspercentlist/en,[/w,(/w,char/en,)/w,(/w,48/m, ,+/w, ,arrayindex/en,)/w,]/w, ,=/w, ,equalspercent/en,(/w,code/en,,/w, ,codearray/en,[/w,arrayindex/en,]/w,)/w,;/w,//w,//w,每/r,一个/m,图像/n,的/u,点阵/n,的/u,差异度/nw,，/w,这里/r,的/u,差异度运/nw,算是/v,误差/n,程度/n,，/w,也/d,就/d,是/v,不同/a,的/u,百分比/n,}/w,进行/v,获得/v,匹配/vn,{/w,double/en, ,perc/en, ,=/w, ,20/m,;/w, ,//w,//w,差异/n,百分比/n,必须/d,小于/v,20%/mq,，/w,否则/c,肯定/v,不/d,对/p,string/en, ,selectkey/en,=/w,"/w,"/w,;/w,foreach/en, ,(/w,char/en, ,key/en, ,in/en, ,equalspercentlist/en,./w,keys/en,)/w,//w,//w,获取/v,匹配/vn,程度/n,列表/v,中/f,最/d,匹配/vn,的/u,一项/mq,{/w,if/en, ,(/w,equalspercentlist/en,[/w,key/en,]/w, ,</w, ,perc/en,)/w,{/w,perc/en, ,=/w, ,equalspercentlist/en,[/w,key/en,]/w,;/w,selectkey/en, ,=/w, ,key/en,./w,tostring/en,(/w,)/w,;/w,}/w,}/w,sbresult/en,./w,append/en,(/w,selectkey/en,)/w,;/w,}/w,至此/d,，/w,sbresult/en,中/f,的/u,4个/m,数字/n,就/d,是/v,图像/n,上/f,的/u,4个/m,数字/n,了