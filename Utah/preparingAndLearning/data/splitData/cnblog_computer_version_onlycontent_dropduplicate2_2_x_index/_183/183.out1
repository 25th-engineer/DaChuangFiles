一 验证码 的 基本 知识 1 . 验证码 的 主要 
目的 是 强制 人机交互 来 抵御 机器 自动化 攻击 的 
2 . 大 部分 的 验证码 设计者 并 不得要领 不了解 
图像处理 机器 视觉 模式识别 人工智能 的 基本 概念 3 . 
利用 验证码 可以 发财 当然 要 犯罪 比如 招商银行 密码 
只有 6位 验证码 形同虚设 计算机 很快 就 能 破解 一个 
有钱 的 账户 很多 帐户 是 可以 网上 交易 的 
4 . 也有 设计 的 比较 好 的 比如 Yahoo 
Google Microsoft 等 而 国内 Tencent 的 中文 验证码 虽然 
难 但 算不上 好 二 人工智能 模式识别 机器 视觉 图像 
处理 的 基本 知识 1 主要 流程 比如 我们 要 
从 一副 图片 中 识别 出 验证码 比如 我们 要 
从 一副 图片 中 检测 并 识别 出 一张 人脸 
大概 有 哪些 步骤 呢 1 . 图像 采集 验证码 
呢 就 直接 通过 HTTP 抓 HTML 然后 分 析出 
图片 的 url 然后 下载 保存 就 可以 了 如果 
是 人脸 检测 识别 一般 要 通过 视屏 采集 设备 
采集 回来 通过 A / D 转 操作 存为 数字 
图片 或者 视 频频 2 . 预处理 检测 是 正确 
的 图像格式 转换 到 合适 的 格式 压缩 剪 切出 
ROI 去除 噪音 灰度 化 转换 色彩 空间 这些 3 
. 检测 车牌 检测 识别 系统 要 先 找到 车牌 
的 大概 位置 人脸 检测 系统 要 找出 图片 中 
所有 的 人脸 包括 疑似 人脸 验证码 识别 呢 主要 
是 找出 文字 所在 的 主要 区域 4 . 前 
处理 人脸 检测 和 识别 会对 人脸 在 识别 前作 
一些 校正 比 如面 内面 外 的 旋转 扭曲 等 
我 这里 的 验证码 识别 一般 要做 文字 的 切割 
5 . 训练 通过 各种 模式识别 机器学习 算法 来 挑选 
和 训练 合适 数量 的 训练 集 不是 训练 的 
样本 越多越好 过 学习 泛化 能力差 的 问题 可能 在 
这里 出现 这一步 不是 必须 的 有些 识别 算法 是 
不需要 训练 的 6 . 识别 输入 待 识别 的 
处理 后的/nr 图片 转换成 分类器 需要 的 输入 格式 然后 
通过 输出 的 类 和 置信度 来 判断 大概 可能 
是 哪个 字母 识别 本质 上 就是 分类 2 关键 
概念 图像处理 一般指 针对 数字 图像 的 某种 数学 处理 
比如 投影 钝化 锐化 细化 边缘 检测 二 值 化 
压缩 各种 数据 变换 等等 1 . 二 值 化 
一般 图片 都是/nr 彩色 的 按照 逼真 程度 可能 很多 
级别 为了 降低 计算 复杂度 方便 后续 的 处理 如果在 
不 损失 关键 信息 的 情况 下 能将 图片 处理 
成 黑白 两 种颜色 那就 最好 不过 了 2 . 
细化 找出 图像 的 骨架 图像 线条 可能 是 很宽 
的 通过 细化 将 宽度 将为 1 某些 地方 可能 
大于 1 不同 的 细化 算法 可能 有 不同 的 
差异 比如 是否 更 靠近 线条 中间 比如 是否 保持 
联 通行 等 3 . 边缘 检测 主要 是 理解 
边缘 的 概念 边缘 实际上 是 图像 中 图像 像素 
属性 变化 剧烈 的 地方 可能 通过 一个 固定 的 
门 限值 来 判断 也 可能 是 自适应 的 门限 
可能 是 图像 全局 的 也 可能 是 局部 的 
不能 说 那个 就 一定 好 不过 大部分 时候 自适应 
的 局部 的 门限 可能要 好点 被 分析 的 可能 
是 颜色 也 可能 是 灰度 图像 的 灰度 机器 
视觉 利用 计算机 来 模式 实现 人 的 视觉 比如 
物体 检测 定位 识别 按照 对 图像 理解 的 层次 
的 差别 分 高阶 和 低阶 的 理解 模式识别 对 
事物 或者 现象 的 某种 表示 方式 数值 文字 我们 
这里 主要 想 说 的 是 数值 通过 一些 处理 
和 分析 来 描述 归类 理解 解释 这些 事物 现象 
及其 某种 抽象 人工智能 这种 概念 比较 宽 上面 这些 
都 属于 人工智能 这个 大 的 方向 简单 点 不要 
过分 学院派 的 理解 就是 把 人类 的 很 智能 
的 东西 给 模拟 出来 协助 生物 的 人 来 
处理 问题 特别 是 在 计算机 里面 三 常见 的 
验证码 的 破解 分析 以 http / / libcaca . 
zoy . org / wiki / PWNtcha 这里 PWNtcha 项目 
中 的 资料 为例 分析 各种 验证码 的 破解 方法 
很多 仅仅 从我/nr 个人 乍看之下 觉得 可行 的 方法 来 
分析 1 Authimage 使用 的 反 破解 技巧 1 . 
不 连续 的 点 组成 字符 2 . 有 一定 
程度 的 倾斜 设计 不好 的 地方 1 . 通过 
纵横 的 直方图 投影 可以 找到 字幕 区域 2 . 
通过 Hough 变换 适当 的 参数 可以 找到 近似 的 
横线 可以 做 倾斜 矫正 3 . 字符串 的 倾斜 
式 面 内 的 没有 太多 的 破解 难度 4 
. 字母 宽度 一定 大小 一定 2 Clubic 使用 的 
反 破解 技巧 1 . 字符 是 手写体 设计 不好 
的 地方 1 . 检测 切割 阶段 没有 任何 技术 
含量 属于 设计 的 比较 丑 的 2 . 只有 
数字 而且 手写体 变化 不大 3 . 表面 看 起来 
对 识别 阶段 有 难度 仔细分析 发现 几乎 不用 任何 
高级 的 训练 识别 算法 就 固定 的 招 某些 
像素点 是否 有 色彩 就 够了 3 linuxfr . org 
使用 的 反 破解 技巧 1 . 背 景颜 色块 
2 . 前景 的 横 线或 矩形 设计 不好 的 
地方 1 . 背景色 是 单一 色块 有 形状 通过 
Region Growth 区域 增长 来 很容易 把 背景 给 去掉 
2 . 前景色 是 标准 的 线条 色彩 单一 3 
. 字母 无 粘连 4 . 都是 印刷体 4 Ourcolony 
使用 的 反 破解 技巧 1 . 设计 的 太 
低级 不屑于 去 评价 设计 不好 的 地方 1 . 
这种 验证码 设计 的 最丑 但 还是 能把 菜鸟 搞定 
毕竟 学 计算机 的 少 搞 这个 破解 的 更少 
正所谓 隔行如隔山 5 LiveJournal 使用 的 反 破解 技巧 1 
. 这个 设计 略微 好点 使用 个 随机 噪音 而且 
作为 前景 2 . 字母 位置 粗细 都 有变化 设计 
不好 的 地方 1 . 字母 没有 粘连 2 . 
噪音 类型 单一 3 . 通过 在 X 轴 的 
直方图 投影 能/v 准确/a 分割/v 字幕/n 4/m ./i 然后/c 在/p 
Y/w 周作/nr 直方图/n 投影/n 能 准确 定位 高度 5 . 
识别 阶段 都是 印刷体 简单 地 很 四 网上 的 
一些 高级 验证码 1 ICQ2 IMDb3 MS MVPS4 MVN Forum 
这些 类型 是 被 很多 人 认为 比较 难得 类型 
分析 一下 可以 发现 字符 检测 定位/n 和/c 分割/v 都/d 
不是/c 难/a 唯一 影响 识别率 的 是 IMDBb 和 MVPS 
这 两类 字体 变形 略大 总体 来说 这些 类型 的 
破解 也 不难 很容易 做到 50% 以上 的 识别 率 
五 高级 验证码 的 破解 分析 时间 关系 我 简单 
介绍 如何 利用 图像 处理 和 模式 识别 技术 自动 
识别 比较 高级 的 验证码 以 风头 正 劲 的 
Google 为例 1 至少 从 目前 的 AI 的 发展 
程度 看 没有 简单 的 做法 能 自动 处理 各种 
不同 的 验证码 即使 能力 很强 那么 系统 自然 也 
十分 复杂 强大 所以 要 想在 很 简单 的 算法 
实现 比较 高级 的 验证码 破解 必须 分析 不同 验证码 
算法 的 特点 作为 一般 的 图像 处理 和 计算机 
视觉 会 考虑 色彩 纹理 形状 等 直接 的 特征 
同时 也 考虑 直方图 灰度 等 统计 特征 还 考虑 
FFT Wavelet 等 各种 变换 后的/nr 特征 但 最终 目标 
都是 Dimension Reduction 降 维 然后 利于 识别 不 仅仅 
是 速度 的 考虑 从 图像 的 角度 看 很多 
系统 都 考虑 转换 为 灰度级 甚者 黑白图片 Google 的 
图片 可以 看出 颜色 变化 是 虚晃 一枪 不 存在 
任何 处理 难度 难度 是 字体 变形 和 字符 粘连 
如果 能 成功 的 分割 字符 那么 后期 识别 无论是 
用 SVM 等 分类 算法 还是 分析 笔顺 比 划走 
向来 硬 识别 都 相对 好做 2 图像/n 处理/v 和/c 
粘连/v 分割/v 代码/n 中的/i part1/i 目录/n 主要/b 完成/v 图像/n 预处理/vn 
和粘/nr 连字符/n 分割/v 001/m 将 图像 从 jpg 等 格式 
转换 为 位图 便于 处理 002 采用 Fix / Adaptive 
的 Threshold 门限 算法 将 图片 Bin Value 二 值 
化 可用 003 算法 003 采用 OSTU 分水岭 算法 将 
图片 Bin Value 二 值 化 更 通用 大部分 时候 
效果 更好 005 获取 ROI 感兴趣 的 区域 006 Edge 
Trace 边缘 跟踪 007 Edge Detection 边界检测 008 Thin 细化 
去 骨架 009 做 了 一些 Tidy 整理 这个 一般 
要 根据 特定 的 Captcha 算法 调整 010 做 切割 
注意 图片 中 红色 的 交叉点 011 将 边缘 检测 
和 骨干 交叉点 监测 的 图像 合并 合并 过程 可以 
做 分析 比如 X 坐标 偏移 门限 分析 交叉点 区域 
纹理 分析 线条 走势 分析 等等 各种 方法 找出/v 更/d 
可能/v 的/uj 切/v 分点/n 和/c 分离/v 后/f 部件/n 的/uj 组合/v 
管理/vn 代码 代码 质量 不高 从 其他 项目 拷贝 过来 
简单 修改 的 查看 代码 . / pstzine _ 09 
_ 01 . txt 注 在 这里 我们 可以 看到 
基本 的 部件 字母 是 分割 开了 但可以 造成 统一 
字母 的 被 切割 成 多个 Component 一种 做法 是 
利用 先验 知识 做 分割 另外 一种 做法 是 和 
第二 部分 的 识别 结合 起来 比如 按照 从 左至右 
尝试 增加 component 来 识别 如果 不能 识别 而且 component 
的 总 宽度 总面积 还 比较 小 继续 增加 当然 
不 排除 拒 识 的 可能性 3 字符 部件 组合 
和 识别 part2 的 代码 展示 了 切割 后的/nr 字母组合 
和/c 基于/p svm/w 的/uj 字符/n 识别/v 的/uj 训练/vn 和/c 识别/v 
过程/n Detection . cpp 中 展示 了 ImageSpam 检测 过程 
中 的 一些 字符 分割 和 组合 layout 的 分析 
和 利用 的 简单 技术 而 Google 的 验证码 的 
识别 完全 可以 不用 到 仅 做 参考 SVM 及 
使用 本质上 SVM 是 一个 分类器 原始 的 SVM 是 
一个 两类 分类 的 分类器 可以 通过 1 1 或者 
1 n 的 方式 来 组合 成 一个 多 类 
分类 的 分类器 天生 通过 核 函数 的 使用 支持 
高维 数据 的 分类 从 几何 意义上 讲 就是 找到 
最 能 表示 类别 特征 的 那些 向量 支持 向量 
SV 然后 找到 一条线 能 最大化 分类 的 Margin libSVM 
是 一个 不错 的 实现 训练/vn 间断/d 和/c 识别/v 阶段/n 
的/uj 数据/n 整理/n 和/c 归一化/l 是/v 一样/r 的/uj 这里 的 
简单 做法 是 首先 # define SVM _ MAX + 
0.999 # define SVM _ MIN + 0.001 其次 扫描 
黑白 待 识别 字幕 图片 的 每个 像素 如果 为 
0 黑色 是 字母 上 的 像素 那么 svm 中 
该 位置 就 SVM _ MAX 反之 则 反 最后 
训练 阶段 在 svm 的 input 的 前面 为 该类 
打上 标记 即是 那 一个 字母 识别 阶段 当然 这个 
类别 标记 是 SVM 分类 出来 注意 如果 是 SVM 
菜鸟 最好 找 一个 在 SVM 外边 做了 包装 的 
工具 比如 样本 选择 交叉 验证 核 函数 选择 这些 
让 程序 自动 选择 和 分析 代码 通过 ReginGrowth 来 
提取 单个 单个 的 字符 然后 开始 识别 查看 代码 
. / pstzine _ 09 _ 02 . txt 六 
对 验证码 设计 的 一些 建议 1 . 在 噪音 
等 类型 的 使用 上 尽力/d 让/v 字符/n 和/c 用来/v 
混淆/v 的/uj 前景/n 和/c 背景/n 不容易/i 区分/n 尽力 让 坏人 
噪音 长得 和 好人 字母 一样 2 . 特别 好 
的 验证码 的 设计 要 尽力 发挥 人类 擅长 而 
AI 算法 不 擅长 的 比如 粘 连字符 的 分割 
和 手写体 通过 印刷体 做 特别 的 变形 也 可以 
而 不要 一味 的 去 加 一些 看起来 比较 复杂 
的 噪音 或者 其他 的 花哨 的 东西 即使 你 
做 的 足够 复杂 但 如果 人也 难识别 显然 别人 
认为 你 是 没事 找抽 型 的 3 . 从 
专业 的 机器 视觉 的 角度 说 验证码 的 设计 
一定 要 让 破 解者 在 识别 阶段 反复 在 
低阶 视觉 和 高阶 视觉 之间 多 反复 几次 才能 
识 别出来 这样 可以 大大 降低 破解 难度 和 破解 
的 准确率 一 验证码 的 基本 知识 1 . 验证码 的 主要 
目的 是 强制 人机交互 来 抵御 机器 自动化 攻击 的 
2 . 大 部分 的 验证码 设计者 并 不得要领 不了解 
图像处理 机器 视觉 模式识别 人工智能 的 基本 概念 3 . 
利用 验证码 可以 发财 当然 要 犯罪 比如 招商银行 密码 
只有 6位 验证码 形同虚设 计算机 很快 就 能 破解 一个 
有钱 的 账户 很多 帐户 是 可以 网上 交易 的 
4 . 也有 设计 的 比较 好 的 比如 Yahoo 
Google Microsoft 等 而 国内 Tencent 的 中文 验证码 虽然 
难 但 算不上 好 二 人工智能 模式识别 机器 视觉 图像 
处理 的 基本 知识 1 主要 流程 比如 我们 要 
从 一副 图片 中 识别 出 验证码 比如 我们 要 
从 一副 图片 中 检测 并 识别 出 一张 人脸 
大概 有 哪些 步骤 呢 1 . 图像 采集 验证码 
呢 就 直接 通过 HTTP 抓 HTML 然后 分 析出 
图片 的 url 然后 下载 保存 就 可以 了 如果 
是 人脸 检测 识别 一般 要 通过 视屏 采集 设备 
采集 回来 通过 A / D 转 操作 存为 数字 
图片 或者 视 频频 2 . 预处理 检测 是 正确 
的 图像格式 转换 到 合适 的 格式 压缩 剪 切出 
ROI 去除 噪音 灰度 化 转换 色彩 空间 这些 3 
. 检测 车牌 检测 识别 系统 要 先 找到 车牌 
的 大概 位置 人脸 检测 系统 要 找出 图片 中 
所有 的 人脸 包括 疑似 人脸 验证码 识别 呢 主要 
是 找出 文字 所在 的 主要 区域 4 . 前 
处理 人脸 检测 和 识别 会对 人脸 在 识别 前作 
一些 校正 比 如面 内面 外 的 旋转 扭曲 等 
我 这里 的 验证码 识别 一般 要做 文字 的 切割 
5 . 训练 通过 各种 模式识别 机器学习 算法 来 挑选 
和 训练 合适 数量 的 训练 集 不是 训练 的 
样本 越多越好 过 学习 泛化 能力差 的 问题 可能 在 
这里 出现 这一步 不是 必须 的 有些 识别 算法 是 
不需要 训练 的 6 . 识别 输入 待 识别 的 
处理 后的/nr 图片 转换成 分类器 需要 的 输入 格式 然后 
通过 输出 的 类 和 置信度 来 判断 大概 可能 
是 哪个 字母 识别 本质 上 就是 分类 2 关键 
概念 图像处理 一般指 针对 数字 图像 的 某种 数学 处理 
比如 投影 钝化 锐化 细化 边缘 检测 二 值 化 
压缩 各种 数据 变换 等等 1 . 二 值 化 
一般 图片 都是/nr 彩色 的 按照 逼真 程度 可能 很多 
级别 为了 降低 计算 复杂度 方便 后续 的 处理 如果在 
不 损失 关键 信息 的 情况 下 能将 图片 处理 
成 黑白 两 种颜色 那就 最好 不过 了 2 . 
细化 找出 图像 的 骨架 图像 线条 可能 是 很宽 
的 通过 细化 将 宽度 将为 1 某些 地方 可能 
大于 1 不同 的 细化 算法 可能 有 不同 的 
差异 比如 是否 更 靠近 线条 中间 比如 是否 保持 
联 通行 等 3 . 边缘 检测 主要 是 理解 
边缘 的 概念 边缘 实际上 是 图像 中 图像 像素 
属性 变化 剧烈 的 地方 可能 通过 一个 固定 的 
门 限值 来 判断 也 可能 是 自适应 的 门限 
可能 是 图像 全局 的 也 可能 是 局部 的 
不能 说 那个 就 一定 好 不过 大部分 时候 自适应 
的 局部 的 门限 可能要 好点 被 分析 的 可能 
是 颜色 也 可能 是 灰度 图像 的 灰度 机器 
视觉 利用 计算机 来 模式 实现 人 的 视觉 比如 
物体 检测 定位 识别 按照 对 图像 理解 的 层次 
的 差别 分 高阶 和 低阶 的 理解 模式识别 对 
事物 或者 现象 的 某种 表示 方式 数值 文字 我们 
这里 主要 想 说 的 是 数值 通过 一些 处理 
和 分析 来 描述 归类 理解 解释 这些 事物 现象 
及其 某种 抽象 人工智能 这种 概念 比较 宽 上面 这些 
都 属于 人工智能 这个 大 的 方向 简单 点 不要 
过分 学院派 的 理解 就是 把 人类 的 很 智能 
的 东西 给 模拟 出来 协助 生物 的 人 来 
处理 问题 特别 是 在 计算机 里面 三 常见 的 
验证码 的 破解 分析 以 http / / libcaca . 
zoy . org / wiki / PWNtcha 这里 PWNtcha 项目 
中 的 资料 为例 分析 各种 验证码 的 破解 方法 
很多 仅仅 从我/nr 个人 乍看之下 觉得 可行 的 方法 来 
分析 1 Authimage 使用 的 反 破解 技巧 1 . 
不 连续 的 点 组成 字符 2 . 有 一定 
程度 的 倾斜 设计 不好 的 地方 1 . 通过 
纵横 的 直方图 投影 可以 找到 字幕 区域 2 . 
通过 Hough 变换 适当 的 参数 可以 找到 近似 的 
横线 可以 做 倾斜 矫正 3 . 字符串 的 倾斜 
式 面 内 的 没有 太多 的 破解 难度 4 
. 字母 宽度 一定 大小 一定 2 Clubic 使用 的 
反 破解 技巧 1 . 字符 是 手写体 设计 不好 
的 地方 1 . 检测 切割 阶段 没有 任何 技术 
含量 属于 设计 的 比较 丑 的 2 . 只有 
数字 而且 手写体 变化 不大 3 . 表面 看 起来 
对 识别 阶段 有 难度 仔细分析 发现 几乎 不用 任何 
高级 的 训练 识别 算法 就 固定 的 招 某些 
像素点 是否 有 色彩 就 够了 3 linuxfr . org 
使用 的 反 破解 技巧 1 . 背 景颜 色块 
2 . 前景 的 横 线或 矩形 设计 不好 的 
地方 1 . 背景色 是 单一 色块 有 形状 通过 
Region Growth 区域 增长 来 很容易 把 背景 给 去掉 
2 . 前景色 是 标准 的 线条 色彩 单一 3 
. 字母 无 粘连 4 . 都是 印刷体 4 Ourcolony 
使用 的 反 破解 技巧 1 . 设计 的 太 
低级 不屑于 去 评价 设计 不好 的 地方 1 . 
这种 验证码 设计 的 最丑 但 还是 能把 菜鸟 搞定 
毕竟 学 计算机 的 少 搞 这个 破解 的 更少 
正所谓 隔行如隔山 5 LiveJournal 使用 的 反 破解 技巧 1 
. 这个 设计 略微 好点 使用 个 随机 噪音 而且 
作为 前景 2 . 字母 位置 粗细 都 有变化 设计 
不好 的 地方 1 . 字母 没有 粘连 2 . 
噪音 类型 单一 3 . 通过 在 X 轴 的 
直方图 投影 能/v 准确/a 分割/v 字幕/n 4/m ./i 然后/c 在/p 
Y/w 周作/nr 直方图/n 投影/n 能 准确 定位 高度 5 . 
识别 阶段 都是 印刷体 简单 地 很 四 网上 的 
一些 高级 验证码 1 ICQ2 IMDb3 MS MVPS4 MVN Forum 
这些 类型 是 被 很多 人 认为 比较 难得 类型 
分析 一下 可以 发现 字符 检测 定位/n 和/c 分割/v 都/d 
不是/c 难/a 唯一 影响 识别率 的 是 IMDBb 和 MVPS 
这 两类 字体 变形 略大 总体 来说 这些 类型 的 
破解 也 不难 很容易 做到 50% 以上 的 识别 率 
五 高级 验证码 的 破解 分析 时间 关系 我 简单 
介绍 如何 利用 图像 处理 和 模式 识别 技术 自动 
识别 比较 高级 的 验证码 以 风头 正 劲 的 
Google 为例 1 至少 从 目前 的 AI 的 发展 
程度 看 没有 简单 的 做法 能 自动 处理 各种 
不同 的 验证码 即使 能力 很强 那么 系统 自然 也 
十分 复杂 强大 所以 要 想在 很 简单 的 算法 
实现 比较 高级 的 验证码 破解 必须 分析 不同 验证码 
算法 的 特点 作为 一般 的 图像 处理 和 计算机 
视觉 会 考虑 色彩 纹理 形状 等 直接 的 特征 
同时 也 考虑 直方图 灰度 等 统计 特征 还 考虑 
FFT Wavelet 等 各种 变换 后的/nr 特征 但 最终 目标 
都是 Dimension Reduction 降 维 然后 利于 识别 不 仅仅 
是 速度 的 考虑 从 图像 的 角度 看 很多 
系统 都 考虑 转换 为 灰度级 甚者 黑白图片 Google 的 
图片 可以 看出 颜色 变化 是 虚晃 一枪 不 存在 
任何 处理 难度 难度 是 字体 变形 和 字符 粘连 
如果 能 成功 的 分割 字符 那么 后期 识别 无论是 
用 SVM 等 分类 算法 还是 分析 笔顺 比 划走 
向来 硬 识别 都 相对 好做 2 图像/n 处理/v 和/c 
粘连/v 分割/v 代码/n 中的/i part1/i 目录/n 主要/b 完成/v 图像/n 预处理/vn 
和粘/nr 连字符/n 分割/v 001/m 将 图像 从 jpg 等 格式 
转换 为 位图 便于 处理 002 采用 Fix / Adaptive 
的 Threshold 门限 算法 将 图片 Bin Value 二 值 
化 可用 003 算法 003 采用 OSTU 分水岭 算法 将 
图片 Bin Value 二 值 化 更 通用 大部分 时候 
效果 更好 005 获取 ROI 感兴趣 的 区域 006 Edge 
Trace 边缘 跟踪 007 Edge Detection 边界检测 008 Thin 细化 
去 骨架 009 做 了 一些 Tidy 整理 这个 一般 
要 根据 特定 的 Captcha 算法 调整 010 做 切割 
注意 图片 中 红色 的 交叉点 011 将 边缘 检测 
和 骨干 交叉点 监测 的 图像 合并 合并 过程 可以 
做 分析 比如 X 坐标 偏移 门限 分析 交叉点 区域 
纹理 分析 线条 走势 分析 等等 各种 方法 找出/v 更/d 
可能/v 的/uj 切/v 分点/n 和/c 分离/v 后/f 部件/n 的/uj 组合/v 
管理/vn 代码 代码 质量 不高 从 其他 项目 拷贝 过来 
简单 修改 的 查看 代码 . / pstzine _ 09 
_ 01 . txt 注 在 这里 我们 可以 看到 
基本 的 部件 字母 是 分割 开了 但可以 造成 统一 
字母 的 被 切割 成 多个 Component 一种 做法 是 
利用 先验 知识 做 分割 另外 一种 做法 是 和 
第二 部分 的 识别 结合 起来 比如 按照 从 左至右 
尝试 增加 component 来 识别 如果 不能 识别 而且 component 
的 总 宽度 总面积 还 比较 小 继续 增加 当然 
不 排除 拒 识 的 可能性 3 字符 部件 组合 
和 识别 part2 的 代码 展示 了 切割 后的/nr 字母组合 
和/c 基于/p svm/w 的/uj 字符/n 识别/v 的/uj 训练/vn 和/c 识别/v 
过程/n Detection . cpp 中 展示 了 ImageSpam 检测 过程 
中 的 一些 字符 分割 和 组合 layout 的 分析 
和 利用 的 简单 技术 而 Google 的 验证码 的 
识别 完全 可以 不用 到 仅 做 参考 SVM 及 
使用 本质上 SVM 是 一个 分类器 原始 的 SVM 是 
一个 两类 分类 的 分类器 可以 通过 1 1 或者 
1 n 的 方式 来 组合 成 一个 多 类 
分类 的 分类器 天生 通过 核 函数 的 使用 支持 
高维 数据 的 分类 从 几何 意义上 讲 就是 找到 
最 能 表示 类别 特征 的 那些 向量 支持 向量 
SV 然后 找到 一条线 能 最大化 分类 的 Margin libSVM 
是 一个 不错 的 实现 训练/vn 间断/d 和/c 识别/v 阶段/n 
的/uj 数据/n 整理/n 和/c 归一化/l 是/v 一样/r 的/uj 这里 的 
简单 做法 是 首先 # define SVM _ MAX + 
0.999 # define SVM _ MIN + 0.001 其次 扫描 
黑白 待 识别 字幕 图片 的 每个 像素 如果 为 
0 黑色 是 字母 上 的 像素 那么 svm 中 
该 位置 就 SVM _ MAX 反之 则 反 最后 
训练 阶段 在 svm 的 input 的 前面 为 该类 
打上 标记 即是 那 一个 字母 识别 阶段 当然 这个 
类别 标记 是 SVM 分类 出来 注意 如果 是 SVM 
菜鸟 最好 找 一个 在 SVM 外边 做了 包装 的 
工具 比如 样本 选择 交叉 验证 核 函数 选择 这些 
让 程序 自动 选择 和 分析 代码 通过 ReginGrowth 来 
提取 单个 单个 的 字符 然后 开始 识别 查看 代码 
. / pstzine _ 09 _ 02 . txt 六 
对 验证码 设计 的 一些 建议 1 . 在 噪音 
等 类型 的 使用 上 尽力/d 让/v 字符/n 和/c 用来/v 
混淆/v 的/uj 前景/n 和/c 背景/n 不容易/i 区分/n 尽力 让 坏人 
噪音 长得 和 好人 字母 一样 2 . 特别 好 
的 验证码 的 设计 要 尽力 发挥 人类 擅长 而 
AI 算法 不 擅长 的 比如 粘 连字符 的 分割 
和 手写体 通过 印刷体 做 特别 的 变形 也 可以 
而 不要 一味 的 去 加 一些 看起来 比较 复杂 
的 噪音 或者 其他 的 花哨 的 东西 即使 你 
做 的 足够 复杂 但 如果 人也 难识别 显然 别人 
认为 你 是 没事 找抽 型 的 3 . 从 
专业 的 机器 视觉 的 角度 说 验证码 的 设计 
一定 要 让 破 解者 在 识别 阶段 反复 在 
低阶 视觉 和 高阶 视觉 之间 多 反复 几次 才能 
识 别出来 这样 可以 大大 降低 破解 难度 和 破解 
的 准确率 一 验证码 的 基本 知识 1 . 验证码 的 主要 
目的 是 强制 人机交互 来 抵御 机器 自动化 攻击 的 
2 . 大 部分 的 验证码 设计者 并 不得要领 不了解 
图像处理 机器 视觉 模式识别 人工智能 的 基本 概念 3 . 
利用 验证码 可以 发财 当然 要 犯罪 比如 招商银行 密码 
只有 6位 验证码 形同虚设 计算机 很快 就 能 破解 一个 
有钱 的 账户 很多 帐户 是 可以 网上 交易 的 
4 . 也有 设计 的 比较 好 的 比如 Yahoo 
Google Microsoft 等 而 国内 Tencent 的 中文 验证码 虽然 
难 但 算不上 好 二 人工智能 模式识别 机器 视觉 图像 
处理 的 基本 知识 1 主要 流程 比如 我们 要 
从 一副 图片 中 识别 出 验证码 比如 我们 要 
从 一副 图片 中 检测 并 识别 出 一张 人脸 
大概 有 哪些 步骤 呢 1 . 图像 采集 验证码 
呢 就 直接 通过 HTTP 抓 HTML 然后 分 析出 
图片 的 url 然后 下载 保存 就 可以 了 如果 
是 人脸 检测 识别 一般 要 通过 视屏 采集 设备 
采集 回来 通过 A / D 转 操作 存为 数字 
图片 或者 视 频频 2 . 预处理 检测 是 正确 
的 图像格式 转换 到 合适 的 格式 压缩 剪 切出 
ROI 去除 噪音 灰度 化 转换 色彩 空间 这些 3 
. 检测 车牌 检测 识别 系统 要 先 找到 车牌 
的 大概 位置 人脸 检测 系统 要 找出 图片 中 
所有 的 人脸 包括 疑似 人脸 验证码 识别 呢 主要 
是 找出 文字 所在 的 主要 区域 4 . 前 
处理 人脸 检测 和 识别 会对 人脸 在 识别 前作 
一些 校正 比 如面 内面 外 的 旋转 扭曲 等 
我 这里 的 验证码 识别 一般 要做 文字 的 切割 
5 . 训练 通过 各种 模式识别 机器学习 算法 来 挑选 
和 训练 合适 数量 的 训练 集 不是 训练 的 
样本 越多越好 过 学习 泛化 能力差 的 问题 可能 在 
这里 出现 这一步 不是 必须 的 有些 识别 算法 是 
不需要 训练 的 6 . 识别 输入 待 识别 的 
处理 后的/nr 图片 转换成 分类器 需要 的 输入 格式 然后 
通过 输出 的 类 和 置信度 来 判断 大概 可能 
是 哪个 字母 识别 本质 上 就是 分类 2 关键 
概念 图像处理 一般指 针对 数字 图像 的 某种 数学 处理 
比如 投影 钝化 锐化 细化 边缘 检测 二 值 化 
压缩 各种 数据 变换 等等 1 . 二 值 化 
一般 图片 都是/nr 彩色 的 按照 逼真 程度 可能 很多 
级别 为了 降低 计算 复杂度 方便 后续 的 处理 如果在 
不 损失 关键 信息 的 情况 下 能将 图片 处理 
成 黑白 两 种颜色 那就 最好 不过 了 2 . 
细化 找出 图像 的 骨架 图像 线条 可能 是 很宽 
的 通过 细化 将 宽度 将为 1 某些 地方 可能 
大于 1 不同 的 细化 算法 可能 有 不同 的 
差异 比如 是否 更 靠近 线条 中间 比如 是否 保持 
联 通行 等 3 . 边缘 检测 主要 是 理解 
边缘 的 概念 边缘 实际上 是 图像 中 图像 像素 
属性 变化 剧烈 的 地方 可能 通过 一个 固定 的 
门 限值 来 判断 也 可能 是 自适应 的 门限 
可能 是 图像 全局 的 也 可能 是 局部 的 
不能 说 那个 就 一定 好 不过 大部分 时候 自适应 
的 局部 的 门限 可能要 好点 被 分析 的 可能 
是 颜色 也 可能 是 灰度 图像 的 灰度 机器 
视觉 利用 计算机 来 模式 实现 人 的 视觉 比如 
物体 检测 定位 识别 按照 对 图像 理解 的 层次 
的 差别 分 高阶 和 低阶 的 理解 模式识别 对 
事物 或者 现象 的 某种 表示 方式 数值 文字 我们 
这里 主要 想 说 的 是 数值 通过 一些 处理 
和 分析 来 描述 归类 理解 解释 这些 事物 现象 
及其 某种 抽象 人工智能 这种 概念 比较 宽 上面 这些 
都 属于 人工智能 这个 大 的 方向 简单 点 不要 
过分 学院派 的 理解 就是 把 人类 的 很 智能 
的 东西 给 模拟 出来 协助 生物 的 人 来 
处理 问题 特别 是 在 计算机 里面 三 常见 的 
验证码 的 破解 分析 以 http / / libcaca . 
zoy . org / wiki / PWNtcha 这里 PWNtcha 项目 
中 的 资料 为例 分析 各种 验证码 的 破解 方法 
很多 仅仅 从我/nr 个人 乍看之下 觉得 可行 的 方法 来 
分析 1 Authimage 使用 的 反 破解 技巧 1 . 
不 连续 的 点 组成 字符 2 . 有 一定 
程度 的 倾斜 设计 不好 的 地方 1 . 通过 
纵横 的 直方图 投影 可以 找到 字幕 区域 2 . 
通过 Hough 变换 适当 的 参数 可以 找到 近似 的 
横线 可以 做 倾斜 矫正 3 . 字符串 的 倾斜 
式 面 内 的 没有 太多 的 破解 难度 4 
. 字母 宽度 一定 大小 一定 2 Clubic 使用 的 
反 破解 技巧 1 . 字符 是 手写体 设计 不好 
的 地方 1 . 检测 切割 阶段 没有 任何 技术 
含量 属于 设计 的 比较 丑 的 2 . 只有 
数字 而且 手写体 变化 不大 3 . 表面 看 起来 
对 识别 阶段 有 难度 仔细分析 发现 几乎 不用 任何 
高级 的 训练 识别 算法 就 固定 的 招 某些 
像素点 是否 有 色彩 就 够了 3 linuxfr . org 
使用 的 反 破解 技巧 1 . 背 景颜 色块 
2 . 前景 的 横 线或 矩形 设计 不好 的 
地方 1 . 背景色 是 单一 色块 有 形状 通过 
Region Growth 区域 增长 来 很容易 把 背景 给 去掉 
2 . 前景色 是 标准 的 线条 色彩 单一 3 
. 字母 无 粘连 4 . 都是 印刷体 4 Ourcolony 
使用 的 反 破解 技巧 1 . 设计 的 太 
低级 不屑于 去 评价 设计 不好 的 地方 1 . 
这种 验证码 设计 的 最丑 但 还是 能把 菜鸟 搞定 
毕竟 学 计算机 的 少 搞 这个 破解 的 更少 
正所谓 隔行如隔山 5 LiveJournal 使用 的 反 破解 技巧 1 
. 这个 设计 略微 好点 使用 个 随机 噪音 而且 
作为 前景 2 . 字母 位置 粗细 都 有变化 设计 
不好 的 地方 1 . 字母 没有 粘连 2 . 
噪音 类型 单一 3 . 通过 在 X 轴 的 
直方图 投影 能/v 准确/a 分割/v 字幕/n 4/m ./i 然后/c 在/p 
Y/w 周作/nr 直方图/n 投影/n 能 准确 定位 高度 5 . 
识别 阶段 都是 印刷体 简单 地 很 四 网上 的 
一些 高级 验证码 1 ICQ2 IMDb3 MS MVPS4 MVN Forum 
这些 类型 是 被 很多 人 认为 比较 难得 类型 
分析 一下 可以 发现 字符 检测 定位/n 和/c 分割/v 都/d 
不是/c 难/a 唯一 影响 识别率 的 是 IMDBb 和 MVPS 
这 两类 字体 变形 略大 总体 来说 这些 类型 的 
破解 也 不难 很容易 做到 50% 以上 的 识别 率 
五 高级 验证码 的 破解 分析 时间 关系 我 简单 
介绍 如何 利用 图像 处理 和 模式 识别 技术 自动 
识别 比较 高级 的 验证码 以 风头 正 劲 的 
Google 为例 1 至少 从 目前 的 AI 的 发展 
程度 看 没有 简单 的 做法 能 自动 处理 各种 
不同 的 验证码 即使 能力 很强 那么 系统 自然 也 
十分 复杂 强大 所以 要 想在 很 简单 的 算法 
实现 比较 高级 的 验证码 破解 必须 分析 不同 验证码 
算法 的 特点 作为 一般 的 图像 处理 和 计算机 
视觉 会 考虑 色彩 纹理 形状 等 直接 的 特征 
同时 也 考虑 直方图 灰度 等 统计 特征 还 考虑 
FFT Wavelet 等 各种 变换 后的/nr 特征 但 最终 目标 
都是 Dimension Reduction 降 维 然后 利于 识别 不 仅仅 
是 速度 的 考虑 从 图像 的 角度 看 很多 
系统 都 考虑 转换 为 灰度级 甚者 黑白图片 Google 的 
图片 可以 看出 颜色 变化 是 虚晃 一枪 不 存在 
任何 处理 难度 难度 是 字体 变形 和 字符 粘连 
如果 能 成功 的 分割 字符 那么 后期 识别 无论是 
用 SVM 等 分类 算法 还是 分析 笔顺 比 划走 
向来 硬 识别 都 相对 好做 2 图像/n 处理/v 和/c 
粘连/v 分割/v 代码/n 中的/i part1/i 目录/n 主要/b 完成/v 图像/n 预处理/vn 
和粘/nr 连字符/n 分割/v 001/m 将 图像 从 jpg 等 格式 
转换 为 位图 便于 处理 002 采用 Fix / Adaptive 
的 Threshold 门限 算法 将 图片 Bin Value 二 值 
化 可用 003 算法 003 采用 OSTU 分水岭 算法 将 
图片 Bin Value 二 值 化 更 通用 大部分 时候 
效果 更好 005 获取 ROI 感兴趣 的 区域 006 Edge 
Trace 边缘 跟踪 007 Edge Detection 边界检测 008 Thin 细化 
去 骨架 009 做 了 一些 Tidy 整理 这个 一般 
要 根据 特定 的 Captcha 算法 调整 010 做 切割 
注意 图片 中 红色 的 交叉点 011 将 边缘 检测 
和 骨干 交叉点 监测 的 图像 合并 合并 过程 可以 
做 分析 比如 X 坐标 偏移 门限 分析 交叉点 区域 
纹理 分析 线条 走势 分析 等等 各种 方法 找出/v 更/d 
可能/v 的/uj 切/v 分点/n 和/c 分离/v 后/f 部件/n 的/uj 组合/v 
管理/vn 代码 代码 质量 不高 从 其他 项目 拷贝 过来 
简单 修改 的 查看 代码 . / pstzine _ 09 
_ 01 . txt 注 在 这里 我们 可以 看到 
基本 的 部件 字母 是 分割 开了 但可以 造成 统一 
字母 的 被 切割 成 多个 Component 一种 做法 是 
利用 先验 知识 做 分割 另外 一种 做法 是 和 
第二 部分 的 识别 结合 起来 比如 按照 从 左至右 
尝试 增加 component 来 识别 如果 不能 识别 而且 component 
的 总 宽度 总面积 还 比较 小 继续 增加 当然 
不 排除 拒 识 的 可能性 3 字符 部件 组合 
和 识别 part2 的 代码 展示 了 切割 后的/nr 字母组合 
和/c 基于/p svm/w 的/uj 字符/n 识别/v 的/uj 训练/vn 和/c 识别/v 
过程/n Detection . cpp 中 展示 了 ImageSpam 检测 过程 
中 的 一些 字符 分割 和 组合 layout 的 分析 
和 利用 的 简单 技术 而 Google 的 验证码 的 
识别 完全 可以 不用 到 仅 做 参考 SVM 及 
使用 本质上 SVM 是 一个 分类器 原始 的 SVM 是 
一个 两类 分类 的 分类器 可以 通过 1 1 或者 
1 n 的 方式 来 组合 成 一个 多 类 
分类 的 分类器 天生 通过 核 函数 的 使用 支持 
高维 数据 的 分类 从 几何 意义上 讲 就是 找到 
最 能 表示 类别 特征 的 那些 向量 支持 向量 
SV 然后 找到 一条线 能 最大化 分类 的 Margin libSVM 
是 一个 不错 的 实现 训练/vn 间断/d 和/c 识别/v 阶段/n 
的/uj 数据/n 整理/n 和/c 归一化/l 是/v 一样/r 的/uj 这里 的 
简单 做法 是 首先 # define SVM _ MAX + 
0.999 # define SVM _ MIN + 0.001 其次 扫描 
黑白 待 识别 字幕 图片 的 每个 像素 如果 为 
0 黑色 是 字母 上 的 像素 那么 svm 中 
该 位置 就 SVM _ MAX 反之 则 反 最后 
训练 阶段 在 svm 的 input 的 前面 为 该类 
打上 标记 即是 那 一个 字母 识别 阶段 当然 这个 
类别 标记 是 SVM 分类 出来 注意 如果 是 SVM 
菜鸟 最好 找 一个 在 SVM 外边 做了 包装 的 
工具 比如 样本 选择 交叉 验证 核 函数 选择 这些 
让 程序 自动 选择 和 分析 代码 通过 ReginGrowth 来 
提取 单个 单个 的 字符 然后 开始 识别 查看 代码 
. / pstzine _ 09 _ 02 . txt 六 
对 验证码 设计 的 一些 建议 1 . 在 噪音 
等 类型 的 使用 上 尽力/d 让/v 字符/n 和/c 用来/v 
混淆/v 的/uj 前景/n 和/c 背景/n 不容易/i 区分/n 尽力 让 坏人 
噪音 长得 和 好人 字母 一样 2 . 特别 好 
的 验证码 的 设计 要 尽力 发挥 人类 擅长 而 
AI 算法 不 擅长 的 比如 粘 连字符 的 分割 
和 手写体 通过 印刷体 做 特别 的 变形 也 可以 
而 不要 一味 的 去 加 一些 看起来 比较 复杂 
的 噪音 或者 其他 的 花哨 的 东西 即使 你 
做 的 足够 复杂 但 如果 人也 难识别 显然 别人 
认为 你 是 没事 找抽 型 的 3 . 从 
专业 的 机器 视觉 的 角度 说 验证码 的 设计 
一定 要 让 破 解者 在 识别 阶段 反复 在 
低阶 视觉 和 高阶 视觉 之间 多 反复 几次 才能 
识 别出来 这样 可以 大大 降低 破解 难度 和 破解 
的 准确率 