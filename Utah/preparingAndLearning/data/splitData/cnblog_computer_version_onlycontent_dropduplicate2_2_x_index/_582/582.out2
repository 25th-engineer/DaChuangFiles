深度/n,学习/v,与/p,计算机/n,视觉/n,(/w,11/m,)/w,_,基于/p,deep/en, ,learning/en,的/u,快速/d,图像/n,检索/v,系统/n,作者/n,：/w,寒/ag,小阳/nr,时间/n,：/w,2016年/t,3月/t,。/w,出处/n,：/w,http/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,han/en,_,xiaoyang/en,//w,article/en,//w,details/en,//w,50856583/m,声明/n,：/w,版权/n,所有/b,，/w,转载/v,请/v,联系/v,作者/n,并/c,注明/v,出处/n,1/m,./w,引言/n,本/r,系统/n,是/v,基于/p,cvpr/en,2015/m,的/u,论文/n,《/w,deep/en, ,learning/en, ,of/en, ,binary/en, ,hash/en, ,codes/en, ,for/en, ,fast/en, ,image/en, ,retrieval/en,》/w,实现/v,的/u,海量/n,数据/n,下/f,的/u,基于/p,内容/n,图片/n,检索/v,系统/n,，/w,250/m,w/en,图片/n,下/f,，/w,对于/p,给/p,定/v,图片/n,，/w,检索/v,top/en, ,1000/m,相似/a,时间/n,约/d,为/p,1/m,s/en,，/w,其/r,基本/a,背景/n,和/c,原理/n,会/v,在/p,下文/v,提到/v,。/w,2/m,./w,基本/a,问题/n,与/p,技术/n,大家/r,都/d,知道/v,，/w,基于/p,内容/n,的/u,图像/n,检索/v,系统/n,是/v,根据/p,图像/n,的/u,内容/n,，/w,在/p,已有/v,图像/n,集中/v,找到/v,最/d,『/w,相近/a,』/w,的/u,图片/n,。/w,而/c,这/r,类/q,系统/n,的/u,效果/n,(/w,精/a,准度/nz,和/c,速度/n,)/w,和/c,两个/m,东西/n,直接/ad,相关/v,：/w,图片/n,特征/n,的/u,表达/v,能力/n,近似/a,最/d,近邻/n,的/u,查找/v,根据/p,我们/r,这个/r,简单/a,系统/n,里/f,的/u,情况/n,粗浅/a,地/u,谈谈/v,这/r,两个点/mq,。/w,首先/d,说/v,图像/n,特征/n,的/u,表达/v,能力/n,，/w,这/r,一直/d,是/v,基于/p,内容/n,的/u,图像/n,检索/v,最/d,核心/n,却/d,又/d,困难/an,的/u,点/q,之一/r,，/w,计算机/n,所/u,『/w,看到/v,』/w,的/u,图片/n,像素/n,层面/n,表达/v,的/u,低/a,层次/n,信息/n,与/p,人/n,所/u,理解/v,的/u,图像多维度/nw,高/a,层次/n,信息/n,内容/n,之间/f,有/v,很/d,大/a,的/u,差距/n,，/w,因此/c,我们/r,需要/v,一个/m,尽可能/d,丰富/a,地/u,表达/v,图像/n,层次/n,信息/n,的/u,特征/n,。/w,我们/r,前面/f,的/u,博客/n,也/d,提到/v,了/u,，/w,deep/en, ,learning/en,是/v,一个/m,对于/p,图像/n,这种/r,层次/n,信息/n,非常/d,丰富/a,的/u,数据/n,，/w,有/v,更/d,好/a,表达/v,能力/n,的/u,框架/n,，/w,其中/r,每/r,一层/mq,的/u,中间/f,数据/n,都/d,能/v,表达/v,图像/n,某些/r,维度/n,的/u,信息/n,，/w,相对于/nw,传统/n,的/u,hist/en,，/w,sift/en,和/c,gist/en,，/w,表达/v,的/u,信息/n,可能/v,会/v,丰富/a,一下/m,，/w,因此/c,这里/r,我们/r,用/p,deep/en, ,learning/en,产出/vn,的/u,特征/n,来/v,替代/v,传统/n,图像/n,特征/n,，/w,希望/v,能/v,对/p,图像/n,有/v,更/d,精/a,准/a,的/u,描绘/v,程度/n,。/w,再说/v,『/w,近似/a,最近/t,邻/vg,』/w,，/w,ann/en,(/w,approximate/en, ,nearest/en, ,neighbor/en,)/w,//w,近似/a,最近/t,邻/vg,一直/d,是/v,一个/m,很/d,热/a,的/u,研究/vn,领域/n,。/w,因为/c,在/p,海量/n,样本/n,的/u,情况/n,下/f,，/w,遍历/nw,所有/b,样本/n,，/w,计算/v,距离/n,，/w,精确/a,地/u,找/v,出/v,最/d,接近/v,的/u,top/en, ,k/en,个/q,样本/n,是/v,一个/m,非常/d,耗时/v,的/u,过程/n,，/w,尤其/d,有时候/d,样本/n,向量/n,的/u,维度/n,也/d,相当/d,高/a,，/w,因此/c,有时候/d,我们/r,会/v,牺牲/v,掉/v,一/m,小/a,部分/n,精度/n,，/w,来/v,完成/v,在/p,很/d,短/a,的/u,时间/n,内/f,找到/v,近似/a,的/u,top/en, ,k/en,个/q,最/d,近邻/n,，/w,也/d,就/d,是/v,ann/en,，/w,最/d,常见/a,的/u,ann/en,算法/n,包括/v,局部/n,敏感/a,度/q,哈希//nr,locality/en,-/w,sensitive/en, ,hashing/en,，/w,最/d,优/ag,节点/n,优先/v,//w,best/en, ,bin/en, ,first/en,和/c,balanced/en, ,box/en,-/w,decomposition/en, ,tree/en,等/u,，/w,我们/r,系统/n,中/f,将/d,采用/v,lsh/en,//w,局部/n,敏感/a,度/q,哈希来/nr,完成/v,这个/r,过程/n,。/w,有/v,一些/m,非常/d,专业/n,的/u,ann/en,库/n,，/w,比如/v,flann/en,，/w,有/v,兴趣/n,的/u,同学/n,可以/v,了解/v,一下/m,。/w,3/m,./w, ,本/r,检索/v,系统/n,原理/n,图像/n,检索/v,系统/n,和/c,关键/n,环节/n,如下/v,图/n,所/u,示/vg,：/w,图像/n,检索/v,过程/n,简单/a,说来/v,就/d,是/v,对/p,图片/n,数据库/n,的/u,每张/r,图片/n,抽取/vn,特征/n,(/w,一般/a,形式/n,为/p,特征/n,向量/n,)/w,，/w,存储/vn,于/p,数据库/n,中/f,，/w,对于/p,待/v,检索/v,图片/n,，/w,抽取/vn,同样/d,的/u,特征/n,向量/n,，/w,然后/c,并/c,对/p,该/r,向量/n,和/c,数据库/n,中/f,向量/n,的/u,距离/n,，/w,找/v,出/v,最/d,接近/v,的/u,一些/m,特征/n,向量/n,，/w,其/r,对应/v,的/u,图片/n,即/v,为/p,检索/v,结果/n,。/w,基于/p,内容/n,的/u,图像/n,检索/v,系统/n,最/d,大/a,的/u,难点/n,在/p,上节/t,已经/d,说/v,过/u,了/u,，/w,其一/r,为/p,大部分/m,神经/n,网络/n,产出/vn,的/u,中间/f,层/q,特征/n,维度/n,非常/d,高/a,，/w,比如/v,krizhevsky/en,等/u,的/u,在/p,2012/m,的/u,imagenet/en,比赛/vn,中/f,用/p,到/v,的/u,alexnet/en,神经/n,网/n,，/w,第/m,7层/mq,的/u,输出/v,包含/v,丰富/a,的/u,图像/n,信息/n,，/w,但是/c,维度/n,高/a,达/v,4096维/mq,。/w,4096维/mq,的/u,浮点数/nz,向/p,量/n,与/p,4096维/mq,的/u,浮点数/nz,向量/n,之间/f,求/v,相似/a,度/q,，/w,运算量/nw,较大/d,，/w,因此/c,babenko/en,等/u,人/n,在/p,论文/n,neural/en, ,codes/en, ,for/en, ,image/en, ,retrieval/en,中/f,提出/v,用/p,pca/en,对/p,4096维/mq,的/u,特征/n,进行/v,pca/en,降维/nw,压缩/v,，/w,然后/c,用于/v,基于/p,内容/n,的/u,图像/n,检索/v,，/w,此/r,场景/n,中/f,效果/n,优于/v,大部分/m,传统/n,图像/n,特征/n,。/w,同时/c,因为/c,高/a,维度/n,的/u,特征/n,之间/f,相似/a,度/q,运算会/nw,消耗/v,一定/d,的/u,时间/n,，/w,因此/c,线性/n,地/u,逐个/d,比/p,对/p,数据库/n,中/f,特征/n,向量/n,是/v,显然/ad,不/d,可取/a,的/u,。/w,大部分/m,的/u,ann/en,技术/n,都/d,是/v,将/d,高维/nr,特征/n,向/p,量/n,压缩/v,到/v,低/a,维度/n,空间/n,，/w,并且/c,以/p,01/m,二值/nw,的/u,方式/n,表达/v,，/w,因为/c,在/p,低维/nw,空间/n,中/f,计算/v,两个/m,二值/nw,向量/n,的/u,汉明/nrf,距离/n,速度/n,非常/d,快/a,，/w,因此/c,可以/v,在/p,一定/d,程度/n,上/f,缓解/v,时效/n,问题/n,。/w,ann/en,的/u,这/r,部分/n,hash/en,映射/v,是/v,在/p,拿/v,到/v,特征/n,之外/f,做/v,的/u,，/w,本/r,系统/n,框架/n,试图/v,让/v,卷积神经网/nt,在/p,训练/vn,过程/n,中/f,学习/v,出/v,对应/v,的/u,『/w,二值/nw,检索/v,向量/n,』/w,，/w,或者/c,我们/r,可以/v,理解/v,成/v,对/p,全部/m,图先/nw,做/v,了/u,一个/m,分桶/nw,操作/v,，/w,每次/r,检索/v,的/u,时候/n,只/d,取/v,本桶/nw,和/c,临近/v,桶/q,的/u,图片/n,作/v,比对/d,，/w,而/c,不/d,是/v,在/p,全域/n,做/v,比对/d,，/w,以/p,提高/v,检索/v,速度/n,。/w,论文/n,是/v,这样/r,实现/v,『/w,二值/nw,检索/v,向量/n,』/w,的/u,：/w,在/p,krizhevsky/en,等/u,2012年/t,用于/v,imagenet/en,中/f,的/u,卷积神经网络结构/nw,基础/n,上/f,，/w,在/p,第/m,7层/mq,(/w,4096个/m,神经元/n,)/w,和/c,output/en,层/q,之间/f,多/a,加/v,了/u,一个/m,隐层/nw,(/w,全/a,连接/v,层/q,)/w,。/w,隐层/nw,的/u,神经元/n,激励/v,函数/n,，/w,可以/v,选用/v,sigmoid/en,，/w,这样/r,输出/v,值/n,在/p,0/m,-/w,1/m,之间/f,值/n,，/w,可以/v,设定/v,阈值/n,(/w,比如说/l,0.5/m,)/w,之后/f,，/w,将/d,这/r,一层/mq,输出/v,变换/v,为/p,01/m,二值/nw,向/p,量/n,作为/v,『/w,二值/nw,检索/v,向量/n,』/w,，/w,这样/r,在/p,使用/v,卷积神经网/nt,做/v,图像/n,分类/vn,训练/vn,的/u,过程/n,中/f,，/w,会/v,『/w,学/v,到/v,』/w,和/c,结果/n,类别/n,最/d,接近/v,的/u,01/m,二值/nw,串/v,，/w,也/d,可以/v,理解/v,成/v,，/w,我们/r,把/p,第/m,7层/mq,4096维/mq,的/u,输出/v,特征/n,向量/n,，/w,通过/p,神经元/n,关联/vn,压缩/v,成/v,一个/m,低/a,维度/n,的/u,01/m,向量/n,，/w,但/c,不/d,同于/c,其他/r,的/u,降维/nw,和/c,二值/nw,操作/v,，/w,这/r,是/v,在/p,一个/m,神经/n,网络/n,里/f,完成/v,的/u,，/w,每/r,对/p,图片/n,做/v,一次/mq,完整/a,的/u,前/f,向/p,运算/vn,拿/v,到/v,类别/n,，/w,就/d,产出/vn,了/u,表征/v,图像/n,丰富/a,信息/n,的/u,第/m,7层/mq,output/en,(/w,4096维/mq,)/w,和/c,代表/n,图片/n,分桶/nw,的/u,第/m,8层/mq,output/en,(/w,神经元/n,个数/n,自己/r,指定/v,，/w,一般/a,都/d,不/d,会/v,很多/m,，/w,因此/c,维度/n,不/d,会/v,很/d,高/a,)/w,。/w,引用/v,论文/n,中/f,的/u,图例/n,解释/v,就/d,是/v,如下/v,的/u,结构/n,：/w,上方/f,图/n,为/p,imagenet/en,比赛/vn,中/f,使用/v,的/u,卷积/nw,神经/n,网络/n,；/w,中间/f,图/n,为/p,调整/vn,后/f,，/w,在/p,第/m,7层/mq,和/c,output/en,层/q,之间/f,添加/vn,隐层/nw,(/w,假设/v,为/p,128个/m,神经元/n,)/w,后/f,的/u,卷积/nw,神经/n,网络/n,，/w,我们/r,将/d,复用/vn,imagenet/en,中/f,得到/v,最终/d,模型/n,的/u,前/f,7层/mq,权/n,重/a,做/v,fine/en,-/w,tuning/en,，/w,得到/v,第/m,7层/mq,、/w,8层/mq,和/c,output/en,层/q,之间/f,的/u,权重/nz,。/w,下方/f,图/n,为/p,实际/n,检索/v,过程/n,，/w,对于/p,所有/b,的/u,图片/n,做/v,卷积/nw,神经/n,网络/n,前/f,向/p,运算/vn,得到/v,第/m,7层/mq,4096维/mq,特征/n,向量/n,和/c,第/m,8层/mq,128维/mq,输出/v,(/w,设定/v,阈值/n,0.5/m,之后/f,可以/v,转/v,成/v,01/m,二值/nw,检索/v,向/p,量/n,)/w,，/w,对于/p,待/v,检索/v,的/u,图片/n,，/w,同样/d,得到/v,4096维/mq,特征/n,向量/n,和/c,128维/mq,01/m,二值/nw,检索/v,向量/n,，/w,在/p,数据库/n,中/f,查找/v,二值/nw,检索/v,向量/n,对应/v,『/w,桶/q,』/w,内/f,图片/n,，/w,比/p,对/p,4096维/mq,特征/n,向量/n,之间/f,距离/n,，/w,做/v,重/a,拍/v,即/v,得到/v,最终/d,结果/n,。/w,图/n,上/f,的/u,检索/v,例子/n,比较/d,直观/a,，/w,对于/p,待/v,检索/v,的/u,”/w,鹰/n,”/w,图像/n,，/w,算/v,得/u,二值/nw,检索/v,向量/n,为/p,101010/m,，/w,取出/v,桶/q,内/f,图片/n,(/w,可以/v,看到/v,基本/a,也/d,都/d,为/p,鹰/n,)/w,，/w,比/p,对/p,4096维/mq,特征/n,向量/n,之间/f,距离/n,，/w,重新/d,排序/vn,拿/v,得到/v,最后/f,的/u,检索/v,结果/n,。/w,4/m,./w, ,预/d,训练/vn,好/a,的/u,模型/n,一般说来/l,，/w,在/p,自己/r,的/u,图片/n,训练/vn,集/vg,上/f,，/w,针对/p,特定/b,的/u,场景/n,进行/v,图像/n,类别/n,训练/vn,，/w,得到/v,的/u,神经/n,网络/n,，/w,中间/f,层/q,特征/n,的/u,表达/v,能力/n,会/v,更/d,有/v,针对性/n,一些/m,。/w,具体/a,训练/vn,的/u,过程/n,可以/v,第/m,3节/mq,中/f,的/u,说明/v,。/w,对于/p,不/d,想/v,自己/r,重新/d,费时/a,训练/vn,，/w,或者/c,想/v,快速/d,搭建/v,一个/m,基于/p,内容/n,的/u,图片/n,检索/v,系统/n,的/u,同学/n,，/w,这里/r,也/d,提供/v,了/u,100/m,w/en,图片/n,上/f,训练/vn,得到/v,的/u,卷积/nw,神经/n,网络/n,模型/n,供/v,大家/r,使用/v,。/w,这里/r,提供/v,了/u,2个/m,预先/d,训练/vn,好/a,的/u,模型/n,，/w,供/v,大家/r,提取/v,『/w,图像/n,特征/n,』/w,和/c,『/w,二值/nw,检索/v,串/v,』/w,用/p,。/w,2个/m,模型/n,训练/vn,的/u,数据集/nw,一致/a,，/w,卷积/nw,神经/n,网络/n,搭建/v,略/d,有/v,不同/a,。/w,对于/p,几万/nw,到/v,十几万/nw,级别/n,的/u,小/a,量级/n,图片/n,建立/v,检索/v,系统/n,，/w,请/v,使用/v,模型/n,image/en,_,retrieval/en,_,20/m,_,hash/en,_,code/en,./w,caffemodel/en,，/w,对于/p,百万/nw,以上/f,的/u,图片/n,建立/v,检索/v,系统/n,，/w,请/v,使用/v,模型/n,image/en,_,retrieval/en,_,128/m,_,hash/en,_,code/en,./w,caffemodel/en,。/w,对于/p,同一/b,张/q,图片/n,，/w,两者/r,产出/vn,的/u,特征/n,均/d,为/p,4096/m,维度/n,，/w,但/c,用作/v,分桶/nw,的/u,『/w,二值/nw,检索/v,向量/n,』/w,长度/n,，/w,前者/r,为/p,20/m,，/w,后者/r,为/p,128/m,。/w,模型/n,下载/v,地址/n,为/p,云盘/nw,地址/n,。/w,傻瓜式/n,环境/n,配置/vn,手册/n,1/m,./w,关于/p,系统/n,这个/r,说明/v,是/v,关于/p,linux/en,系统/n,的/u,，/w,最好/d,是/v,centos/en, ,7.0/m,以上/f,，/w,或者/c,ubuntu/en, ,14.04/m, ,以上/f,。/w,低/a,版本/n,的/u,系统/n,可能/v,会/v,出现/v,boost/en,，/w,opencv/en,等/u,库/n,版本/n,不/d,兼容/v,问题/n,。/w,2/m,./w, ,centos/en,配置/vn,方法/n,2.1/m, ,配置/vn,yum/en,源/ng,配置/vn,合适/a,的/u,yum/en,源/ng,是/v,一种/mq,『/w,偷懒/v,』/w,的/u,办法/n,，/w,可以/v,简化/v,很