【/w,计算机/n,视觉/n,】形态学/nw,滤波/v,标签/n,（/w,空格/n,分隔/v,）/w,：/w, ,【/w,图像/n,处理/v,】/w, ,【/w,信号/n,处理/v,】/w,版权/n,声明/n,：/w,本文/r,为/p,博主/nr,原创/b,文章/n,，/w,转载/v,请/v,注明/v,出处/n,http/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,lg/en,1259156776/m,//w,。/w,说明/v,：/w,本文/r,主要/b,想/v,弄/v,清楚/a,形态学/n,滤波/v,在/p,图象/nw,处理/v,和/c,信号/n,处理/v,中/f,的/u,应用/vn,，/w,图像/n,处理/v,中/f,非常/d,直观/a,的/u,通过/p,腐蚀/v,膨胀/v,获得/v,开闭/nw,运算/vn,的/u,效果/n,，/w,而/c,在/p,数据/n,实时/n,滤波/v,中/f,，/w,形态学/n,滤波/v,也/d,是/v,可以/v,使用/v,的/u,。/w,形态学/n,滤波/v,基本/a,知识/n,原理/n,：/w,在/p,特殊/a,领域/n,运算/vn,形式/n,——/w,结构/n,元素/n,（/w,sturcture/en, ,element/en,）/w,，/w,在/p,每个/r,像素/n,位置/n,上/f,与/p,二值/nw,图像/n,对应/v,的/u,区域/n,进行/v,特定/b,的/u,逻辑/n,运算/vn,。/w,运算/vn,结构/n,是/v,输出/v,图像/n,的/u,相应/v,像素/n,。/w,运算/vn,效果/n,取决于/v,结构/n,元素/n,大小/n,内容/n,以及/c,逻辑/n,运算/vn,性质/n,。/w,膨胀/v,、/w,腐蚀/v,、/w,开/v,、/w,闭运/nw,算是/v,数学/n,形态学/n,最/d,基本/a,的/u,变换/v,。/w,结构/n,元素/n,简单/a,地/u,定义/n,为/p,像素/n,的/u,结构/n,（/w,形状/n,）/w,以及/c,一个/m,原点/n,（/w,又/d,称为/v,锚点/nw,）/w,，/w,使用/v,形态学/n,滤波/v,涉及/v,对/p,图像/n,的/u,每个/r,像素/n,应用/vn,这个/r,结构/n,元素/n,，/w,当/p,结构/n,元素/n,的/u,原点/n,与/p,给/p,定/v,的/u,像素/n,对/p,齐/d,时/ng,，/w,它/r,与/p,图像/n,相交/v,部分/n,定义/n,了/u,一组/mq,进行/v,形态学/n,运算/vn,的/u,像素/n,。/w,原则/n,上/f,，/w,结构/n,元素/n,可以/v,是/v,任何/r,形状/n,，/w,但/c,通常/d,使用/v,简单/a,的/u,形状/n,，/w,比如/v,方形/n,、/w,圆形/n,和/c,菱形/n,，/w,而/c,原点/n,位于/v,中心/n,位置/n,（/w,基于/p,效率/n,的/u,考虑/v,）/w,。/w,腐蚀/v,和/c,膨胀/v,两个/m,滤波/v,操作/v,也/d,运算/vn,在/p,每个/r,像素/n,周围/f,像素/n,集合/v,上/f,（/w,邻域/nw,）/w,，/w,这/r,是/v,由/p,结构/n,元素/n,定义/n,的/u,。/w,当/p,应用/vn,到/v,一个/m,给/p,定/v,的/u,像素/n,时/ng,，/w,结构/n,元素/n,的/u,锚点/nw,与/p,该/r,像素/n,的/u,位置/n,对/p,齐/d,，/w,而/c,所有/b,与/p,他/r,相交/v,的/u,像素/n,都/d,被/p,包括/v,在/p,当前/t,像素/n,集合/v,中/f,。/w,腐蚀/v,替换/v,当前/t,像素/n,为/p,像素/n,集合/v,中/f,找到/v,的/u,最/d,小/a,的/u,像素/n,值/n,，/w,而/c,膨胀/v,则/d,替换/v,为/p,像素/n,集合/v,中/f,找到/v,的/u,最大/a,像素/n,值/n,。/w,当然/d,，/w,对于/p,二值/nw,图像/n,，/w,每个/r,像素/n,只能/v,被/p,替换/v,为/p,白色/n,像素/n,或/c,黑色/n,像素/n,。/w,这/r,一段/mq,的/u,论述/vn,，/w,可以/v,参考/v,opencv/en,计算机/n,视觉/n, ,编程/vn,手册/n,。/w,对于/p,腐蚀/v,和/c,膨胀/v,的/u,差别/n,，/w,可以/v,通过/p,想象/v,，/w,腐蚀/v,呢/y,，/w, ,如果/c,给定/vn,像素/n,的/u,结构/n,元素/n,触/v,碰到/v,背景/n,，/w,那么/r,该/r,像素/n,被/p,设置/v,为/p,背景/n,，/w,而/c,在/p,膨胀/v,的/u,情况/n,下/f,，/w,如果/c,触/v,碰到/v,前景/n,，/w,该/r,像素/n,被/p,设置/v,为/p,前景/n,，/w,所以/c,很/d,明显/a,，/w,腐蚀/v,操作/v,后/f,物体/n,的/u,尺寸/n,会/v,减小/v,，/w,而/c,膨胀/v,操作/v,后/f,物体/n,的/u,尺寸/n,会/v,增大/v,，/w,同时/c,内部/f,的/u,一些/m,洞/n,被/p,填/v,满/a,。/w,事实上/l,，/w,腐蚀/v,一副/mq,图像/n,两次/mq,，/w,就/d,像/v,是/v,让/v,结构/n,元素/n,对/p,自己/r,进行/v,膨胀/v,后/f,再/d,去/v,腐蚀/v,同一/b,幅/q,图像/n,；/w,反过来/d,对/p,膨胀/v,也/d,是/v,合适/a,的/u,。/w,有/v,下面/f,两种/mq,说法/n,：/w,对/p,图像/n,的/u,腐蚀/v,操作/v,等于/v,对/p,图像/n,负片/n,的/u,膨胀/v,操作/v,的/u,负片/n,；/w,对/p,图像/n,的/u,膨胀/v,操作/v,等于/v,对/p,图像/n,负片/n,的/u,腐蚀/v,操作/v,的/u,负片/n,；/w,实际上/d,说/v,的/u,是/v,对/p,目标/n,进行/v,的/u,腐蚀/v,，/w,等效/v,于/p,对/p,背景/n,进行/v,的/u,膨胀/v,；/w,反之亦然/l,。/w,腐蚀/v,的/u,最/d,简单/a,的/u,应用/vn,是/v,从/p,图/n,中/f,消除/v,不/d,相关/v,的/u,细节/n,，/w,而/c,膨胀/v,的/u,最/d,简单/a,的/u,应用/vn,是/v,将/d,裂缝/n,桥/n,接/v,起来/v,。/w,开运/v,算是/v,先/d,腐蚀/v,再/d,膨胀/v,，/w,开/v,运算/vn,一般/a,断开/v,狭窄/a,的/u,间断/v,和/c,消除/v,细/a,的/u,突出/a,物/ng,，/w,而/c,闭/v,操作/v,通常/d,消弥/nw,狭窄/a,的/u,间断/v,和/c,长细/nw,的/u,鸿沟/n,，/w,消除/v,小/a,的/u,孔洞/n,，/w,并/c,填充/v,轮廓线/nz,中/f,的/u,断裂/v,。/w,开/v,运算/vn,与/p,闭/v,运算/vn,的/u,结合/v,使用/v,能/v,使/v,作用/n,对象/n,的/u,轮廓/n,变/v,得/u,光滑/a,。/w,开运/v,算是/v,先/d,腐蚀/v,再/d,膨胀/v,，/w,而/c,闭/v,运算/vn,是/v,先/d,膨胀/v,再/d,腐蚀/v,；/w,在/p,检验/v,闭滤波器/nw,的/u,结果/n,时/ng,，/w,可以/v,看到/v,白色/n,前景/n,物体/n,中/f,的/u,小/a,洞/n,被/p,填充/v,，/w,该/r,滤波器/n,同时/c,连接/v,多/a,个/q,相邻/v,物体/n,，/w,基本上/d,，/w,无法/v,完全/ad,包含/v,结构/n,元素/n,的/u,洞洞/nw,或者/c,缝隙/n,都/d,将/d,被/p,滤波器/n,移除/v,。/w,反过来/d,，/w,开滤波器/nw,则/d,是/v,移除/v,掉/v,场景/n,中/f,比较/d,小/a,的/u,物体/n,，/w,因为/c,它/r,门/n,无法/v,完全/ad,包含/v,结构/n,元素/n,。/w,这些/r,滤波器/n,通常/d,在/p,物体/n,检测/vn,中/f,应用/vn,，/w,闭滤波器/nw,将/d,误/v,分割/v,为/p,碎片/n,的/u,物体/n,重新/d,连接/v,起来/v,，/w,而/c,开滤波器/nw,则/d,去/v,除掉/v,图像/n,噪声/n,点/q,引起/v,的/u,小像/nw,素块/nr,（/w,blob/en,）/w,。/w,因此/c,，/w,在/p,视频/n,序列/n,中/f,使用/v,他们/r,很/d,有/v,帮助/v,，/w,如果/c,测试/vn,的/u,二值/nw,图像/n,相继/d,使用/v,闭/v,、/w,开/v,操作/v,，/w,获得/v,图像/n,将/d,只/d,显示/v,场景/n,中/f,的/u,主要/b,物体/n,。/w,如果/c,优先/v,处理/v,噪点/nw,，/w,也/d,可以/v,先/d,进行/v,开/v,运算/vn,，/w,再/d,进行/v,闭/v,运算/vn,，/w,但是/c,有/v,可能/v,去/v,除掉/v,一些/m,分散/v,的/u,物体/n,。/w,需要/v,注意/v,的/u,是/v,，/w,对于/p,对于/p,一幅/mq,图像/n,多次/m,使用/v,相同/a,的/u,开/v,运算/vn,或者/c,闭/v,运算/vn,是/v,没有/v,效果/n,的/u,，/w,因为/c,在/p,第一/m,次/q,闭/v,（/w,开/v,）/w,运算/vn,填充/v,图像/n,中/f,的/u,洞洞/nw,后/f,，/w,再次/d,应用/vn,相同/a,的/u,滤波/v,，/w,不/d,会/v,对/p,图像/n,产生/v,任何/r,变化/vn,。/w,用/p,数学/n,的/u,术语/n,讲/v,，/w,这些/r,运算/vn,是/v,等/u,幂/n,的/u,。/w,使用/v,形态学/n,滤波/v,对/p,图像/n,进行/v,边缘/n,及/c,角点/nw,检测/vn,形态学/n,滤波/v,可以/v,用于/v,检测/vn,图像/n,中/f,指定/v,的/u,特征/n,。/w,一种/mq,比较/d,形象/n,的/u,方法/n,是/v,将/d,灰度/n,图像/n,看做/v,是/v,“/w,等高线/n,”/w,（/w,比如/v,分水岭/n,图像/n,分割/v,算法/n,）/w,：/w,亮/v,的/u,区域/n,代表/n,山峰/n,，/w,而/c,暗/ad,的/u,区域/n,代表/n,山谷/n,，/w,图像/n,的/u,边沿/p,就/d,对应/v,于/p,峭壁/n,。/w,如果/c,腐蚀/v,一幅/mq,图像/n,，/w,会/v,导致/v,山谷/n,被/p,扩展/v,，/w,而/c,峭壁/n,减少/v,了/u,。/w,相反/v,的/u,，/w,如果/c,膨胀/v,一幅/mq,图像/n,，/w,峭壁/n,则/d,会/v,增加/v,。/w,但是/c,这/r,两种/mq,情况/n,下/f,，/w,中间/f,的/u,部分/n,（/w,大片/n,的/u,谷底/s,和/c,高原/n,）/w,基本/a,保持/v,不/d,变/v,。/w,在/p,上述/b,理解/v,的/u,基础/n,上/f,，/w,如果/c,我们/r,对/p,图像/n,的/u,腐蚀/v,和/c,膨胀/v,的/u,结果/n,做/v,差/a,，/w,就/d,能/v,提取/v,图像/n,的/u,边界/n,：/w,因为/c,边界/n,区域/n,，/w,二者/r,完全/ad,不同/a,。/w,（/w,实际上/d,，/w,我们/r,也/d,可以/v,用/p,腐蚀/v,或者/c,膨胀/v,的/u,结果/n,与/p,源/ng,图像/n,做/v,差/a,得出/v,类似/v,结果/n,，/w,但/c,提取/v,的/u,边界/n,会/v,比较/d,细/a,）/w,。/w,可以/v,看出/v,，/w,结构元/nw,越/d,大/a,，/w,边界/n,越/d,粗/a,。/w,在/p,opencv/en,中/f,，/w,将/d,形态学/n,操作/v,函数/n,morphologyex/en, ,的/u,第/m,4个/m,参数/n,设/v,为/p,morph/en,_,gradient/en,，/w,就/d,能/v,完成/v,上述/b,工作/vn,。/w,利用/v,形态学/n,操作/v,获取/v,角点/nw,稍微/d,有/v,一些/m,复杂/a,，/w,它/r,试用/v,了/u,四种/mq,不同/a,的/u,结构/n,元素/n,，/w,基本/a,方法/n,是/v,对/p,一幅/mq,图像/n,先/d,腐蚀/v,，/w,在/p,膨胀/v,。/w,但是/c,这/r,两次/mq,操作/v,使用/v,的/u,结构元/nw,却/d,不同/a,。/w,这些/r,结构元/nw,的/u,选取/v,使得/v,直线/n,保持/v,不/d,变/v,，/w,但是/c,由于/c,他们/r,各自/r,作用/n,的/u,效果/n,，/w,角点/nw,处/n,的/u,边沿/p,被/p,影响/vn,了/u,。/w,我们/r,结合/v,一幅/mq,图来/nrf,说明/v,：/w,第一/m,幅/q,图/n,是/v,原/b,图/n,。/w,在/p,被/p,十字形/nw,元素/n,膨胀/v,后/f,，/w,方块/n,的/u,边缘/n,被/p,扩张/v,，/w,而/c,由于/c,十字形/nw,元素/n,没有/v,击中/v,角点/nw,，/w,此处/s,不/d,受/v,影响/vn,。/w,中间/f,的/u,方块/n,描述/v,了/u,这个/r,结果/n,；/w,膨胀/v,后/f,的/u,图像/n,接着/c,被/p,菱形/n,元素/n,腐蚀/v,，/w,这次/r,运算/vn,将/d,大多数/m,的/u,边缘/n,恢复/v,到/v,原始/a,位置/n,，/w,但/c,之前/f,没有/v,膨胀/v,过/u,的/u,角点/nw,被/p,向/p,内/f,推动/v,，/w,之后/f,得到/v,了/u,左边/f,的/u,方块/n,，/w,可以/v,看到/v,，/w,他/r,缺少/v,明显/a,的/u,角点/nw,。/w,同样/d,的/u,处理/v,过程/n,通过/p,x/en,形/ng,与/p,方形/n,元素/n,得到/v,重复/v,。/w,这/r,两个/m,元素/n,结构/n,是/v,先前/t,元素/n,的/u,旋转/v,版本/n,，/w,捕获/v,的/u,将/d,是/v,45°/mq,旋转/v,后/f,的/u,角点/nw,。/w,最后/f,，/w,对/p,两次/mq,过程/n,的/u,结果/n,做/v,差值/n,，/w,提取/v,角点/nw,特征/n,。/w,代码/n,可以/v,参考/v,参考/v,文献/n,3/m,./w,形态学/n,滤波/v,之/u,图象/nw,处理/v,一般/a,腐蚀/v,操作/v,对/p,二值/nw,图/n,进行/v,处理/v,，/w,腐蚀/v,操作/v,如下/v,图/n,，/w,中心/n,位置/n,的/u,像素/n,点/q,是否/v,与/p,周围/f,领域/n,的/u,像素/n,点/q,颜色/n,一样/u,（/w,即/v,是否/v,是/v,白色/n,点/q,，/w,即值/nw,是否/v,为/p,255/m,）/w,，/w,若/c,一致/a,，/w,则/d,保留/v,，/w,不/d,一致/a,则/d,该/r,点/q,变为/v,黑色/n,（/w,值/n,即/v,为/p,0/m,）/w,opencv/en,中/f,的/u,腐蚀/v,操作/v,：/w,cvapi/en,(/w,void/en,)/w, ,cverode/en,(/w, ,const/en, ,cvarr/en,*/w, ,src/en,,/w, ,cvarr/en,*/w, ,dst/en,,/w, ,iplconvkernel/en,*/w, ,element/en, ,cv/en,_,default/en,(/w,null/en,)/w,,/w, ,int/en, ,iterations/en, ,cv/en,_,default/en,(/w,1/m,)/w, ,)/w,;/w,前/f,两个/m,参数/n,比较/d,熟悉/v,，/w,第三/nw,个/q,参数/n,是/v,用于/v,传递/v,模板/n,的/u,信息/n,，/w,默认/v,是/v,（/w,null/en,）/w,，/w,即/v,为/p,3/m,*/w,3/m,的/u,模板/n,，/w,第四/nw,个/q,参数/n,是/v,迭代/vn,的/u,次数/n,（/w,即/v,该/r,腐蚀/v,操作/v,做/v,几/m,次/q,）/w,；/w,opencv/en,中/f,的/u,膨胀/v,操作/v,其实/d,就/d,是/v,腐蚀/v,的/u,反/v,操作/v,：/w,cvapi/en,(/w,void/en,)/w, ,cvdilate/en,(/w, ,const/en, ,cvarr/en,*/w, ,src/en,,/w, ,cvarr/en,*/w, ,dst/en,,/w, ,iplconvkernel/en,*/w, ,element/en, ,cv/en,_,default/en,(/w,null/en,)/w,,/w, ,int/en, ,iterations/en, ,cv/en,_,default/en,(/w,1/m,)/w, ,)/w,;/w,测试/vn,代码/n,：/w,#,include/en, ,“/w,stdafx/en,./w,h/en,”/w,#,include/en, ,“/w,cv/en,./w,h/en,”/w,#,include/en, ,“/w,highgui/en,./w,h/en,”/w,int/en, ,main/en,(/w,)/w,{/w, ,iplimage/en, ,*/w,img/en,=/w, ,cvloadimage/en,(/w,"/w,c/en,:/w,//w,fu/en,./w,jpg/en,"/w,)/w,;/w,//w,//w,读/v,取/v,图片/n, ,cvnamedwindow/en,(/w,"/w,example/en,1/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvnamedwindow/en,(/w,"/w,example/en,2/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvnamedwindow/en,(/w,"/w,example/en,3/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvshowimage/en,(/w,"/w,example/en,1/m,"/w,,/w,img/en,)/w,;/w,//w,//w,在/p,example/en,1/m,显示/v,图片/n, ,//w,//w, ,cvcopy/en,(/w,img/en,,/w,temp/en,)/w,;/w, ,iplimage/en,*/w, ,temp/en,=/w,cvcreateimage/en,(/w, ,//w,//w,创建/v,一个/m,size/en,为/p,image/en,,/w,三/m,通道/n,8位/mq,的/u,彩色/b,图/n, ,cvgetsize/en,(/w,img/en,)/w,,/w, ,ipl/en,_,depth/en,_,8/m,u/en,,/w, ,3/m, ,)/w,;/w, ,cverode/en,(/w,img/en,,/w,temp/en,,/w,0/m,,/w,1/m,)/w,;/w,//w,//w,腐蚀/v, ,cvshowimage/en,(/w,"/w,example/en,2/m,"/w,,/w,temp/en,)/w,;/w, ,cvdilate/en,(/w,img/en,,/w,temp/en,,/w,0/m,,/w,1/m,)/w,;/w,//w,//w,膨胀/v, ,cvshowimage/en,(/w,"/w,example/en,3/m,"/w,,/w,temp/en,)/w,;/w, ,cvwaitkey/en,(/w,0/m,)/w,;/w,//w,//w,暂停/v,用于/v,显示/v,图片/n, ,cvreleaseimage/en,(/w,&/w,img/en,)/w,;/w,//w,//w,释放/v,img/en,所/u,指向/vn,的/u,内存/n,空间/n,并且/c, ,cvdestroywindow/en,(/w,"/w,example/en,1/m,"/w,)/w,;/w, ,cvdestroywindow/en,(/w,"/w,example/en,2/m,"/w,)/w,;/w, ,cvdestroywindow/en,(/w,"/w,example/en,3/m,"/w,)/w,;/w, ,return/en, ,0/m,;/w, ,}/w,以上/f,都/d,是/v,在/p,模板/n,3/m,*/w,3/m,的/u,情况/n,下/f,处理/v,的/u,，/w,要是/c,我们/r,期望/v,使用/v,自己/r,定义/n,的/u,模板/n,时候/n,，/w,就/d,需要/v,自己/r,做/v,模板/n,。/w,cvapi/en,(/w,iplconvkernel/en,*/w,)/w, ,cvcreatestructuringelementex/en,(/w, ,int/en, ,cols/en,,/w, ,int/en, ,rows/en,,/w, ,int/en, ,anchor/en,_,x/en,,/w, ,int/en, ,anchor/en,_,y/en,,/w, ,int/en, ,shape/en,,/w, ,int/en,*/w, ,values/en, ,cv/en,_,default/en,(/w,null/en,)/w, ,)/w,;/w,前/f,两个/m,参数/n,是/v,定义/n,模板/n,的/u,大小/n,，/w,后/f,两个/m,参数/n,是/v,参考点/nw,的/u,坐标/n,（/w,比如/v,默认/v,3/m,*/w,3/m,模板/n,的/u,参考点/nw,坐标/n,是/v,2/m,*/w,2/m,）/w,，/w,第五/nw,个/q,参数/n,是/v,模板/n,的/u,类型/n,(/w,可以/v,是/v,矩形/n,，/w,十字形/nw,，/w,椭圆形/n,，/w,甚至/d,是/v,用户/n,自己/r,定义/n,形状/n,)/w,，/w,最后/f,一个/m,参数/n,是/v,在/p,使用/v,自/p,自/p,定义/n,形状/n,的/u,时候/n,，/w,通过/p,value/en,传递/v,模板/n,的/u,形状/n,。/w,模板/n,的/u,类型/n,：/w,cvapi/en,(/w,void/en,)/w, ,cvreleasestructuringelement/en,(/w, ,iplconvkernel/en,*/w,*/w, ,element/en, ,)/w,;/w, ,//w,//w,释放/v,模板/n,所/u,占用/v,的/u,内存/n,自/p,定义/n,5/m,*/w,5/m,,/w,参考点/nw,（/w,3/m,,/w,3/m,）/w,的/u,矩形/n,模板/n,的/u,测试/vn,代码/n,：/w,#,include/en, ,"/w,stdafx/en,./w,h/en,"/w, ,#,include/en, ,"/w,cv/en,./w,h/en,"/w, ,#,include/en, ,"/w,highgui/en,./w,h/en,"/w, ,int/en, ,main/en,(/w,)/w,{/w, ,iplimage/en, ,*/w,img/en,=/w, ,cvloadimage/en,(/w,"/w,c/en,:/w,//w,fu/en,./w,jpg/en,"/w,)/w,;/w,//w,//w,读/v,取/v,图片/n, ,cvnamedwindow/en,(/w,"/w,example/en,1/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvnamedwindow/en,(/w,"/w,example/en,2/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvnamedwindow/en,(/w,"/w,example/en,3/m,"/w,,/w,cv/en,_,window/en,_,autosize/en,)/w,;/w, ,cvshowimage/en,(/w,"/w,example/en,1/m,"/w,,/w,img/en,)/w,;/w,//w,//w,在/p,example/en,1/m,显示/v,图片/n, ,//w,//w, ,cvcopy/en,(/w,img/en,,/w,temp/en,)/w,;/w, ,iplimage/en,*/w, ,temp/en,=/w,cvcreateimage/en,(/w, ,//w,//w,创建/v,一个/m,size/en,为/p,image/en,,/w,三/m,通道/n,8位/mq,的/u,彩色/b,图/n, ,cvgetsize/en,(/w,img/en,)/w,,/w, ,ipl/en,_,depth/en,_,8/m,u/en,,/w, ,3/m, ,)/w,;/w, ,iplconvkernel/en, ,*/w, ,mymodel/en,;/w, ,mymodel/en,=/w,cvcreatestructuringelementex/en,(/w, ,//w,//w,自/p,定义/n,5/m,*/w,5/m,,/w,参考点/nw,（/w,3/m,,/w,3/m,）/w,的/u,矩形/n,模板/n, ,5/m,,/w,5/m,,/w,2/m,,/w,2/m,,/w,cv/en,_,shape/en,_,rect/en, ,)/w,;/w, ,cverode/en,(/w,img/en,,/w,temp/en,,/w,mymodel/en,,/w,1/m,)/w,;/w, ,cvshowimage/en,(/w,"/w,example/en,2/m,"/w,,/w,temp/en,)/w,;/w, ,cvdilate/en,(/w,img/en,,/w,temp/en,,/w,mymodel/en,,/w,1/m,)/w,;/w, ,cvshowimage/en,(/w,"/w,example/en,3/m,"/w,,/w,temp/en,)/w,;/w, ,cvwaitkey/en,(/w,0/m,)/w,;/w,//w,//w,暂停/v,用于/v,显示/v,图片/n, ,cvreleasestructuringelement/en,(/w,&/w,mymodel/en,)/w,;/w, ,cvreleaseimage/en,(/w,&/w,img/en,)/w,;/w,//w,//w,释放/v,img/en,所/u,指向/vn,的/u,内存/n,空间/n,并且/c, ,cvdestroywindow/en,(/w,"/w,example/en,1/m,"/w,)/w,;/w, ,cvdestroywindow/en,(/w,"/w,example/en,2/m,"/w,)/w,;/w, ,cvdestroywindow/en,(/w,"/w,example/en,3/m,"/w,)/w,;/w, ,return/en, ,0/m,;/w, ,}/w,效果/n,图/n,：/w,形态学/n,滤波/v,之/u,信号/n,处理/v,数学/n,形态学/n,的/u,方法/n,可以/v,理解/v,为/p,一个/m,具有/v,一定/d,直径/n,的/u,小球/n,滚/v,过/u,一段/mq,特定/b,的/u,路径/n,,/w,各种/r,信号/n,可以/v,看作/v,是/v,路径/n,上/f,的/u,小坑/nw,。/w,由于/c,所有/b,的/u,噪声/n,都/d,有/v,个/q,共同/d,特征/n,一一/d,高频/b,低峰/nw,（/w,它们/r,构成/v,非常/d,复杂/a,,/w,由/p,各种/r,混合/vn,在/p,眼电/nw,信号/n,中/f,的/u,其他/r,成份/n,或/c,眼球/n,快速/d,、/w,微小/a,、/w,空间/n,大小/n,不/d,超过/v,1/m,“/w,的/u,运动/n,导致/v,)/w,,/w,这些/r,小坑/nw,的/u,径长/nw,明显/a,小于/v,小球/n,直径/n,,/w,因此/c,小球/n,球心/n,的/u,滚动/v,轨迹/n,不/d,会/v,受/v,噪声/n,的/u,干扰/v,一一/d,小球/n,球心/n,滚动/v,轨迹/n,即/v,可以/v,看成/v,数学/n,形态学/n,处理/v,后/f,的/u,信号/n,。/w,本/r,系统/n,中/f,用/p,到/v,的/u,数学/n,形态学/n,算子/n,包括/v,腐蚀/v,运算/vn,、/w,膨胀/v,运算/vn,、/w,开/v,操作/v,、/w,闭/v,操作/v,。/w,腐蚀/v,的/u,最/d,简单/a,的/u,应用/vn,是/v,从/p,图/n,中/f,消除/v,不/d,相关/v,的/u,细节/n,，/w,而/c,膨胀/v,的/u,最/d,简单/a,的/u,应用/vn,是/v,将/d,裂缝/n,桥/n,接/v,起来/v,。/w,开运/v,算是/v,先/d,腐蚀/v,再/d,膨胀/v,，/w,开/v,运算/vn,一般/a,断开/v,狭窄/a,的/u,间断/v,和/c,消除/v,细/a,的/u,突出/a,物/ng,，/w,而/c,闭/v,操作/v,通常/d,消弥/nw,狭窄/a,的/u,间断/v,和/c,长细/nw,的/u,鸿沟/n,，/w,消除/v,小/a,的/u,孔洞/n,，/w,并/c,填充/v,轮廓线/nz,中/f,的/u,断裂/v,。/w,开/v,运算/vn,与/p,闭/v,运算/vn,的/u,结合/v,使用/v,能/v,使/v,作用/n,对象/n,的/u,轮廓/n,变/v,得/u,光滑/a,。/w,#,include/en, ,</w,stdio/en,./w,h/en,>, ,#,include/en, ,</w,fcntl/en,./w,h/en,>, ,//w,//w,#,include/en, ,</w,sys/en,//w,types/en,./w,h/en,>, ,//w,//w,#,include/en, ,</w,sys/en,//w,stats/en,./w,h/en,>, ,#,include/en, ,</w,time/en,./w,h/en,>, ,#,define/en, ,n/en, ,5/m, ,//w,//w,结构/n,元素/n,。/w,大小/n,设置/v,根据/p,滤除/nw,波形/n,一个/m,周期/n,中/f,点/q,个/q,数/m,来/v,定/v,。/w,例如/v,：/w,采样率/nw,250/m,，/w,滤除/nw,50/m,hz/en,，/w, ,//w,//w,因为/c,50/m,hz/en,一个/m,周期/n,中/f,有/v,5个点/mq,，/w,所以/c,n/en,设/v,为/p,5/m,。/w, ,float/en, ,x/en,[/w,3/m,*/w,n/en,+/w,2/m,]/w,=/w,{/w,0.0/m,}/w,;/w, ,void/en, ,openoperate/en,(/w,float/en, ,input/en,[/w,]/w,,/w,float/en, ,dilation/en,[/w,]/w,)/w, ,//w,//w,开/v,运算/vn,：/w,先/d,腐蚀/v,再/d,膨胀/v, ,{/w, ,int/en, ,i/en,,/w,k/en,,/w,t/en,;/w, ,float/en, ,tmp/en,;/w, ,t/en,=/w,2/m,*/w,n/en,+/w,3/m,;/w, ,float/en, ,erosion/en,[/w,2/m,*/w,n/en,+/w,3/m,]/w,;/w, ,for/en,(/w,k/en,=/w,0/m,;/w,k/en,</w,t/en,;/w,k/en,+/w,+/w,)/w,{/w, ,tmp/en,=/w,input/en,[/w,k/en,]/w,;/w, ,for/en,(/w,i/en,=/w,k/en,+/w,1/m,;/w,i/en,</w,k/en,+/w,n/en,;/w,i/en,+/w,+/w,)/w,{/w, ,if/en,(/w,tmp/en,>,input/en,[/w,i/en,]/w,)/w, ,tmp/en,=/w,input/en,[/w,i/en,]/w,;/w, ,}/w, ,erosion/en,[/w,k/en,]/w,=/w,tmp/en,;/w, ,}/w, ,t/en,=/w,t/en,-/w,3/m,;/w, ,for/en,(/w,k/en,=/w,0/m,;/w,k/en,</w,t/en,;/w,k/en,+/w,+/w,)/w,{/w, ,tmp/en,=/w,erosion/en,[/w,k/en,]/w,;/w, ,for/en,(/w,i/en,=/w,k/en,+/w,1/m,;/w,i/en,</w,k/en,+/w,n/en,;/w,i/en,+/w,+/w,)/w,{/w, ,if/en,(/w,tmp/en,</w,erosion/en,[/w,i/en,]/w,)/w, ,tmp/en,=/w,erosion/en,[/w,i/en,]/w,;/w, ,}/w, ,dilation/en,[/w,k/en,]/w,=/w,tmp/en,;/w, ,}/w, ,}/w, ,float/en, ,closeoperate/en,(/w,float/en, ,input/en,[/w,]/w,)/w, ,//w,//w,闭/v,运算/vn,：/w,先/d,膨胀/v,再/d,腐蚀/v, ,{/w, ,int/en, ,i/en,,/w,k/en,,/w,t/en,;/w, ,float/en, ,tmp/en,;/w, ,t/en,=/w,n/en,*/w,2/m,-/w,1/m,;/w, ,float/en, ,dilation/en,[/w,n/en,]/w,;/w, ,for/en,(/w,k/en,=/w,0/m,;/w,k/en,</w,n/en,;/w,k/en,+/w,+/w,)/w,{/w, ,tmp/en,=/w,input/en,[/w,k/en,]/w,;/w, ,for/en,(/w,i/en,=/w,k/en,+/w,1/m,;/w,i/en,</w,k/en,+/w,n/en,;/w,i/en,+/w,+/w,)/w,{/w, ,if/en,(/w,tmp/en,</w,input/en,[/w,i/en,]/w,)/w, ,tmp/en,=/w,input/en,[/w,i/en,]/w,;/w, ,}/w, ,dilation/en,[/w,k/en,]/w,=/w,tmp/en,;/w, ,}/w, ,tmp/en,=/w,dilation/en,[/w,0/m,]/w,;/w, ,for/en,(/w,k/en,=/w,1/m,;/w,k/en,</w,n/en,;/w,k/en,+/w,+/w,)/w,{/w, ,if/en,(/w,tmp/en,>,dilation/en,[/w,k/en,]/w,)/w, ,tmp/en,=/w,dilation/en,[/w,k/en,]/w,;/w, ,}/w, ,return/en, ,tmp/en,;/w, ,}/w, ,int/en, ,main/en,(/w,)/w, ,{/w, ,clock/en,_,t/en, ,start/en,,/w,end/en,;/w, ,double/en, ,duration/en,;/w, ,file/en, ,*/w,fd/en,,/w,*/w,m/en,_,fd/en,;/w, ,float/en, ,buffer/en,;/w, ,float/en, ,filter/en,_,data/en,;/w, ,float/en, ,openresult/en,[/w,2/m,*/w,n/en,-/w,1/m,]/w,;/w, ,m/en,_,fd/en,=/w,fopen/en,(/w,"/w,d/en,:/w,//w,data/en,./w,txt/en,"/w,,/w,"/w,r/en,+/w,"/w,)/w,;/w, ,if/en,(/w,m/en,_,fd/en,=/w,=/w,null/en,)/w,{/w, ,perror/en,(/w,"/w,open/en, ,error/en,!/w,"/w,)/w,;/w, ,return/en, ,-/w,1/m,;/w, ,}/w, ,fd/en,=/w,fopen/en,(/w,"/w,d/en,:/w,//w,data/en,1/m,./w,txt/en,"/w,,/w,"/w,w/en,+/w,"/w,)/w,;/w, ,if/en,(/w,fd/en,=/w,=/w,null/en,)/w,{/w, ,perror/en,(/w,"/w,open/en, ,error/en,!/w,"/w,)/w,;/w, ,return/en, ,-/w,1/m,;/w, ,}/w, ,start/en,=/w,clock/en,(/w,)/w,;/w, ,while/en,(/w,fscanf/en,(/w,m/en,_,fd/en,,/w,"/w,%/w,f/en,"/w,,/w,&/w,buffer/en,)/w,!/w,=/w,eof/en,)/w,{/w, ,x/en,[/w,3/m,*/w,n/en,+/w,1/m,]/w,=/w,buffer/en,;/w, ,openoperate/en,(/w,x/en,,/w,openresult/en,)/w,;/w, ,filter/en,_,data/en,=/w,closeoperate/en,(/w,openresult/en,)/w,;/w, ,fprintf/en,(/w,fd/en,,/w,"/