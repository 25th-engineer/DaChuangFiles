1/m,、/w,什么/r,是/v,基于/p,内容/n,的/u,图像/n,检索/v,1/m,、/w,构建/v,基于/p,内容/n,的/u,图像/n,检索/v,系统/n,步骤/n,（/w,1/m,）/w,定义/n,你/r,的/u,图像/n,描述符/n,：/w,在/p,这个/r,阶段/n,你/r,需要/v,决定/v,你/r,想/v,描述/v,的/u,图像/n,的/u,哪个/r,方面/n,。/w,你/r,对/p,图像/n,的/u,颜色/n,感/vg,兴趣/n,吗/y,？/w,图像/n,中/f,物体/n,的/u,形状/n,？/w,或者/c,你/r,想/v,表征/v,纹理/n,？/w,（/w,2/m,）/w,特征/n,提取/v,和/c,索引/n,您/r,的/u,数据集/nw,：/w, , ,现在/t,您/r,已经/d,定义/n,了/u,图像/n,描述符/n,，/w,您/r,的/u,工作/vn,是/v,将/d,此/r,图像/n,描述符/n,应用/vn,于/p,数据/n,集中/v,的/u,每个/r,图像/n,，/w,从/p,这些/r,图像/n,提取/v,特征/n,并/c,将/d,特征/n,写入/v,存储/vn,（/w,例如/v,，/w,csv/en,文件/n,，/w,rdbms/en, ,，/w,redis/en,等/u,）/w,，/w,以便/d,稍后/d,可以/v,比较/d,它们/r,的/u,相似性/n,。/w,此外/c,，/w,您/r,需要/v,考虑/v,是否/v,将/d,使用/v,任何/r,专门/d,的/u,数据/n,结构/n,来/v,促进/v,更/d,快/a,的/u,搜索/vn,。/w,（/w,3/m,）/w,定义/n,您/r,的/u,相似性/n,度量/v,：/w, , ,我们/r,现在/t,有/v,一个/m,（/w,可能/v,是/v,指数/n,）/w,特征/n,向量/n,的/u,集合/v,。/w,但/c,你/r,如何/r,比较/d,它们/r,的/u,相似性/n,呢/y,？/w,常用/a,选项/v,包括/v,欧/j,几/m,里/f,得/u,距离/n,，/w,余弦/n,距离/n,和/c,距离/n,，/w,但/c,实际/n,选择/v,高度/d,依赖/v,于/p,（/w,1/m,）/w,数据集/nw,和/c,（/w,2/m,）/w,您/r,提取/v,的/u,特征/n,类型/n,。/w,（/w,4/m,）/w,搜索/vn,：/w, , ,最后/f,一步/mq,是/v,执行/v,实际/n,搜索/vn,。/w,用户/n,将/d,向/p,系统/n,提交/v,查询/v,图像/n,（/w,例如/v,从/p,上传/v,表单/n,或/c,通过/p,移动/vn,应用/vn,程序/n,）/w,，/w,并且/c,您/r,的/u,工作/vn,将/d,（/w,1/m,）/w,从/p,该/r,查询/v,图像/n,中/f,提取/v,特征/n,，/w,然后/c,（/w,2/m,）/w,应用/vn,您/r,的/u,相似性/n,函数/n,进行/v,比较/d,该/r,查询/v,的/u,功能/n,已/d,针对/p,已/d,编入/v,索引/n,的/u,功能/n,。/w,从/p,那里/r,，/w,你/r,只/d,需/v,根据/p,你/r,的/u,相似/a,度/q,函数/n,返回/v,最/d,相关/v,的/u,结果/n,。/w,2/m,、/w,cbir/en,和/c,机器/n,学习/v,//w,图像/n,分类/vn,有/v,何/r,不同/a,（/w,1/m,）/w,机器/n,学习/v,包括/v,使/v,计算机/n,完成/v,诸如/v,预测/v,，/w,分类/vn,，/w,识别/v,等/u,智能/n,人工/n,任务/n,的/u,方法/n,。/w,此外/c,，/w,机器/n,学习/v,管理/vn,算法/n,，/w,使/v,计算机/n,能够/v,执行/v,这些/r,智能/n,任务/n, , ,而/c,不/d,需要/v,明确/ad,编程/vn,。/w,cbir/en,确实/ad,利用/v,了/u,一些/m,机器/n,学习/v,技术/n, ,-/w, ,即/v,降/v,维和/j,聚类/nw,，/w,但是/c,cbir/en,系统/n,不/d,执行/v,任何/r,实际/n,学习/v,。/w,（/w,2/m,）/w,主要/b,的/u, ,区别/n,在于/v,cbir/en,不/d, ,直接/ad,试图/v,理解/v,和/c,解释/v,图像/n,的/u,内容/n,。/w,相反/v,，/w,cbir/en,系统/n,依赖/v,于/p,：/w,通过/p,提取/v,特征/n,向/p,量/n,来/v,量化/v,图像/n,。/w,假设/v,特征/n,向量/n,的/u,比较/d, ,-/w, ,具有/v,相似/a,特征/n,向量/n,的/u,图像/n,具有/v,相似/a,的/u,视觉/n,内容/n,。/w,基于/p,这/r,两个/m,组件/n,，/w,图像/n,搜索引擎/n,能够/v,将/d,查询/v,与/p,图像/n,数据集/nw,进行/v,比较/d,，/w,并/c,返回/v,最/d,相关/v,的/u,结果/n,，/w,而/c,不必/d,实际/n,“/w,知道/v,”/w,图像/n,的/u,内容/n,。/w,（/w,3/m,）/w,在/p,机器/n,学习/v,和/c,图像/n,分类/vn,中/f,，/w,能够/v,学习/v,和/c,理解/v,图像/n,的/u,内容/n,需要/v,一些/m,训练/vn,集/vg,的/u,概念/n, , , , ,-/w, ,一组/mq,标记/n,数据/n,用于/v,教/v,计算机/n,数据/n,集中/v,每个/r,可视/v,对象/n,的/u,外观/n,。/w,（/w,4/m,）/w,cbir/en,系统/n,不/d,需要/v,标记/n,数据/n,。/w,他们/r,只/d,需/v,拍摄/v,图像/n,数据集/nw,，/w,从/p,每/r,幅/q,图像/n,中/f,提取/v,特征/n,，/w,并/c,使/v,数据集/nw,可以/v,在/p,视觉/n,上/f,搜索/vn,。/w,在/p,某些/r,方面/n,，/w,您/r,可以/v,将/d,cbir/en,系统/n,视为/v,一种/mq,“/w,哑/v,”/w,图像/n,分类器/nw,，/w,它/r,没有/v,标签/n,概念/n,来/v,使/v,自己/r,更加/d,智能/n, ,-/w, ,它/r,仅/d,依赖/v,于/p,（/w,1/m,）/w,从/p,图像/n,中/f,提取/v,的/u,特征/n,和/c,（/w,2/m,）/w,相似性/n,函数/n,用于/v,给/p,用户/n,提供/v,有/v,意义/n,的/u,结果/n,。/w,2/m,、/w,构建/v,cbir/en,系统/n,1/m,、/w,目录/n,结构/n,及/c,作用/n,|/w,---/nrf, ,pyimagesearch/en,|/w, , , , ,|/w,---/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w,---/nrf, ,cbir/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,dists/en,./w,py/en, , , , , ,作用/n,：/w,包含/v,我们/r,的/u,距离/n,度量/v,//w,相似/a,度/q,函数/n,，/w,用于/v,比较/d,两个/m,图像/n,的/u,相似/a,度/q,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,hsvdescriptor/en,./w,py/en, , ,作用/n,：/w,实现/v,我们/r,的/u,颜色/n,描述符/n,，/w,用于/v,从/p,图像/n,中/f,提取/v,特征/n,向量/n,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,resultsmontage/en,./w,py/en, ,作用/n,：/w,用于/v,显示/v,搜索/vn,到/v,我们/r,的/u,屏幕/n,结果/n,的/u,实用/vn,工具/n,类/q,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,searcher/en,./w,py/en, ,作用/n,：/w,将/d,封装/vn,用于/v,执行/v,实际/n,搜索/vn,的/u,searcher/en,类/q,|/w,---/nrf, ,index/en,./w,py/en, ,作用/n,：/w,用于/v,从/p,我们/r,的/u,ukbench/en,数据/n,集中/v,提取/v,特征/n,|/w,---/nrf, ,search/en,./w,py/en, , ,作用/n,：/w,将/d,接受/v,查询/v,图像/n,，/w,调用/v, ,搜索/vn,器/ng, , ,，/w,然后/c,将/d,结果/n,显示/v,在/p,屏幕/n,上/f,疑问/n,：/w,1/m,、/w,highlight/en,=/w,resultid/en, ,in/en, ,queryrelevant/en,2/m,、/w,对/p,第三/nw,条/q,运行/vn,结果/n,存在/v,疑问/n,运行/vn,命令/n,：/w,1/m,、/w,python/en, ,search/en,./w,py/en, ,--/nrf,index/en, ,index/en,./w,csv/en, ,--/nrf,dataset/en, ,./w,./w,//w,ukbench/en, ,--/nrf,relevant/en, ,./w,./w,//w,ukbench/en,//w,relevant/en,./w,json/en,--/nrf,query/en, ,./w,./w,//w,ukbench/en,//w,ukbench/en,00644/m,./w,jpg/en,2/m,、/w,python/en, ,search/en,./w,py/en, ,--/nrf,index/en, ,index/en,./w,csv/en, ,--/nrf,dataset/en, ,./w,./w,//w,ukbench/en, ,--/nrf,relevant/en, ,./w,./w,//w,ukbench/en,//w,relevant/en,./w,json/en,--/nrf,query/en, ,./w,./w,//w,ukbench/en,//w,ukbench/en,00996/m,./w,jpg/en,3/m,、/w,python/en, ,search/en,./w,py/en, ,--/nrf,index/en, ,index/en,./w,csv/en, ,--/nrf,dataset/en, ,./w,./w,//w,ukbench/en, ,--/nrf,relevant/en, ,./w,./w,//w,ukbench/en,//w,relevant/en,./w,json/en,--/nrf,query/en, ,./w,./w,//w,ukbench/en,//w,ukbench/en,00568/m,./w,jpgsearch/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,cbir/en,./w,resultsmontage/en, ,import/en, ,resultsmontage/en, ,from/en, ,pyimagesearch/en,./w,cbir/en,./w,hsvdescriptor/en, ,import/en, ,hsvdescriptor/en, ,from/en, ,pyimagesearch/en,./w,cbir/en,./w,searcher/en, ,import/en, ,searcher/en, ,import/en, ,argparse/en, ,import/en, ,imutils/en, ,import/en, ,json/en, ,import/en, ,cv/en,2/m, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,i/en,"/w,,/w, ,"/w,--/nrf,index/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,where/en, ,the/en, ,features/en, ,index/en, ,will/en, ,be/en, ,stored/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,q/en,"/w,,/w, ,"/w,--/nrf,query/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,query/en, ,image/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,original/en, ,dataset/en, ,directory/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,r/en,"/w,,/w, ,"/w,--/nrf,relevant/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,relevant/en, ,dictionary/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,desc/en, ,=/w, ,hsvdescriptor/en,(/w,(/w,4/m,,/w, ,6/m,,/w, ,3/m,)/w,)/w, ,montage/en, ,=/w, ,resultsmontage/en,(/w,(/w,240/m,,/w, ,320/m,)/w,,/w, ,5/m,,/w, ,20/m,)/w, ,relevant/en, ,=/w, ,json/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,relevant/en,"/w,]/w,)/w,./w,read/en,(/w,)/w,)/w, ,queryfilename/en, ,=/w, ,args/en,[/w,"/w,query/en,"/w,]/w,[/w,args/en,[/w,"/w,query/en,"/w,]/w,./w,rfind/en,(/w,"/w,//w,"/w,)/w, ,+/w, ,1/m,:/w,]/w, ,queryrelevant/en, ,=/w, ,relevant/en,[/w,queryfilename/en,]/w, ,query/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,args/en,[/w,"/w,query/en,"/w,]/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,describing/en, ,query/en,./w,./w,./w,"/w,)/w, ,cv/en,2/m,./w,imshow/en,(/w,"/w,query/en,"/w,,/w, ,imutils/en,./w,resize/en,(/w,query/en,,/w, ,width/en, ,=/w, ,320/m,)/w,)/w, ,features/en, ,=/w, ,desc/en,./w,describe/en,(/w,query/en,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,searching/en,./w,./w,./w,"/w,)/w, ,searcher/en, ,=/w, ,searcher/en,(/w,args/en,[/w,"/w,index/en,"/w,]/w,)/w, ,results/en, ,=/w, ,searcher/en,./w,search/en,(/w,features/en,,/w, ,numresults/en, ,=/w, ,20/m,)/w, ,for/en, ,(/w,i/en,,/w, ,(/w,score/en,,/w, ,resultid/en,)/w,)/w, ,in/en, ,enumerate/en,(/w,results/en,)/w,:/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,{/w,result/en,_,num/en,}/w,./w,{/w,result/en,}/w, ,-/w, ,score/en,:/w,./w,2/m,f/en,"/w,./w,format/en,(/w,result/en,_,num/en, ,=/w, ,i/en, ,+/w, ,1/m,,/w, ,result/en, ,=/w, ,resultid/en,,/w, ,score/en, ,=/w, ,score/en,)/w,)/w, ,result/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,"/w,{/w,}/w,//w,{/w,}/w,"/w,./w,format/en,(/w,args/en,[/w,"/w,dataset/en,"/w,]/w,,/w, ,resultid/en,)/w,)/w, ,print/en, ,(/w,"/w,resultid/en,"/w,)/w, ,print/en, ,(/w,resultid/en,)/w, ,montage/en,./w,addresult/en,(/w,result/en,,/w, ,text/en, ,=/w, ,"/w,#,{/w,}/w,"/w,./w,format/en,(/w,i/en, ,+/w, ,1/m,)/w,,/w, ,highlight/en, ,=/w, ,resultid/en, ,in/en, ,queryrelevant/en,)/w, ,cv/en,2/m,./w,imshow/en,(/w,"/w,results/en,"/w,,/w, ,imutils/en,./w,resize/en,(/w,montage/en,./w,montage/en,,/w, ,height/en, ,=/w, ,700/m,)/w,)/w, ,cv/en,2/m,./w,imwrite/en,(/w,"/w,mo/en,./w,png/en,"/w,,/w,montage/en,./w,montage/en,)/w, ,cv/en,2/m,./w,waitkey/en,(/w,0/m,)/w,index/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,cbir/en,./w,hsvdescriptor/en, ,import/en, ,hsvdescriptor/en, ,from/en, ,imutils/en, ,import/en, ,paths/en, ,import/en, ,progressbar/en, ,import/en, ,argparse/en, ,import/en, ,cv/en,2/m, ,ap/en,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,directory/en, ,that/en, ,contains/en, ,the/en, ,images/en, ,to/en, ,be/en, ,indexed/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,i/en,"/w,,/w, ,"/w,--/nrf,index/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,where/en, ,the/en, ,features/en, ,index/en, ,will/en, ,be/en, ,stored/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,desc/en, ,=/w, ,hsvdescriptor/en,(/w,(/w,4/m,,/w, ,6/m,,/w, ,3/m,)/w,)/w, ,output/en, ,=/w, ,open/en,(/w,args/en,[/w,"/w,index/en,"/w,]/w,,/w, ,"/w,w/en,"/w,)/w, ,imagepaths/en, ,=/w, ,list/en,(/w,paths/en,./w,list/en,_,images/en,(/w,args/en,[/w,"/w,dataset/en,"/w,]/w,)/w,)/w, ,widgets/en, ,=/w, ,[/w,"/w,indexing/en,:/w,"/w,,/w, ,progressbar/en,./w,percentage/en,(/w,)/w,,/w, ,"/w,"/w,,/w, ,progressbar/en,./w,bar/en,(/w,)/w,,/w, ,"/w,"/w,,/w, ,progressbar/en,./w,eta/en,(/w,)/w,]/w, ,pbar/en, ,=/w, ,progressbar/en,./w,progressbar/en,(/w,maxval/en, ,=/w, ,len/en,(/w,imagepaths/en,)/w,,/w, ,widgets/en, ,=/w, ,widgets/en,)/w, ,pbar/en,./w,start/en,(/w,)/w, ,for/en, ,(/w,i/en,,/w, ,imagepath/en,)/w, ,in/en, ,enumerate/en,(/w,imagepaths/en,)/w,:/w, ,filename/en, ,=/w, ,imagepath/en,[/w,imagepath/en,./w,rfind/en,(/w,"/w,//w,"/w,)/w, ,+/w, ,1/m,:/w,]/w, ,image/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,imagepath/en,)/w, ,features/en, ,=/w, ,desc/en,./w,describe/en,(/w,image/en,)/w, ,features/en, ,=/w, ,[/w,str/en,(/w,x/en,)/w, ,for/en, ,x/en, ,in/en, ,features/en,]/w, ,output/en,./w,write/en,(/w,"/w,{/w,}/w,,/w, ,{/w,}/w,\/w,n/en,"/w,./w,format/en,(/w,filename/en,,/w, ,"/w,,/w,"/w,./w,join/en,(/w,features/en,)/w,)/w,)/w, ,pbar/en,./w,update/en,(/w,i/en,)/w, ,pbar/en,./w,finish/en,(/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,indexed/en, ,{/w,}/w, ,images/en,"/w,./w,format/en,(/w,len/en,(/w,imagepaths/en,)/w,)/w,)/w, ,output/en,./w,close/en,(/w,)/w,dist/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,def/en, ,chi/en,2/m,_,distance/en,(/w,hista/en,,/w, ,histb/en,,/w, ,eps/en, ,=/w, ,1/m,e/en,-/w,10/m,)/w,:/w, ,d/en, ,=/w, ,0.5/m, ,*/w, ,np/en,./w,sum/en,(/w,(/w,(/w,hista/en, ,-/w, ,histb/en,)/w,*/w,*/w,2/m,)/w,//w,(/w,hista/en, ,+/w, ,histb/en, ,+/w, ,eps/en,)/w,)/w, ,return/en, ,dhsvdescriptor/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,cv/en,2/m, ,import/en, ,imutils/en, ,class/en, ,hsvdescriptor/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,bins/en,)/w,:/w, ,self/en,./w,bins/en, ,=/w, ,bins/en, ,def/en, ,describe/en,(/w,self/en,,/w, ,image/en,)/w,:/w, ,image/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,image/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,hsv/en,)/w, ,features/en, ,=/w, ,[/w,]/w, ,(/w,h/en,,/w, ,w/en,)/w, ,=/w, ,image/en,./w,shape/en,[/w,:/w,2/m,]/w, ,(/w,cx/en,,/w, ,cy/en,)/w, ,=/w, ,(/w,int/en,(/w,w/en, ,*/w, ,0.5/m,)/w,,/w, ,int/en,(/w,h/en, ,*/w, ,0.5/m,)/w,)/w, ,segments/en, ,=/w, ,[/w,(/w,0/m,,/w, ,cx/en,,/w, ,0/m,,/w, ,cy/en,)/w,,/w, ,(/w,cx/en,,/w, ,w/en,,/w, ,0/m,,/w, ,cy/en,)/w,,/w, ,(/w,cx/en,,/w, ,w/en,,/w, ,cy/en,,/w, ,h/en,)/w,,/w, ,(/w,0/m,,/w, ,cx/en,,/w, ,cy/en,,/w, ,h/en,)/w,]/w, ,(/w,axesx/en,,/w, ,axesy/en,)/w, ,=/w, ,(/w,int/en,(/w,w/en, ,*/w, ,0.75/m,)/w,//w,//w,2/m,,/w, ,int/en,(/w,h/en, ,*/w, ,0.75/m,)/w,//w,//w,2/m,)/w, ,ellipmask/en, ,=/w, ,np/en,./w,zeros/en,(/w,image/en,./w,shape/en,[/w,:/w,2/m,]/w,,/w, ,dtype/en, ,=/w, ,"/w,uint/en,8/m,"/w,)/w, ,cv/en,2/m,./w,ellipse/en,(/w,ellipmask/en,,/w, ,(/w,cx/en,,/w, ,cy/en,)/w,,/w, ,(/w,axesx/en,,/w, ,axesy/en,)/w,,/w, ,0/m,,/w, ,0/m,,/w, ,360/m,,/w, ,255/m,,/w, ,-/w, ,1/m,)/w, ,for/en, ,(/w,startx/en,,/w, ,endx/en,,/w, ,starty/en,,/w, ,endy/en,)/w, ,in/en, ,segments/en,:/w, ,cornermask/en, ,=/w, ,np/en,./w,zeros/en,(/w,image/en,./w,shape/en,[/w,:/w,2/m,]/w,,/w, ,dtype/en, ,=/w, ,"/w,uint/en,8/m,"/w,)/w, ,cv/en,2/m,./w,rectangle/en,(/w,cornermask/en,,/w, ,(/w,startx/en,,/w, ,starty/en,)/w,,/w, ,(/w,endx/en,,/w, ,endy/en,)/w,,/w, ,255/m,,/w, ,-/w, ,1/m,)/w, ,cornermask/en, ,=/w, ,cv/en,2/m,./w,subtract/en,(/w,cornermask/en,,/w, ,ellipmask/en,)/w, ,hist/en, ,=/w, ,self/en,./w,histogram/en,(/w,image/en,,/w, ,cornermask/en,)/w, ,features/en,./w,extend/en,(/w,hist/en,)/w, ,hist/en, ,=/w, ,self/en,./w,histogram/en,(/w,image/en,,/w, ,ellipmask/en,)/w, ,features/en,./w,extend/en,(/w,hist/en,)/w, ,return/en, ,np/en,./w,array/en,(/w,features/en,)/w, ,def/en, ,histogram/en,(/w,self/en,,/w, ,image/en,,/w, ,mask/en, ,=/w, ,none/en,)/w,:/w, ,hist/en, ,=/w, ,cv/en,2/m,./w,calchist/en,(/w,[/w,image/en,]/w,,/w, ,[/w,0/m,,/w, ,1/m,,/w, ,2/m,]/w,,/w, ,mask/en,,/w, ,self/en,./w,bins/en,,/w, ,[/w, ,0/m, ,,/w, ,180/m,,/w, ,0/m,,/w, ,256/m,,/w, ,0/m,,/w, ,256/m,]/w,)/w, ,if/en, ,imutils/en,./w,is/en,_,cv/en,2/m,(/w,)/w,:/w, ,hist/en, ,=/w, ,cv/en,2/m,./w,normalize/en,(/w,hist/en,)/w,./w,flatten/en,(/w,)/w, ,else/en,:/w, ,hist/en, ,=/w, ,cv/en,2/m,./w,normalize/en,(/w,hist/en,,/w, ,hist/en,)/w,./w,flatten/en,(/w,)/w, ,return/en, ,histresultsmontage/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,cv/en,2/m, ,class/en, ,resultsmontage/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,imagesize/en,,/w, ,imagesperrow/en,,/w, ,numresults/en,)/w,:/w, ,self/en,./w,imagew/en, ,=/w, ,imagesize/en,[/w,0/m,]/w, ,self/en,./w,imageh/en, ,=/w, ,imagesize/en,[/w,1/m,]/w, ,self/en,./w,imagesperrow/en, ,=/w, ,imagesperrow/en, ,numcols/en, ,=/w, ,numresults/en, ,//w,//w, ,imagesperrow/en, ,self/en,./w,montage/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,numcols/en, ,*/w, ,self/en,./w,imagew/en,,/w, ,imagesperrow/en, ,*/w, ,self/en,./w,imageh/en,,/w, ,3/m,)/w,,/w, ,dtype/en,=/w,"/w,uint/en,8/m,"/w,)/w, ,self/en,./w,counter/en, ,=/w, ,0/m, ,self/en,./w,row/en, ,=/w, ,0/m, ,self/en,./w,col/en, ,=/w, ,0/m, ,def/en, ,addresult/en,(/w,self/en,,/w, ,image/en,,/w, ,text/en, ,=/w, ,none/en,,/w, ,highlight/en, ,=/w, ,false/en,)/w,:/w, ,if/en, ,self/en,./w,counter/en, ,!/w,=/w, ,0/m, ,and/en, ,self/en,./w,counter/en, ,%/w,self/en,./w,imagesperrow/en, ,=/w,=/w, ,0/m,:/w, ,self/en,./w,col/en, ,=/w, ,0/m, ,self/en,./w,row/en, ,+/w,=/w, ,1/m, ,image/en, ,=/w, ,cv/en,2/m,./w,resize/en,(/w,image/en,,/w, ,(/w,self/en,./w,imageh/en,,/w, ,self/en,./w,imagew/en,)/w,)/w, ,(/w,starty/en,,/w, ,endy/en,)/w, ,=/w, ,(/w,self/en,./w,row/en, ,*/w, ,self/en,./w,imagew/en,,/w, ,(/w,self/en,./w,row/en, ,+/w, ,1/m,)/w, ,*/w, ,self/en,./w,imagew/en,)/w, ,(/w,startx/en,,/w, ,endx/en,)/w, ,=/w, ,(/w,self/en,./w,col/en, ,*/w, ,self/en,./w,imageh/en,,/w, ,(/w,self/en,./w,col/en, ,+/w, ,1/m,)/w, ,*/w, ,self/en,./w,imageh/en,)/w, ,self/en,./w,montage/en,[/w,starty/en,:/w,endy/en,,/w, ,startx/en,:/w,endx/en,]/w, ,=/w, ,image/en, ,if/en, ,text/en, ,is/en, ,not/en, ,none/en,:/w, ,cv/en,2/m,./w,puttext/en,(/w,self/en,./w,montage/en,,/w, ,text/en,,/w, ,(/w,startx/en, ,+/w, ,10/m,,/w, ,starty/en, ,+/w, ,30/m,)/w,,/w, ,cv/en,2/m,./w,font/en,_,hershey/en,_,simplex/en,,/w, ,1.0/m,,/w, ,(/w,0/m,,/w, ,255/m,,/w, ,255/m,)/w,,/w, ,3/m,)/w, ,print/en, ,(/w,"/w,text/en,"/w,)/w, ,if/en, ,highlight/en,:/w, ,cv/en,2/m,./w,rectangle/en,(/w,self/en,./w,montage/en,,/w, ,(/w,startx/en, ,+/w, ,3/m,,/w, ,starty/en, ,+/w, ,3/m,)/w,,/w, ,(/w,endx/en, ,-/w, ,3/m,,/w, ,endy/en, ,-/w, ,3/m,)/w,,/w, ,(/w,0/m,,/w, ,255/m,,/w, ,0/m,)/w,,/w, ,4/m,)/w, ,print/en, ,(/w,"/w,hig/en,"/w,)/w, ,self/en,./w,col/en, ,+/w,=/w, ,1/m, ,self/en,./w,counter/en, ,+/w,=/w,1/m,searcher/en,./w,pyfrom/en, ,./w, ,import/en, ,dists/en, ,import/en, ,csv/en, ,class/en, ,searcher/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,dbpath/en,)/w,:/w, ,self/en,./w,dbpath/en, ,=/w, ,dbpath/en, ,def/en, ,search/en,(/w,self/en,,/w, ,queryfeatures/en,,/w, ,numresults/en, ,=/w, ,10/m,)/w,:/w, ,results/en, ,=/w, ,{/w,}/w, ,with/en, ,open/en,(/w,self/en,./w,dbpath/en,)/w, ,as/en, ,f/en,:/w, ,reader/en, ,=/w, ,csv/en,./w,reader/en,(/w,f/en,)/w, ,for/en, ,row/en, ,in/en, ,reader/en,:/w, ,features/en, ,=/w, ,[/w,float/en,(/w,x/en,)/w, ,for/en, ,x/en, ,in/en, ,row/en,[/w,1/m,:/w,]/w,]/w, ,d/en, ,=/w, ,dists/en,./w,chi/en,2/m,_,distance/en,(/w,features/en,,/w, ,queryfeatures/en,)/w, ,results/en,[/w,row/en,[/w,0/m,]/w,]/w, ,=/w, ,d/en, ,f/en,./w,close/en,(/w,)/w, ,results/en,=/w,sorted/en,(/w,[/w,(/w,v/en,,/w,k/en,)/w, ,for/en, ,(/w,k/en,,/w,v/en,)/w, ,in/en, ,results/en,./w,items/en,(/w,)/w,]/w,)/w, ,return/en, ,results/en,[/w,:/w,numresults/en,]/w,2/m,、/w,特征/n,提取/v,和/c,索引/n,1/m,、/w,描述/v,图像/n,的/u,三个/m,方面/n,：/w,颜色/n,：/w, , ,表征/v,图像/n,颜色/n,的/u,图像/n,描述符/n,试图/v,模拟/b,图像/n,每个/r,通道/n,中/f,像素/n,强度/n,的/u,分布/v,。/w,这些/r,方法/n,包括/v,基本/a,颜色/n,统计/v,，/w,如/v,平均值/n,，/w,标准/n,偏差/n,和/c,偏度/nw,，/w,以及/c,颜色/n,直方图/n,，/w,“/w,平面/n,”/w,和/c,多维/nrf,。/w,纹理/n,：/w, , ,纹理/n,描述/v,符试图/nr,模拟/b,图像/n,中/f,物体/n,的/u,感觉/n,，/w,外观/n,和/c,整体/n,触觉/n,质量/n,。/w,一些/m,（/w,但/c,不/d,是/v,全部/m,）/w,纹理/n,描述/v,符将/nw,图像/n,转换/v,为/p,灰度/n,，/w,然后/c,计算/v,灰度/n,共/d,生/v,矩阵/n,（/w,glcm/en,）/w,并/c,计算/v,该/r,矩阵/n,的/u,统计量/nw,，/w,包括/v,对比度/n,，/w,相关性/n,和/c,熵/g,等/u,（/w,haralick/en,纹理/n,）/w,。/w,更/d,先进/a,的/u,纹理/n,描述符/n,，/w,如/v,局部/n,二进制/n,模式/n,，/w,尝试/vn,模型/n, , ,模式/n,也/d,是/v,如此/r,。/w,甚至/d,还有/v,更/d,高级/a,的/u,纹理/n,描述符/n,，/w,例如/v,傅立叶/nr,和/c,小波/n,变换/v,也/d,存在/v,，/w,但/c,仍然/d,使用/v,灰度/n,图像/n,。/w,形状/n,：/w, , ,绝大多数/m,形状/n,描述/v,符方法/nw,依靠/v,提取/v,图像/n,中/f,对象/n,的/u,轮廓/n,（/w,即/v,轮廓/n,）/w,。/w,一旦/d,我们/r,有/v,了/u,轮廓/n,，/w,我们/r,就/d,可以/v,计算/v,简单/a,的/u,统计/v,数据/n,来/v,表征/v,轮廓/n,，/w,这/r,正是/v,hu/en, ,moments/en,和/c,zernike/en, ,moments/en,所/u,做/v,的/u,。/w,这些/r,统计/v,数据/n,可/v,用于/v,表示/v,图像/n,中/f,对象/n,的/u,形状/n,（/w,轮廓/n,）/w,。/w,在/p,机器/n,学习/v,和/c,对象/n,识别/v,的/u,背景/n,下/f,，/w, , ,面向/v,梯度/n,的/u,直方图/n, ,也/d,是/v,一个/m,不错/a,的/u,选择/v,。/w,2/m,、/w,特征/n,提取/v,的/u,定义/n,定义/n,：/w, ,特征/n,提取/v, ,是/v,通过/p,应用/vn,图像/n,描述符/n,从/p,数据/n,集中/v,每个/r,图像/n,中/f,提取/v,特征/n,来/v,量化/v,数据集/nw,的/u,过程/n,。/w,通常/d,，/w,这些/r,功能/n,存储/vn,在/p,磁盘/n,上/f,供/v, , ,以后/f,使用/v,，/w,并/c, , ,使用/v,专门/d,的/u,数据/n,结构/n,（/w,例如/v,倒排/nw,索引/n,，/w,kd/en,树/v,或/c,随机/d,投影林/nw,）/w,进行/v,索引/n,，/w,以/p,加快/v,查询/v,速度/n,。/w,3/m,、/w,定义/n,相似/a,度/q,1/m,、/w,常用/a,距离/n,度量/v,欧几里德/nw,：/w,from/en, ,scipy/en,./w,spatial/en, ,import/en, ,distance/en, ,as/en, ,dists/en, ,dists/en,./w,euclidean/en,(/w,a/en,,/w, ,b/en,)/w,曼哈顿/ns,//w,城市/n,大厦/n,dists/en,./w,cityblock/en,(/w,a/en,,/w, ,b/en,)/w,直方图/n,交点/n,def/en, ,histogram/en,_,intersection/en,(/w,h/en,1/m,,/w, ,h/en,2/m,)/w,:/w, ,return/en, ,np/en,./w,sum/en,(/w,np/en,./w,minimum/en,(/w,h/en,1/m,,/w, ,h/en,2/m,)/w,)/w,距离/n,def/en, ,chi/en,2/m,_,distance/en,(/w,hista/en,,/w, ,histb/en,,/w, ,eps/en,=/w,1/m,e/en,-/w,10/m,)/w,:/w, ,return/en, ,0.5/m, ,*/w, ,np/en,./w,sum/en,(/w,(/w,(/w,hista/en, ,-/w, ,histb/en,)/w, ,*/w,*/w, ,2/m,)/w, ,//w, ,(/w,hista/en, ,+/w, ,histb/en, ,+/w, ,eps/en,)/w,)/w, ,chi/en,2/m,_,distance/en,(/w,a/en,,/w, ,b/en,)/w,余弦/n,dists/en,./w,cosine/en,(/w,a/en,,/w, ,b/en,)/w,海明/nr,dists/en,./w,hamming/en,(/w,a/en,,/w, ,b/en,)/w,4/m,、/w,提取/v,关键点/n,和/c,局部/n,不/d,变/v,描述符/n,1/m,、/w,文件/n,结构/n,及/c,作用/n,：/w,|/w,---/nrf, ,pyimagesearch/en,|/w, , , , ,|/w,---/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w,---/nrf, ,descriptors/en, ,作用/n,：/w,包含/v,了/u,实现/v,从/p,我们/r,的/u,图像/n,数据集/nw,提取/v,关键点/n,和/c,本地/r,不/d,变/v,描述/v,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,detectanddescribe/en,./w,py/en, ,作用/n,：/w,以便/d,使用/v,任意/d,检测器/n,和/c,描述/v,符轻松/nr,检测/vn,关键点/n,并/c,提取/v,功能/n,|/w, , , , ,|/w,---/nrf, ,indexer/en, ,作用/n,：/w,包含/v,我们/r,面向/v,hdf/en,5/m,数据集/nw,的/u,面向/v,对象/n,的/u,接口/n,来/v,存储/vn,特征/n,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,baseindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,featureindexer/en,./w,py/en,|/w,---/nrf, ,index/en,_,features/en,./w,py/en, ,作用/n,：/w,驱动/vn,程序/n,脚本/n,，/w,用于/v,将/d,所有/b,碎片/n,粘合/vn,在/p,一起/s,疑问/n,：/w,1/m,、/w,@/w,staticmethod/en,静态/n,函数/n,定义/n,的/u,方法/n,？/w,运行/vn,命令/n,：/w,python/en, ,index/en,_,features/en,./w,py/en, ,--/nrf,dataset/en, ,./w,./w,//w,ukbench/en,_,sample/en, ,--/nrf,features/en,-/w,db/en, ,output/en,//w,features/en,./w,hdf/en,5/m,index/en,_,features/en,./w,py/en,#,coding/en,=/w,utf/en,-/w,8/m, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,descriptors/en,./w,detectanddescribe/en, ,import/en, ,detectanddescribe/en, ,from/en, ,pyimagesearch/en,./w,indexer/en,./w,featureindexer/en, ,import/en, ,featureindexer/en, ,from/en, ,imutils/en,./w,feature/en, ,import/en, ,featuredetector/en,_,create/en,,/w, ,descriptorextractor/en,_,create/en, ,from/en, ,imutils/en, ,import/en, ,paths/en, ,import/en, ,argparse/en, ,import/en, ,imutils/en, ,import/en, ,cv/en,2/m, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en,=/w,true/en,,/w, ,help/en,=/w,"/w,path/en, ,to/en, ,the/en, ,directory/en, ,that/en, ,contains/en, ,the/en, ,images/en, ,to/en, ,be/en, ,indexed/en,"/w,)/w, ,#,图像/n,目录/n,路径/n, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en,=/w,true/en,,/w, ,help/en,=/w,"/w,path/en, ,to/en, ,where/en, ,the/en, ,features/en, ,database/en, ,will/en, ,be/en, ,stored/en,"/w,)/w,#,制定/v,hdf/en,5/m,数据库/n,储存/v,在/p,磁盘/n,上/f,的/u,路径/n, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,a/en,"/w,,/w, ,"/w,--/nrf,approx/en,-/w,images/en,"/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,500/m,,/w, ,help/en,=/w,"/w,approximate/en, ,#, ,of/en, ,images/en, ,in/en, ,the/en, ,dataset/en,"/w,)/w,#,该/r,（/w,可选/v,）/w,开关/n,允许/v,我们/r,指定/v,数据/n,集中/v,图像/n,的/u,近似/a,数量/n, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,b/en,"/w,,/w, ,"/w,--/nrf,max/en,-/w,buffer/en,-/w,size/en,"/w,,/w, ,type/en,=/w,int/en,,/w, ,default/en,=/w,50000/m,,/w, ,help/en,=/w,"/w,maximum/en, ,buffer/en, ,size/en, ,for/en, ,#, ,of/en, ,features/en, ,to/en, ,be/en, ,stored/en, ,in/en, ,memory/en,"/w,)/w,#,一次/mq,一个/m,地/u,写入/v,hdf/en,5/m,的/u,特征/n,向量/n, ,效率/n,非常/d,低/a,。/w,相反/v,，/w,将/d,特征/n,向/p,量/n,收集/v,到/v,内存/n,中/f,的/u,一个/m,大/a,数/m,组/q,中/f,然后/c,在/p,缓冲区/n,满/a,时/ng,将/d,它们/r,转储/nw,到/v,hdf/en,5/m,会/v,更/d,有效/a,。/w,的/u,值/n, ,-/w,最大/a,-/w,缓冲器/n,-/w,大小/n, ,指定/v,许多/m,如何/r, ,特征/n,向量/n,可以/v,被/p,存储/vn,在/p,存储器/n,中/f,，/w,直到/v,缓冲器/n,被/p,刷新/v,到/v,hdf/en,5/m, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,detector/en, ,=/w, ,featuredetector/en,_,create/en,(/w,"/w,surf/en,"/w,)/w,#,获取/v,关键点/n, ,descriptor/en, ,=/w, ,descriptorextractor/en,_,create/en,(/w,"/w,rootsift/en,"/w,)/w,#,定义/n,提取/v,关键点/n,特征/n,方法/n, ,dad/en, ,=/w, ,detectanddescribe/en,(/w,detector/en,,/w, ,descriptor/en,)/w,#,获取/v,关键点/n,和/c,关键点/n,特征/n,向量/n, ,fi/en, ,=/w, ,featureindexer/en,(/w,args/en,[/w,"/w,features/en,_,db/en,"/w,]/w,,/w, ,estnumimages/en,=/w,args/en,[/w,"/w,approx/en,_,images/en,"/w,]/w,,/w,maxbuffersize/en,=/w,args/en,[/w,"/w,max/en,_,buffer/en,_,size/en,"/w,]/w,,/w, ,verbose/en,=/w,true/en,)/w, ,for/en, ,(/w,i/en,,/w, ,imagepath/en,)/w, ,in/en, ,enumerate/en,(/w,paths/en,./w,list/en,_,images/en,(/w,args/en,[/w,"/w,dataset/en,"/w,]/w,)/w,)/w,:/w, ,if/en, ,i/en, ,>, ,0/m, ,and/en, ,i/en,%/w,10/m, ,=/w,=/w, ,0/m,:/w, ,fi/en,./w,_,debug/en,(/w,"/w,processed/en, ,{/w,}/w, ,images/en,"/w,./w,format/en,(/w,i/en,)/w,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,progress/en,]/w,"/w,)/w, ,filename/en, ,=/w, ,imagepath/en,[/w,imagepath/en,./w,rfind/en,(/w,"/w,//w,"/w,)/w, ,+/w, ,1/m,:/w,]/w, ,image/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,imagepath/en,)/w, ,image/en, ,=/w, ,imutils/en,./w,resize/en,(/w,image/en,,/w, ,width/en, ,=/w, ,320/m,)/w, ,image/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,image/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,gray/en,)/w, ,(/w,kps/en,,/w, ,descs/en,)/w, ,=/w, ,dad/en,./w,describe/en,(/w,image/en,)/w, ,if/en, ,kps/en, ,is/en, ,none/en, ,or/en, ,descs/en, ,is/en, ,none/en,:/w, ,continue/en, ,fi/en,./w,add/en,(/w,filename/en,,/w, ,kps/en,,/w, ,descs/en,)/w, ,fi/en,./w,finish/en,(/w,)/w,detectanddescribe/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,class/en, ,detectanddescribe/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,detector/en,,/w, ,descriptor/en,)/w,:/w, ,self/en,./w,detector/en, ,=/w, ,detector/en, ,self/en,./w,descriptor/en, ,=/w, ,descriptor/en, ,def/en, ,describe/en,(/w,self/en,,/w, ,image/en,,/w, ,usekplist/en, ,=/w, ,true/en,)/w,:/w, ,kps/en, ,=/w, ,self/en,./w,detector/en,./w,detect/en,(/w,image/en,)/w, ,(/w,kps/en,,/w, ,descs/en,)/w, ,=/w, ,self/en,./w,descriptor/en,./w,compute/en,(/w,image/en,,/w, ,kps/en,)/w, ,if/en, ,len/en,(/w,kps/en,)/w, ,=/w,=/w, ,0/m,:/w, ,return/en, ,(/w,none/en,,/w, ,none/en,)/w, ,if/en, ,usekplist/en,:/w, ,kps/en, ,=/w, ,np/en,./w,int/en,0/m,(/w,[/w,kp/en,./w,pt/en, ,for/en, ,kp/en, ,in/en, ,kps/en,]/w,)/w, ,return/en, ,(/w,kps/en,,/w, ,descs/en,)/w,baseindexer/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,datetime/en, ,class/en, ,baseindexer/en,(/w,object/en,)/w,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,dbpath/en,,/w, ,estnumimages/en, ,=/w, ,500/m,,/w, ,maxbuffersize/en, ,=/w, ,50000/m,,/w, ,dbresizefactor/en, ,=/w, ,2/m,,/w, ,verbose/en, ,=/w, ,true/en,)/w,:/w, ,self/en,./w,dbpath/en, ,=/w, ,dbpath/en, ,self/en,./w,estnumimages/en, ,=/w, ,estnumimages/en, ,self/en,./w,maxbuffersize/en, ,=/w, ,maxbuffersize/en, ,self/en,./w,dbresizefactor/en, ,=/w, ,dbresizefactor/en, ,self/en,./w,verbose/en, ,=/w, ,verbose/en, ,self/en,./w,idxs/en, ,=/w, ,{/w,}/w, ,def/en, ,_,wriebuffers/en,(/w,self/en,)/w,:/w, ,pass/en, ,def/en, ,_,writebuffer/en,(/w,self/en,,/w, ,dataset/en,,/w, ,datasetname/en,,/w, ,buf/en,,/w, ,idxname/en,,/w, ,sparse/en, ,=/w, ,false/en,)/w,:/w, ,if/en, ,type/en,(/w,buf/en,)/w, ,is/en, ,list/en,:/w, ,end/en, ,=/w, ,self/en,./w,idxs/en,[/w,idxname/en,]/w, ,+/w, ,len/en,(/w,buf/en,)/w, ,else/en,:/w, ,end/en, ,=/w, ,self/en,./w,idxs/en,[/w,idxname/en,]/w, ,+/w, ,buf/en,./w,shape/en,[/w,0/m,]/w, ,if/en, ,end/en, ,>, ,dataset/en,./w,shape/en,[/w,0/m,]/w,:/w, ,self/en,./w,_,debug/en,(/w,"/w,triggering/en, ,'/w,{/w,}/w,'/w, ,db/en, ,resize/en,"/w,./w,format/en,(/w,datasetname/en,)/w,)/w, ,self/en,./w,_,resizedataset/en,(/w,dataset/en,,/w, ,datasetname/en,,/w, ,basesize/en, ,=/w, ,end/en,)/w, ,if/en, ,sparse/en,:/w, ,buf/en, ,=/w, ,buf/en,./w,toarray/en,(/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,writing/en, ,'/w,{/w,}/w,'/w, ,buffer/en,"/w,./w,format/en,(/w,datasetname/en,)/w,)/w, ,dataset/en,[/w,self/en,./w,idxs/en,[/w,idxname/en,]/w,:/w,end/en,]/w, ,=/w, ,buf/en, ,def/en, ,_,resizedataset/en,(/w,self/en,,/w, ,dataset/en,,/w, ,dbname/en,,/w, ,basesize/en, ,=/w, ,0/m,,/w, ,finished/en, ,=/w, ,0/m,)/w,:/w, ,origsize/en, ,=/w, ,dataset/en,./w,shape/en,[/w,0/m,]/w, ,if/en, ,finished/en, ,>, ,0/m,:/w, ,newsize/en, ,=/w, ,finished/en, ,else/en,:/w, ,newsize/en, ,=/w, ,basesize/en, ,*/w, ,self/en,./w,dbresizefactor/en, ,shape/en, ,=/w, ,list/en,(/w,dataset/en,./w,shape/en,)/w, ,shape/en,[/w,0/m,]/w, ,=/w, ,newsize/en, ,dataset/en,./w,resize/en,(/w,tuple/en,(/w,shape/en,)/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,old/en, ,size/en, ,of/en, ,'/w,{/w,}/w,'/w,:/w,{/w,:/w,,/w,}/w,;/w,new/en, ,size/en,:/w,{/w,:/w,,/w,}/w,"/w,./w,format/en,(/w,dbname/en,,/w, ,origsize/en,,/w, ,newsize/en,)/w,)/w, ,def/en, ,_,debug/en,(/w,self/en,,/w, ,msg/en,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,info/en,]/w,"/w,)/w,:/w, ,if/en, ,self/en,./w,verbose/en,:/w, ,print/en,(/w,"/w,{/w,}/w, ,{/w,}/w, ,-/w, ,{/w,}/w,"/w,./w,format/en,(/w,msgtype/en,,/w, ,msg/en,,/w, ,datetime/en,./w,datetime/en,./w,now/en,(/w,)/w,)/w,)/w, ,@/w,staticmethod/en, ,def/en, ,featurestack/en,(/w,array/en,,/w, ,accum/en, ,=/w, ,none/en,,/w, ,stackmethod/en, ,=/w, ,np/en,./w,vstack/en,)/w,:/w, ,if/en, ,accum/en, ,is/en, ,none/en,:/w, ,accum/en, ,=/w, ,array/en, ,else/en,:/w, ,accum/en, ,=/w, ,stackmethod/en,(/w,[/w,accum/en,,/w, ,array/en,]/w,)/w, ,return/en, ,accumfeatureindexer/en,./w,py/en,#,coding/en,=/w,utf/en,-/w,8/m, ,from/en, ,./w,baseindexer/en, ,import/en, ,baseindexer/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,h/en,5/m,py/en, ,import/en, ,sys/en, ,class/en, ,featureindexer/en,(/w,baseindexer/en,)/w,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,dbpath/en,,/w, ,estnumimages/en,=/w,500/m,,/w, ,maxbuffersize/en,=/w,50000/m,,/w, ,dbresizefactor/en,=/w,2/m,,/w,verbose/en,=/w,true/en,)/w,:/w, ,super/en,(/w,featureindexer/en,,/w, ,self/en,)/w,./w,_,_,init/en,_,_,(/w,dbpath/en,,/w, ,estnumimages/en,=/w,estnumimages/en,,/w, ,maxbuffersize/en,=/w,maxbuffersize/en,,/w, ,dbresizefactor/en,=/w,dbresizefactor/en,,/w, ,verbose/en,=/w,verbose/en,)/w, ,self/en,./w,db/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,self/en,./w,dbpath/en,,/w, ,mode/en,=/w,"/w,w/en,"/w,)/w, ,self/en,./w,imageiddb/en, ,=/w, ,none/en, ,self/en,./w,indexdb/en, ,=/w, ,none/en, ,self/en,./w,featuresdb/en, ,=/w, ,none/en, ,self/en,./w,imageidbuffer/en, ,=/w, ,[/w,]/w, ,self/en,./w,indexbuffer/en, ,=/w, ,[/w,]/w, ,self/en,./w,featuresbuffer/en, ,=/w, ,none/en, ,self/en,./w,totalfeatures/en, ,=/w, ,0/m, ,self/en,./w,idxs/en, ,=/w, ,{/w,"/w,index/en,"/w,:/w, ,0/m,,/w, ,"/w,features/en,"/w,:/w, ,0/m,}/w, ,def/en, ,add/en,(/w,self/en,,/w, ,imageid/en,,/w, ,kps/en,,/w, ,features/en,)/w,:/w, ,start/en, ,=/w, ,self/en,./w,idxs/en,[/w,"/w,features/en,"/w,]/w, ,+/w, ,self/en,./w,totalfeatures/en, ,end/en, ,=/w, ,start/en, ,+/w, ,len/en,(/w,features/en,)/w, ,self/en,./w,imageidbuffer/en,./w,append/en,(/w,imageid/en,)/w, ,self/en,./w,featuresbuffer/en, ,=/w, ,baseindexer/en,./w,featurestack/en,(/w,np/en,./w,hstack/en,(/w,[/w,kps/en,,/w, ,features/en,]/w,)/w,,/w,self/en,./w,featuresbuffer/en,)/w, ,self/en,./w,indexbuffer/en,./w,append/en,(/w,(/w,start/en,,/w, ,end/en,)/w,)/w, ,self/en,./w,totalfeatures/en, ,+/w,=/w, ,len/en,(/w,features/en,)/w, ,if/en, ,self/en,./w,totalfeatures/en, ,>,=/w, ,self/en,./w,maxbuffersize/en,:/w, ,if/en, ,none/en, ,in/en, ,(/w,self/en,./w,imageiddb/en,,/w, ,self/en,./w,indexdb/en,,/w, ,self/en,./w,featuresdb/en,)/w,:/w, ,self/en,./w,_,debug/en,(/w,"/w,initial/en, ,buffer/en, ,full/en,"/w,)/w, ,self/en,./w,_,createdatasets/en,(/w,)/w, ,self/en,./w,_,writebuffers/en,(/w,)/w, ,def/en, ,_,createdatasets/en,(/w,self/en,)/w,:/w, ,avgfeatures/en, ,=/w, ,self/en,./w,totalfeatures/en,//w,float/en,(/w,len/en,(/w,self/en,./w,imageidbuffer/en,)/w,)/w, ,approxfeatures/en, ,=/w, ,int/en,(/w,avgfeatures/en, ,*/w, ,self/en,./w,estnumimages/en,)/w, ,fvectorsize/en, ,=/w, ,self/en,./w,featuresbuffer/en,./w,shape/en,[/w,1/m,]/w, ,if/en, ,sys/en,./w,version/en,_,info/en,[/w,0/m,]/w, ,</w, ,3/m,:/w, ,dt/en, ,=/w, ,h/en,5/m,py/en,./w,special/en,_,dtype/en,(/w,vlen/en, ,=/w, ,unicode/en,)/w, ,else/en,:/w, ,dt/en, ,=/w, ,h/en,5/m,py/en,./w,special/en,_,dtype/en,(/w,vlen/en, ,=/w, ,str/en,)/w, ,self/en,./w,_,debug/en,(/w,"/w,creating/en, ,datasets/en,./w,./w,./w,"/w,)/w, ,self/en,./w,imageiddb/en, ,=/w, ,self/en,./w,db/en,./w,create/en,_,dataset/en,(/w,"/w,image/en,_,ids/en,"/w,,/w, ,(/w,self/en,./w,estnumimages/en,,/w, ,)/w,,/w, ,maxshape/en, ,=/w, ,(/w,none/en,,/w, ,)/w,,/w, ,dtype/en, ,=/w, ,dt/en,)/w, ,self/en,./w,indexdb/en, ,=/w, ,self/en,./w,db/en,./w,create/en,_,dataset/en,(/w,"/w,index/en,"/w,,/w, ,(/w,self/en,./w,estnumimages/en,,/w, ,2/m,)/w,,/w, ,maxshape/en, ,=/w, ,(/w,none/en,,/w, ,2/m,)/w,,/w, ,dtype/en, ,=/w, ,"/w,int/en,"/w,)/w, ,self/en,./w,featuresdb/en, ,=/w, ,self/en,./w,db/en,./w,create/en,_,dataset/en,(/w,"/w,features/en,"/w,,/w, ,(/w,approxfeatures/en,,/w, ,fvectorsize/en,)/w,,/w, ,maxshape/en, ,=/w, ,(/w,none/en,,/w, ,fvectorsize/en,)/w,,/w, ,dtype/en, ,=/w, ,"/w,float/en,"/w,)/w, ,def/en, ,_,writebuffers/en,(/w,self/en,)/w,:/w, ,self/en,./w,_,writebuffer/en,(/w,self/en,./w,imageiddb/en,,/w, ,"/w,image/en,_,ids/en,"/w,,/w, ,self/en,./w,imageidbuffer/en,,/w,"/w,index/en,"/w,)/w, ,self/en,./w,_,writebuffer/en,(/w,self/en,./w,indexdb/en,,/w, ,"/w,index/en,"/w,,/w, ,self/en,./w,indexbuffer/en,,/w, ,"/w,index/en,"/w,)/w, ,self/en,./w,_,writebuffer/en,(/w,self/en,./w,featuresdb/en,,/w, ,"/w,features/en,"/w,,/w, ,self/en,./w,featuresbuffer/en,,/w,"/w,features/en,"/w,)/w, ,self/en,./w,idxs/en,[/w,"/w,index/en,"/w,]/w, ,+/w,=/w, ,len/en,(/w,self/en,./w,imageidbuffer/en,)/w, ,self/en,./w,idxs/en,[/w,"/w,features/en,"/w,]/w, ,+/w,=/w, ,self/en,./w,totalfeatures/en, ,self/en,./w,imageidbuffer/en, ,=/w, ,[/w,]/w, ,self/en,./w,indexbuffer/en, ,=/w, ,[/w,]/w, ,self/en,./w,featuresbuffer/en, ,=/w, ,none/en, ,self/en,./w,totalfeatures/en, ,=/w, ,0/m, ,def/en, ,finish/en,(/w,self/en,)/w,:/w, ,if/en, ,none/en, ,in/en, ,(/w,self/en,./w,imageiddb/en,,/w, ,self/en,./w,indexdb/en,,/w, ,self/en,./w,featuresdb/en,)/w,:/w, ,self/en,./w,_,debug/en,(/w,"/w,minimum/en, ,init/en, ,buffer/en, ,not/en, ,reached/en,"/w,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,warn/en,]/w,"/w,)/w, ,self/en,./w,_,createdatasets/en,(/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,writing/en, ,un/en, ,-/w, ,empty/en, ,buffers/en,./w,./w,./w,"/w,)/w, ,self/en,./w,_,writebuffers/en,(/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,compacting/en, ,datasets/en,./w,./w,./w,"/w,)/w, ,self/en,./w,_,resizedataset/en,(/w,self/en,./w,imageiddb/en,,/w, ,"/w,image/en,_,ids/en,"/w,,/w, ,finished/en, ,=/w, ,self/en,./w,idxs/en,[/w,"/w,index/en,"/w,]/w,)/w, ,self/en,./w,_,resizedataset/en,(/w,self/en,./w,indexdb/en,,/w, ,"/w,index/en,"/w,,/w, ,finished/en, ,=/w, ,self/en,./w,idxs/en,[/w,"/w,index/en,"/w,]/w,)/w, ,self/en,./w,_,resizedataset/en,(/w,self/en,./w,featuresdb/en,,/w, ,"/w,features/en,"/w,,/w, ,finished/en, ,=/w, ,self/en,./w,idxs/en,[/w,"/w,features/en,"/w,]/w,)/w, ,self/en,./w,db/en,./w,close/en,(/w,)/w,5/m,、/w,集群/nz,功能/n,组成/v,一个/m,码本/nw,1/m,、/w,文件/n,结构/n,及/c,作用/n,多/a,添加/vn,俩/m,个/q,新/a,文件/n,：/w,cluster/en,_,features/en,./w,py/en,和/c,vocabulary/en,./w,py/en,|/w,---/nrf, ,pyimagesearch/en,|/w, , , , ,|/w,---/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w,---/nrf, ,descriptors/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,detectanddescribe/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,indexer/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,baseindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,featureindexer/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,ir/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,vocabulary/en,./w,py/en, ,作用/n,：/w,用于/v,摄取/v,的/u,功能/n,hdf/en,5/m,数据集/nw,，/w,然后/c,返回/v,一个/m,字典/n,的/u,视觉/n,（/w,即/v,聚类/nw,中心/n,）/w,话/n,|/w,---/nrf, ,cluster/en,_,features/en,./w,py/en, ,作用/n,：/w,驱动/vn,脚本/n,将/d,启动/v, ,词汇表/n, , , ,制定/v,过程/n,|/w,---/nrf, ,index/en,_,features/en,./w,py/en,运行/vn,命令/n,：/w,python/en, ,cluster/en,_,features/en,./w,py/en, ,--/nrf,features/en,-/w,db/en, ,output/en,//w,features/en,./w,hdf/en,5/m, ,--/nrf,codebook/en, ,output/en,//w,vocab/en,./w,cpickle/en, ,--/nrf,clusters/en, ,1536/m, ,--/nrf,percentage/en, ,0.25/m,cluster/en,_,features/en,./w,py/en,#,coding/en,=/w,utf/en,-/w,8/m, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,vocabulary/en, ,import/en, ,vocabulary/en, ,import/en, ,argparse/en, ,import/en, ,pickle/en, ,ap/en,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,where/en, ,the/en, ,features/en, ,database/en, ,will/en, ,be/en, ,stored/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,c/en,"/w,,/w, ,"/w,--/nrf,codebook/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,output/en, ,codebook/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,k/en,"/w,,/w, ,"/w,--/nrf,clusters/en,"/w,,/w, ,type/en, ,=/w, ,int/en,,/w, ,default/en, ,=/w, ,64/m,,/w, ,help/en, ,=/w, ,"/w,#, ,of/en, ,clusters/en, ,to/en, ,generate/en,"/w,)/w,#,小批量/n,k/en,-/w,均值/n,将/d,生成/vn,的/u,簇/ng,的/u,数量/n,（/w,即/v,可/v,视词/nw,）/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,p/en,"/w,,/w, ,"/w,--/nrf,percentage/en,"/w,,/w,type/en, ,=/w, ,float/en,,/w, ,default/en, ,=/w, ,0.25/m,,/w, ,help/en, ,=/w, ,"/w,percentage/en, ,of/en, ,total/en, ,features/en, ,to/en, ,use/en, ,when/en, ,clustering/en,"/w, ,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,#, ,控制/v,特征/n,向量/n,样本量/n,的/u,大小/n, ,voc/en, ,=/w, ,vocabulary/en,(/w,args/en,[/w,"/w,features/en,_,db/en,"/w,]/w,)/w, ,vocab/en, ,=/w, ,voc/en,./w,fit/en,(/w,args/en,[/w,"/w,clusters/en,"/w,]/w,,/w, ,args/en,[/w,"/w,percentage/en,"/w,]/w,)/w, ,#,获得/v,生成/vn,的/u,视觉/n,词/n, ,-/w, ,整个/b,采样/v,和/c,聚类/nw,过程/n,由/p,词汇/n, ,类/q,抽象/a, ,print/en, ,(/w,"/w,[/w,info/en,]/w, ,storing/en, ,cluster/en, ,centers/en,./w,./w,./w,"/w,)/w, ,f/en, ,=/w, ,open/en,(/w,args/en,[/w,"/w,codebook/en,"/w,]/w,,/w, ,"/w,wb/en,"/w,)/w, ,f/en,./w,write/en,(/w,pickle/en,./w,dumps/en,(/w,vocab/en,)/w,)/w, ,f/en,./w,close/en,(/w,)/w,vocabulary/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,sklearn/en,./w,cluster/en, ,import/en, ,minibatchkmeans/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,datetime/en, ,import/en, ,h/en,5/m,py/en, ,class/en, ,vocabulary/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,dbpath/en,,/w, ,verbose/en, ,=/w, ,true/en,)/w,:/w, ,self/en,./w,dbpath/en, ,=/w, ,dbpath/en, ,self/en,./w,verbose/en, ,=/w, ,verbose/en, ,def/en, ,fit/en,(/w,self/en,,/w, ,numclusters/en,,/w, ,samplepercent/en,,/w, ,randomstate/en, ,=/w, ,none/en,)/w,:/w, ,db/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,self/en,./w,dbpath/en,)/w, ,totalfeatures/en, ,=/w, ,db/en,[/w,"/w,features/en,"/w,]/w,./w,shape/en,[/w,0/m,]/w, ,samplesize/en, ,=/w, ,int/en,(/w,np/en,./w,ceil/en,(/w,samplepercent/en, ,*/w, ,totalfeatures/en,)/w,)/w, ,print/en,(/w,"/w,samplesize/en,"/w,)/w, ,print/en, ,(/w,samplesize/en,)/w, ,idxs/en, ,=/w, ,np/en,./w,random/en,./w,choice/en,(/w,np/en,./w,arange/en,(/w,0/m,,/w, ,totalfeatures/en,)/w,,/w, ,(/w,samplesize/en,)/w,,/w, ,replace/en, ,=/w, ,false/en,)/w, ,idxs/en,./w,sort/en,(/w,)/w, ,data/en, ,=/w, ,[/w,]/w, ,self/en,./w,_,debug/en,(/w,"/w,starting/en, ,sampling/en,./w,./w,./w,"/w,)/w, ,for/en, ,i/en, ,in/en, ,idxs/en,:/w, ,data/en,./w,append/en,(/w,db/en,[/w,"/w,features/en,"/w,]/w,[/w,i/en,]/w,[/w,2/m,:/w,]/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,sampled/en, ,{/w,:/w,,/w,}/w, ,features/en, ,from/en, ,a/en, ,population/en, ,of/en, ,{/w,:/w,,/w,}/w,"/w,./w,format/en,(/w,len/en,(/w,idxs/en,)/w,,/w, ,totalfeatures/en,)/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,clustering/en, ,with/en, ,k/en, ,=/w, ,{/w,:/w,,/w,}/w,"/w,./w,format/en,(/w,numclusters/en,)/w,)/w, ,clt/en, ,=/w, ,minibatchkmeans/en,(/w,n/en,_,clusters/en, ,=/w, ,numclusters/en,,/w, ,random/en,_,state/en, ,=/w, ,randomstate/en,)/w, ,clt/en,./w,fit/en,(/w,data/en,)/w, ,self/en,./w,_,debug/en,(/w,"/w,cluster/en, ,shape/en,:/w,{/w,}/w,"/w,./w,format/en,(/w,clt/en,./w,cluster/en,_,centers/en,_,./w,shape/en,)/w,)/w, ,db/en,./w,close/en,(/w,)/w, ,return/en, ,clt/en,./w,cluster/en,_,centers/en,_, ,def/en, ,_,debug/en,(/w,self/en,,/w, ,msg/en,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,info/en,]/w,"/w,)/w,:/w, ,if/en, ,self/en,./w,verbose/en,:/w, ,print/en,(/w,"/w,{/w,}/w, ,{/w,}/w, ,-/w, ,{/w,}/w,"/w,./w,format/en,(/w,msgtype/en,,/w, ,msg/en,,/w, ,datetime/en,./w,datetime/en,./w,now/en,(/w,)/w,)/w,)/w,6/m,、/w,可视化码/nw,本/r,中/f,的/u,单词/n,注/v,：/w,在/p,前面/f,构建/v,出/v,关键点/n,和/c,局部/n,不/d,变/v,特征/n,描述符/n,、/w,建立/v,集群/nz,码本/nw,后/f,方可/d,实现/v,作用/n,：/w,将/d,码本/nw,中/f,k/en,-/w,means/en,分类/vn,后/f,的/u,直方图/n,，/w,转化/v,为/p,可视化/nz,图片/n,visuluze/en,_,centers/en,./w,py/en,#,coding/en,=/w,utf/en,-/w,8/m, ,from/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,resultsmontage/en, ,import/en, ,resultsmontage/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,pairwise/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,progressbar/en, ,import/en, ,argparse/en, ,import/en, ,pickle/en, ,import/en, ,h/en,5/m,py/en, ,import/en, ,cv/en,2/m, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,directory/en, ,of/en, ,indexed/en, ,images/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,features/en, ,database/en,"/w,)/w,#,提取/v,关键/n,和/c,局部/n,不/d,变描/nw,述符/nw,的/u,数据/n,记路/ns,经/p, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,c/en,"/w,,/w, ,"/w,--/nrf,codebook/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,codebook/en,"/w,)/w,#,可视/v,话/n,词汇表/n,中/f,的/u,视觉/n,词汇/n,路/n,经/p, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,o/en,"/w,,/w, ,"/w,--/nrf,output/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,output/en, ,directory/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,vocab/en, ,=/w, ,pickle/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,codebook/en,"/w,]/w,,/w, ,"/w,rb/en,"/w,)/w,./w,read/en,(/w,)/w,)/w, ,featuresdb/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,args/en,[/w,"/w,features/en,_,db/en,"/w,]/w,,/w, ,mode/en, ,=/w, ,"/w,r/en,"/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,starting/en, ,distance/en, ,distance/en, ,computations/en,./w,./w,./w,"/w,)/w, ,vis/en, ,=/w, ,{/w,i/en,:/w,[/w,]/w, ,for/en, ,i/en, ,in/en, ,np/en,./w,arange/en,(/w,0/m,,/w, ,len/en,(/w,vocab/en,)/w,)/w,}/w, ,widgets/en, ,=/w, ,[/w,"/w,comparing/en,:/w,"/w,,/w, ,progressbar/en,./w,percentage/en,(/w,)/w,,/w, ,"/w,"/w,,/w, ,progressbar/en,./w,bar/en,(/w,)/w,,/w, ,"/w,"/w,,/w, ,progressbar/en,./w,eta/en,(/w,)/w,]/w, ,pbar/en, ,=/w, ,progressbar/en,./w,progressbar/en,(/w,maxval/en, ,=/w, ,featuresdb/en,[/w,"/w,image/en,_,ids/en,"/w,]/w,./w,shape/en,[/w,0/m,]/w,,/w, ,widgets/en, ,=/w, ,widgets/en,)/w,./w,start/en,(/w,)/w, ,for/en, ,(/w,i/en,,/w, ,imageid/en,)/w, ,in/en, ,enumerate/en,(/w,featuresdb/en,[/w,"/w,image/en,_,ids/en,"/w,]/w,)/w,:/w, ,(/w,start/en,,/w, ,end/en,)/w, ,=/w, ,featuresdb/en,[/w,"/w,index/en,"/w,]/w,[/w,i/en,]/w, ,rows/en, ,=/w, ,featuresdb/en,[/w,"/w,features/en,"/w,]/w,[/w,start/en,:/w,end/en,]/w, ,(/w,kps/en,,/w, ,descs/en,)/w, ,=/w, ,(/w,rows/en,[/w,:/w,,/w, ,:/w,2/m,]/w,,/w, ,rows/en,[/w,:/w,,/w, ,2/m,:/w,]/w,)/w, ,for/en, ,(/w,kp/en,,/w, ,features/en,)/w, ,in/en, ,zip/en,(/w,kps/en,,/w, ,descs/en,)/w,:/w, ,features/en, ,=/w, ,features/en,./w,reshape/en,(/w,1/m,,/w, ,-/w, ,1/m,)/w, ,d/en, ,=/w, ,pairwise/en,./w,euclidean/en,_,distances/en,(/w,features/en,,/w, ,y/en, ,=/w, ,vocab/en,)/w,[/w,0/m,]/w, ,for/en, ,j/en, ,in/en, ,np/en,./w,arange/en,(/w,0/m,,/w, ,len/en,(/w,vocab/en,)/w,)/w,:/w, ,topresults/en, ,=/w, ,vis/en,./w,get/en,(/w,j/en,)/w, ,topresults/en,./w,append/en,(/w,(/w,d/en,[/w,j/en,]/w,,/w, ,kp/en,,/w, ,imageid/en,)/w,)/w, ,topresults/en, ,=/w, ,sorted/en,(/w,topresults/en,,/w, ,key/en, ,=/w, ,lambda/en, ,r/en,:/w,r/en,[/w,0/m,]/w,)/w,[/w,:/w,16/m,]/w, ,vis/en,[/w,j/en,]/w, ,=/w, ,topresults/en, ,pbar/en,./w,update/en,(/w,i/en,)/w, ,pbar/en,./w,finish/en,(/w,)/w, ,featuresdb/en,./w,close/en,(/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,writing/en, ,visualizations/en, ,to/en, ,file/en,./w,./w,./w,"/w,)/w, ,for/en, ,(/w,vwid/en,,/w, ,results/en,)/w, ,in/en, ,vis/en,./w,items/en,(/w,)/w,:/w, ,montage/en, ,=/w, ,resultsmontage/en,(/w,(/w,64/m,,/w, ,64/m,)/w,,/w, ,4/m,,/w, ,16/m,)/w, ,for/en, ,(/w,_,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,imageid/en,)/w, ,in/en, ,results/en,:/w, ,p/en, ,=/w, ,"/w,{/w,}/w,//w,{/w,}/w,"/w,./w,format/en,(/w,args/en,[/w,"/w,dataset/en,"/w,]/w,,/w, ,imageid/en,)/w, ,image/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,p/en,)/w, ,(/w,h/en,,/w, ,w/en,)/w, ,=/w, ,image/en,./w,shape/en,[/w,:/w,2/m,]/w, ,(/w,startx/en,,/w, ,endx/en,)/w, ,=/w, ,(/w,max/en,(/w,0/m,,/w, ,int/en,(/w,x/en,)/w, ,-/w, ,32/m,)/w,,/w, ,min/en,(/w,w/en,,/w, ,int/en,(/w,x/en,)/w, ,+/w, ,32/m,)/w,)/w, ,(/w,starty/en,,/w, ,endy/en,)/w, ,=/w, ,(/w,max/en,(/w,0/m,,/w, ,int/en,(/w,y/en,)/w, ,-/w, ,32/m,)/w,,/w, ,min/en,(/w,h/en,,/w, ,int/en,(/w,y/en,)/w, ,+/w, ,32/m,)/w,)/w, ,roi/en, ,=/w, ,image/en,[/w,starty/en,:/w,endy/en,,/w, ,startx/en,,/w, ,endx/en,]/w, ,montage/en,./w,addresult/en,(/w,roi/en,)/w, ,p/en, ,=/w, ,"/w,{/w,}/w,//w,vis/en,_,{/w,}/w,./w,jpg/en,"/w,./w,format/en,(/w,args/en,[/w,"/w,output/en,"/w,]/w,,/w, ,vwid/en,)/w, ,cv/en,2/m,./w,imwrite/en,(/w,p/en,,/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,montage/en,./w,montage/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,gray/en,)/w,)/w,7/m,、/w,矢量/n,量化/v,7.1/m,、/w,从/p,多/a,个/q,特征/n,到/v,单个/b,直方图/n,bagofvisualwords/en,./w,pyfrom/en, ,sklearn/en,./w,metrics/en, ,import/en, ,pairwise/en, ,from/en, ,scipy/en,./w,sparse/en, ,import/en, ,csr/en,_,matrix/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,class/en, ,bagofvisualwords/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,codebook/en,,/w, ,sparse/en, ,=/w, ,true/en,)/w,:/w, ,self/en,./w,codebook/en, ,=/w, ,codebook/en, ,self/en,./w,sparse/en, ,=/w, ,sparse/en, ,def/en, ,describe/en,(/w,self/en,,/w, ,features/en,)/w,:/w, ,d/en, ,=/w, ,pairwise/en,./w,euclidean/en,_,distances/en,(/w,features/en,,/w, ,y/en, ,=/w, ,self/en,./w,codebook/en,)/w, ,(/w,words/en,,/w, ,counts/en,)/w, ,=/w, ,np/en,./w,unique/en,(/w,np/en,./w,argmin/en,(/w,d/en,,/w, ,axis/en, ,=/w, ,1/m,)/w,,/w, ,return/en,_,counts/en, ,=/w, ,true/en,)/w, ,if/en, ,self/en,./w,sparse/en,:/w, ,hist/en, ,=/w, ,csr/en,_,matrix/en,(/w,(/w,counts/en,,/w, ,(/w,np/en,./w,zeros/en,(/w,(/w,len/en,(/w,words/en,)/w,,/w, ,)/w,)/w,,/w, ,words/en,)/w,)/w,,/w, ,shape/en, ,=/w, ,(/w,1/m,,/w, ,len/en,(/w,self/en,./w,codebook/en,)/w,)/w,,/w, ,dtype/en, ,=/w, ,"/w,float/en,"/w,)/w, ,else/en,:/w, ,hist/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,len/en,(/w,self/en,./w,codebook/en,)/w,,/w, ,)/w,,/w, ,dtype/en, ,=/w, ,"/w,float/en,"/w,)/w, ,hist/en,[/w,words/en,]/w, ,=/w, ,counts/en, ,return/en, ,histquantize/en,_,example/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,bagofvisualwords/en, ,import/en, ,bagofvisualwords/en, ,from/en, ,sklearn/en,./w,metrics/en, ,import/en, ,pairwise/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,np/en,./w,random/en,./w,seed/en,(/w,42/m,)/w, ,vocab/en, ,=/w, ,np/en,./w,random/en,./w,uniform/en,(/w,size/en, ,=/w, ,(/w,3/m,,/w, ,6/m,)/w,)/w, ,features/en, ,=/w, ,np/en,./w,random/en,./w,uniform/en,(/w,size/en, ,=/w, ,(/w,10/m,,/w, ,6/m,)/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,vocabulary/en,:/w,\/w,n/en,{/w,}/w,\/w,n/en,"/w,./w,format/en,(/w,vocab/en,)/w,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,features/en,:/w,\/w,n/en,{/w,}/w,\/w,n/en,"/w,./w,format/en,(/w,features/en,)/w,)/w, ,hist/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,3/m,,/w,)/w,,/w, ,dtype/en, ,=/w, ,"/w,int/en,32/m,"/w,)/w, ,for/en, ,(/w,i/en,,/w, ,f/en,)/w, ,in/en, ,enumerate/en,(/w,features/en,)/w,:/w, ,d/en, ,=/w, ,pairwise/en,./w,euclidean/en,_,distances/en,(/w,f/en,./w,reshape/en,(/w,1/m,,/w, ,-/w,1/m,)/w,,/w, ,y/en, ,=/w, ,vocab/en,)/w, ,j/en, ,=/w, ,np/en,./w,argmin/en,(/w,d/en,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,closest/en, ,visual/en, ,word/en, ,to/en, ,feature/en, ,#,{/w,}/w,:/w,{/w,}/w,"/w,./w,format/en,(/w,i/en,,/w, ,j/en,)/w,)/w, ,hist/en,[/w,j/en,]/w, ,+/w,=/w, ,1/m, ,print/en,(/w,"/w,[/w,info/en,]/w, ,updated/en, ,histogram/en,:/w,{/w,}/w,"/w,./w,format/en,(/w,hist/en,)/w,)/w, ,bovw/en, ,=/w, ,bagofvisualwords/en,(/w,vocab/en,,/w, ,sparse/en, ,=/w, ,false/en,)/w, ,hist/en, ,=/w, ,bovw/en,./w,describe/en,(/w,features/en,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,bovw/en, ,histogram/en,:/w,{/w,}/w,"/w,./w,format/en,(/w,hist/en,)/w,)/w,7.2/m,、/w,形成/v,bovw/en,运行/vn,命令/n,：/w,python/en, ,extract/en,_,bovw/en,./w,py/en, ,--/nrf,features/en,-/w,db/en, ,output/en,//w,features/en,./w,hdf/en,5/m, ,--/nrf,codebook/en, ,output/en,//w,vocab/en,./w,cpickle/en, , ,--/nrf,bovw/en,-/w,db/en, ,output/en,//w,bovw/en,./w,hdf/en,5/m, ,--/nrf,idf/en, ,output/en,//w,idf/en,./w,cpickleextract/en,_,bovw/en,./w,pyfrom/en, ,pyimagesearch/en,./w,ir/en,./w,bagofvisualwords/en, ,import/en, ,bagofvisualwords/en, ,from/en, ,pyimagesearch/en,./w,indexer/en,./w,bovwindexer/en, ,import/en, ,bovwindexer/en, ,import/en, ,argparse/en, ,import/en, ,pickle/en, ,import/en, ,h/en,5/m,py/en, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,features/en, ,database/en,"/w,)/w, ,#,关键点/n,和/c,局部/n,不/d,变/v,描述/v,符课程/nw,中/f,构建/v,的/u,hdf/en,5/m,数据集/nw,的/u,路径/n,。/w,该/r,数据库/n,应/v,包含/v,与/p,数据/n,集中/v,每个/r,图像/n,相关/v,的/u,图像/n,id/en,，/w,索引/n,和/c,原始/a,关键点/n,//w,特征/n,向量/n, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,c/en,"/w,,/w, ,"/w,--/nrf,codebook/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,codebook/en,"/w,)/w,#,我们/r,需要/v,可视化/nz,码本/nw,的/u,路径/n, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,b/en,"/w,,/w, ,"/w,--/nrf,bovw/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,where/en, ,the/en, ,bag/en,-/w,of/en,-/w,visual/en,-/w,words/en, ,database/en, ,will/en, ,be/en, ,stored/en,"/w,)/w,#,将/d,bovw/en,表示/v,存储/vn,在/p,一个/m,单独/d,的/u,hdf/en,5/m,数据库/n,中/f,的/u,路/n,经/p, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,idf/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,inverse/en, ,document/en, ,frequency/en, ,counts/en, ,will/en, ,be/en, ,stored/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,s/en,"/w,,/w, ,"/w,--/nrf,max/en,-/w,buffer/en,-/w,size/en,"/w,,/w, ,type/en, ,=/w, ,int/en,,/w, ,default/en, ,=/w, ,500/m,,/w, ,help/en, ,=/w, ,"/w,maximum/en, ,buffer/en, ,size/en, ,for/en, ,#, ,of/en, ,features/en, ,to/en, ,be/en, ,stored/en, ,in/en, ,memory/en,"/w,)/w,#,在/p,写入/v,hdf/en,5/m,数据集/nw,之前/f,在/p,内存/n,中/f,管理/vn,一个/m,原始/a,特征/n,向量/n,的/u,缓冲区/n,，/w,我们/r,将/d,在/p,这里/r,做/v,同样/d,的/u,事情/n, ,-/w, ,这次/r,我们/r,将/d,管理/vn,一个/m,bovw/en,直方图/n,缓冲区/n, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,vocab/en, ,=/w, ,pickle/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,codebook/en,"/w,]/w,,/w, ,"/w,rb/en,"/w,)/w,./w,read/en,(/w,)/w,)/w, ,bovw/en, ,=/w, ,bagofvisualwords/en,(/w,vocab/en,)/w, ,featuresdb/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,args/en,[/w,"/w,features/en,_,db/en,"/w,]/w,,/w, ,mode/en, ,=/w, ,"/w,r/en,"/w,)/w, ,bi/en, ,=/w, ,bovwindexer/en,(/w,bovw/en,./w,codebook/en,./w,shape/en,[/w,0/m,]/w,,/w, ,args/en,[/w,"/w,bovw/en,_,db/en,"/w,]/w,,/w, ,estnumimages/en, ,=/w, ,featuresdb/en,[/w,"/w,image/en,_,ids/en,"/w,]/w,./w,shape/en,[/w,0/m,]/w,,/w, ,maxbuffersize/en, ,=/w, ,args/en,[/w,"/w,max/en,_,buffer/en,_,size/en,"/w,]/w,)/w, ,for/en, ,(/w,i/en,,/w, ,(/w,imageid/en,,/w, ,offset/en,)/w,)/w, ,in/en, ,enumerate/en,(/w,zip/en,(/w,featuresdb/en,[/w,"/w,image/en,_,ids/en,"/w,]/w,,/w, ,featuresdb/en,[/w,"/w,index/en,"/w,]/w,)/w,)/w,:/w, ,if/en, ,i/en, ,>, ,0/m, ,and/en, ,i/en,%/w,10/m, ,=/w,=/w, ,0/m,:/w, ,bi/en,./w,_,debug/en,(/w,"/w,processed/en, ,{/w,}/w, ,images/en,"/w,./w,format/en,(/w,i/en,)/w,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,progress/en,]/w,"/w,)/w, ,features/en, ,=/w, ,featuresdb/en,[/w,"/w,features/en,"/w,]/w,[/w,offset/en,[/w,0/m,]/w,:/w,offset/en,[/w,1/m,]/w,]/w,[/w,:/w,,/w, ,2/m,:/w,]/w, ,hist/en, ,=/w, ,bovw/en,./w,describe/en,(/w,features/en,)/w, ,bi/en,./w,add/en,(/w,hist/en,)/w, ,featuresdb/en,./w,close/en,(/w,)/w, ,bi/en,./w,finish/en,(/w,)/w, ,f/en, ,=/w, ,open/en,(/w,args/en,[/w,"/w,idf/en,"/w,]/w,,/w, ,"/w,wb/en,"/w,)/w, ,f/en,./w,write/en,(/w,pickle/en,./w,dumps/en,(/w,bi/en,./w,df/en,(/w,method/en, ,=/w, ,"/w,idf/en,"/w,)/w,)/w,)/w, ,f/en,./w,close/en,(/w,)/w,bovwindexer/en,./w,pyfrom/en, ,./w,baseindexer/en, ,import/en, ,baseindexer/en, ,from/en, ,scipy/en, ,import/en, ,sparse/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,h/en,5/m,py/en, ,class/en, ,bovwindexer/en,(/w,baseindexer/en,)/w,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,fvectorsize/en,,/w, ,dbpath/en,,/w, ,estnumimages/en, ,=/w, ,500/m,,/w, ,maxbuffersize/en, ,=/w, ,500/m,,/w, ,dbresizefactor/en, ,=/w, ,2/m,,/w, ,verbose/en, ,=/w, ,true/en,)/w,:/w, ,super/en,(/w,bovwindexer/en,,/w, ,self/en,)/w,./w,_,_,init/en,_,_,(/w,dbpath/en,,/w, ,estnumimages/en, ,=/w, ,estnumimages/en,,/w, ,maxbuffersize/en, ,=/w, ,maxbuffersize/en,,/w, ,dbresizefactor/en, ,=/w, ,dbresizefactor/en,,/w, ,verbose/en, ,=/w, ,verbose/en,)/w, ,self/en,./w,db/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,self/en,./w,dbpath/en,,/w, ,mode/en, ,=/w, ,"/w,w/en,"/w,)/w, ,self/en,./w,bovwdb/en, ,=/w, ,none/en, ,self/en,./w,bovwbuffer/en, ,=/w, ,none/en, ,self/en,./w,idxs/en, ,=/w, ,{/w,"/w,bovw/en,"/w,:/w,0/m,}/w, ,self/en,./w,fvectorsize/en, ,=/w, ,fvectorsize/en, ,self/en,./w,_,df/en, ,=/w, ,np/en,./w,zeros/en,(/w,(/w,fvectorsize/en,,/w, ,)/w,,/w, ,dtype/en, ,=/w, ,"/w,float/en,"/w,)/w, ,self/en,./w,totalimages/en, ,=/w, ,0/m, ,def/en, ,add/en,(/w,self/en,,/w, ,hist/en,)/w,:/w, ,self/en,./w,bovwbuffer/en, ,=/w, ,baseindexer/en,./w,featurestack/en,(/w,hist/en,,/w, ,self/en,./w,bovwbuffer/en,,/w, ,stackmethod/en, ,=/w, ,sparse/en,./w,vstack/en,)/w, ,self/en,./w,_,df/en,[/w,np/en,./w,where/en,(/w,hist/en,./w,toarray/en,(/w,)/w,[/w,0/m,]/w, ,>, ,0/m,)/w,]/w, ,+/w,=/w, ,1/m, ,if/en, ,self/en,./w,bovwbuffer/en,./w,shape/en,[/w,0/m,]/w, ,>,=/w, ,self/en,./w,maxbuffersize/en,:/w, ,if/en, ,self/en,./w,bovwdb/en, ,is/en, ,none/en,:/w, ,self/en,./w,_,debug/en,(/w,"/w,initial/en, ,buffer/en, ,full/en,"/w,)/w, ,self/en,./w,_,createdatasets/en,(/w,)/w, ,self/en,./w,_,writebuffers/en,(/w,)/w, ,def/en, ,_,writebuffers/en,(/w,self/en,)/w,:/w, ,if/en, ,self/en,./w,bovwbuffer/en, ,is/en, ,not/en, ,none/en, ,and/en, ,self/en,./w,bovwbuffer/en,./w,shape/en,[/w,0/m,]/w, ,>, ,0/m,:/w, ,self/en,./w,_,writebuffer/en,(/w,self/en,./w,bovwdb/en,,/w, ,"/w,bovw/en,"/w,,/w, ,self/en,./w,bovwbuffer/en,,/w, ,"/w,bovw/en,"/w,,/w, ,sparse/en, ,=/w, ,true/en,)/w, ,self/en,./w,idxs/en,[/w,"/w,bovw/en,"/w,]/w, ,+/w,=/w, ,self/en,./w,bovwbuffer/en,./w,shape/en,[/w,0/m,]/w, ,self/en,./w,bovwbuffer/en, ,=/w, ,none/en, ,def/en, ,_,createdatasets/en,(/w,self/en,)/w,:/w, ,self/en,./w,_,debug/en,(/w,"/w,creating/en, ,datasets/en,./w,./w,./w,"/w,)/w, ,self/en,./w,bovwdb/en, ,=/w, ,self/en,./w,db/en,./w,create/en,_,dataset/en,(/w,"/w,bovw/en,"/w,,/w, ,(/w,self/en,./w,estnumimages/en,,/w, ,self/en,./w,fvectorsize/en,)/w,,/w, ,maxshape/en, ,=/w, ,(/w,none/en,,/w, ,self/en,./w,fvectorsize/en,)/w,,/w, ,dtype/en, ,=/w, ,"/w,float/en,"/w,)/w, ,def/en, ,finish/en,(/w,self/en,)/w,:/w, ,if/en, ,self/en,./w,bovwdb/en, ,is/en, ,none/en,:/w, ,self/en,./w,_,debug/en,(/w,"/w,minimum/en, ,init/en, ,buffer/en, ,not/en, ,reached/en,"/w,,/w, ,msgtype/en, ,=/w, ,"/w,[/w,warn/en,]/w,"/w,)/w, ,self/en,./w,_,createdatasets/en,(/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,writing/en, ,un/en,-/w,empty/en, ,buffers/en,./w,./w,./w,"/w,)/w, ,self/en,./w,_,writebuffers/en,(/w,)/w, ,self/en,./w,_,debug/en,(/w,"/w,compacting/en, ,datasets/en,./w,./w,./w,"/w,)/w, ,self/en,./w,_,resizedataset/en,(/w,self/en,./w,bovwdb/en,,/w, ,"/w,bovw/en,"/w,,/w, ,finished/en, ,=/w, ,self/en,./w,idxs/en,[/w,"/w,bovw/en,"/w,]/w,)/w, ,self/en,./w,totalimage/en, ,=/w, ,self/en,./w,bovwdb/en,./w,shape/en,[/w,0/m,]/w, ,self/en,./w,db/en,./w,close/en,(/w,)/w, ,def/en, ,df/en,(/w,self/en,,/w, ,method/en, ,=/w, ,none/en,)/w,:/w, ,if/en, ,method/en, ,=/w,=/w, ,"/w,idf/en,"/w,:/w, ,return/en, ,np/en,./w,log/en,(/w,self/en,./w,totalimages/en,//w,(/w,1.0/m, ,+/w, ,self/en,./w,_,df/en,)/w,)/w, ,return/en, ,sel/en,./w,_,df/en,8/m,、/w,反/v,转/v,索引/n,和/c,搜索/vn,8.1/m,、/w,建立/v,倒排/nw,索引/n,1/m,、/w,文件/n,结构/n,|/w,---/nrf, ,pyimagesearch/en,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w,---/nrf, ,db/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,redisqueue/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,descriptors/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,detectanddescribe/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,indexer/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,baseindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,bovwindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,featureindexer/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,ir/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,bagofvisualwords/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,vocabulary/en,./w,py/en,|/w,---/nrf, ,build/en,_,redis/en,_,index/en,./w,py/en,|/w,---/nrf, ,cluster/en,_,features/en,./w,py/en,|/w,---/nrf, ,extract/en,_,bvow/en,./w,py/en,|/w,---/nrf, ,index/en,_,features/en,./w,py/en,|/w,---/nrf, ,visualize/en,_,centers/en,./w,py/en,运行/vn,命令/n,：/w,redisqueue/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,class/en, ,redisqueue/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,redisdb/en,)/w,:/w, ,self/en,./w,redisdb/en, ,=/w, ,redisdb/en, ,def/en, ,add/en,(/w,self/en,,/w, ,imageidx/en,,/w, ,hist/en,)/w,:/w,#,imageidx/en,：/w,image/en,_,ids/en,中/f,hdf/en,5/m,数据/n,集中/v,图像/n,的/u,索引/n,。/w,hist/en,:/w,从/p,图像/n,中/f,提取/v,的/u,bovw/en,直方图/n, ,p/en, ,=/w, ,self/en,./w,redisdb/en,./w,pipeline/en,(/w,)/w, ,for/en, ,i/en, ,in/en, ,np/en,./w,where/en,(/w,hist/en, ,>, ,0/m,)/w,[/w,0/m,]/w,:/w, ,p/en,./w,rpush/en,(/w,"/w,vw/en,:/w,{/w,}/w,"/w,./w,format/en,(/w,i/en,)/w,,/w, ,imageidx/en,)/w, ,p/en,./w,execute/en,(/w,)/w, ,def/en, ,finish/en,(/w,self/en,)/w,:/w, ,self/en,./w,redisdb/en,./w,save/en,(/w,)/w,build/en,_,redis/en,_,index/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,db/en,./w,redisqueue/en, ,import/en, ,redisqueue/en, ,from/en, ,redis/en, ,import/en, ,redis/en, ,import/en, ,h/en,5/m,py/en, ,import/en, ,argparse/en, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,b/en,"/w,,/w, ,"/w,--/nrf,bovw/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,where/en, ,the/en, ,bag/en,-/w,of/en,-/w,visual/en,-/w,words/en, ,database/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,redisdb/en, ,=/w, ,redis/en,(/w,host/en, ,=/w, ,"/w,localhost/en,"/w,,/w, ,port/en, ,=/w, ,6379/m,,/w, ,db/en, ,=/w, ,0/m,)/w, ,rq/en, ,=/w, ,redisqueue/en,(/w,redisdb/en,)/w, ,bovwdb/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,args/en,[/w,"/w,bovw/en,_,db/en,"/w,]/w,,/w, ,mode/en, ,=/w, ,"/w,r/en,"/w,)/w, ,for/en, ,(/w,i/en,,/w, ,hist/en,)/w, ,in/en, ,enumerate/en,(/w,bovwdb/en,[/w,"/w,bovw/en,"/w,]/w,)/w,:/w, ,if/en, ,i/en, ,>, ,0/m, ,and/en, ,i/en,%/w,10/m, ,=/w,=/w, ,0/m,:/w, ,print/en,(/w,"/w,[/w,progress/en,]/w, ,processed/en, ,{/w,}/w, ,entries/en,"/w,./w,format/en,(/w,i/en,)/w,)/w, ,rq/en,./w,add/en,(/w,i/en,,/w, ,hist/en,)/w, ,bovwdb/en,./w,close/en,(/w,)/w, ,rq/en,./w,finish/en,(/w,)/w,8.2/m, ,执行/v,搜索/vn,文件/n,目录/n,结构/n,：/w,|/w,---/nrf, ,pyimagesearch/en,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w,---/nrf, ,db/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,redisqueue/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,descriptors/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,---/nrf, ,detectanddescribe/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,indexer/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,baseindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,bovwindexer/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,featureindexer/en,./w,py/en,|/w, , , , ,|/w,---/nrf, ,ir/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,_,_,init/en,_,_,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,bagofvisualwords/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,vocabulary/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,dists/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,searcher/en,./w,py/en,|/w, , , , ,|/w, , , , ,|/w,----/nrf, ,searchresult/en,./w,py/en,|/w,---/nrf, ,build/en,_,redis/en,_,index/en,./w,py/en,|/w,---/nrf, ,cluster/en,_,features/en,./w,py/en,|/w,---/nrf, ,extract/en,_,bvow/en,./w,py/en,|/w,---/nrf, ,index/en,_,features/en,./w,py/en,|/w,---/nrf, ,visualize/en,_,centers/en,./w,py/en,|/w,---/nrf, ,search/en,./w,py/en,运行/vn,命令/n,：/w,python/en, ,search/en,./w,py/en, ,--/nrf,dataset/en, ,./w,./w,//w,ukbench/en, ,--/nrf,features/en,-/w,db/en, ,output/en,//w,features/en,./w,hdf/en,5/m, ,--/nrf,bovw/en,-/w,db/en, ,output/en,//w,bovw/en,./w,hdf/en,5/m, ,--/nrf,codebook/en, ,output/en,//w,vocab/en,./w,cpickle/en, ,--/nrf,relevant/en, ,./w,./w,//w,ukbench/en,//w,relevant/en,./w,json/en, ,--/nrf,query/en, ,./w,./w,//w,ukbench/en,//w,ukbench/en,00258/m,./w,jpgsearch/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,descriptors/en,./w,detectanddescribe/en, ,import/en, ,detectanddescribe/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,bagofvisualwords/en, ,import/en, ,bagofvisualwords/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,searcher/en, ,import/en, ,searcher/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,dists/en, ,import/en, ,chi/en,2/m,_,distance/en, ,from/en, ,pyimagesearch/en,./w,resultsmontage/en, ,import/en, ,resultsmontage/en, ,from/en, ,scipy/en,./w,spatial/en, ,import/en, ,distance/en, ,from/en, ,redis/en, ,import/en, ,redis/en, ,from/en, ,imutils/en,./w,feature/en, ,import/en, ,featuredetector/en,_,create/en,,/w, ,descriptorextractor/en,_,create/en, ,import/en, ,argparse/en, ,import/en, ,pickle/en, ,import/en, ,imutils/en, ,import/en, ,json/en, ,import/en, ,cv/en,2/m, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,directory/en, ,of/en, ,indexed/en, ,images/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,features/en, ,database/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,b/en,"/w,,/w, ,"/w,--/nrf,bovw/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,bag/en,-/w,of/en,-/w,visual/en,-/w,words/en, ,database/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,c/en,"/w,,/w, ,"/w,--/nrf,codebook/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,relevant/en, ,dictionary/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,i/en,"/w,,/w, ,"/w,--/nrf,idf/en,"/w,,/w, ,type/en, ,=/w, ,str/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,inverted/en, ,document/en, ,frequencies/en, ,array/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,r/en,"/w,,/w, ,"/w,--/nrf,relevant/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,relevant/en, ,dictionary/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,q/en,"/w,,/w, ,"/w,--/nrf,query/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,query/en, ,image/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,detector/en, ,=/w, ,featuredetector/en,_,create/en,(/w,"/w,surf/en,"/w,)/w, ,descriptor/en, ,=/w, ,descriptorextractor/en,_,create/en,(/w,"/w,rootsift/en,"/w,)/w, ,dad/en, ,=/w, ,detectanddescribe/en,(/w,detector/en,,/w, ,descriptor/en,)/w, ,distancemetric/en, ,=/w, ,chi/en,2/m,_,distance/en, ,idf/en, ,=/w, ,none/en, ,if/en, ,args/en,[/w,"/w,idf/en,"/w,]/w, ,is/en, ,not/en, ,none/en,:/w, ,idf/en, ,=/w, ,pickle/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,idf/en,"/w,]/w,,/w, ,"/w,rb/en,"/w,)/w,./w,read/en,(/w,)/w,)/w, ,vocab/en, ,=/w, ,pickle/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,codebook/en,"/w,]/w,,/w, ,"/w,rb/en,"/w,)/w,./w,read/en,(/w,)/w,)/w, ,bovw/en, ,=/w, ,bagofvisualwords/en,(/w,vocab/en,)/w, ,relevant/en, ,=/w, ,json/en,./w,loads/en,(/w,open/en,(/w,args/en,[/w,"/w,relevant/en,"/w,]/w,)/w,./w,read/en,(/w,)/w,)/w, ,queryfilename/en, ,=/w, ,args/en,[/w,"/w,query/en,"/w,]/w,[/w,args/en,[/w,"/w,query/en,"/w,]/w,./w,rfind/en,(/w,"/w,//w,"/w,)/w, ,+/w, ,1/m,:/w,]/w, ,queryrelevant/en, ,=/w, ,relevant/en,[/w,queryfilename/en,]/w, ,queryimage/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,args/en,[/w,"/w,query/en,"/w,]/w,)/w, ,queryimage/en, ,=/w, ,imutils/en,./w,resize/en,(/w,queryimage/en,,/w, ,width/en, ,=/w, ,320/m,)/w, ,queryimage/en, ,=/w, ,cv/en,2/m,./w,cvtcolor/en,(/w,queryimage/en,,/w, ,cv/en,2/m,./w,color/en,_,bgr/en,2/m,gray/en,)/w, ,(/w,_,,/w, ,descs/en,)/w, ,=/w, ,dad/en,./w,describe/en,(/w,queryimage/en,)/w, ,hist/en, ,=/w, ,bovw/en,./w,describe/en,(/w,descs/en,)/w,./w,tocoo/en,(/w,)/w, ,redisdb/en, ,=/w, ,redis/en,(/w,host/en, ,=/w, ,"/w,localhost/en,"/w,,/w, ,port/en, ,=/w, ,6379/m,,/w, ,db/en, ,=/w, ,0/m,)/w, ,searcher/en, ,=/w, ,searcher/en,(/w,redisdb/en,,/w, ,args/en,[/w,"/w,bovw/en,_,db/en,"/w,]/w,,/w, ,args/en,[/w,"/w,features/en,_,db/en,"/w,]/w,,/w, ,idf/en, ,=/w, ,idf/en,,/w, ,distancemetric/en, ,=/w, ,distancemetric/en,)/w, ,sr/en, ,=/w, ,searcher/en,./w,search/en,(/w,hist/en,,/w, ,numresults/en, ,=/w, ,20/m,)/w, ,print/en,(/w,"/w,[/w,info/en,]/w, ,search/en, ,took/en,:/w,{/w,:/w,./w,2/m,f/en,}/w,s/en,"/w,./w,format/en,(/w,sr/en,./w,search/en,_,time/en,)/w,)/w, ,montage/en, ,=/w, ,resultsmontage/en,(/w,(/w,240/m,,/w, ,320/m,)/w,,/w, ,5/m,,/w, ,20/m,)/w, ,for/en, ,(/w,i/en,,/w, ,(/w,score/en,,/w, ,resultid/en,,/w, ,resultidx/en,)/w,)/w, ,in/en, ,enumerate/en,(/w,sr/en,./w,results/en,)/w,:/w, ,print/en,(/w,"/w,[/w,result/en,]/w, ,{/w,result/en,_,num/en,}/w,./w,{/w,result/en,}/w, ,-/w,{/w,score/en,:/w,./w,2/m,f/en,}/w,"/w,./w,format/en,(/w,result/en,_,num/en, ,=/w, ,i/en, ,+/w, ,1/m,,/w, ,result/en, ,=/w, ,resultid/en,,/w, ,score/en, ,=/w, ,score/en,)/w,)/w, ,result/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,"/w,{/w,}/w,//w,{/w,}/w,"/w,./w,format/en,(/w,args/en,[/w,"/w,dataset/en,"/w,]/w,,/w, ,resultid/en,)/w,)/w, ,montage/en,./w,addresult/en,(/w,result/en,,/w, ,text/en, ,=/w, ,"/w,#,{/w,}/w,"/w,./w,format/en,(/w,i/en, ,+/w, ,1/m,)/w,,/w, ,highlight/en, ,=/w, ,resultid/en, ,in/en, ,queryrelevant/en,)/w, ,cv/en,2/m,./w,imshow/en,(/w,"/w,result/en,"/w,,/w, ,imutils/en,./w,resize/en,(/w,montage/en,./w,montage/en,,/w, ,height/en, ,=/w, ,700/m,)/w,)/w, ,cv/en,2/m,./w,waitkey/en,(/w,0/m,)/w, ,searcher/en,./w,finish/en,(/w,)/w,searcher/en,./w,pyfrom/en, ,./w,searchresult/en, ,import/en, ,searchresult/en, ,from/en, ,./w,dists/en, ,import/en, ,chi/en,2/m,_,distance/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,datetime/en, ,import/en, ,h/en,5/m,py/en, ,class/en, ,searcher/en,:/w, ,def/en, ,_,_,init/en,_,_,(/w,self/en,,/w, ,redisdb/en,,/w, ,bovwdbpath/en,,/w, ,featuresdbpath/en,,/w, ,idf/en, ,=/w, ,none/en,,/w, ,distancemetric/en, ,=/w, ,chi/en,2/m,_,distance/en,)/w,:/w, ,self/en,./w,redisdb/en, ,=/w, ,redisdb/en, ,self/en,./w,idf/en, ,=/w, ,idf/en, ,self/en,./w,distancemetric/en, ,=/w, ,distancemetric/en, ,self/en,./w,bovwdb/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,bovwdbpath/en,,/w, ,mode/en, ,=/w, ,"/w,r/en,"/w,)/w, ,self/en,./w,featuresdb/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,featuresdbpath/en,,/w, ,"/w,r/en,"/w,)/w, ,def/en, ,search/en,(/w,self/en,,/w, ,queryhist/en,,/w, ,numresults/en, ,=/w, ,10/m,,/w, ,maxcandidates/en, ,=/w, ,200/m,)/w,:/w, ,starttime/en, ,=/w, ,datetime/en,./w,datetime/en,./w,now/en,(/w,)/w, ,candidateidxs/en, ,=/w, ,self/en,./w,buildcandidates/en,(/w,queryhist/en,,/w, ,maxcandidates/en,)/w, ,candidateidxs/en,./w,sort/en,(/w,)/w, ,hists/en, ,=/w, ,self/en,./w,bovwdb/en,[/w,"/w,bovw/en,"/w,]/w,[/w,candidateidxs/en,]/w, ,queryhist/en, ,=/w, ,queryhist/en,./w,toarray/en,(/w,)/w, ,results/en, ,=/w, ,{/w,}/w, ,if/en, ,self/en,./w,idf/en, ,is/en, ,not/en, ,none/en,:/w, ,queryhist/en, ,*/w,=/w, ,self/en,./w,idf/en, ,for/en, ,(/w,candidate/en,,/w, ,hist/en,)/w, ,in/en, ,zip/en,(/w,candidateidxs/en,,/w, ,hists/en,)/w,:/w, ,if/en, ,self/en,./w,idf/en, ,is/en, ,not/en, ,none/en,:/w, ,hist/en, ,*/w,=/w,self/en,./w,idf/en, ,d/en, ,=/w, ,self/en,./w,distancemetric/en,(/w,hist/en,,/w, ,queryhist/en,)/w, ,results/en,[/w,candidate/en,]/w, ,=/w, ,d/en, ,results/en, ,=/w, ,sorted/en,(/w,[/w,(/w,v/en,,/w, ,self/en,./w,featuresdb/en,[/w,"/w,image/en,_,ids/en,"/w,]/w,[/w,k/en,]/w,,/w, ,k/en,)/w, ,for/en, ,(/w,k/en,,/w, ,v/en,)/w, ,in/en, ,results/en,./w,items/en,(/w,)/w,]/w,)/w, ,results/en, ,=/w, ,results/en, ,=/w, ,results/en,[/w,:/w,numresults/en,]/w, ,return/en, ,searchresult/en,(/w,results/en,,/w, ,(/w,datetime/en,./w,datetime/en,./w,now/en,(/w,)/w, ,-/w, ,starttime/en,)/w,./w,total/en,_,seconds/en,(/w,)/w,)/w, ,def/en, ,buildcandidates/en,(/w,self/en,,/w, ,hist/en,,/w, ,maxcandidates/en,)/w,:/w, ,p/en, ,=/w, ,self/en,./w,redisdb/en,./w,pipeline/en,(/w,)/w, ,for/en, ,i/en, ,in/en, ,hist/en,./w,col/en,:/w, ,p/en,./w,lrange/en,(/w,"/w,vw/en,:/w,{/w,}/w,"/w,./w,format/en,(/w,i/en,)/w,,/w, ,0/m,,/w, ,-/w,1/m,)/w, ,pipelineresults/en, ,=/w, ,p/en,./w,execute/en,(/w,)/w, ,candidates/en, ,=/w, ,[/w,]/w, ,for/en, ,results/en, ,in/en, ,pipelineresults/en,:/w, ,results/en, ,=/w, ,[/w,int/en,(/w,r/en,)/w, ,for/en, ,r/en, ,in/en, ,results/en,]/w, ,candidates/en,./w,extend/en,(/w,results/en,)/w, ,(/w,imageidxs/en,,/w, ,counts/en,)/w, ,=/w, ,np/en,./w,unique/en,(/w,candidates/en,,/w, ,return/en,_,counts/en, ,=/w, ,true/en,)/w, ,imageidxs/en, ,=/w, ,[/w,i/en, ,for/en, ,(/w,c/en,,/w, ,i/en,)/w, ,in/en, ,sorted/en,(/w,zip/en,(/w,counts/en,,/w, ,imageidxs/en,)/w,,/w, ,reverse/en, ,=/w, ,true/en,)/w,]/w, ,return/en, ,imageidxs/en,[/w,:/w,maxcandidates/en,]/w, ,def/en, ,finish/en,(/w,self/en,)/w,:/w, ,self/en,./w,bovwdb/en,./w,close/en,(/w,)/w, ,self/en,./w,featuresdb/en,./w,close/en,(/w,)/w,dists/en,./w,pyimport/en, ,numpy/en, ,as/en, ,np/en, ,def/en, ,chi/en,2/m,_,distance/en,(/w,hista/en,,/w, ,histb/en,,/w, ,eps/en, ,=/w, ,1/m,e/en,-/w,10/m,)/w,:/w, ,d/en, ,=/w, ,0.5/m, ,*/w, ,np/en,./w,sum/en,(/w,(/w,(/w,hista/en, ,-/w, ,histb/en,)/w,*/w,*/w,2/m,)/w,//w,(/w,hista/en, ,+/w, ,histb/en, ,+/w, ,eps/en,)/w,)/w, ,return/en, ,dsearchersult/en,./w,pyfrom/en, ,collections/en, ,import/en, ,namedtuple/en, ,searchresult/en, ,=/w, ,namedtuple/en,(/w,"/w,searchresult/en,"/w,,/w, ,[/w,"/w,results/en,"/w,,/w, ,"/w,search/en,_,time/en,"/w,]/w,)/w,9/m,、/w,评估/vn,evaluate/en,./w,pyfrom/en, ,_,_,future/en,_,_, ,import/en, ,print/en,_,function/en, ,from/en, ,pyimagesearch/en,./w,descriptors/en,./w,detectanddescribe/en, ,import/en, ,detectanddescribe/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,bagofvisualwords/en, ,import/en, ,bagofvisualwords/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,searcher/en, ,import/en, ,searcher/en, ,from/en, ,pyimagesearch/en,./w,ir/en,./w,dists/en, ,import/en, ,chi/en,2/m,_,distance/en, ,from/en, ,scipy/en,./w,spatial/en, ,import/en, ,distance/en, ,from/en, ,redis/en, ,import/en, ,redis/en, ,from/en, ,imutils/en,./w,feature/en, ,import/en, ,featuredetector/en,_,create/en,,/w, ,descriptorextractor/en,_,create/en, ,import/en, ,numpy/en, ,as/en, ,np/en, ,import/en, ,progressbar/en, ,import/en, ,argparse/en, ,import/en, ,pickle/en, ,import/en, ,imutils/en, ,import/en, ,json/en, ,import/en, ,cv/en,2/m, ,ap/en, ,=/w, ,argparse/en,./w,argumentparser/en,(/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,d/en,"/w,,/w, ,"/w,--/nrf,dataset/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,directory/en, ,of/en, ,indexed/en, ,images/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,f/en,"/w,,/w, ,"/w,--/nrf,features/en,-/w,db/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,features/en, ,database/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,b/en,"/w,,/w, ,"/w,--/nrf,bovw/en,-/w,db/en,"/w,,/w, ,required/en,=/w,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,bag/en,-/w,of/en,-/w,visual/en,-/w,words/en, ,database/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,c/en,"/w,,/w, ,"/w,--/nrf,codebook/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,the/en, ,codebook/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,i/en,"/w,,/w, ,"/w,--/nrf,idf/en,"/w,,/w, ,type/en, ,=/w, ,str/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,inverted/en, ,document/en, ,frequencies/en, ,array/en,"/w,)/w, ,ap/en,./w,add/en,_,argument/en,(/w,"/w,-/w,r/en,"/w,,/w, ,"/w,--/nrf,relevant/en,"/w,,/w, ,required/en, ,=/w, ,true/en,,/w, ,help/en, ,=/w, ,"/w,path/en, ,to/en, ,relevant/en, ,dictionary/en,"/w,)/w, ,args/en, ,=/w, ,vars/en,(/w,ap/en,./w,parse/en,_,args/en,(/w,)/w,)/w, ,detector/en, ,=/w, ,featuredetector/en,_,create/en,(/w,"/w,surf/en,"/w,)/w, ,descriptor/en, ,=/w, ,descriptorextractor/en,_,create/en,(/w,"/w,rootsift/en,"/w,)/w, ,dad/en, 