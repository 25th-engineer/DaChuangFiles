github/en,地址/n,：/w,mask/en,_,rcnn/en,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,论文/n,学习/v,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,项目/n,文档/n,翻译/v,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其一/r,：/w,总览/nw,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其/r,二/m,：/w,基于/p,renet/en,101/m,的/u,fpn/en,共享/v,网络/n,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其/r,三/m,：/w,rpn/en,锚框/nw,处理/v,和/c,proposal/en,生成/vn,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其/r,四/m,：/w,fpn/en,和/c,roialign/en,的/u,耦合/vn,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其/r,五/m,：/w,目标/n,检测/vn,结果/n,精炼/a,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,其/r,六/m,：/w,mask/en,生成/vn,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,推断/vn,网络/n,终篇/nw,：/w,使用/v,detect/en,方法/n,进行/v,推断/vn,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,锚框/nw,生成/vn,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,训练/vn,网络/n,其一/r,：/w,数据集/nw,与/p,dataset/en,类/q,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,训练/vn,网络/n,其/r,二/m,：/w,train/en,网络结构/l,&/w,损失/n,函数/n,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,训练/vn,网络/n,其/r,三/m,：/w,训练/vn,model/en,一/m,、/w,模型/n,初始化/v,1/m,、/w,创建/v,模型/n,并/c,载入/v,预训练/nw,参数/n,准备/v,了/u,数据集/nw,后/f,，/w,我们/r,开始/v,构建/v,model/en,，/w,training/en,网络结构/l,上/f,一节/mq,已经/d,介绍/v,完/v,了/u,，/w,现在/t,我们/r,看/v,一/m,看/v,训练/vn,时/ng,如何/r,调用/v,training/en,结构/n,的/u,网络/n,。/w,如/v,上/f,所示/nz,，/w,我们/r,首先/d,建立/v,图/n,结构/n,（/w,详见/nz,上节/t,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,训练/vn,网络/n,其/r,二/m,：/w,train/en,网络结构/l,）/w,，/w,然后/c,选择/v,初始化/v,参数/n,方案/n,例子/n,（/w,train/en,_,shape/en,./w,ipynb/en,）/w,中/f,使用/v,的/u,是/v,coco/en,预训练/nw,模型/n,，/w,如果/c,想/v,要/v,"/w,finds/en, ,the/en, ,last/en, ,checkpoint/en, ,file/en, ,of/en, ,the/en, ,last/en, ,trained/en, ,model/en, ,in/en, ,themodel/en, ,directory/en,"/w,，/w,那么/r,选择/v,"/w,last/en,"/w,选项/v,。/w,载入/v,参数/n,方法/n,如下/v,，/w,注意/v,几/m,个/q,之前/f,接触/v,不/d,多/a,的/u,操作/v,，/w,载入/v,h/en,5/m,文件/n,使用/v,模块/n,为/p,h/en,5/m,pykeras/en, ,model/en,有/v,属性/n,./w,layers/en,以/p,list/en,形式/n,返回/v,全部/m,的/u,层/q,对象/n,keras/en,./w,engine/en,下/f,的/u,saving/en,模块/n,load/en,_,weights/en,_,from/en,_,hdf/en,5/m,_,group/en,_,by/en,_,name/en,按照/p,名字/n,对应/v,，/w,而/c,load/en,_,weights/en,_,from/en,_,hdf/en,5/m,_,group/en,按照/p,记录/v,顺序/n,对应/v,def/en, ,load/en,_,weights/en,(/w,self/en,,/w, ,filepath/en,,/w, ,by/en,_,name/en,=/w,false/en,,/w, ,exclude/en,=/w,none/en,)/w,:/w, ,"/w,"/w,"/w,modified/en, ,version/en, ,of/en, ,the/en, ,corresponding/en, ,keras/en, ,function/en, ,with/en, ,the/en, ,addition/en, ,of/en, ,multi/en,-/w,gpu/en, ,support/en, ,and/en, ,the/en, ,ability/en, ,to/en, ,exclude/en, ,some/en, ,layers/en, ,from/en, ,loading/en,./w, ,exclude/en,:/w, ,list/en, ,of/en, ,layer/en, ,names/en, ,to/en, ,exclude/en, ,"/w,"/w,"/w, ,import/en, ,h/en,5/m,py/en, ,#, ,conditional/en, ,import/en, ,to/en, ,support/en, ,versions/en, ,of/en, ,keras/en, ,before/en, ,2.2/m, ,#, ,todo/en,:/w, ,remove/en, ,in/en, ,about/en, ,6/m, ,months/en, ,(/w,end/en, ,of/en, ,2018/m,)/w, ,try/en,:/w, ,from/en, ,keras/en,./w,engine/en, ,import/en, ,saving/en, ,except/en, ,importerror/en,:/w, ,#, ,keras/en, ,before/en, ,2.2/m, ,used/en, ,the/en, ,'/w,topology/en,'/w, ,namespace/en,./w, ,from/en, ,keras/en,./w,engine/en, ,import/en, ,topology/en, ,as/en, ,saving/en, ,if/en, ,exclude/en,:/w, ,by/en,_,name/en, ,=/w, ,true/en, ,if/en, ,h/en,5/m,py/en, ,is/en, ,none/en,:/w, ,raise/en, ,importerror/en,(/w,'/w,`,load/en,_,weights/en,`, ,requires/en, ,h/en,5/m,py/en,./w,'/w,)/w, ,f/en, ,=/w, ,h/en,5/m,py/en,./w,file/en,(/w,filepath/en,,/w, ,mode/en,=/w,'/w,r/en,'/w,)/w, ,if/en, ,'/w,layer/en,_,names/en,'/w, ,not/en, ,in/en, ,f/en,./w,attrs/en, ,and/en, ,'/w,model/en,_,weights/en,'/w, ,in/en, ,f/en,:/w, ,f/en, ,=/w, ,f/en,[/w,'/w,model/en,_,weights/en,'/w,]/w, ,#, ,in/en, ,multi/en,-/w,gpu/en, ,training/en,,/w, ,we/en, ,wrap/en, ,the/en, ,model/en,./w, ,get/en, ,layers/en, ,#, ,of/en, ,the/en, ,inner/en, ,model/en, ,because/en, ,they/en, ,have/en, ,the/en, ,weights/en,./w, ,keras/en,_,model/en, ,=/w, ,self/en,./w,keras/en,_,model/en, ,layers/en, ,=/w, ,keras/en,_,model/en,./w,inner/en,_,model/en,./w,layers/en, ,if/en, ,hasattr/en,(/w,keras/en,_,model/en,,/w, ,"/w,inner/en,_,model/en,"/w,)/w,\/w, ,else/en, ,keras/en,_,model/en,./w,layers/en, ,#, ,exclude/en, ,some/en, ,layers/en, ,if/en, ,exclude/en,:/w, ,layers/en, ,=/w, ,filter/en,(/w,lambda/en, ,l/en,:/w, ,l/en,./w,name/en, ,not/en, ,in/en, ,exclude/en,,/w, ,layers/en,)/w, ,if/en, ,by/en,_,name/en,:/w, ,saving/en,./w,load/en,_,weights/en,_,from/en,_,hdf/en,5/m,_,group/en,_,by/en,_,name/en,(/w,f/en,,/w, ,layers/en,)/w, ,else/en,:/w, ,saving/en,./w,load/en,_,weights/en,_,from/en,_,hdf/en,5/m,_,group/en,(/w,f/en,,/w, ,layers/en,)/w, ,if/en, ,hasattr/en,(/w,f/en,,/w, ,'/w,close/en,'/w,)/w,:/w, ,f/en,./w,close/en,(/w,)/w, ,#, ,update/en, ,the/en, ,log/en, ,directory/en, ,self/en,./w,set/en,_,log/en,_,dir/en,(/w,filepath/en,)/w,2/m,、/w,从/p,h/en,5/m,文件/n,一/m,窥/vg,load/en,模式/n,keras/en, ,model/en,的/u,层/q,对于/p,layer/en,对象/n,我们/r,有/v,一下/m,几/m,点/q,说明/v,layer/en,./w,name/en,：/w,查询层/nw,对象/n,的/u,节点/n,名称/n,layer/en,./w,trainable/en,：/w,层/q,对象/n,是否/v,可/v,训练/vn,对于/p,timedistributed/en,对象/n,，/w,其/r,./w,layer/en,方法/n,返回/v,对象/n,才/d,是/v,我们/r,要/v,设定/v,的/u,层/q,对象/n,载入/v,模型/n,并/c,查看/v,layers/en,如下/v,，/w,查看/v,名称/n,如下/v,，/w,名称/n,即/v,我们/r,在/p,build/en,函数/n,中/f,为/p,每个/r,层/q,设置/v,的/u,名称/n,，/w,和/c,tensorflow/en,一样/u,，/w,参数/n,载入/v,依赖/v,于/p,此/r,。/w,h/en,5/m, ,文件/n,记录/v,载入/v,h/en,5/m,文件/n,并/c,查看/v,，/w,f/en,./w,attrs/en,记录/v,了/u,三个/m,值/n,，/w,第一/m,个/q,为/p,字符/n,串/v,list/en,，/w,后/f,两个/m,均/d,为/p,字符/n,串/v,，/w,对于/p,"/w,layer/en,_,names/en,"/w,我们/r,如下/v,尝试/vn,，/w,其/r,记录/v,了/u,各个/r,层/q,的/u,name/en,字符串/n,（/w,h/en,5/m,记录/v,的/u,都/d,是/v,二进制/n,形式/n,，/w,需要/v,转码/nw,）/w,在/p,keras/en,./w,engine/en,的/u,saving/en,方法/n,中/f,，/w,可以/v,看到/v,后/f,两个/m,记录/v,的/u,解析/v,，/w,实际/n,测试/vn,一个/m,是/v,keras/en,的/u,版本/n,号/q,，/w,一个/m,会/v,返回/v,b/en,'/w,tensorflow/en,'/w,if/en, ,'/w,keras/en,_,version/en,'/w, ,in/en, ,f/en,./w,attrs/en,:/w, ,original/en,_,keras/en,_,version/en, ,=/w, ,f/en,./w,attrs/en,[/w,'/w,keras/en,_,version/en,'/w,]/w,./w,decode/en,(/w,'/w,utf/en,8/m,'/w,)/w, ,else/en,:/w, ,original/en,_,keras/en,_,version/en, ,=/w, ,'/w,1/m,'/w, ,if/en, ,'/w,backend/en,'/w, ,in/en, ,f/en,./w,attrs/en,:/w, ,original/en,_,backend/en, ,=/w, ,f/en,./w,attrs/en,[/w,'/w,backend/en,'/w,]/w,./w,decode/en,(/w,'/w,utf/en,8/m,'/w,)/w, ,else/en,:/w, ,original/en,_,backend/en, ,=/w, ,none/en,"/w,layer/en,_,names/en,"/w,记录/v,的/u,字符串/n,们/k,可以/v,视为/v,h/en,5/m,文件/n,索引/n,，/w,其/r,索引/n,对象/n,为子/nw,h/en,5/m,对象/n,，/w,子/ng,h/en,5/m,对象/n,有/v,attrs/en,：/w,"/w,weight/en,_,names/en,"/w,，/w,也/d,是/v,字符/n,串/v,list/en,，/w,可以/v,索引子/nw,h/en,5/m,对象/n,，/w,其/r,索引/n,出/v,的/u,便/d,是/v,参数/n,值/n,，/w,示意/v,如下/v,：/w,实际/n,的/u,载入/v,参数/n,时/ng,，/w,keras/en, ,api/en,已经/d,封装/vn,的/u,很/d,好/a,了/u,，/w,不/d,需要/v,我们/r,自己/r,取/v,对应/v,h/en,5/m,中/f,的/u,名称/n,和/c,网络/n,中/f,的/u,名称/n,，/w,然后/c,更新/v,参数/n,值/n,。/w,交由/v,saving/en,./w,load/en,_,weights/en,_,from/en,_,hdf/en,5/m,_,group/en,_,by/en,_,name/en,(/w,f/en,,/w, ,layers/en,)/w,，/w,输入/v,f/en,句柄/nw,，/w,输入/v,需要/v,载入/v,参数/n,的/u,层/q,对象/n,即可/v,对应/v,名字/n,完成/v,载入/v,。/w,二/m,、/w,模型/n,训练/vn,本部/n,不/d,讲解/v,网络结构/l,，/w,主要/b,介绍/v,的/u,是/v,训练/vn,步骤/n,，/w,网络结构/l,介绍/v,见/v,：/w,『/w,计算机/n,视觉/n,』/w,mask/en,-/w,rcnn/en,_,训练/vn,网络/n,其/r,二/m,：/w,train/en,网络结构/l,模型/n,训练/vn,有/v,两种/mq,模式/n,，/w,only/en, ,the/en, ,heads/en,./w, ,here/en, ,we/en,'/w,re/en, ,freezing/en, ,all/en, ,the/en, ,backbone/en, ,layers/en, ,and/en, ,training/en, ,only/en, ,the/en, ,randomly/en, ,initialized/en, ,layers/en, ,(/w,i/en,./w,e/en,./w, ,the/en, ,ones/en, ,that/en, ,we/en, ,didn/en,'/w,t/en, ,use/en, ,pre/en,-/w,trained/en, ,weights/en, ,from/en, ,ms/en, ,coco/en,)/w,./w, ,to/en, ,train/en, ,only/en, ,the/en, ,head/en, ,layers/en,,/w, ,pass/en, ,layers/en,=/w,'/w,heads/en,'/w, ,to/en, ,the/en, ,train/en,(/w,)/w, ,function/en,./w,fine/en,-/w,tune/en, ,all/en, ,layers/en,./w, ,for/en, ,this/en, ,simple/en, ,example/en, ,it/en,'/w,s/en, ,not/en, ,necessary/en,,/w, ,but/en, ,we/en,'/w,re/en, ,including/en, ,it/en, ,to/en, ,show/en, ,the/en, ,process/en,./w, ,simply/en, ,pass/en, ,layers/en,=/w,"/w,all/en, ,to/en, ,train/en, ,all/en, ,layers/en,./w,1/m,、/w,train/en,方法/n,文档/n,train/en,方法/n,声明/n,如下/v,def/en, ,train/en,(/w,self/en,,/w, ,train/en,_,dataset/en,,/w, ,val/en,_,dataset/en,,/w, ,learning/en,_,rate/en,,/w, ,epochs/en,,/w, ,layers/en,,/w, ,augmentation/en,=/w,none/en,,/w, ,custom/en,_,callbacks/en,=/w,none/en,,/w, ,no/en,_,augmentation/en,_,sources/en,=/w,none/en,)/w,文档/n,说明/v,如下/v,"/w,"/w,"/w,train/en, ,the/en, ,model/en,./w,train/en,_,dataset/en,,/w, ,val/en,_,dataset/en,:/w, ,training/en, ,and/en, ,validation/en, ,dataset/en, ,objects/en,./w,learning/en,_,rate/en,:/w, ,the/en, ,learning/en, ,rate/en, ,to/en, ,train/en, ,withepochs/en,:/w, ,number/en, ,of/en, ,training/en, ,epochs/en,./w, ,note/en, ,that/en, ,previous/en, ,training/en, ,epochsare/en, ,considered/en, ,to/en, ,be/en, ,done/en, ,alreay/en,,/w, ,so/en, ,this/en, ,actually/en, ,determinesthe/en, ,epochs/en, ,to/en, ,train/en, ,in/en, ,total/en, ,rather/en, ,than/en, ,in/en, ,this/en, ,particaularcall/en,./w,layers/en,:/w, ,allows/en, ,selecting/en, ,which/en, ,layers/en, ,to/en, ,train/en,./w, ,it/en, ,can/en, ,be/en,:/w,-/w, ,a/en, ,regular/en, ,expression/en, ,to/en, ,match/en, ,layer/en, ,names/en, ,to/en, ,train/en,-/w, ,one/en, ,of/en, ,these/en, ,predefined/en, ,values/en,:/w,heads/en,:/w, ,the/en, ,rpn/en,,/w, ,classifier/en, ,and/en, ,mask/en, ,heads/en, ,of/en, ,the/en, ,networkall/en,:/w, ,all/en, ,the/en, ,layers/en,3/m,+/w,:/w, ,train/en, ,resnet/en, ,stage/en, ,3/m, ,and/en, ,up/en,4/m,+/w,:/w, ,train/en, ,resnet/en, ,stage/en, ,4/m, ,and/en, ,up/en,5/m,+/w,:/w, ,train/en, ,resnet/en, ,stage/en, ,5/m, ,and/en, ,upaugmentation/en,:/w, ,optional/en,./w, ,an/en, ,imgaug/en, ,(/w,https/en,:/w,//w,//w,github/en,./w,com/en,//w,aleju/en,//w,imgaug/en,)/w,augmentation/en,./w, ,for/en, ,example/en,,/w, ,passing/en, ,imgaug/en,./w,augmenters/en,./w,fliplr/en,(/w,0.5/m,)/w,flips/en, ,images/en, ,right/en,//w,left/en, ,50%/mq, ,of/en, ,the/en, ,time/en,./w, ,you/en, ,can/en, ,pass/en, ,complexaugmentations/en, ,as/en, ,well/en,./w, ,this/en, ,augmentation/en, ,applies/en, ,50%/mq, ,of/en, ,thetime/en,,/w, ,and/en, ,when/en, ,it/en, ,does/en, ,it/en, ,flips/en, ,images/en, ,right/en,//w,left/en, ,half/en, ,the/en, ,timeand/en, ,adds/en, ,a/en, ,gaussian/en, ,blur/en, ,with/en, ,a/en, ,random/en, ,sigma/en, ,in/en, ,range/en, ,0/m, ,to/en, ,5/m,./w,augmentation/en, ,=/w, ,imgaug/en,./w,augmenters/en,./w,sometimes/en,(/w,0.5/m,,/w, ,[/w,imgaug/en,./w,augmenters/en,./w,fliplr/en,(/w,0.5/m,)/w,,/w,imgaug/en,./w,augmenters/en,./w,gaussianblur/en,(/w,sigma/en,=/w,(/w,0.0/m,,/w, ,5.0/m,)/w,)/w,]/w,)/w,custom/en,_,callbacks/en,:/w, ,optional/en,./w, ,add/en, ,custom/en, ,callbacks/en, ,to/en, ,be/en, ,calledwith/en, ,the/en, ,keras/en, ,fit/en,_,generator/en, ,method/en,./w, ,must/en, ,be/en, ,list/en, ,of/en, ,type/en, ,keras/en,./w,callbacks/en,./w,no/en,_,augmentation/en,_,sources/en,:/w, ,optional/en,./w, ,list/en, ,of/en, ,sources/en, ,to/en, ,exclude/en, ,foraugmentation/en,./w, ,a/en, ,source/en, ,is/en, ,string/en, ,that/en, ,identifies/en, ,a/en, ,dataset/en, ,and/en, ,isdefined/en, ,in/en, ,the/en, ,dataset/en, ,class/en,./w,"/w,"/w,"/w,2/m,、/w,模型/n,准备/v,&/w,数据/n,准备/v,首先/d,对/p,模型/n,设置/v,进行/v,准备/v,。/w,指定/v,训练层/nw,时/ng,既/c,可以/v,输入层/nw,名层/nw,，/w,也/d,可以/v,输入/v,预定/v,的/u,字符/n,串/v,，/w,输入/v,预定/v,字符/n,串/v,则/d,其/r,解析/v,规则/n,见/v,下面/f,开头/n,几/m,行/v,。/w,最终/d,获取/v,layers/en,变量/n,记录/v,要/v,训练层/nw,的/u,名字/n,（/w,或者/c,正/d,则/d,表达式/n,）/w,然后/c,准备/v,数据/n,，/w,data/en,_,generator/en,函数/n,涉及/v,预/d,处理/v,流程/n,很/d,繁琐/a,（/w,见/v,model/en,./w,py/en,）/w,，/w,可以/v,自行/d,查阅/v,生成/vn,文件/n,保存/v,目录/n,assert/en, ,self/en,./w,mode/en, ,=/w,=/w, ,"/w,training/en,"/w,,/w, ,"/w,create/en, ,model/en, ,in/en, ,training/en, ,mode/en,./w,"/w, ,#, ,pre/en,-/w,defined/en, ,layer/en, ,regular/en, ,expressions/en, ,layer/en,_,regex/en, ,=/w, ,{/w, ,#, ,all/en, ,layers/en, ,but/en, ,the/en, ,backbone/en, ,"/w,heads/en,"/w,:/w, ,r/en,"/w,(/w,mrcnn/en,\/w,_,./w,*/w,)/w,|/w,(/w,rpn/en,\/w,_,./w,*/w,)/w,|/w,(/w,fpn/en,\/w,_,./w,*/w,)/w,"/w,,/w, ,#, ,from/en, ,a/en, ,specific/en, ,resnet/en, ,stage/en, ,and/en, ,up/en, ,"/w,3/m,+/w,"/w,:/w, ,r/en,"/w,(/w,res/en,3/m,./w,*/w,)/w,|/w,(/w,bn/en,3/m,./w,*/w,)/w,|/w,(/w,res/en,4/m,./w,*/w,)/w,|/w,(/w,bn/en,4/m,./w,*/w,)/w,|/w,(/w,res/en,5/m,./w,*/w,)/w,|/w,(/w,bn/en,5/m,./w,*/w,)/w,|/w,(/w,mrcnn/en,\/w,_,./w,*/w,)/w,|/w,(/w,rpn/en,\/w,_,./w,*/w,)/w,|/w,(/w,fpn/en,\/w,_,./w,*/w,)/w,"/w,,/w, ,"/w,4/m,+/w,"/w,:/w, ,r/en,"/w,(/w,res/en,4/m,./w,*/w,)/w,|/w,(/w,bn/en,4/m,./w,*/w,)/w,|/w,(/w,res/en,5/m,./w,*/w,)/w,|/w,(/w,bn/en,5/m,./w,*/w,)/w,|/w,(/w,mrcnn/en,\/w,_,./w,*/w,)/w,|/w,(/w,rpn/en,\/w,_,./w,*/w,)/w,|/w,(/w,fpn/en,\/w,_,./w,*/w,)/w,"/w,,/w, ,"/w,5/m,+/w,"/w,:/w, ,r/en,"/w,(/w,res/en,5/m,./w,*/w,)/w,|/w,(/w,bn/en,5/m,./w,*/w,)/w,|/w,(/w,mrcnn/en,\/w,_,./w,*/w,)/w,|/w,(/w,rpn/en,\/w,_,./w,*/w,)/w,|/w,(/w,fpn/en,\/w,_,./w,*/w,)/w,"/w,,/w, ,#, ,all/en, ,layers/en, ,"/w,all/en,"/w,:/w, ,"/w,./w,*/w,"/w,,/w, ,}/w, ,if/en, ,layers/en, ,in/en, ,layer/en,_,regex/en,./w,keys/en,(/w,)/w,:/w, ,layers/en, ,=/w, ,layer/en,_,regex/en,[/w,layers/en,]/w, ,#, ,data/en, ,generators/en, ,train/en,_,generator/en, ,=/w, ,data/en,_,generator/en,(/w,train/en,_,dataset/en,,/w, ,self/en,./w,config/en,,/w, ,shuffle/en,=/w,true/en,,/w, ,augmentation/en,=/w,augmentation/en,,/w, ,batch/en,_,size/en,=/w,self/en,./w,config/en,./w,batch/en,_,size/en,,/w, ,no/en,_,augmentation/en,_,sources/en,=/w,no/en,_,augmentation/en,_,sources/en,)/w, ,val/en,_,generator/en, ,=/w, ,data/en,_,generator/en,(/w,val/en,_,dataset/en,,/w, ,self/en,./w,config/en,,/w, ,shuffle/en,=/w,true/en,,/w, ,batch/en,_,size/en,=/w,self/en,./w,config/en,./w,batch/en,_,size/en,)/w, ,#, ,create/en, ,log/en,_,dir/en, ,if/en, ,it/en, ,does/en, ,not/en, ,exist/en, ,if/en, ,not/en, ,os/en,./w,path/en,./w,exists/en,(/w,self/en,./w,log/en,_,dir/en,)/w,:/w, ,os/en,./w,makedirs/en,(/w,self/en,./w,log/en,_,dir/en,)/w,3/m,、/w,model/en,处理/v,这里/r,主要/b,的/u,步骤/n,就/d,是/v,将/d,前/f,一步/mq,的/u,可/v,训练层/nw,名称/n,传入/v,函数/n,self/en,./w,set/en,_,trainable/en,(/w,layers/en,)/w,，/w,设置/v,对/p,应层/nw,对象/n,的/u,trainable/en,属性/n,为/p,trueself/en,./w,compile/en,方法/n,设定/v,优化器/nw,，/w,综合/vn,各个/r,loss/en,给/p,出/v,整体/n,优化/v,对象/n,，/w,最后/f,编译/vn,model/en,#, ,callbacks/en, ,callbacks/en, ,=/w, ,[/w, ,keras/en,./w,callbacks/en,./w,tensorboard/en,(/w,log/en,_,dir/en,=/w,self/en,./w,log/en,_,dir/en,,/w, ,histogram/en,_,freq/en,=/w,0/m,,/w, ,write/en,_,graph/en,=/w,true/en,,/w, ,write/en,_,images/en,=/w,false/en,)/w,,/w, ,keras/en,./w,callbacks/en,./w,modelcheckpoint/en,(/w,self/en,./w,checkpoint/en,_,path/en,,/w, ,verbose/en,=/w,0/m,,/w, ,save/en,_,weights/en,_,only/en,=/w,true/en,)/w,,/w, ,]/w, ,#, ,add/en, ,custom/en, ,callbacks/en, ,to/en, ,the/en, ,list/en, ,if/en, ,custom/en,_,callbacks/en,:/w, ,callbacks/en, ,+/w,=/w, ,custom/en,_,callbacks/en, ,#, ,train/en, ,log/en,(/w,"/w,\/w,nstarting/en, ,at/en, ,epoch/en, ,{/w,}/w,./w, ,lr/en,=/w,{/w,}/w,\/w,n/en,"/w,./w,format/en,(/w,self/en,./w,epoch/en,,/w, ,learning/en,_,rate/en,)/w,)/w, ,log/en,(/w,"/w,checkpoint/en, ,path/en,:/w, ,{/w,}/w,"/w,./w,format/en,(/w,self/en,./w,checkpoint/en,_,path/en,)/w,)/w, ,self/en,./w,set/en,_,trainable/en,(/w,layers/en,)/w, ,self/en,./w,compile/en,(/w,learning/en,_,rate/en,,/w, ,self/en,./w,config/en,./w,learning/en,_,momentum/en,)/w, ,#, ,work/en,-/w,around/en, ,for/en, ,windows/en,:/w, ,keras/en, ,fails/en, ,on/en, ,windows/en, ,when/en, ,using/en, ,#, ,multiprocessing/en, ,workers/en,./w, ,see/en, ,discussion/en, ,here/en,:/w, ,#, ,https/en,:/w,//w,//w,github/en,./w,com/en,//w,matterport/en,//w,mask/en,_,rcnn/en,//w,issues/en,//w,13/m,#,issuecomment/en,-/w,353124009/m, ,if/en, ,os/en,./w,name/en, ,is/en, ,'/w,nt/en,'/w,:/w, ,workers/en, ,=/w, ,0/m, ,else/en,:/w, ,workers/en, ,=/w, ,multiprocessing/en,./w,cpu/en,_,count/en,(/w,)/w, ,#, ,单机/n,默认/v,为/p,0/m,self/en,./w,compile/en,方法/n,def/en, ,compile/en,(/w,self/en,,/w, ,learning/en,_,rate/en,,/w, ,momentum/en,)/w,:/w, ,"/w,"/w,"/w,gets/en, ,the/en, ,model/en, ,ready/en, ,for/en, ,training/en,./w, ,adds/en, ,losses/en,,/w, ,regularization/en,,/w, ,and/en, ,metrics/en,./w, ,then/en, ,calls/en, ,the/en, ,keras/en, ,compile/en,(/w,)/w, ,function/en,./w, ,"/w,"/w,"/w, ,#, ,optimizer/en, ,object/en, ,optimizer/en, ,=/w, ,keras/en,./w,optimizers/en,./w,sgd/en,(/w, ,lr/en,=/w,learning/en,_,rate/en,,/w, ,