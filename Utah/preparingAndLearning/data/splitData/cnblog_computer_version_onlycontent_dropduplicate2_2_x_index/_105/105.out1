Selective Search for Object R e c o g i 
n i t i o n s u r g 
e w o n g @ gmail . comhttp / 
/ blog . csdn . net / surgewong 在前 一段 
时间 在看 论文 相关 的 工作 没有 时间 整理 对这 
篇 论文 的 理解 在 前面 的 一篇 博客 1 
中有 提到 Selective Search 2 其 前期 工作 利用 图像 
分割 的 方法 得到 一些 原始 区域 具体 内容 请 
查看 1 然后 使用 一些 合并 策略 将 这些 区域 
合并 得到 一个 层次化 的 区域 结构 而 这些 结构 
就 包含 着 可能 需要 的 物体 博客 3 已经 
有 对这 篇 论文 的 一些 简单 介绍 写 这篇 
博客 不免 有 重复 发明 轮子 之嫌 不想想 太多 只想 
把 自己 的 一些 理解 记录下来 加深 自己 的 理解 
这篇 论文 是 J . R . R . Uijlings 
发表 在 2012 IJCV 上 的 一篇 文章 主要 介绍 
了 选择性 搜索 Selective Search 的 方法 物体 识别 Object 
Recognition 在 图像 中 找到 确定 一个 物体 并 找出 
其为 具体位置 经过 长 时间 的 发展 已经 有了/nr 不少 
成就 之前 的 做法 主要 是 基于 穷举 搜索 Exhaustive 
Search 选择 一个 窗口 window 扫描 整张 图像 image 改变 
窗口 的 大小 继续 扫描 整张 图像 显然 这种 做法 
是 比较 原始 的 改变 窗口 大小 扫描 整张 图像 
直 观上 就 给人 一种 非常 耗时 结果 太 杂 
的 印象 作者 能够 突破 思维 定式 从 另一个 角度 
给 出 一种 简单 而 又 有效 的 方法 油 
生 敬意 我们 不禁 会想 为什么 这么 简单 的 方法 
之前 没有 想到 呢 我 想 这个 应该 跟对 图像 
认识 的 观念 有 关系 在 都不/nr 知道 如何 做 
物体 识别 Object Recognition 的 时候 较为 原始 的 穷举 
搜索 方法 给了 大家 一个 方向 之后 所有 的 人都 
沿着 这个 方向 走 最后 就 忽略 了 对 其他 
方向 的 认识 花费 了 这么 多年 才 找到 另一个 
方向 这个 转变 实属不易 扯 远了 总之 这种 方法 确实 
让 人 耳目一新 一 介绍 Introduction 图像 Image 包含 的 
信息 非常 的 丰富 其中 的 物体 Object 有 不同 
的 形状 shape 尺寸 scale 颜色 color 纹理 texture 要 
想从 图像 中 识别 出 一个 物体 非常 的 难 
还要 找到 物体 在 图像 中 的 位置 这样 就 
更 难了 下图 给 出了 四个 例子 来 说明 物体 
识别 Object Recognition 的 复杂性 以及 难度 a 中 的 
场景 是 一张 桌子 桌子 上面 放了 碗 瓶子 还有 
其他 餐具 等等 比如 要 识别 桌子 我们 可能 只是 
指 桌子 本身 也 可能 包含 其 上面 的 其他 
物体 这里 显示 出了 图像 中 不同 物体 之间 是 
有 一定 的 层次 关系 的 b 中 给出 了 
两只 猫 可以 通过 纹理 texture 来 找到 这 两只 
猫 却又 需要 通过 颜色 color 来 区分 它们 c 
中 变色龙 和 周边 颜色 接近 可以 通过 纹理 texture 
来 区分 d 中 的 车辆 我们 很 容易 把 
车身 和 车轮 看做 一个 整体 但 它们 两者 之间 
在 纹理 texture 和 颜色 color 方面 差别 都 非常 
地大 上面 简单 说明 了 一下 在做 物体 识别 Object 
Recognition 过程 中 不能通过 单一 的 策略 来 区分 不同 
的 物体 需要 充分 考虑 图像 物体 的 多样性 diversity 
另外 在 图像 中 物体 的 布局 有 一定 的 
层次 hierarchical 关系 考虑 这种 关系 才 能够 更好 地 
对 物体 的 类别 category 进行 区分 在 深入 介绍 
Selective Search 之前 先 说说 其 需要 考虑 的 几个 
问题 1 . 适应 不同 尺度 Capture All Scales 穷举 
搜索 Exhaustive Selective 通过 改变 窗口 大小 来 适应 物体 
的 不同 尺度 选择 搜索 Selective Search 同样 无法 避免 
这个 问题 算法 采用 了 图像 分割 Image Segmentation 以及 
使用 一种 层次 算法 Hierarchical Algorithm 有效 地 解决 了 
这个 问题 2 . 多样化 Diversification 单一 的 策略 无法 
应对 多种 类别 的 图像 使用 颜色 color 纹理 texture 
大小 size 等 多种 策略 对 1 中分 割好 的 
区域 region 进行 合并 3 . 速度快 Fast to Compute 
算法 就像 功夫 一样 唯 快 不破 二 区域 合并 
算法 这里 是 基于 区域 的 合并 区域 包含 的 
信息 比 像素 丰富 更 能够 有效 地 代表 物体 
的 特征 关于 区域 用于 物体 识别 的 的 方法 
请 参考 论文 4 这里 不 再多 说 以后 有 
空话 在 博客 中 写点 东西 首先 原始 区域 的 
获取 方法 可以 查看 博客 1 以 及其 相关 的 
论文 区域 的 合并 方式 是 有 层次 的 hierarchical 
类似于 哈夫曼树 的 构造 过程 输入 彩色图片 三 通道 输出 
物体 位置 的 可能 结果 L1 . 使用   Efficient 
Graph Based Image Segmentation 1 的 方法 获取 原始 分割 
区域 R = { r1 r2 rn } 2 . 
初始化 相似 度 集合 = ∅ 3 . 计算 两两 
相邻 区域 之间 的 相似 度 见 第三 部分 将其 
添加到 相似 度 集合 中 4 . 从 相似 度 
集合 中 找出 相似 度 最大 的 两个 区域 ri 
和 rj 将其 合并 成为 一个 区域 rt 从/p 相似/v 
度/zg 集合/v 中/f 除去/t 原先/d 与/p ri/w 和/c rj/w 相邻/v 
区域/n 之间/f 计算/v 的/uj 相似/v 度/zg 计算 rt 与其 相邻 
区域 原先 与 ri 或 rj 相邻 的 区域 的 
相似 度 将其 结果 添加 的 到 相似 度 集合 
中 同时 将 新 区域 rt 添加到 区域 集合 R 
中 5 . 获取 每个 区域 的 Bounding Boxes 这个 
结果 就是 物体 位置 的 可能 结果 L 三 多样化 
策略 论文 作者 给出 了 两个 方面 的 多样化 策略 
颜色 空间 多样化 相似 多样化 颜色 空间 多样化 作者 采用 
了 8中 不同 的 颜色 方式 主要 是 为了 考虑 
场景 以及 光照 条件 等 这个 策略 主要 应用于 1 
中 图像 分割 算法 中 原始 区域 的 生成 主要 
使用 的 颜色 空间 有 1 RGB 2 灰度 I 
3 Lab 4 rgI 归一化 的 rg 通道 加上 灰度 
5 HSV 6 rgb 归一化 的 RGB 7 C 具体 
请看 论文 2 以及 5 8 H HSV 的 H 
通道 对 颜色 空间 了解 不深 在此 不便 深入 说明 
等着 以后 慢慢 深入 计算机 视觉 领域 相似 度 计算 
多样化 在 区域 合并 的 时候 有 说道 计算 区域 
之间 的 相似 度 论 文章 介绍 了 四种 相似 
度 的 计算 方法 1 . 颜色 color 相似 度 
使用 L1 norm 归一化 获取 图像 每个 颜色通道 的 25 
bins 的 直方图 这样 每个 区域 都 可以 得到 一个 
75 维 的 向量 区域 之间 颜色 相似 度 通过 
下面 的 公式 计算 在 区域 合并 过程 中 使用 
需要 对 新的 区域 进行 计算 其 直方图 计算方法 2 
. 纹理 texture 相似 度 这里 的 纹理 采用 SIFT 
Like 特征 具体 做法 是 对 每个 颜色通道 的 8个 
不同 方向 计算 方差 σ = 1 的 高斯 微分 
Gaussian Derivative 每个 通道 每个 颜色 获取 10 bins 的 
直方图 L1 norm 归一化 这样 就 可以 获取 到 一个 
240 维 的 向量 区域 之间 纹理 相似 度 计算 
方式 和 颜色 相似 度 计算 方式 类似 合并 之后 
新 区域 的 纹理 特征 计算 方式 和 颜色 特征 
计算 相同 3 . 大小 size 相似 度 这里 的 
大小 是 指 区域 中 包含 像素点 的 个数 使用 
大小 的 相似 度 计算 主要 是 为了 尽量 让 
小 的 区域 先 合并 4 . 吻合 fit 相似 
度 这里 主要 是 为了 衡量 两个 区域 是否 更加 
吻合 其 指标 是 合并 后的/nr 区域 的 Bounding Box 
能够 框住 区域 的 最小 矩形 没有 旋转 越小 其 
吻 合度 越高 其 计算 方式 最后 将 上述 相似 
度 计算 方式 组合 到一起 可以 写成 如下 其中 四 
使用 选择 搜索 Selective Search 进行 物体 识别 通过 前面 
的 区域 合并 可以 得到 一些 列 物体 的 位置 
假设 L 接下来 的 任务 就是 如何 从中/nr 找出 物体 
的 真正 位置 并 确定 物体 的 类别 常用 的 
物体 识别 特征 有 HOG Histograms of oriented gradients 和 
bag of words 两种 特征 在 穷举 搜索 Exhaustive Search 
方法 中 寻找 合适 的 位置 假设 需要 花费 大量 
的 时间 能 选择 用于 物体 识别 的 特征 不能 
太 复杂 只能 使用 一些 耗时 少 的 特征 由于 
选择 搜索 Selective Search 在 得到 物体 的 位置 假设 
这一步 效率 较高 其 可以 采用 诸如 SIFT 等 运算 
量大 表示 能力强 的 特征 在 分类 过程 中 系统 
采用 的 是 SVM 特征 生成 系统 在 实现 过程 
中 使用 color SIFT 特征 6 以及 spatial pyramid divsion 
方法 7 在 一个 尺度 下 σ = 1.2 下 
抽样 提取 特征 使用 SIFT Extended OpponentSIFT 8 RGB SIFT 
6 特征 在 四层 金字塔 模型 1 × 1 2 
× 2 3 × 3 4 × 4 提取 特征 
可以 得到 一个 维 的 特征向量 注 对 SIFT 特征 
以及 金字塔 模型 还 不是 很 了解 讲得 不是 很 
清楚 训练 过程 训练方法 采用 SVM 首先 选择 包含 真实 
结果 ground truth 的 物体 窗口 作为 正 样本 positive 
examples 选择 与 正 样本 窗口 重叠 20% ~ 50% 
的 窗口 作为 负 样本 negative examples 在 选择 样本 
的 过程 中 剔除 彼此 重叠 70% 的 负 样本 
这样 可以 提供 一个 较好 的 初始化 结果 在 重复 
迭代 过程 中 加入 hard negative examples 得分 很高 的 
负 样本 9 由于 训练 模型 初始化 结果 较好 模型 
只 需要 迭代 两次 就 可以 了 样本 的 筛选 
很 重要 五 性能评价 很 自然地 通过 算法 计算 得到 
的 包含 物体 的 Bounding Boxes 与 真实 情况 ground 
truth 的 窗口 重叠 越多 那么 算法 性能 就 越好 
这是 使用 的 指标 是 平均 最高 重叠 率 ABO 
Average Best Overlap 对于 每个 固定 的 类别 c 每个 
真实情况 ground truth 表示 为   令 计算 得到 的 
位置 假设 L 中的 每个 值 l 那么 ABO 的 
公式 表达 为 重叠 率 的 计算 方式 上面 结果 
给出 的 是 一个 类别 的 ABO 对于 所有 类 
别下 的 性能评价 很 自然 就是 使用 所有 类别 的 
ABO 的 平均值 MABO Mean Average Best Overlap 来 评价 
上面 基本上 讲 了 一下 这篇 论文 的 框架 在 
2 中 可以 下载 得到 该 论文 相 对应 的 
matlab 代码 也 可以 在 10 中 下载 通过 该 
代码 获取 得到 图像 中 物体 的 位置 假设 L 
之后 我们 可以 利用 这个 结果 进行 更加 深入 的 
研究 由于 原 matlab 代码 中 部分 代码 经过 了 
加密 正在 使用 C + + 对其 进行 重写 得到 
结果 完善 之后 会将 其 公开 由于 入门 不深 上面 
的 理解 不免有些 错误 望 各位 指正 希望 与 大家 
多多 交流 ~ ~ 补充 于 2015 02 05 受 
各种 杂事 的 影响 很久 没有 更新 博客 现在 在学 
机器学习 相关 的 知识 图像 分割 相关 的 代码 没有 
来得及 整理 只好 把 之前 的 工程 直接 打包 其中 
不免有些 错误 或者 不足 忘 广大 博友 们 指正 C 
+ + 代码 只是 对 相关 的 matlab 代码 部分 
工程 的 重写 没有 仔细 比 对 两者 之间 的 
性能 不过 对 雨 了解 其 原理 还是 有 很大 
帮助 的 希望 对 初学者 有所 帮助 代码 下载 链接 
11 参考资料 1 CSDN Efficient Graph Based Image Segmentation 2 
Selective Search 3 CSDN Selective Search for Object Recognition 4 
Recognition Using Regions 5 Color Invariance 6 Evaluating color descriptors 
for object and scene recognition 7 Spatial pyramid matching for 
recognizing natural scene categories 8 Illumination invariant descriptors for discrimative 
visual object categorization Technical report University of Amsterdam 没有 找到 
相关 链接 9 Object detection with discriminatively trained part based 
models 10 相关 源代码 matlab 11 C + + 简版/nr 
代码 Selective Search for Object R e c o g i 
n i t i o n s u r g 
e w o n g @ gmail . comhttp / 
/ blog . csdn . net / surgewong 在前 一段 
时间 在看 论文 相关 的 工作 没有 时间 整理 对这 
篇 论文 的 理解 在 前面 的 一篇 博客 1 
中有 提到 Selective Search 2 其 前期 工作 利用 图像 
分割 的 方法 得到 一些 原始 区域 具体 内容 请 
查看 1 然后 使用 一些 合并 策略 将 这些 区域 
合并 得到 一个 层次化 的 区域 结构 而 这些 结构 
就 包含 着 可能 需要 的 物体 博客 3 已经 
有 对这 篇 论文 的 一些 简单 介绍 写 这篇 
博客 不免 有 重复 发明 轮子 之嫌 不想想 太多 只想 
把 自己 的 一些 理解 记录下来 加深 自己 的 理解 
这篇 论文 是 J . R . R . Uijlings 
发表 在 2012 IJCV 上 的 一篇 文章 主要 介绍 
了 选择性 搜索 Selective Search 的 方法 物体 识别 Object 
Recognition 在 图像 中 找到 确定 一个 物体 并 找出 
其为 具体位置 经过 长 时间 的 发展 已经 有了/nr 不少 
成就 之前 的 做法 主要 是 基于 穷举 搜索 Exhaustive 
Search 选择 一个 窗口 window 扫描 整张 图像 image 改变 
窗口 的 大小 继续 扫描 整张 图像 显然 这种 做法 
是 比较 原始 的 改变 窗口 大小 扫描 整张 图像 
直 观上 就 给人 一种 非常 耗时 结果 太 杂 
的 印象 作者 能够 突破 思维 定式 从 另一个 角度 
给 出 一种 简单 而 又 有效 的 方法 油 
生 敬意 我们 不禁 会想 为什么 这么 简单 的 方法 
之前 没有 想到 呢 我 想 这个 应该 跟对 图像 
认识 的 观念 有 关系 在 都不/nr 知道 如何 做 
物体 识别 Object Recognition 的 时候 较为 原始 的 穷举 
搜索 方法 给了 大家 一个 方向 之后 所有 的 人都 
沿着 这个 方向 走 最后 就 忽略 了 对 其他 
方向 的 认识 花费 了 这么 多年 才 找到 另一个 
方向 这个 转变 实属不易 扯 远了 总之 这种 方法 确实 
让 人 耳目一新 一 介绍 Introduction 图像 Image 包含 的 
信息 非常 的 丰富 其中 的 物体 Object 有 不同 
的 形状 shape 尺寸 scale 颜色 color 纹理 texture 要 
想从 图像 中 识别 出 一个 物体 非常 的 难 
还要 找到 物体 在 图像 中 的 位置 这样 就 
更 难了 下图 给 出了 四个 例子 来 说明 物体 
识别 Object Recognition 的 复杂性 以及 难度 a 中 的 
场景 是 一张 桌子 桌子 上面 放了 碗 瓶子 还有 
其他 餐具 等等 比如 要 识别 桌子 我们 可能 只是 
指 桌子 本身 也 可能 包含 其 上面 的 其他 
物体 这里 显示 出了 图像 中 不同 物体 之间 是 
有 一定 的 层次 关系 的 b 中 给出 了 
两只 猫 可以 通过 纹理 texture 来 找到 这 两只 
猫 却又 需要 通过 颜色 color 来 区分 它们 c 
中 变色龙 和 周边 颜色 接近 可以 通过 纹理 texture 
来 区分 d 中 的 车辆 我们 很 容易 把 
车身 和 车轮 看做 一个 整体 但 它们 两者 之间 
在 纹理 texture 和 颜色 color 方面 差别 都 非常 
地大 上面 简单 说明 了 一下 在做 物体 识别 Object 
Recognition 过程 中 不能通过 单一 的 策略 来 区分 不同 
的 物体 需要 充分 考虑 图像 物体 的 多样性 diversity 
另外 在 图像 中 物体 的 布局 有 一定 的 
层次 hierarchical 关系 考虑 这种 关系 才 能够 更好 地 
对 物体 的 类别 category 进行 区分 在 深入 介绍 
Selective Search 之前 先 说说 其 需要 考虑 的 几个 
问题 1 . 适应 不同 尺度 Capture All Scales 穷举 
搜索 Exhaustive Selective 通过 改变 窗口 大小 来 适应 物体 
的 不同 尺度 选择 搜索 Selective Search 同样 无法 避免 
这个 问题 算法 采用 了 图像 分割 Image Segmentation 以及 
使用 一种 层次 算法 Hierarchical Algorithm 有效 地 解决 了 
这个 问题 2 . 多样化 Diversification 单一 的 策略 无法 
应对 多种 类别 的 图像 使用 颜色 color 纹理 texture 
大小 size 等 多种 策略 对 1 中分 割好 的 
区域 region 进行 合并 3 . 速度快 Fast to Compute 
算法 就像 功夫 一样 唯 快 不破 二 区域 合并 
算法 这里 是 基于 区域 的 合并 区域 包含 的 
信息 比 像素 丰富 更 能够 有效 地 代表 物体 
的 特征 关于 区域 用于 物体 识别 的 的 方法 
请 参考 论文 4 这里 不 再多 说 以后 有 
空话 在 博客 中 写点 东西 首先 原始 区域 的 
获取 方法 可以 查看 博客 1 以 及其 相关 的 
论文 区域 的 合并 方式 是 有 层次 的 hierarchical 
类似于 哈夫曼树 的 构造 过程 输入 彩色图片 三 通道 输出 
物体 位置 的 可能 结果 L1 . 使用   Efficient 
Graph Based Image Segmentation 1 的 方法 获取 原始 分割 
区域 R = { r1 r2 rn } 2 . 
初始化 相似 度 集合 = ∅ 3 . 计算 两两 
相邻 区域 之间 的 相似 度 见 第三 部分 将其 
添加到 相似 度 集合 中 4 . 从 相似 度 
集合 中 找出 相似 度 最大 的 两个 区域 ri 
和 rj 将其 合并 成为 一个 区域 rt 从/p 相似/v 
度/zg 集合/v 中/f 除去/t 原先/d 与/p ri/w 和/c rj/w 相邻/v 
区域/n 之间/f 计算/v 的/uj 相似/v 度/zg 计算 rt 与其 相邻 
区域 原先 与 ri 或 rj 相邻 的 区域 的 
相似 度 将其 结果 添加 的 到 相似 度 集合 
中 同时 将 新 区域 rt 添加到 区域 集合 R 
中 5 . 获取 每个 区域 的 Bounding Boxes 这个 
结果 就是 物体 位置 的 可能 结果 L 三 多样化 
策略 论文 作者 给出 了 两个 方面 的 多样化 策略 
颜色 空间 多样化 相似 多样化 颜色 空间 多样化 作者 采用 
了 8中 不同 的 颜色 方式 主要 是 为了 考虑 
场景 以及 光照 条件 等 这个 策略 主要 应用于 1 
中 图像 分割 算法 中 原始 区域 的 生成 主要 
使用 的 颜色 空间 有 1 RGB 2 灰度 I 
3 Lab 4 rgI 归一化 的 rg 通道 加上 灰度 
5 HSV 6 rgb 归一化 的 RGB 7 C 具体 
请看 论文 2 以及 5 8 H HSV 的 H 
通道 对 颜色 空间 了解 不深 在此 不便 深入 说明 
等着 以后 慢慢 深入 计算机 视觉 领域 相似 度 计算 
多样化 在 区域 合并 的 时候 有 说道 计算 区域 
之间 的 相似 度 论 文章 介绍 了 四种 相似 
度 的 计算 方法 1 . 颜色 color 相似 度 
使用 L1 norm 归一化 获取 图像 每个 颜色通道 的 25 
bins 的 直方图 这样 每个 区域 都 可以 得到 一个 
75 维 的 向量 区域 之间 颜色 相似 度 通过 
下面 的 公式 计算 在 区域 合并 过程 中 使用 
需要 对 新的 区域 进行 计算 其 直方图 计算方法 2 
. 纹理 texture 相似 度 这里 的 纹理 采用 SIFT 
Like 特征 具体 做法 是 对 每个 颜色通道 的 8个 
不同 方向 计算 方差 σ = 1 的 高斯 微分 
Gaussian Derivative 每个 通道 每个 颜色 获取 10 bins 的 
直方图 L1 norm 归一化 这样 就 可以 获取 到 一个 
240 维 的 向量 区域 之间 纹理 相似 度 计算 
方式 和 颜色 相似 度 计算 方式 类似 合并 之后 
新 区域 的 纹理 特征 计算 方式 和 颜色 特征 
计算 相同 3 . 大小 size 相似 度 这里 的 
大小 是 指 区域 中 包含 像素点 的 个数 使用 
大小 的 相似 度 计算 主要 是 为了 尽量 让 
小 的 区域 先 合并 4 . 吻合 fit 相似 
度 这里 主要 是 为了 衡量 两个 区域 是否 更加 
吻合 其 指标 是 合并 后的/nr 区域 的 Bounding Box 
能够 框住 区域 的 最小 矩形 没有 旋转 越小 其 
吻 合度 越高 其 计算 方式 最后 将 上述 相似 
度 计算 方式 组合 到一起 可以 写成 如下 其中 四 
使用 选择 搜索 Selective Search 进行 物体 识别 通过 前面 
的 区域 合并 可以 得到 一些 列 物体 的 位置 
假设 L 接下来 的 任务 就是 如何 从中/nr 找出 物体 
的 真正 位置 并 确定 物体 的 类别 常用 的 
物体 识别 特征 有 HOG Histograms of oriented gradients 和 
bag of words 两种 特征 在 穷举 搜索 Exhaustive Search 
方法 中 寻找 合适 的 位置 假设 需要 花费 大量 
的 时间 能 选择 用于 物体 识别 的 特征 不能 
太 复杂 只能 使用 一些 耗时 少 的 特征 由于 
选择 搜索 Selective Search 在 得到 物体 的 位置 假设 
这一步 效率 较高 其 可以 采用 诸如 SIFT 等 运算 
量大 表示 能力强 的 特征 在 分类 过程 中 系统 
采用 的 是 SVM 特征 生成 系统 在 实现 过程 
中 使用 color SIFT 特征 6 以及 spatial pyramid divsion 
方法 7 在 一个 尺度 下 σ = 1.2 下 
抽样 提取 特征 使用 SIFT Extended OpponentSIFT 8 RGB SIFT 
6 特征 在 四层 金字塔 模型 1 × 1 2 
× 2 3 × 3 4 × 4 提取 特征 
可以 得到 一个 维 的 特征向量 注 对 SIFT 特征 
以及 金字塔 模型 还 不是 很 了解 讲得 不是 很 
清楚 训练 过程 训练方法 采用 SVM 首先 选择 包含 真实 
结果 ground truth 的 物体 窗口 作为 正 样本 positive 
examples 选择 与 正 样本 窗口 重叠 20% ~ 50% 
的 窗口 作为 负 样本 negative examples 在 选择 样本 
的 过程 中 剔除 彼此 重叠 70% 的 负 样本 
这样 可以 提供 一个 较好 的 初始化 结果 在 重复 
迭代 过程 中 加入 hard negative examples 得分 很高 的 
负 样本 9 由于 训练 模型 初始化 结果 较好 模型 
只 需要 迭代 两次 就 可以 了 样本 的 筛选 
很 重要 五 性能评价 很 自然地 通过 算法 计算 得到 
的 包含 物体 的 Bounding Boxes 与 真实 情况 ground 
truth 的 窗口 重叠 越多 那么 算法 性能 就 越好 
这是 使用 的 指标 是 平均 最高 重叠 率 ABO 
Average Best Overlap 对于 每个 固定 的 类别 c 每个 
真实情况 ground truth 表示 为   令 计算 得到 的 
位置 假设 L 中的 每个 值 l 那么 ABO 的 
公式 表达 为 重叠 率 的 计算 方式 上面 结果 
给出 的 是 一个 类别 的 ABO 对于 所有 类 
别下 的 性能评价 很 自然 就是 使用 所有 类别 的 
ABO 的 平均值 MABO Mean Average Best Overlap 来 评价 
上面 基本上 讲 了 一下 这篇 论文 的 框架 在 
2 中 可以 下载 得到 该 论文 相 对应 的 
matlab 代码 也 可以 在 10 中 下载 通过 该 
代码 获取 得到 图像 中 物体 的 位置 假设 L 
之后 我们 可以 利用 这个 结果 进行 更加 深入 的 
研究 由于 原 matlab 代码 中 部分 代码 经过 了 
加密 正在 使用 C + + 对其 进行 重写 得到 
结果 完善 之后 会将 其 公开 由于 入门 不深 上面 
的 理解 不免有些 错误 望 各位 指正 希望 与 大家 
多多 交流 ~ ~ 补充 于 2015 02 05 受 
各种 杂事 的 影响 很久 没有 更新 博客 现在 在学 
机器学习 相关 的 知识 图像 分割 相关 的 代码 没有 
来得及 整理 只好 把 之前 的 工程 直接 打包 其中 
不免有些 错误 或者 不足 忘 广大 博友 们 指正 C 
+ + 代码 只是 对 相关 的 matlab 代码 部分 
工程 的 重写 没有 仔细 比 对 两者 之间 的 
性能 不过 对 雨 了解 其 原理 还是 有 很大 
帮助 的 希望 对 初学者 有所 帮助 代码 下载 链接 
11 参考资料 1 CSDN Efficient Graph Based Image Segmentation 2 
Selective Search 3 CSDN Selective Search for Object Recognition 4 
Recognition Using Regions 5 Color Invariance 6 Evaluating color descriptors 
for object and scene recognition 7 Spatial pyramid matching for 
recognizing natural scene categories 8 Illumination invariant descriptors for discrimative 
visual object categorization Technical report University of Amsterdam 没有 找到 
相关 链接 9 Object detection with discriminatively trained part based 
models 10 相关 源代码 matlab 11 C + + 简版/nr 
代码 Selective Search for Object R e c o g i 
n i t i o n s u r g 
e w o n g @ gmail . comhttp / 
/ blog . csdn . net / surgewong 在前 一段 
时间 在看 论文 相关 的 工作 没有 时间 整理 对这 
篇 论文 的 理解 在 前面 的 一篇 博客 1 
中有 提到 Selective Search 2 其 前期 工作 利用 图像 
分割 的 方法 得到 一些 原始 区域 具体 内容 请 
查看 1 然后 使用 一些 合并 策略 将 这些 区域 
合并 得到 一个 层次化 的 区域 结构 而 这些 结构 
就 包含 着 可能 需要 的 物体 博客 3 已经 
有 对这 篇 论文 的 一些 简单 介绍 写 这篇 
博客 不免 有 重复 发明 轮子 之嫌 不想想 太多 只想 
把 自己 的 一些 理解 记录下来 加深 自己 的 理解 
这篇 论文 是 J . R . R . Uijlings 
发表 在 2012 IJCV 上 的 一篇 文章 主要 介绍 
了 选择性 搜索 Selective Search 的 方法 物体 识别 Object 
Recognition 在 图像 中 找到 确定 一个 物体 并 找出 
其为 具体位置 经过 长 时间 的 发展 已经 有了/nr 不少 
成就 之前 的 做法 主要 是 基于 穷举 搜索 Exhaustive 
Search 选择 一个 窗口 window 扫描 整张 图像 image 改变 
窗口 的 大小 继续 扫描 整张 图像 显然 这种 做法 
是 比较 原始 的 改变 窗口 大小 扫描 整张 图像 
直 观上 就 给人 一种 非常 耗时 结果 太 杂 
的 印象 作者 能够 突破 思维 定式 从 另一个 角度 
给 出 一种 简单 而 又 有效 的 方法 油 
生 敬意 我们 不禁 会想 为什么 这么 简单 的 方法 
之前 没有 想到 呢 我 想 这个 应该 跟对 图像 
认识 的 观念 有 关系 在 都不/nr 知道 如何 做 
物体 识别 Object Recognition 的 时候 较为 原始 的 穷举 
搜索 方法 给了 大家 一个 方向 之后 所有 的 人都 
沿着 这个 方向 走 最后 就 忽略 了 对 其他 
方向 的 认识 花费 了 这么 多年 才 找到 另一个 
方向 这个 转变 实属不易 扯 远了 总之 这种 方法 确实 
让 人 耳目一新 一 介绍 Introduction 图像 Image 包含 的 
信息 非常 的 丰富 其中 的 物体 Object 有 不同 
的 形状 shape 尺寸 scale 颜色 color 纹理 texture 要 
想从 图像 中 识别 出 一个 物体 非常 的 难 
还要 找到 物体 在 图像 中 的 位置 这样 就 
更 难了 下图 给 出了 四个 例子 来 说明 物体 
识别 Object Recognition 的 复杂性 以及 难度 a 中 的 
场景 是 一张 桌子 桌子 上面 放了 碗 瓶子 还有 
其他 餐具 等等 比如 要 识别 桌子 我们 可能 只是 
指 桌子 本身 也 可能 包含 其 上面 的 其他 
物体 这里 显示 出了 图像 中 不同 物体 之间 是 
有 一定 的 层次 关系 的 b 中 给出 了 
两只 猫 可以 通过 纹理 texture 来 找到 这 两只 
猫 却又 需要 通过 颜色 color 来 区分 它们 c 
中 变色龙 和 周边 颜色 接近 可以 通过 纹理 texture 
来 区分 d 中 的 车辆 我们 很 容易 把 
车身 和 车轮 看做 一个 整体 但 它们 两者 之间 
在 纹理 texture 和 颜色 color 方面 差别 都 非常 
地大 上面 简单 说明 了 一下 在做 物体 识别 Object 
Recognition 过程 中 不能通过 单一 的 策略 来 区分 不同 
的 物体 需要 充分 考虑 图像 物体 的 多样性 diversity 
另外 在 图像 中 物体 的 布局 有 一定 的 
层次 hierarchical 关系 考虑 这种 关系 才 能够 更好 地 
对 物体 的 类别 category 进行 区分 在 深入 介绍 
Selective Search 之前 先 说说 其 需要 考虑 的 几个 
问题 1 . 适应 不同 尺度 Capture All Scales 穷举 
搜索 Exhaustive Selective 通过 改变 窗口 大小 来 适应 物体 
的 不同 尺度 选择 搜索 Selective Search 同样 无法 避免 
这个 问题 算法 采用 了 图像 分割 Image Segmentation 以及 
使用 一种 层次 算法 Hierarchical Algorithm 有效 地 解决 了 
这个 问题 2 . 多样化 Diversification 单一 的 策略 无法 
应对 多种 类别 的 图像 使用 颜色 color 纹理 texture 
大小 size 等 多种 策略 对 1 中分 割好 的 
区域 region 进行 合并 3 . 速度快 Fast to Compute 
算法 就像 功夫 一样 唯 快 不破 二 区域 合并 
算法 这里 是 基于 区域 的 合并 区域 包含 的 
信息 比 像素 丰富 更 能够 有效 地 代表 物体 
的 特征 关于 区域 用于 物体 识别 的 的 方法 
请 参考 论文 4 这里 不 再多 说 以后 有 
空话 在 博客 中 写点 东西 首先 原始 区域 的 
获取 方法 可以 查看 博客 1 以 及其 相关 的 
论文 区域 的 合并 方式 是 有 层次 的 hierarchical 
类似于 哈夫曼树 的 构造 过程 输入 彩色图片 三 通道 输出 
物体 位置 的 可能 结果 L1 . 使用   Efficient 
Graph Based Image Segmentation 1 的 方法 获取 原始 分割 
区域 R = { r1 r2 rn } 2 . 
初始化 相似 度 集合 = ∅ 3 . 计算 两两 
相邻 区域 之间 的 相似 度 见 第三 部分 将其 
添加到 相似 度 集合 中 4 . 从 相似 度 
集合 中 找出 相似 度 最大 的 两个 区域 ri 
和 rj 将其 合并 成为 一个 区域 rt 从/p 相似/v 
度/zg 集合/v 中/f 除去/t 原先/d 与/p ri/w 和/c rj/w 相邻/v 
区域/n 之间/f 计算/v 的/uj 相似/v 度/zg 计算 rt 与其 相邻 
区域 原先 与 ri 或 rj 相邻 的 区域 的 
相似 度 将其 结果 添加 的 到 相似 度 集合 
中 同时 将 新 区域 rt 添加到 区域 集合 R 
中 5 . 获取 每个 区域 的 Bounding Boxes 这个 
结果 就是 物体 位置 的 可能 结果 L 三 多样化 
策略 论文 作者 给出 了 两个 方面 的 多样化 策略 
颜色 空间 多样化 相似 多样化 颜色 空间 多样化 作者 采用 
了 8中 不同 的 颜色 方式 主要 是 为了 考虑 
场景 以及 光照 条件 等 这个 策略 主要 应用于 1 
中 图像 分割 算法 中 原始 区域 的 生成 主要 
使用 的 颜色 空间 有 1 RGB 2 灰度 I 
3 Lab 4 rgI 归一化 的 rg 通道 加上 灰度 
5 HSV 6 rgb 归一化 的 RGB 7 C 具体 
请看 论文 2 以及 5 8 H HSV 的 H 
通道 对 颜色 空间 了解 不深 在此 不便 深入 说明 
等着 以后 慢慢 深入 计算机 视觉 领域 相似 度 计算 
多样化 在 区域 合并 的 时候 有 说道 计算 区域 
之间 的 相似 度 论 文章 介绍 了 四种 相似 
度 的 计算 方法 1 . 颜色 color 相似 度 
使用 L1 norm 归一化 获取 图像 每个 颜色通道 的 25 
bins 的 直方图 这样 每个 区域 都 可以 得到 一个 
75 维 的 向量 区域 之间 颜色 相似 度 通过 
下面 的 公式 计算 在 区域 合并 过程 中 使用 
需要 对 新的 区域 进行 计算 其 直方图 计算方法 2 
. 纹理 texture 相似 度 这里 的 纹理 采用 SIFT 
Like 特征 具体 做法 是 对 每个 颜色通道 的 8个 
不同 方向 计算 方差 σ = 1 的 高斯 微分 
Gaussian Derivative 每个 通道 每个 颜色 获取 10 bins 的 
直方图 L1 norm 归一化 这样 就 可以 获取 到 一个 
240 维 的 向量 区域 之间 纹理 相似 度 计算 
方式 和 颜色 相似 度 计算 方式 类似 合并 之后 
新 区域 的 纹理 特征 计算 方式 和 颜色 特征 
计算 相同 3 . 大小 size 相似 度 这里 的 
大小 是 指 区域 中 包含 像素点 的 个数 使用 
大小 的 相似 度 计算 主要 是 为了 尽量 让 
小 的 区域 先 合并 4 . 吻合 fit 相似 
度 这里 主要 是 为了 衡量 两个 区域 是否 更加 
吻合 其 指标 是 合并 后的/nr 区域 的 Bounding Box 
能够 框住 区域 的 最小 矩形 没有 旋转 越小 其 
吻 合度 越高 其 计算 方式 最后 将 上述 相似 
度 计算 方式 组合 到一起 可以 写成 如下 其中 四 
使用 选择 搜索 Selective Search 进行 物体 识别 通过 前面 
的 区域 合并 可以 得到 一些 列 物体 的 位置 
假设 L 接下来 的 任务 就是 如何 从中/nr 找出 物体 
的 真正 位置 并 确定 物体 的 类别 常用 的 
物体 识别 特征 有 HOG Histograms of oriented gradients 和 
bag of words 两种 特征 在 穷举 搜索 Exhaustive Search 
方法 中 寻找 合适 的 位置 假设 需要 花费 大量 
的 时间 能 选择 用于 物体 识别 的 特征 不能 
太 复杂 只能 使用 一些 耗时 少 的 特征 由于 
选择 搜索 Selective Search 在 得到 物体 的 位置 假设 
这一步 效率 较高 其 可以 采用 诸如 SIFT 等 运算 
量大 表示 能力强 的 特征 在 分类 过程 中 系统 
采用 的 是 SVM 特征 生成 系统 在 实现 过程 
中 使用 color SIFT 特征 6 以及 spatial pyramid divsion 
方法 7 在 一个 尺度 下 σ = 1.2 下 
抽样 提取 特征 使用 SIFT Extended OpponentSIFT 8 RGB SIFT 
6 特征 在 四层 金字塔 模型 1 × 1 2 
× 2 3 × 3 4 × 4 提取 特征 
可以 得到 一个 维 的 特征向量 注 对 SIFT 特征 
以及 金字塔 模型 还 不是 很 了解 讲得 不是 很 
清楚 训练 过程 训练方法 采用 SVM 首先 选择 包含 真实 
结果 ground truth 的 物体 窗口 作为 正 样本 positive 
examples 选择 与 正 样本 窗口 重叠 20% ~ 50% 
的 窗口 作为 负 样本 negative examples 在 选择 样本 
的 过程 中 剔除 彼此 重叠 70% 的 负 样本 
这样 可以 提供 一个 较好 的 初始化 结果 在 重复 
迭代 过程 中 加入 hard negative examples 得分 很高 的 
负 样本 9 由于 训练 模型 初始化 结果 较好 模型 
只 需要 迭代 两次 就 可以 了 样本 的 筛选 
很 重要 五 性能评价 很 自然地 通过 算法 计算 得到 
的 包含 物体 的 Bounding Boxes 与 真实 情况 ground 
truth 的 窗口 重叠 越多 那么 算法 性能 就 越好 
这是 使用 的 指标 是 平均 最高 重叠 率 ABO 
Average Best Overlap 对于 每个 固定 的 类别 c 每个 
真实情况 ground truth 表示 为   令 计算 得到 的 
位置 假设 L 中的 每个 值 l 那么 ABO 的 
公式 表达 为 重叠 率 的 计算 方式 上面 结果 
给出 的 是 一个 类别 的 ABO 对于 所有 类 
别下 的 性能评价 很 自然 就是 使用 所有 类别 的 
ABO 的 平均值 MABO Mean Average Best Overlap 来 评价 
上面 基本上 讲 了 一下 这篇 论文 的 框架 在 
2 中 可以 下载 得到 该 论文 相 对应 的 
matlab 代码 也 可以 在 10 中 下载 通过 该 
代码 获取 得到 图像 中 物体 的 位置 假设 L 
之后 我们 可以 利用 这个 结果 进行 更加 深入 的 
研究 由于 原 matlab 代码 中 部分 代码 经过 了 
加密 正在 使用 C + + 对其 进行 重写 得到 
结果 完善 之后 会将 其 公开 由于 入门 不深 上面 
的 理解 不免有些 错误 望 各位 指正 希望 与 大家 
多多 交流 ~ ~ 补充 于 2015 02 05 受 
各种 杂事 的 影响 很久 没有 更新 博客 现在 在学 
机器学习 相关 的 知识 图像 分割 相关 的 代码 没有 
来得及 整理 只好 把 之前 的 工程 直接 打包 其中 
不免有些 错误 或者 不足 忘 广大 博友 们 指正 C 
+ + 代码 只是 对 相关 的 matlab 代码 部分 
工程 的 重写 没有 仔细 比 对 两者 之间 的 
性能 不过 对 雨 了解 其 原理 还是 有 很大 
帮助 的 希望 对 初学者 有所 帮助 代码 下载 链接 
11 参考资料 1 CSDN Efficient Graph Based Image Segmentation 2 
Selective Search 3 CSDN Selective Search for Object Recognition 4 
Recognition Using Regions 5 Color Invariance 6 Evaluating color descriptors 
for object and scene recognition 7 Spatial pyramid matching for 
recognizing natural scene categories 8 Illumination invariant descriptors for discrimative 
visual object categorization Technical report University of Amsterdam 没有 找到 
相关 链接 9 Object detection with discriminatively trained part based 
models 10 相关 源代码 matlab 11 C + + 简版/nr 
代码 