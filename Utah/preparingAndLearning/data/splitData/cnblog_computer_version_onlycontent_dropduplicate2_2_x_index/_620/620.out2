第七/nw,章/q, ,目标/n,检测/vn,与/p,识别/v,梯度/n,直方图/n,histogram/en, ,of/en, ,oriented/en, ,gradient/en,图像/n,金字塔/n, ,image/en, ,pyramid/en,滑动/vn,窗口/s, ,sliding/en, ,window/en,1/m, ,目标/n,检测/vn,与/p,识别/v,a/en, ,hog/en,描述/v,符/vg,每个/r,单元/n,包含/v,八个/m,直方图/n,即/v,八个/m,方向/n,(/w,n/en,,/w,nw/en,,/w,w/en,,/w,sw/en,,/w,s/en,,/w,se/en,,/w,e/en,,/w,ne/en,)/w,尺度/n, , ,检测/vn,目标/n,可能/v,位于/v,较/d,大/a,图像/n,中/f,位置/n, , ,检测/vn,图像/n,可能/v,位于/v,图像/n,的/u,任意/d,位置/n,可以/v,使用/v,图像/n,金字塔/n,或是/c,滑动/vn,窗口/s,解决/v,非/h,最/d,大/a,抑制/v,支持/v,向/p,量机/nw,svm/en,算法/n,,/w,对于/p,带有/v,标签/n,的/u,训练/vn,数据/n,,/w,通过/p,一个/m,优化/v,的/u,超平/nw,面对/v,这些/r,数据/n,进行/v,分类/vn,b/en, , ,检测/vn,人/n,示例/n,代码/n,如下/v,;/w,#,!/w,//w,usr/en,//w,bin/en,//w,env/en, ,python/en, ,#, ,-/w,*/w,-/w, ,coding/en,:/w, ,utf/en,-/w,8/m, ,-/w,*/w,-/w, ,#, ,@/w,time/en, , , , ,:/w, ,2016/m,//w,12/m,//w,12/m, ,11/m,:/w,34/m, ,#, ,@/w,author/en, , ,:/w, ,retacn/en, ,#, ,@/w,site/en, , , , ,:/w, ,检测/vn,人/n, ,#, ,@/w,file/en, , , , ,:/w, ,hogdescriptor/en,./w,py/en, ,#, ,@/w,software/en,:/w, ,pycharm/en, ,_,_,author/en,_,_, ,=/w, ,"/w,retacn/en,"/w, ,_,_,copyright/en,_,_, ,=/w, ,"/w,property/en, ,of/en, ,mankind/en,./w,"/w, ,_,_,license/en,_,_, ,=/w, ,"/w,cn/en,"/w, ,_,_,version/en,_,_, ,=/w, ,"/w,0/m,./w,0/m,./w,1/m,"/w, ,_,_,maintainer/en,_,_, ,=/w, ,"/w,retacn/en,"/w, ,_,_,email/en,_,_, ,=/w, ,"/w,zhenhuayue/en,@/w,sina/en,./w,com/en,"/w, ,_,_,status/en,_,_, ,=/w, ,"/w,development/en,"/w, ,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,#, ,检测/vn,某个/r,矩形/n,是否/v,包含/v,另/r,一个/m,矩形/n, ,def/en, ,is/en,_,inside/en,(/w,o/en,,/w, ,i/en,)/w,:/w, , , , , ,ox/en,,/w, ,oy/en,,/w, ,ow/en,,/w, ,oh/en, ,=/w, ,o/en, , , , , ,ix/en,,/w, ,iy/en,,/w, ,iw/en,,/w, ,ih/en, ,=/w, ,i/en, , , , , ,return/en, ,ox/en, ,>, ,ix/en, ,and/en, ,oy/en, ,>, ,iy/en, ,and/en, ,ox/en, ,+/w, ,ow/en, ,</w, ,ix/en, ,+/w, ,iw/en, ,and/en, ,oy/en, ,+/w, ,oh/en, ,</w, ,iy/en, ,+/w, ,ih/en, ,#, ,绘制/v,矩形/n,框/q,住/v,检测/vn,到/v,的/u,人/n, ,def/en, ,draw/en,_,person/en,(/w,imgae/en,,/w, ,person/en,)/w,:/w, , , , , ,x/en,,/w, ,y/en,,/w, ,w/en,,/w, ,h/en, ,=/w, ,person/en, , , , , ,cv/en,2/m,./w,rectangle/en,(/w,imgae/en,,/w, ,(/w,x/en,,/w, ,y/en,)/w,,/w, ,(/w,x/en, ,+/w, ,w/en,,/w, ,y/en, ,+/w, ,h/en,)/w,,/w, ,(/w,0/m,,/w, ,255/m,,/w, ,255/m,)/w,,/w, ,2/m,)/w, ,#, ,读/v,入/v,图像/n, ,img/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,'/w,./w,./w,//w,people/en,./w,jpg/en,'/w,)/w, ,#, ,创建/v,检测器/n, ,hog/en, ,=/w, ,cv/en,2/m,./w,hogdescriptor/en,(/w,)/w, ,hog/en,./w,setsvmdetector/en,(/w,cv/en,2/m,./w,hogdescriptor/en,_,getdefaultpeopledetector/en,(/w,)/w,)/w, ,found/en,,/w, ,w/en, ,=/w, ,hog/en,./w,detectmultiscale/en,(/w,img/en,)/w, ,found/en,_,filtered/en, ,=/w, ,[/w,]/w, ,for/en, ,ri/en,,/w, ,r/en, ,in/en, ,enumerate/en,(/w,found/en,)/w,:/w, , , , , ,for/en, ,qi/en,,/w, ,q/en, ,in/en, ,enumerate/en,(/w,found/en,)/w,:/w, , , , , , , , , ,if/en, ,ri/en, ,!/w,=/w, ,qi/en, ,and/en, ,is/en,_,inside/en,(/w,r/en,,/w, ,q/en,)/w,:/w, , , , , , , , , , , , , ,break/en, , , , , , , , , ,else/en,:/w, , , , , , , , , , , , , ,found/en,_,filtered/en,./w,append/en,(/w,r/en,)/w, ,for/en, ,person/en, ,in/en, ,found/en,_,filtered/en,:/w, , , , , ,draw/en,_,person/en,(/w,img/en,,/w, ,person/en,)/w, ,#, ,显示/v,图像/n, ,cv/en,2/m,./w,imshow/en,(/w,'/w,people/en, ,detection/en,'/w,,/w, ,img/en,)/w, ,cv/en,2/m,./w,waitkey/en,(/w,0/m,)/w, ,cv/en,2/m,./w,destroyallwindows/en,(/w,)/w,c/en, ,创建/v,和/c,训练/vn,检测器/n,对于/p,检测/vn,不同/a,对/p,像/v,,/w,如何/r,建立/v,分类器/nw,使用/v,svm/en,和/c,词袋/nw,(/w,bag/en,-/w,of/en,-/w,word/en,)/w, ,bow/en,在/p,语言/n,分析/vn,中/f,的/u,应用/vn,示列/nw,如下/v,:/w,i/en, ,like/en, ,opencv/en, ,and/en, ,i/en, ,like/en, ,pythoni/en, ,like/en, ,c/en,+/w,+/w, ,and/en, ,pythoni/en, ,don/en,’/w,t/en, ,like/en, ,artichokes/en,可以/v,用以/d,下值/nw,来/v,建立/v,字典/n,{/w,i/en,:/w,4/m,,/w,like/en,:/w,4/m,,/w,opencv/en,:/w,2/m,,/w,and/en,:/w,2/m,python/en,:/w,2/m,c/en,+/w,+/w,:/w,1/m,don/en,’/w,t/en,:/w,1/m,artichokes/en,:/w,1/m,}/w,以上/f,的/u,三句/mq,话/n,可以/v,用/p,以下/f,向/p,量/n,表示/v,:/w,[/w,2/m,,/w,2/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,0/m,,/w,0/m,,/w,0/m,]/w,[/w,1/m,,/w,1/m,,/w,0/m,,/w,1/m,,/w,1/m,,/w,1/m,,/w,0/m,,/w,0/m,]/w,[/w,1/m,,/w,1/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,0/m,,/w,1/m,,/w,1/m,]/w,计算机/n,视觉/n,中/f,的/u,bow/en,取/v,样本/n,数据集/nw,对/p,数据/n,集中/v,的/u,每/r,幅/q,图像/n,提取/v,描述/v,符/vg,(/w,sif/en,,/w,surf/en,)/w,将/d,每个/r,描述/v,符添加/nr,到/v,bow/en,训练器/nw,中将/n,描述符/n,聚类/nw,开/v,k/en,族/ng,中/f,(/w,聚类/nw,的/u,中心/n,就/d,是/v,视觉/n,单词/n,)/w,k/en,-/w,means/en,聚类/nw, , ,用于/v,数据/n,分析/vn,的/u,向/p,量化/v,方法/n,2/m, ,汽车/n,检测/vn,数据集/nw,下载/v,the/en, ,university/en, ,orlllinoishttp/en,:/w,//w,//w,l/en,2/m,r/en,./w,cs/en,./w,uiuc/en,./w,edu/en,//w,~/w,cogcomp/en,//w,data/en,//w,car/en,//w,cardata/en,./w,tar/en,./w,gzstanforduniversityhttp/en,:/w,//w,//w,ai/en,./w,stanford/en,./w,edu/en,//w,~/w,jkrause/en,//w,cars/en,//w,car/en,_,dataset/en,./w,html/en,示例/n,代码/n,如下/v,:/w,import/en, ,cv/en,2/m, ,import/en, ,numpy/en, ,as/en, ,np/en, ,from/en, ,os/en,./w,path/en, ,import/en, ,join/en, ,#, ,todo/en, , ,定义/n,路径/n, ,datapath/en, ,=/w, ,'/w,e/en,:/w,//w,notes/en,//w,python/en,//w,opencv/en,_,python/en,//w,openlib/en,//w,cardata/en,//w,trainimages/en,'/w, ,#, ,取得/v,测试/vn,图像/n,的/u,完整/a,路径/n, ,def/en, ,path/en,(/w,cls/en,,/w, ,i/en,)/w,:/w, , , , , ,return/en, ,'/w,%/w,s/en,//w,%/w,s/en,%/w,d/en,./w,pgm/en,'/w, ,%/w, ,(/w,datapath/en,,/w, ,cls/en,,/w, ,i/en, ,+/w, ,1/m,)/w, ,pos/en,,/w, ,neg/en, ,=/w, ,'/w,pos/en,-/w,'/w,,/w, ,'/w,neg/en,-/w,'/w, ,#, ,使用/v,sif/en,,/w,surf/en, ,提取/v,特征/n,描述/v,符/vg, ,detect/en, ,=/w, ,cv/en,2/m,./w,xfeatures/en,2/m,d/en,./w,sift/en,_,create/en,(/w,)/w, , ,#, ,提取/v,关键点/n, ,extract/en, ,=/w, ,cv/en,2/m,./w,xfeatures/en,2/m,d/en,./w,surf/en,_,create/en,(/w,)/w, , ,#, ,提取/v,特征/n, ,#, ,使用/v,flann/en,匹配器/nw, ,flann/en,_,params/en, ,=/w, ,dict/en,(/w,algorithm/en,=/w,1/m,,/w, ,trees/en,=/w,5/m,)/w, ,matcher/en, ,=/w, ,cv/en,2/m,./w,flannbasedmatcher/en,(/w,flann/en,_,params/en,,/w, ,{/w,}/w,)/w, ,#, ,创建/v,bow/en,训练器/nw,,/w,簇数/nw,为/p,40/m, ,bow/en,_,kmeans/en,_,trainer/en, ,=/w, ,cv/en,2/m,./w,bowkmeanstrainer/en,(/w,40/m,)/w, ,#, ,初始化/v,bow/en,提取/v,器/ng, ,extract/en,_,bow/en, ,=/w, ,cv/en,2/m,./w,bowimgdescriptorextractor/en,(/w,extract/en,,/w, ,matcher/en,)/w, ,#, ,取得/v,图像/n,路径/n,,/w,认/v,灰度/n,格式/n,读/v,取/v,图像/n,,/w,返回/v,描述/v,符/vg, ,def/en, ,extract/en,_,sift/en,(/w,fn/en,)/w,:/w, , , , , ,im/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,fn/en,,/w, ,0/m,)/w, , , , , ,return/en, ,extract/en,./w,compute/en,(/w,im/en,,/w, ,detect/en,./w,detect/en,(/w,im/en,)/w,)/w,[/w,1/m,]/w, ,#, ,每个/r,类/q,读/v,取/v,8张/mq,图像/n, ,for/en, ,i/en, ,in/en, ,range/en,(/w,8/m,)/w,:/w, , , , , ,bow/en,_,kmeans/en,_,trainer/en,./w,add/en,(/w,extract/en,_,sift/en,(/w,path/en,(/w,pos/en,,/w, ,i/en,)/w,)/w,)/w, , , , , ,bow/en,_,kmeans/en,_,trainer/en,./w,add/en,(/w,extract/en,_,sift/en,(/w,path/en,(/w,neg/en,,/w, ,i/en,)/w,)/w,)/w, ,#, ,执行/v,k/en,-/w,means/en,分类/vn,并/c,返回/v,词汇/n, ,voc/en, ,=/w, ,bow/en,_,kmeans/en,_,trainer/en,./w,cluster/en,(/w,)/w, ,extract/en,_,bow/en,./w,setvocabulary/en,(/w,voc/en,)/w, ,#, ,取得/v,基于/p,bow/en,描述/v,符提取器/nw,计算/v,得到/v,的/u,描述符/n, ,def/en, ,bow/en,_,features/en,(/w,fn/en,)/w,:/w, , , , , ,im/en, ,=/w, ,cv/en,2/m,./w,imread/en,(/w,fn/en,,/w, ,cv/en,2/m,./w,imread/en,_,grayscale/en,)/w, , , , , ,return/en, ,extract/en,_,bow/en,./w,compute/en,(/w,im/en,,/w, ,detect/en,./w,detect/en,(/w,im/en,)/w,)/w, ,#, ,训练/vn,数据/n,和/c,标签/n, ,traindata/en,,/w, ,trainlables/en, ,=/w, ,[/w,]/w,,/w, ,[/w,]/w, ,#, ,生成/vn,正负/n,样本/n,图像/n,的/u,标签/n, ,for/en, ,i/en, ,in/en, ,range/en,(/w,20/m,)/w,:/w, , , , , ,#, ,extend/en,尾部/n,添加/vn, , , , , ,traindata/en,./w,extend/en,(/w,bow/en,_,features/en,(/w,path/en,(/w,pos/en,,/w, ,i/en,)/w,)/w,)/w,;/w, , , , , ,trainlables/en,./w,append/en,(/w,1/m,)/w, , , , , ,traindata/en,./w,extend/en,(/w,bow/en,_,features/en,(/w,path/en,(/w,neg/en,,/w, ,i/en,)/w,)/w,)/w,;/w, , , , , ,trainlables/en,./w,append/en,(/w,-/w,1/m,)/w, ,#, ,创建/v,svm/en,实例/n, ,svm/en, ,=/w, ,cv/en,2/m,./w,ml/en,./w,svm/en,_,create/en,(/w,)/w, ,#, ,训练/vn,数据/n,和/c,标签/n, ,svm/en,./w,train/en,(/w,np/en,./w,array/en,(/w,traindata/en,)/w,,/w, ,cv/en,2/m,./w,ml/en,./w,row/en,_,sample/en,,/w, ,np/en,./w,array/en,(/w,trainlables/en,)/w,)/w, ,#, ,显示/v,predict/en,结果/n, ,def/en, ,predict/en,(/w,fn/en,)/w,:/w, , ,