一/m,、/w,mask/en,-/w,rcnn/en,流程/n,mask/en, ,r/en,-/w,cnn/en,是/v,一个/m,实例/n,分割/v,（/w,instance/en, ,segmentation/en,）/w,算法/n,，/w,通过/p,增加/v,不同/a,的/u,分支/n,，/w,可以/v,完成/v,目标/n,分类/vn,、/w,目标/n,检测/vn,、/w,语义/n,分割/v,、/w,实例/n,分割/v,、/w,人体/n,姿势/n,识别/v,等/u,多种/m,任务/n,，/w,灵活/a,而/c,强大/a,。/w,mask/en, ,r/en,-/w,cnn/en,进行/v,目标/n,检测/vn,与/p,实例/n,分割/v,mask/en, ,r/en,-/w,cnn/en,进行/v,人体/n,姿态/n,识别/v,其/r,抽象/a,架构/n,如下/v,：/w,首先/d,，/w,输入/v,一幅/mq,你/r,想/v,处理/v,的/u,图片/n,，/w,然后/c,进行/v,对应/v,的/u,预/d,处理/v,操作/v,，/w,或者/c,预/d,处理/v,后/f,的/u,图片/n,；/w,然后/c,，/w,将/d,其/r,输入/v,到/v,一个/m,预训练/nw,好/a,的/u,神经/n,网络/n,中/f,（/w,resnext/en,等/u,）/w,获得/v,对应/v,的/u,feature/en, ,map/en,；/w,接着/c,，/w,对/p,这个/r,feature/en, ,map/en,中/f,的/u,每/r,一点/m,设定/v,预定/v,个/q,的/u,roi/en,，/w,从而/c,获得/v,多/a,个/q,候选/b,roi/en,；/w,接着/c,，/w,将/d,这些/r,候选/b,的/u,roi/en,送入/v,rpn/en,网络/n,进行/v,二值/nw,分类/vn,（/w,前景/n,或/c,背景/n,）/w,和/c,bb/en,回归/v,，/w,过滤/v,掉/v,一部分/m,候选/b,的/u,roi/en,（/w,截止/vn,到/v,目前/t,，/w,mask/en,和/c,faster/en,完全/ad,相同/a,，/w,其实/d,r/en,-/w,fcn/en,之类/r,的/u,在/p,这/r,之前/f,也/d,没有/v,什么/r,不同/a,）/w,；/w,接着/c,，/w,对/p,这些/r,剩下/v,的/u,roi/en,进行/v,roialign/en,操作/v,（/w,即/v,先/d,将/d,原/b,图/n,和/c,feature/en, ,map/en,的/u,pixel/en,对应/v,起来/v,，/w,然后/c,将/d,feature/en, ,map/en,和/c,固定/a,的/u,feature/en,对应/v,起来/v,）/w,（/w,roialign/en,为/p,本文/r,创新/v,点/q,1/m,，/w,比/p,roipooling/en,有/v,长足/a,进步/vn,）/w,；/w,最后/f,，/w,对/p,这些/r,roi/en,进行/v,分类/vn,（/w,n/en,类别/n,分类/vn,）/w,、/w,bb/en,回归/v,和/c,mask/en,生成/vn,（/w,在/p,每/r,一个/m,roi/en,里面/f,进行/v,fcn/en,操作/v,）/w,（/w,引入/v,fcn/en,生成/vn,mask/en,为/p,本文/r,创新/v,点/q,2/m,，/w,使得/v,本文/r,结构/n,可以/v,进行/v,分割型/nw,任务/n,）/w,。/w,【注/nw,】/w,有关/vn,mask/en,部分/n,，/w,还有/v,一处/mq,容易/a,忽视/v,的/u,创新/v,点/q,3/m,：/w,损失/n,函数/n,的/u,计算/v,，/w,作者/n,放弃/v,了/u,更/d,广泛/a,的/u,softmax/en,，/w,转而/c,使用/v,了/u,sigmoid/en,，/w,避免/v,了/u,同类/n,竞争/vn,，/w,更/d,多/a,的/u,经历/n,放/v,在/p,优化/v,mask/en,像素/n,上/f,，/w,这/r,一点/mq,我们/r,下一小节/nw,会/v,提到/v,。/w,二/m,、/w,mask/en,-/w,rcnn/en,结构/n,roipooling/en,的/u,问题/n,roipool/en,过程/n,假定/v,我们/r,输入/v,的/u,是/v,一张/mq,800/m,x/en,800/m,的/u,图像/n,，/w,在/p,图像/n,中/f,有/v,两个/m,目标/n,（/w,猫/n,和/c,狗/n,）/w,，/w,狗/n,的/u,bb/en,大小/n,为/p,665/m,x/en,665/m,，/w,经过/p,vgg/en,16/m,网络/n,后/f,，/w,获得/v,的/u,feature/en, ,map/en, ,会/v,比/p,原/b,图/n,缩小/v,一定/d,的/u,比例/n,，/w,这/r,和/c,pooling/en,层/q,的/u,个数/n,和/c,大小/n,有关/vn,：/w,在/p,该/r,vgg/en,16/m,中/f,，/w,我们/r,使用/v,了/u,5个/m,池化/nr,操作/v,，/w,每个/r,池化/nr,操作/v,都/d,是/v,2/m,pooling/en,，/w,因此/c,我们/r,最终/d,获得/v,feature/en, ,map/en,的/u,大小/n,为/p,800/m,//w,32/m, ,x/en, ,800/m,//w,32/m, ,=/w, ,25/m,x/en,25/m,（/w,是/v,整数/n,）/w,，/w,但是/c,将/d,狗/n,的/u,bb/en,对应/v,到/v,feature/en, ,map/en,上面/f,，/w,我们/r,得到/v,的/u,结果/n,是/v,665/m,//w,32/m, ,x/en, ,665/m,//w,32/m, ,=/w, ,20.78/m, ,x/en, ,20.78/m,，/w,结果/n,是/v,浮点数/nz,，/w,含有/v,小数/n,，/w,取整/nw,变为/v,20/m, ,x/en, ,20/m,，/w,在/p,这里/r,引入/v,了/u,第一/m,次/q,的/u,量化/v,误差/n,；/w,然后/c,我们/r,需要/v,将/d,20/m, ,x/en, ,20/m,的/u,roi/en,映射/v,成/v,7/m, ,x/en, ,7/m,的/u,roi/en, ,feature/en,，/w,其/r,结果/n,是/v, ,20/m, ,//w,7/m, ,x/en, ,20/m,//w,7/m, ,=/w, ,2.86/m, ,x/en, ,2.86/m,，/w,同样/d,是/v,浮点数/nz,，/w,含有/v,小数/n,点/q,，/w,同样/d,的/u,取整/nw,，/w,在/p,这里/r,引入/v,了/u,第二/m,次/q,量化/v,误差/n,。/w,这里/r,引入/v,的/u,误差/n,会/v,导致/v,图像/n,中/f,的/u,像素/n,和/c,特征/n,中/f,的/u,像素/n,的/u,偏差/n,，/w,即将/d,feature/en,空间/n,的/u,roi/en,对应/v,到/v,原图/nz,上面/f,会/v,出现/v,很/d,大/a,的/u,偏差/n,。/w,原因/n,如下/v,：/w,比如/v,用/p,我们/r,第二/m,次/q,引入/v,的/u,误差/n,来/v,分析/vn,，/w,本来/d,是/v,2/m,,/w,86/m,，/w,我们/r,将/d,其/r,量化/v,为/p,2/m,，/w,这/r,期间/f,引入/v,了/u,0.86/m,的/u,feature/en,空间/n,误差/n,，/w,我们/r,的/u,feature/en,空间/n,和/c,图像/n,空间/n,是/v,有/v,比例/n,关系/n,的/u,，/w,在/p,这里/r,是/v,1/m,:/w,32/m,，/w,那么/r,对应/v,到/v,原图/nz,上面/f,的/u,差距/n,就/d,是/v,0.86/m, ,x/en, ,32/m, ,=/w, ,27.52/m,（/w,这/r,仅仅/d,考虑/v,了/u,第二/m,次/q,的/u,量化/v,误差/n,）/w,。/w,roialignroialign/en,过程/n,为了/p,得到/v,为了/p,得到/v,固定/a,大小/n,（/w,7/m,x/en,7/m,）/w,的/u,feature/en, ,map/en,，/w,roialign/en,技术/n,并/c,没有/v,使用/v,量化/v,操作/v,，/w,取而代之/i,的/u,使用/v,了/u,双线性/nw,插值/nw,，/w,它/r,充分/ad,的/u,利用/v,了/u,原/b,图/n,中/f,虚拟点/nw,（/w,比如/v,20.56/m,这个/r,浮点数/nz,，/w,像素/n,位置/n,都/d,是/v,整/m,数值/n,，/w,没有/v,浮点值/nw,）/w,四周/f,的/u,四个/m,真实/a,存在/v,的/u,像/v,素值/nr,来/v,共同/d,决定/v,目标/n,图/n,中/f,的/u,一个/m,像素/n,值/n,，/w,即/v,可以/v,将/d,20.56/m,这个/r,虚拟/v,的/u,位置点/nw,对应/v,的/u,像/v,素值/nr,估计/v,出来/v,。/w,蓝色/n,的/u,虚线/n,框/q,表示/v,卷积/nw,后/f,获得/v,的/u,feature/en, ,map/en,，/w,黑色/n,实线/n,框/q,表示/v,roi/en, ,feature/en,，/w,最后/f,需要/v,输出/v,的/u,大小/n,是/v,2/m,x/en,2/m,，/w,那么/r,我们/r,就/d,利用/v,双线性/nw,插值/nw,来/v,估计/v,这些/r,蓝点/nw,（/w,虚拟/v,坐标点/nw,，/w,又称/v,双线性/nw,插值/nw,的/u,网格点/nw,）/w,处/n,所/u,对应/v,的/u,像素/n,值/n,，/w,最后/f,得到/v,相应/v,的/u,输出/v,。/w,然后/c,在/p,每/r,一个/m,橘红色/n,的/u,区域/n,里面/f,进行/v,max/en, ,pooling/en,或者/c,average/en, ,pooling/en,操作/v,，/w,获得/v,最终/d,2/m,x/en,2/m,的/u,输出/v,结果/n,。/w,我们/r,的/u,整个/b,过程/n,中/f,没有/v,用/p,到/v,量化/v,操作/v,，/w,没有/v,引入/v,误差/n,，/w,即/v,原/b,图/n,中/f,的/u,像素/n,和/c,feature/en, ,map/en,中/f,的/u,像素/n,是/v,完全/ad,对/p,齐/d,的/u,，/w,没有/v,偏差/n,，/w,这/r,不仅/c,会/v,提高/v,检测/vn,的/u,精度/n,，/w,同时/c,也/d,会/v,有利于/v,实例/n,分割/v,。/w,roi/en,处理/v,架构/n,为了/p,证明/v,我们/r,方法/n,的/u,通用性/n,，/w,我们/r,构造/v,了/u,多种/m,不同/a,结构/n,的/u,mask/en, ,r/en,-/w,cnn/en,。/w,详细/ad,的/u,说/v,，/w,我们/r,使用/v,不同/a,的/u,：/w,（/w,i/en,）/w,用于/v,整个/b,图像/n,上/f,的/u,特征/n,提取/v,的/u,卷积/nw,主干/n,架构/n,；/w,（/w,ii/en,）/w,用于/v,边框/n,识别/v,（/w,分类/vn,和/c,回归/v,）/w,和/c,掩模/nw,预测/v,的/u,上层/f,网络/n,，/w,分别/d,应用/vn,于/p,每个/r,roi/en,。/w,我们/r,使用/v,术语/n,“/w,网络/n,深层/b,特征/n,”/w,来/v,命名/v,下层/f,架构/n,。/w,我们/r,评估/vn,了/u,深度/n,为/p,50/m,或/c,101层/mq,的/u,resnet/en, ,[/w,14/m,]/w,和/c,resnext/en, ,[/w,34/m,]/w, ,网络/n,。/w,使用/v,resnet/en, ,[/w,14/m,]/w,的/u,faster/en, ,r/en,-/w,cnn/en,从/p,第四/nw,级/q,的/u,最终/d,卷/q,积层/nw,提取/v,特征/n,，/w,我们/r,称之为/v,c/en,4/m,。/w,例如/v,，/w,使用/v,resnet/en,-/w,50/m,的/u,主干/n,架构/n,由/p,resnet/en,-/w,50/m,-/w,c/en,4/m,表示/v,。/w,这/r,是/v,[/w,14/m,,/w,7/m,,/w,16/m,,/w,30/m,]/w,中/f,常用/a,的/u,选择/v,。/w,我们/r,也/d,探索/v,了/u,由/p,li/en,[/w,21/m,]/w,等/u,人/n,最近/t,提出/v,的/u,另/r,一种/mq,更/d,有效/a,主干/n,架构/n,，/w,称为/v,特征/n,金字塔/n,网络/n,（/w,fpn/en,）/w,。/w,fpn/en,使用/v,具有/v,横向/n,连接/v,（/w,lateral/en, ,connections/en, ,）/w,的/u,自顶向下/l,架构/n,，/w,从/p,单一/a,规模/n,的/u,输入/v,构建/v,网络/n,功能/n,金字塔/n,。/w,使用/v,fpn/en,的/u,faster/en, ,r/en,-/w,cnn/en,根据/p,其/r,尺度/n,提取/v,不同/a,级别/n,的/u,金字塔/n,的/u,roi/en,特征/n,，/w,不过/c,其他/r,部分/n,和/c,平常/a,的/u,resnet/en,类似/v,。/w,使用/v,resnet/en,-/w,fpn/en,主干/n,架构/n,的/u,mask/en, ,r/en,-/w,cnn/en,进行/v,特征/n,提取/v,，/w,可以/v,在/p,精度/n,和/c,速度/n,方面/n,获得/v,极大/a,的/u,提升/v,。/w,有关/vn,fpn/en,的/u,更/d,多/a,细节/n,，/w,读者/n,可以/v,参考/v,[/w,21/m,]/w,。/w,对于/p,上层/f,网络/n,，/w,我们/r,基本/a,遵循/v,了/u,以前/f,论文/n,中/f,提出/v,的/u,架构/n,，/w,我们/r,添加/vn,了/u,一个/m,全/a,卷积/nw,的/u,掩模/nw,预测/v,分支/n,。/w,具体来说/nw,，/w,我们/r,扩展/v,了/u,resnet/en, ,[/w,14/m,]/w,和/c,fpn/en,[/w,21/m,]/w,中/f,提出/v,的/u,faster/en, ,r/en,-/w,cnn/en,的/u,上层/f,网络/n,。/w,详情/n,见/v,下/f,图/n,（/w,）/w,所示/nz,：/w,（/w,上层/f,架构/n,：/w,我们/r,扩展/v,了/u,两种/mq,现有/v,的/u,faster/en, ,r/en,-/w,cnn/en,上层/f,架构/n,[/w,14/m,,/w,21/m,]/w,，/w,并/c,分别/d,添加/vn,了/u,一个/m,掩模/nw,分支/n,。/w,左/f,//w,右/f,面板/n,分别/d,显示/v,了/u,resnet/en, ,c/en,4/m,和/c,fpn/en,主干/n,的/u,上层/f,架构/n,。/w,图/n,中/f,数字/n,表示/v,通道/n,数/m,和/c,分辨率/n,，/w,箭头/n,表示/v,卷积/nw,、/w,反/v,卷积/nw,和/c,全连/nw,接层/nw,（/w,可以/v,通过/p,上下文/n,推断/vn,，/w,卷积/nw,减/v,小/a,维度/n,，/w,反/v,卷积/nw,增加/v,维度/n,。/w,）/w,所有/b,的/u,卷积/nw,都/d,是/v,3/m,×/w,3/m,的/u,，/w,除了/p,输出/v,层/q,是/v,1/m,×/w,1/m,。/w,反/v,卷积/nw,是/v,2/m,×/w,2/m,，/w,其/r,步/q,进/v,为/p,2/m,，/w,我们/r,在/p,隐藏层/nw,中/f,使用/v,relu/en,[/w,24/m,]/w,。/w,在/p,左图/n,中/f,，/w,“/w,res/en,5/m,”/w,表示/v,resnet/en,的/u,第五/nw,级/q,，/w,简单/a,起见/u,，/w,我们/r,修改/v,了/u,第一/m,个/q,卷积/nw,操作/v,，/w,使用/v,7/m,×/w,7/m,，/w,步长/nz,为/p,1/m,的/u,roi/en,代替/v,14/m,×/w,14/m,，/w,步长/nz,为/p,2/m,的/u,roi/en,[/w,14/m,]/w,。/w,右图/n,中/f,的/u,“/w,×/w,4/m, ,”/w,表示/v,堆叠/v,的/u,4个/m,连续/a,的/u,卷积/nw,。/w,）/w,resnet/en,-/w,c/en,4/m,主干/n,的/u,上层/f,网络/n,包括/v,resnet/en,的/u,第/m,5/m,阶段/n,（/w,即/v,9层/mq,的/u,’/w,res/en,5/m,’/w,[/w,14/m,]/w,）/w,，/w,这/r,是/v,计算/v,密集型/b,的/u,。/w,但/c,对于/p,fpn/en,，/w,其/r,主干/n,已经/d,包含/v,了/u,res/en,5/m,，/w,因此/c,可以/v,使/v,上层/f,网络/n,包含/v,更/d,少/a,的/u,卷积/nw,核/n,而/c,变/v,的/u,更加/d,高效/b,。/w,重点/n,在于/v,：/w,作者/n,把/p,各种/r,网络/n,作为/v,backbone/en,进行/v,对比/v,，/w,发现/v,使用/v,resnet/en,-/w,fpn/en,作为/v,特征/n,提取/v,的/u,backbone/en,具有/v,更/d,高/a,的/u,精度/n,和/c,更/d,快/a,的/u,运行/vn,速度/n,，/w,所以/c,实际/n,工作/vn,时/ng,大都/d,采用/v,右图/n,的/u,完全/ad,并行/v,的/u,mask/en,//w,分类/vn,回归/v,mask/en,分支/n,针对/p,每个/r,roi/en,产生/v,一个/m,k/en,*/w,m/en,*/w,m/en,的/u,输出/v,，/w,即/v,k/en,个/q,分辨率/n,为/p,m/en,*/w,m/en,的/u,二值/nw,的/u,掩膜/nw,，/w,k/en,为/p,分类/vn,物体/n,的/u,种类/n,数目/n,。/w,依据/n,预测/v,类别/n,分支/n,预测/v,的/u,输出/v,，/w,我们/r,仅/d,将/d,第/m,i/en,个/q,类别/n,的/u,输出/v,登记/v,，/w,用于/v,计算/v,mask/en, ,r/en,-/w,