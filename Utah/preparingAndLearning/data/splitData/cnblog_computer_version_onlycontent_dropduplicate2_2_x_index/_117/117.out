[/w,计算机/n,视觉/n,]/w, ,图像/n,拼接/vn, ,image/en, ,stitching/en,2017年/t,04月/t,28日/t, ,14/m,:/w,05/m,:/w,19/m,阅读数/n,：/w,1027/m,作业/vn,要求/v,：/w,1/m,、/w,将/d,多/a,张/q,图片/n,合并/v,拼接/vn,成/v,一张/mq,全景/n,图/n,（/w,看/v,下面/f,效果/n,图/n,）/w,2/m,、/w,尽量/d,用/p,c/en,//w,c/en,+/w,+/w,（/w,老师/n,说/v,用/p,matlab/en,会/v,给/p,很/d,低/a,的/u,分/q,_,(/w,:/w,зゝ/nw,∠/w,)/w,_,，/w,所以/c,下面/f,的/u,代码/n,全部/m,都/d,用/p,c/en,+/w,+/w,来/v,写/v,）/w,效果/n,图/n,：/w,实现/v,大致/d,步骤/n,：/w,1/m,、/w,sift/en,算法/n,进行/v,图像/n,特征/n,提取/v,（/w,sift/en,算法/n,是/v,http/en,:/w,//w,//w,blog/en,./w,csdn/en,./w,net/en,//w,v/en,_,july/en,_,v/en,//w,article/en,//w,details/en,//w,6245939/m,找/v,的/u,，/w,不过/c,是/v,用/p,c/en,写/v,，/w,不/d,太/d,好/a,获得/v,中间/f,结果/n,。/w,为了/p,方便/a,我们/r,这次/r,作业/vn,使用/v,，/w,我/r,改写/v,成/v,c/en,+/w,+/w,代码/n,）/w,2/m,、/w,利用/v,ransac/en,算法/n,进行/v,图像/n,特征/n,匹配/vn,3/m,、/w,利用/v,匹配/vn,关键点/n,进行/v,图像/n,拼接/vn,(/w,blending/en,)/w,实现/v,步骤/n,详解/v,：/w,1/m,、/w,sift/en,算法/n,进行/v,图像/n,特征/n,提取/v,：/w,sift/en,算法/n,在/p,这里/r,就/d,不/d,详细/ad,说/v,了/u,，/w,上面/f,的/u,链接/n,已经/d,讲/v,的/u,很/d,详细/ad,了/u,（/w,使用/v,上面/f,的/u,代码/n,要/v,配置/vn,opencv/en,环境/n,，/w,挺/d,简单/a,的/u,，/w,网上/s,很多/m,教程/n,）/w,。/w,我/r,是/v,将/d,上面/f,链接/n,的/u,代码/n,改写/v,成/v,c/en,+/w,+/w,，/w,封装/vn,了/u,一些/m,方法/n,，/w,使得/v,能够/v,提取/v,中间/f,结果/n,。/w,sift/en,算法/n,的/u,输入/v,是/v,图片/n,，/w,我们/r,需要/v,的/u,输出/v,是/v,各个/r,关键点/n,的/u,位置/n,、/w,128/m,维描/nr,述子/nw,（/w,用于/v,关键点/n,匹配/vn,）/w,。/w,而/c,代码/n,把/p,一个/m,关键点/n,的/u,这些/r,信息/n,都/d,封/q,装/v,在/p,一个/m,结构体/nw,keypoint/en,里面/f,。/w,同时/c,，/w,代码/n,将/d,所有/b,的/u,关键点/n,keypoint/en,保存/v,为/p,一个/m,链表/nw,list/en,形式/n,，/w,即/v,可以/v,根据/p,第一/m,个/q,节点/n,访问/v,到/v,所有/b,的/u,keypoint/en,节点/n,。/w,因此/c,我/r,在/p,改写/v,后/f,的/u,mysift/en,./w,h/en,文件/n,里/f,，/w,添加/vn,了/u,几/m,个/q,方法/n,，/w,一个/m,是/v,sift/en,的/u,方法/n,入口/n,siftmainprocess/en,(/w,)/w,，/w,一个/m,是/v,获取/v,处理/v,后/f,得到/v,的/u,关键点/n,的/u,头/n,结点/nw,方法/n,getfirstkeydescriptors/en,(/w,)/w,。/w,mysift/en,./w,h/en,：/w,mysift/en,./w,cpp/en,：/w,由于/c,./w,cpp/en,代码/n,有/v,1000/m,+/w,行/v,，/w,由于/c,篇幅/n,问题/n,，/w,在/p,这里/r,就/d,不/d,放/v,出来/v,了/u,_,(/w,:/w,зゝ/nw,∠/w,)/w,_,。/w,有/v,需要/v,的/u,可以/v,私聊/nw,下/f,我/r,哈/j,_,(/w,:/w,зゝ/nw,∠/w,)/w,_,或者/c,直接/ad,对/p,着/u,上面/f,链接/n,给/p,的/u,代码/n,找/v,一下/m,就/d,好/a,了/u,，/w,函数/n,名/q,都/d,一样/u,的/u,。/w,阶段/n,结果/n,：/w,黄色/n,圈圈/n,的/u,就/d,是/v,识别/v,出来/v,的/u,关键点/n,。/w,2/m,、/w,利用/v,ransac/en,算法/n,进行/v,图像/n,特征/n,匹配/vn,：/w,由于/c,从/p,上面/f,步骤/n,1/m,得到/v,的/u,结果/n,只/d,是/v,每张/r,图片/n,自身/r,的/u,特征点/nw,，/w,即/v,两张/mq,图片/n,的/u,特征点/nw,之间/f,还/d,没/d,对应/v,关系/n,。/w,因此/c,我们/r,需要/v,先/d,通过/p,上面/f,得到/v,的/u,128/m,维描/nr,述子/nw,先/d,进行/v,大致/d,的/u,特征点/nw,匹配/vn,（/w,结果/n,可能/v,包括/v,outliers/en,）/w,。/w,匹配/vn,方法/n,不难/d,理解/v,，/w,只/d,需/v,计算/v,两个/m,128维/mq,特征/n,描述子/nw,的/u,距离/n,差/a,，/w,小于/v,某/r,阈值/n,即可/v,视为/v,相同/a,的/u,特征点/nw,。/w,处理/v,后/f,得到/v,下面/f,的/u,结果/n,，/w,黄色点/nw,为/p,匹配/vn,的/u,特征点/nw,，/w,另外/c,再/d,给/p,每/r,对/p,特征点/nw,连/u,线/n,：/w,可以/v,看到/v,连线/v,特别/d,杂乱/a,，/w,说明/v,其中/r,夹杂/v,着/u,很多/m,outliers/en,。/w,因此/c,需要/v,用/p,下面/f,的/u,ransac/en,算法/n,去/v,排除/v,outliers/en,。/w,其实/d,我/r,用/p,的/u,可以/v,说/v,是/v,伪/j,ransac/en,算法/n,_,(/w,:/w,зゝ/nw,∠/w,)/w,_,，/w,简单/a,的/u,说/v,就/d,是/v,：/w,(/w,1/m,)/w,对/p,每/r,一对/mq,关键点/n,p/en,，/w,得到/v,位置/n,间/f,的/u,转移/v,向量/n,v/en,（/w,位置/n,相减/nw,）/w,(/w,2/m,)/w,对/p,其他/r,的/u,每/r,一对/mq,关键点/n,p/en,'/w, ,，/w,计算/v,位置/n,间/f,的/u,转移/v,向量/n,v/en,'/w,。/w,若/c,v/en,与/p,v/en,'/w, ,距离/n,（/w,计算/v,欧拉/nrf,距离/n,即可/v,）/w,小于/v,一定/d,阈值/n,，/w,则/d,认为/v,p/en,'/w, ,与/p,p/en,有/v,相同/a,的/u,特征点/nw,位置/n,转移/v,，/w,即/v,为/p,inlier/en,（/w,看/v,下/f,图/n,应该/v,好/a,理解/v,一点/m,）/w,。/w,(/w,3/m,)/w,计算/v,拥有/v,最/d,多/a,inliers/en,的/u,转移/v,向量/n,v/en,，/w,即/v,可/v,视为/v,两张/mq,图/n,特征点/nw,位置/n,转移/v,向量/n,v/en,。/w,(/w,4/m,)/w,再/d,重新/d,扫描/v,所有/b,的/u,关键点/n,对/p,，/w,属于/v,此/r,特征点/nw,位置/n,转移/v,向量/n,v/en,的/u,关键点/n,对/p,则/d,视为/v,两张/mq,图/n,真正/d,的/u,特征/n,匹配/vn,点/q,。/w,mymatching/en,./w,h/en,：/w,mymatching/en,./w,cpp/en,阶段/n,结果/n,：/w,（/w,可以/v,看到/v,转移/v,向量/n,v/en,基本/a,一致/a,了/u,）/w,3/m,、/w,利用/v,匹配/vn,关键点/n,进行/v,图像/n,拼接/vn,(/w,blending/en,)/w,我/r,使用/v,的/u,图像/n,拼接/vn,方法/n,其实/d,只是/d,最/d,简单/a,的/u,平移/vn,+/w,像素/n,rgb/en,值/n,插值/nw,的/u,方法/n,（/w,好在/d,这次/r,的/u,数据集/nw,图像/n,不/d,存在/v,太/d,大/a,的/u,放缩/nw,，/w,不然/c,就/d,不能/v,用/p,这种/r,方法/n,了/u,_,(/w,:/w,зゝ/nw,∠/w,)/w,_, ,涉及/v,到/v,放缩/nw,的/u,图片/n,暂时/d,还/d,想不到/l,怎么/r,做/v,_,(/w,:/w,зゝ/nw,∠/w,)/w,_,）/w,。/w,可以/v,直观/a,的/u,从/p,下面/f,的/u,图/n,（/w,用/p,ppt/en,拼凑/v,的/u,哈哈/o,）/w,看到/v,，/w,由于/c,输入/v,图像/n,始终/d,保持/v,左图/n,在/p,右图/n,的/u,左侧/f,，/w,即/v,两/m,图/n,并排/d,的/u,时候/n,，/w,右图/n,需要/v,向/p,左/f,移动/vn,：/w,变成/v,：/w,从/p,上面/f,可以/v,看到/v,，/w,右图/n,不仅/c,需要/v,向/p,左/f,平移/vn,，/w,还/d,需要/v,向/p,下/f,//w,上/f,平移/vn,。/w,回想/v,我们/r,第/m,2步/mq,得到/v,的/u,转移/v,向量/n,v/en,(/w,dx/en,,/w, ,dy/en,)/w,，/w,就/d,不难/d,理解/v,转移/v,向量/n,v/en,的/u,作用/n,了/u,：/w,dy/en,</w,0/m,，/w,右图/n,向/p,下/f,平移/vn,；/w,dy/en,>,=/w,0/m,，/w,右图/n,向上/v,平移/vn,。/w,如果/c,右图/n,是/v,向/p,下/f,平移/vn,时/ng,，/w,可以/v,得到/v,如下/v,的/u,模型/n,图/n,，/w,而/c,区域/n,的/u,划分/v,我们/r,可以/v,通过/p,简单/a,的/u,数学/n,关系/n,计算/v,出来/v,。/w,明显/a,，/w,a/en,和/c,b/en,单独/d,的/u,区域/n,可以/v,直接/ad,取/v,原/b,图像素/nw,rgb/en,值/n,；/w,由于/c,两张/mq,图长/nw,宽/a,可能/v,不/d,一致/a,，/w,以及/c,平移/vn,的/u,原因/n,，/w,可能/v,产生/v,黑边/nr,（/w,黑色/n,部分/n,）/w,。/w,最后/f,剩下/v,两/m,图/n,混合/vn,部分/n,a/en,//w,b/en,。/w,如果/c,只是/d,简单/a,的/u,，/w,对/p,混合/vn,区域/n,，/w,两张/mq,图/n,上/f,对应点/nz,像素/n,rgb/en,值/n,各/r,取/v,50%/mq,，/w,则/d,容易/a,造成/v,上面/f,那/r,张/q,图/n,那样/r,，/w,在/p,分界处/nw,有/v,明显/a,的/u,边缘/n,，/w,以及/c,边缘/n,两边/f,匹配/vn,不/d,上/f,。/w,因此/c,我/r,使用/v,了/u,插值/nw,的/u,方法/n,，/w,即/v,：/w,根据/p,混合/vn,区域/n,内/f,点/q,p/en,的/u,与/p,两边/f,边缘/n,的/u,水平/n,距离/n,，/w,按/p,不同/a,比例/n,取/v,两张/mq,图/n,上/f,对应点/nz,像素/n,rgb/en,值/n,组合/v,成/v,点/q,p/en,的/u,rgb/en,值/n,（/w,即/v,越/d,靠近/v,左边/f,边缘/n,的/u,点/q,，/w,取/v,左图/n,对/p,应点/nt,rgb/en,值/n,的/u,占/v,比/p,越/d,大/a,）/w,。/w,这样/r,就/d,可以/v,实现/v,较/d,好/a,的/u,过渡/v,。/w,myblending/en,./w,h/en,：/w,#,ifndef/en, ,myblending/en,_,h/en,#,define/en, ,myblending/en,_,h/en,#,include/en, ,"/w,cimg/en,./w,h/en,"/w,#,include/en, ,</w,iostream/en,>,using/en, ,namespace/en, ,cimg/en,_,library/en,;/w,using/en, ,namespace/en, ,std/en,;/w,struct/en, ,transvector/en, ,{/w,int/en, ,dx/en,;/w,int/en, ,dy/en,;/w,transvector/en,(/w,)/w, ,:/w, ,dx/en,(/w,-/w,1/m,)/w,,/w, ,dy/en,(/w,-/w,1/m,)/w, ,{/w,}/w,transvector/en,(/w,int/en, ,_,dx/en,,/w, ,int/en, ,_,dy/en,)/w, ,:/w, ,dx/en,(/w,_,dx/en,)/w,,/w, ,dy/en,(/w,_,dy/en,)/w, ,{/w,}/w,}/w,;/w,class/en, ,myblending/en,{/w,public/en,:/w,myblending/en,(/w,)/w,;/w,~/w,myblending/en,(/w,)/w,;/w,myblending/en,(/w,int/en, ,sx/en,,/w, ,int/en, ,sy/en,)/w,;/w,void/en, ,blendingmainprocess/en,(/w,char/en,*/w, ,_,filenamea/en,,/w, ,char/en,*/w, ,_,filenameb/en,)/w,;/w,void/en, ,saveblendedimg/en,(/w,char/en,*/w, ,blendedimgaddr/en,)/w,;/w,private/en,:/w,transvector/en, ,matchvec/en,;/w, ,//w,//w,x/en,为/p,合并/v,图/n,上/f,的/u,水平/n,距离/n,，/w,ycimg/en,</w,int/en,>, ,srcimga/en,,/w, ,srcimgb/en,;/w,cimg/en,</w,int/en,>, ,blendedimg/en,;/w,}/w,;/w,#,endifmyblending/en,./w,cpp/en,：/w,#,include/en, ,"/w,myblending/en,./w,h/en,"/w,myblending/en,:/w,:/w,myblending/en,(/w,)/w, ,{/w,}/w,myblending/en,:/w,:/w,~/w,myblending/en,(/w,)/w, ,{/w,}/w,myblending/en,:/w,:/w,myblending/en,(/w,int/en, ,sx/en,,/w, ,int/en, ,sy/en,)/w, ,{/w,matchvec/en,./w,dx/en, ,=/w, ,sx/en,;/w,matchvec/en,./w,dy/en, ,=/w, ,sy/en,;/w,}/w,void/en, ,myblending/en,:/w,:/w,blendingmainprocess/en,(/w,char/en,*/w, ,_,filenamea/en,,/w, ,char/en,*/w, ,_,filenameb/en,)/w, ,{/w,srcimga/en,./w,load/en,_,bmp/en,(/w,_,filenamea/en,)/w,;/w,srcimgb/en,./w,load/en,_,bmp/en,(/w,_,filenameb/en,)/w,;/w,blendedimg/en, ,=/w, ,cimg/en,</w,int/en,>,(/w,srcimga/en,./w,_,width/en, ,+/w, ,srcimgb/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,,/w,srcimga/en,./w,_,height/en, ,+/w, ,abs/en,(/w,matchvec/en,./w,dy/en,)/w,,/w, ,1/m,,/w, ,3/m,,/w, ,0/m,)/w,;/w,cimg/en,_,forxy/en,(/w,blendedimg/en,,/w, ,x/en,,/w, ,y/en,)/w, ,{/w,if/en, ,(/w,matchvec/en,./w,dy/en, ,</w,=/w, ,0/m,)/w, ,{/w, ,//w,//w,右侧/f,图片/n,需要/v,往/p,下/f,左/f,移动/vn,if/en, ,(/w,x/en, ,</w, ,srcimga/en,./w,_,width/en, ,&/w,&/w, ,y/en, ,</w, ,srcimga/en,./w,_,height/en,)/w, ,{/w,if/en, ,(/w,x/en, ,>,=/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w, ,&/w,&/w, ,y/en, ,>,=/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,)/w, ,{/w, ,//w,//w,混合/vn,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,0/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,1/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,2/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,}/w,else/en, ,{/w, ,//w,//w,a/en,独/a,在/p,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w,;/w,}/w,}/w,else/en, ,if/en, ,(/w,x/en, ,>,=/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,&/w,&/w, ,y/en, ,>,=/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w, ,&/w,&/w, ,y/en, ,</w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w, ,+/w, ,srcimgb/en,./w,_,height/en,)/w, ,{/w, ,//w,//w,b/en,独/a,在/p,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,0/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,1/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en, ,-/w, ,(/w,0/m, ,-/w, ,matchvec/en,./w,dy/en,)/w,,/w, ,0/m,,/w, ,2/m,)/w,;/w,}/w,else/en, ,{/w, ,//w,//w,黑色/n,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,0/m,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,0/m,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,0/m,;/w,}/w,}/w,else/en, ,{/w, ,//w,//w,matchvec/en,./w,dy/en, ,>, ,0/m,;/w, ,右侧/f,图片/n,需要/v,往/p,上/f,左/f,移动/vn,if/en, ,(/w,x/en, ,</w, ,srcimga/en,./w,_,width/en, ,&/w,&/w, ,y/en, ,>,=/w, ,matchvec/en,./w,dy/en,)/w, ,{/w,if/en, ,(/w,x/en, ,>,=/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w, ,&/w,&/w, ,y/en, ,</w, ,srcimgb/en,./w,_,height/en,)/w, ,{/w, ,//w,//w,混合/vn,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,0/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,1/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,(/w,float/en,)/w,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,2/m,)/w,*/w, ,(/w,float/en,)/w,(/w,srcimga/en,./w,_,width/en, ,-/w, ,x/en,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,+/w, ,(/w,float/en,)/w,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w,*/w, ,(/w,float/en,)/w,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,)/w, ,//w, ,(/w,float/en,)/w,abs/en,(/w,matchvec/en,./w,dx/en,)/w,;/w,}/w,else/en, ,{/w, ,//w,//w,a/en,独/a,在/p,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,0/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,1/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,srcimga/en,(/w,x/en,,/w, ,y/en, ,-/w, ,matchvec/en,./w,dy/en,,/w, ,0/m,,/w, ,2/m,)/w,;/w,}/w,}/w,else/en, ,if/en, ,(/w,x/en, ,>,=/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w, ,&/w,&/w, ,y/en, ,</w, ,srcimgb/en,./w,_,height/en,)/w, ,{/w, ,//w,//w,b/en,独/a,在/p,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,srcimgb/en,(/w,x/en, ,-/w, ,(/w,srcimga/en,./w,_,width/en, ,-/w, ,matchvec/en,./w,dx/en,)/w,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w,;/w,}/w,else/en, ,{/w, ,//w,//w,黑色/n,部分/n,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,0/m,)/w, ,=/w, ,0/m,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,1/m,)/w, ,=/w, ,0/m,;/w,blendedimg/en,(/w,x/en,,/w, ,y/en,,/w, ,0/m,,/w, ,2/m,)/w, ,=/w, ,0/m,;/w,}/w,}/w,}/w,blendedimg/en,./w,display/en,(/w,"/w,blendedimg/en,"/w,)/w,;/w,}/w,void/en, ,myblending/en,:/w,:/w,saveblendedimg/en,(/w,char/en,*/w, ,blendedimgaddr/en,)/w, ,{/w,blendedimg/en,./w,save/en,(/w,blendedimgaddr/en,)/w,;/w,}/w,阶段/n,结果/n,：/w,4/m,、/w,最后/f,再/d,放/v,上/f,使用/v,上面/f,3个类/mq,的/u,主/n,函数/n,的/u,代码/n,吧/y,：/w,main/en,./w,cpp/en,：/w,#,include/en, ,"/w,stdafx/en,./w,h/en,"/w,#,include/en, ,"/w,mymatching/en,./w,h/en,"/w,#,include/en, ,"/w,myblending/en,./w,h/en,"/w,int/en, ,main/en,(/w,)/w, ,{/w,char/en,*/w, ,inputaddr/en,1/m, ,=/w, ,"/w,input/en,//w,1/m,./w,bmp/en,"/w,;/w,char/en,*/w, ,inputaddr/en,2/m, ,=/w, ,"/w,input/en,//w,2/m,./w,bmp/en,"/w,;/w,mysift/en, ,mysift/en,1/m,(/w,inputaddr/en,1/m,,/w, ,1/m,)/w,;/w,mysift/en,1/m,./w,siftmainprocess/en,(/w,)/w,;/w,mysift/en,1/m,./w,saveimgwithkeypoint/en,(/w,"/w,output/en,//w,1/m,-/w,2/m,//w,1/m,_,kp/en,./w,bmp/en,"/w,)/w,;/w,mysift/en, ,mysift/en,2/m,(/w,inputaddr/en,2/m,,/w, ,1/m,)/w,;/w,mysift/en,2/